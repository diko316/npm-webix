{"version":3,"file":"webix-npm.min.js","sources":["../node_modules/rollup-plugin-node-globals/src/global.js","../src/webix_clean.js","../src/index.js"],"sourcesContent":["export default typeof global !== \"undefined\" ? global :\n            typeof self !== \"undefined\" ? self :\n            typeof window !== \"undefined\" ? window : {}\n","'use strict';\n\n\nvar webix = global.webix;\n/*\n@license\nwebix UI v.4.4.0\nThis software is allowed to use under GPL or you need to obtain Commercial License \n to use it in non-GPL project. Please contact sales@webix.com for details\n*/\nif (!window.webix) \n\twebix={};\n\n//check some rule, show message as error if rule is not correct\nwebix.assert = function(test, message){\n\tif (!test){\n\t\twebix.assert_error(message);\n\t}\n};\n\nwebix.assert_config = function(obj){\n\tvar coll = obj.cells || obj.rows || obj.elements || obj.cols;\n\tif (coll)\n\t\tfor (var i=0; i<coll.length; i++)\n\t\t\tif (coll[i] === null || typeof coll[i] === \"undefined\")\n\t\t\t\twebix.assert_error(\"You have trailing comma or Null element in collection's configuration\");\n};\n\nwebix.assert_error = function(message){\n\t//jshint debug:true\n\twebix.log(\"error\",message);\n\tif (webix.message && typeof message == \"string\")\n\t\twebix.message({ type:\"debug\", text:message, expire:-1 });\n\tif (webix.debug !== false)\n\t\tdebugger;\n};\n\n//entry point for analitic scripts\nwebix.assert_core_ready = function(){\n\tif (window.webix_on_core_ready)\t\n\t\twindow.webix_on_core_ready();\n};\n\nwebix.assert_level = 0;\n\nwebix.assert_level_in = function(){\n\twebix.assert_level++;\n\tif (webix.assert_level == 100)\n\t\twebix.assert_error(\"Attempt to copy object with self reference\");\n};\nwebix.assert_level_out = function(){\n\twebix.assert_level--;\n};\n\n/*\n\tCommon helpers\n*/\nwebix.version=\"4.4.0\";\nwebix.codebase=\"./\";\nwebix.name = \"core\";\nwebix.cdn = \"//cdn.webix.com\";\n\n//coding helpers\nwebix.clone = function(source){\n\tvar f = webix.clone._function;\n\tf.prototype = source;\n\treturn new f();\n};\nwebix.clone._function = function(){};\n\n//copies methods and properties from source to the target\nwebix.extend = function(base, source, force){\n\twebix.assert(base,\"Invalid mixing target\");\n\twebix.assert(source,\"Invalid mixing source\");\n\n\tif (base.$protoWait){\n\t\twebix.PowerArray.insertAt.call(base.$protoWait, source,1);\n\t\treturn base;\n\t}\n\t\n\t//copy methods, overwrite existing ones in case of conflict\n\tfor (var method in source)\n\t\tif ((!(method in base)) || force)\n\t\t\tbase[method] = source[method];\n\t\t\n\t//in case of defaults - preffer top one\n\tif (source.defaults)\n\t\twebix.extend(base.defaults, source.defaults);\n\t\n\t//if source object has init code - call init against target\n\tif (source.$init)\t\n\t\tsource.$init.call(base);\n\t\t\t\t\n\treturn base;\t\n};\n\n//copies methods and properties from source to the target from all levels\nwebix.copy = function(source){\n\twebix.assert(source,\"Invalid mixing target\");\n\twebix.assert_level_in();\n\n\tvar target;\n\tif(arguments.length>1){\n\t\ttarget = arguments[0];\n\t\tsource = arguments[1];\n\t} else \n\t\ttarget = (webix.isArray(source)?[]:{});\n\n\tfor (var method in source){\n\t\tvar from = source[method];\n\t\tif(from && typeof from == \"object\" && !(from instanceof RegExp)){\n\t\t\tif (!webix.isDate(from)){\n\t\t\t\ttarget[method] = (webix.isArray(from)?[]:{});\n\t\t\t\twebix.copy(target[method],from);\n\t\t\t} else\n\t\t\t\ttarget[method] = new Date(from);\n\t\t} else {\n\t\t\ttarget[method] = from;\n\t\t}\n\t}\n\n\twebix.assert_level_out();\n\treturn target;\t\n};\n\nwebix.single = function(source){ \n\tvar instance = null;\n\tvar t = function(config){\n\t\tif (!instance)\n\t\t\tinstance = new source({});\n\t\t\t\n\t\tif (instance._reinit)\n\t\t\tinstance._reinit.apply(instance, arguments);\n\t\treturn instance;\n\t};\n\treturn t;\n};\n\nwebix.protoUI = function(){\n\tif (webix.debug_proto)\n\t\twebix.log(\"UI registered: \"+arguments[0].name);\n\t\t\n\tvar origins = arguments;\n\tvar selfname = origins[0].name;\n\t\n\tvar t = function(data){\n\t\tif (!t)\n\t\t\treturn webix.ui[selfname].prototype;\n\n\t\tvar origins = t.$protoWait;\n\t\tif (origins){\n\t\t\tvar params = [origins[0]];\n\t\t\t\n\t\t\tfor (var i=1; i < origins.length; i++){\n\t\t\t\tparams[i] = origins[i];\n\n\t\t\t\tif (params[i].$protoWait)\n\t\t\t\t\tparams[i] = params[i].call(webix, params[i].name);\n\n\t\t\t\tif (params[i].prototype && params[i].prototype.name)\n\t\t\t\t\twebix.ui[params[i].prototype.name] = params[i];\n\t\t\t}\n\t\t\twebix.ui[selfname] = webix.proto.apply(webix, params);\n\n\t\t\tif (t._webix_type_wait)\t\n\t\t\t\tfor (var i=0; i < t._webix_type_wait.length; i++)\n\t\t\t\t\twebix.type(webix.ui[selfname], t._webix_type_wait[i]);\n\t\t\t\t\n\t\t\tt = origins = null;\t\n\t\t}\n\t\t\t\n\t\tif (this != webix)\n\t\t\treturn new webix.ui[selfname](data);\n\t\telse \n\t\t\treturn webix.ui[selfname];\n\t};\n\tt.$protoWait = Array.prototype.slice.call(arguments, 0);\n\treturn (webix.ui[selfname]=t);\n};\n\nwebix.proto = function(){\n\t \n\tif (webix.debug_proto)\n\t\twebix.log(\"Proto chain:\"+arguments[0].name+\"[\"+arguments.length+\"]\");\n\n\tvar origins = arguments;\n\tvar compilation = origins[0];\n\tvar has_constructor = !!compilation.$init;\n\tvar construct = [];\n\t\n\twebix.assert(compilation,\"Invalid mixing target\");\n\t\t\n\tfor (var i=origins.length-1; i>0; i--) {\n\t\twebix.assert(origins[i],\"Invalid mixing source\");\n\t\tif (typeof origins[i]== \"function\")\n\t\t\torigins[i]=origins[i].prototype;\n\t\tif (origins[i].$init) \n\t\t\tconstruct.push(origins[i].$init);\n\t\tif (origins[i].defaults){ \n\t\t\tvar defaults = origins[i].defaults;\n\t\t\tif (!compilation.defaults)\n\t\t\t\tcompilation.defaults = {};\n\t\t\tfor (var def in defaults)\n\t\t\t\tif (webix.isUndefined(compilation.defaults[def]))\n\t\t\t\t\tcompilation.defaults[def] = defaults[def];\n\t\t}\n\t\tif (origins[i].type && compilation.type){\n\t\t\tfor (var def in origins[i].type)\n\t\t\t\tif (!compilation.type[def])\n\t\t\t\t\tcompilation.type[def] = origins[i].type[def];\n\t\t}\n\t\t\t\n\t\tfor (var key in origins[i]){\n\t\t\tif (!compilation[key] && compilation[key] !== false)\n\t\t\t\tcompilation[key] = origins[i][key];\n\t\t}\n\t}\n\t\n\tif (has_constructor)\n\t\tconstruct.push(compilation.$init);\n\t\n\t\n\tcompilation.$init = function(){\n\t\tfor (var i=0; i<construct.length; i++)\n\t\t\tconstruct[i].apply(this, arguments);\n\t};\n\tif (compilation.$skin)\n\t\tcompilation.$skin();\n\n\tvar result = function(config){\n\t\tthis.$ready=[];\n\t\twebix.assert(this.$init,\"object without init method\");\n\t\tthis.$init(config);\n\t\tif (this._parseSettings)\n\t\t\tthis._parseSettings(config, this.defaults);\n\t\tfor (var i=0; i < this.$ready.length; i++)\n\t\t\tthis.$ready[i].call(this);\n\t};\n\tresult.prototype = compilation;\n\t\n\tcompilation = origins = null;\n\treturn result;\n};\n//creates function with specified \"this\" pointer\nwebix.bind=function(functor, object){ \n\treturn function(){ return functor.apply(object,arguments); };  \n};\n\n//loads module from external js file\nwebix.require=function(module, callback, master){\n\tvar promise = webix.promise.defer();\n\n\tif (callback && callback !== true)\n\t\tpromise = promise.then(function(){ callback.call(master || this); });\n\n\tif (webix.require.disabled){\n\t\tpromise.resolve();\n\t\treturn promise;\n\t}\n\n\t//multiple files required at once\n\tif (typeof module != \"string\"){\n\t\tvar count = module.length||0;\n\t\t\n\t\tif (!count){\n\t\t\t// { file: true, other: true }\n\t\t\tfor (var file in module) count++;\n\t\t\tvar callback2 = function(){\n\t\t\t\tcount--;\n\t\t\t\tif (count === 0)\n\t\t\t\t\tpromise.resolve();\n\t\t\t};\n\t\t\tfor (var file in module)\n\t\t\t\twebix.require(file, callback2, master);\n\t\t} else {\n\t\t\t// [ file, other ]\n\t\t\tvar callback2 = function(){\n\t\t\t\tif (count){\n\t\t\t\t\tcount--;\n\t\t\t\t\twebix.require(module[module.length - count - 1], callback2, master);\n\t\t\t\t} else {\n\t\t\t\t\tpromise.resolve();\n\t\t\t\t}\n\t\t\t};\n\t\t\tcallback2();\n\t\t}\n\t\treturn;\n\t}\n\n\tif (webix._modules[module] !== true){\n\t\tvar fullpath = module;\n\t\tif (!module.toString().match(/^([a-z]+\\:)*\\/\\//i))\n\t\t\tfullpath = webix.codebase + module;\n\n\t\t//css, async, no waiting\n\t\tif (module.substr(module.length-4) == \".css\") {\n\t\t\tvar link = webix.html.create(\"LINK\",{  type:\"text/css\", rel:\"stylesheet\", href:fullpath});\n\t\t\tdocument.getElementsByTagName('head')[0].appendChild(link);\n\t\t\tpromise.resolve();\n\t\t\treturn promise;\n\t\t}\n\n\t\t//js, async, waiting\n\t\tif (callback === true){\n\t\t\t//sync mode\n\t\t\twebix.exec( webix.ajax().sync().get(fullpath).responseText );\n\t\t\twebix._modules[module]=true;\n\n\t\t} else {\n\n\t\t\tif (!webix._modules[module]){\t//first call\n\t\t\t\twebix._modules[module] = [promise];\n\n\t\t\t\twebix.ajax(fullpath, function(text){\n\t\t\t\t\twebix.exec(text);\t//evaluate code\n\t\t\t\t\tvar calls = webix._modules[module];\t//callbacks\n\t\t\t\t\twebix._modules[module] = true;\n\t\t\t\t\tfor (var i=0; i<calls.length; i++)\n\t\t\t\t\t\tcalls[i].resolve();\n\t\t\t\t});\n\t\t\t} else\t//module already loading\n\t\t\t\twebix._modules[module].push(promise);\n\t\t}\n\t} else \n\t\tpromise.resolve();\n\n\treturn promise;\n};\nwebix._modules = {};\t//hash of already loaded modules\n\n//evaluate javascript code in the global scoope\nwebix.exec=function(code){\n\tif (window.execScript)\t//special handling for IE\n\t\twindow.execScript(code);\n\telse window.eval(code);\n};\n\nwebix.wrap = function(code, wrap){\n\tif (!code) return wrap;\n\treturn function(){\n\t\tvar result = code.apply(this, arguments);\n\t\twrap.apply(this,arguments);\n\t\treturn result;\n\t};\n};\n\n//check === undefined\nwebix.isUndefined=function(a){\n\treturn typeof a == \"undefined\";\n};\n//delay call to after-render time\nwebix.delay=function(method, obj, params, delay){\n\treturn window.setTimeout(function(){\n\t\tif(!(obj&&obj.$destructed)){\n\t\t\tvar ret = method.apply(obj,(params||[]));\n\t\t\tmethod = obj = params = null;\n\t\t\treturn ret;\n\t\t}\n\t},delay||1);\n};\n\nwebix.once=function(method){\n\tvar flag = true;\n\treturn function(){\n\t\tif (flag){\n\t\t\tflag = false;\n\t\t\tmethod.apply(this, arguments);\n\t\t}\n\t};\n};\n\n//common helpers\n\n//generates unique ID (unique per window, nog GUID)\nwebix.uid = function(){\n\tif (!this._seed) this._seed=(new Date()).valueOf();\t//init seed with timestemp\n\tthis._seed++;\n\treturn this._seed;\n};\n//resolve ID as html object\nwebix.toNode = function(node){\n\tif (typeof node == \"string\") return document.getElementById(node);\n\treturn node;\n};\n//adds extra methods for the array\nwebix.toArray = function(array){ \n\treturn webix.extend((array||[]),webix.PowerArray, true);\n};\n//resolve function name\nwebix.toFunctor=function(str, scope){ \n\tif (typeof(str)==\"string\"){\n\t\tvar method = str.replace(\"()\",\"\");\n\t\tif (scope && scope[method]) return scope[method];\n\t\treturn window[method] || eval(str);\n\t}\n\treturn str;\n};\n/*checks where an object is instance of Array*/\nwebix.isArray = function(obj) {\n\treturn Array.isArray?Array.isArray(obj):(Object.prototype.toString.call(obj) === '[object Array]');\n};\nwebix.isDate = function(obj){\n\treturn obj instanceof Date;\n};\n// converts an object into a string with respect to dates\nwebix.stringify = function(obj){\n\tvar origin = Date.prototype.toJSON;\n\tDate.prototype.toJSON = function(){\n\t\treturn webix.i18n.parseFormatStr(this);\n\t};\n\n\tvar result;\n\tif (obj instanceof Date)\n\t\tresult = obj.toJSON();\n\telse\n\t\tresult = JSON.stringify(obj);\n\n\tDate.prototype.toJSON = origin;\n\treturn result;\n};\n\n//dom helpers\n\n//hash of attached events\nwebix._events = {};\n//private version of API, do not register ID for event detaching\nwebix._event = function(a,b,c,d){\n\td = d || {};\n\td.inner = true;\n\twebix.event(a,b,c,d);\n};\n//attach event to the DOM element\nwebix.event=function(node,event,handler,context){\n\tcontext = context || {};\n\tnode = webix.toNode(node);\n\twebix.assert(node, \"Invalid node as target for webix.event\");\n\t\n\tvar id = context.id || webix.uid();\n\n\tif(context.bind)\n\t\thandler=webix.bind(handler,context.bind);\n\n\tvar info = [node,event,handler,context.capture];\n\tif (!context.inner)\n\t\twebix._events[id]=info;\t//store event info, for detaching\n\t\t\n\t//use IE's of FF's way of event's attaching\n\tif (node.addEventListener)\n\t\tnode.addEventListener(event, handler, !!context.capture);\n\telse if (node.attachEvent)\n\t\tnode.attachEvent(\"on\"+event, info[2] = function(){\n\t\t\treturn handler.apply(node, arguments);\t//IE8 fix\n\t\t});\n\n\treturn id;\t//return id of newly created event, can be used in eventRemove\n};\n\n//remove previously attached event\nwebix.eventRemove=function(id){\n\t\n\tif (!id) return;\n\twebix.assert(this._events[id],\"Removing non-existing event\");\n\t\t\n\tvar ev = webix._events[id];\n\t//browser specific event removing\n\tif (ev[0].removeEventListener)\n\t\tev[0].removeEventListener(ev[1],ev[2],!!ev[3]);\n\telse if (ev[0].detachEvent)\n\t\tev[0].detachEvent(\"on\"+ev[1],ev[2]);\n\n\t\t\n\tdelete this._events[id];\t//delete all traces\n};\n\n\n//debugger helpers\n//anything starting from error or log will be removed during code compression\n\n//add message in the log\nwebix.log = function(type,message,details){\n\tif (arguments.length == 1){\n\t\tmessage = type;\n\t\ttype = \"log\";\n\t}\n\t/*jsl:ignore*/\n\tif (window.console && window.console.log){\n\t\ttype=type.toLowerCase();\n\t\tif (window.console[type])\n\t\t\twindow.console[type](message||\"unknown error\");\n\t\telse\n\t\t\twindow.console.log(type +\": \"+message);\n\n\t\tif (details) \n\t\t\twindow.console.log(details);\n\t}\t\n\t/*jsl:end*/\n};\n//register rendering time from call point \nwebix.log_full_time = function(name){\n\twebix._start_time_log = new Date();\n\twebix.log(\"Timing start [\"+name+\"]\");\n\twindow.setTimeout(function(){\n\t\tvar time = new Date();\n\t\twebix.log(\"Timing end [\"+name+\"]:\"+(time.valueOf()-webix._start_time_log.valueOf())/1000+\"s\");\n\t},1);\n};\n//register execution time from call point\nwebix.log_time = function(name){\n\tvar fname = \"_start_time_log\"+name;\n\tif (!webix[fname]){\n\t\twebix[fname] = new Date();\n\t\twebix.log(\"Info\",\"Timing start [\"+name+\"]\");\n\t} else {\n\t\tvar time = new Date();\n\t\twebix.log(\"Info\",\"Timing end [\"+name+\"]:\"+(time.valueOf()-webix[fname].valueOf())/1000+\"s\");\n\t\twebix[fname] = null;\n\t}\n};\nwebix.debug_code = function(code){\n\tcode.call(webix);\n};\n//event system\nwebix.EventSystem={\n\t$init:function(){\n\t\tif (!this._evs_events){\n\t\t\tthis._evs_events = {};\t\t//hash of event handlers, name => handler\n\t\t\tthis._evs_handlers = {};\t//hash of event handlers, ID => handler\n\t\t\tthis._evs_map = {};\n\t\t}\n\t},\n\t//temporary block event triggering\n\tblockEvent : function(){\n\t\tthis._evs_events._block = true;\n\t},\n\t//re-enable event triggering\n\tunblockEvent : function(){\n\t\tthis._evs_events._block = false;\n\t},\n\tmapEvent:function(map){\n\t\twebix.extend(this._evs_map, map, true);\n\t},\n\ton_setter:function(config){\n\t\tif(config){\n\t\t\tfor(var i in config){\n\t\t\t\tvar method = webix.toFunctor(config[i], this.$scope);\n\t\t\t\tvar sub = i.indexOf(\"->\");\n\t\t\t\tif (sub !== -1){\n\t\t\t\t\tthis[i.substr(0,sub)].attachEvent(i.substr(sub+2), webix.bind(method, this));\n\t\t\t\t} else\n\t\t\t\t\tthis.attachEvent(i, method);\n\t\t\t}\n\t\t}\n\t},\n\t//trigger event\n\tcallEvent:function(type,params){\n\t\tif (this._evs_events._block) return true;\n\t\t\n\t\ttype = type.toLowerCase();\n\t\tvar event_stack =this._evs_events[type.toLowerCase()];\t//all events for provided name\n\t\tvar return_value = true;\n\n\t\tif (webix.log)\n\t\t\tif ((webix.debug || this.debug) && !webix.debug_blacklist[type])\t//can slowdown a lot\n\t\t\t\twebix.log(\"info\",\"[\"+this.name+\"@\"+((this._settings||{}).id)+\"] event:\"+type,params);\n\t\t\n\t\tif (event_stack)\n\t\t\tfor(var i=0; i<event_stack.length; i++){\n\t\t\t\t/*\n\t\t\t\t\tCall events one by one\n\t\t\t\t\tIf any event return false - result of whole event will be false\n\t\t\t\t\tHandlers which are not returning anything - counted as positive\n\t\t\t\t*/\n\t\t\t\tif (event_stack[i].apply(this,(params||[]))===false) return_value=false;\n\t\t\t}\n\t\tif (this._evs_map[type]){\n\t\t\tvar target = this._evs_map[type];\n\t\t\ttarget.$eventSource = this;\n\t\t\tif (!target.callEvent(type,params))\n\t\t\t\treturn_value =\tfalse;\n\t\t\ttarget.$eventSource = null;\n\t\t}\n\n\t\treturn return_value;\n\t},\n\t//assign handler for some named event\n\tattachEvent:function(type,functor,id){\n\t\twebix.assert(functor, \"Invalid event handler for \"+type);\n\n\t\ttype=type.toLowerCase();\n\t\t\n\t\tid=id||webix.uid(); //ID can be used for detachEvent\n\t\tfunctor = webix.toFunctor(functor, this.$scope);\t//functor can be a name of method\n\n\t\tvar event_stack=this._evs_events[type]||webix.toArray();\n\t\t//save new event handler\n\t\tif (arguments[3])\n\t\t\tevent_stack.unshift(functor);\n\t\telse\n\t\t\tevent_stack.push(functor);\n\t\tthis._evs_events[type]=event_stack;\n\t\tthis._evs_handlers[id]={ f:functor,t:type };\n\t\t\n\t\treturn id;\n\t},\n\t//remove event handler\n\tdetachEvent:function(id){\n\t\tif(!this._evs_handlers[id]){\n\t\t\tvar name = (id+\"\").toLowerCase();\n\t\t\tif (this._evs_events[name]){\n\t\t\t\tthis._evs_events[name] = webix.toArray();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tvar type=this._evs_handlers[id].t;\n\t\tvar functor=this._evs_handlers[id].f;\n\t\t\n\t\t//remove from all collections\n\t\tvar event_stack=this._evs_events[type];\n\t\tevent_stack.remove(functor);\n\t\tdelete this._evs_handlers[id];\n\t},\n\thasEvent:function(type){\n\t\ttype=type.toLowerCase();\n\t\tvar stack = this._evs_events[type];\n\t\tif (stack && stack.length) return true;\n\n\t\tvar parent = this._evs_map[type];\n\t\tif (parent)\n\t\t\treturn parent.hasEvent(type);\n\t\treturn false;\n\t}\n};\n\nwebix.extend(webix, webix.EventSystem, true);\n\n//array helper\n//can be used by webix.toArray()\nwebix.PowerArray={\n\t//remove element at specified position\n\tremoveAt:function(pos,len){\n\t\tif (pos>=0) this.splice(pos,(len||1));\n\t},\n\t//find element in collection and remove it \n\tremove:function(value){\n\t\tthis.removeAt(this.find(value));\n\t},\t\n\t//add element to collection at specific position\n\tinsertAt:function(data,pos){\n\t\tif (!pos && pos!==0)\t//add to the end by default\n\t\t\tthis.push(data);\n\t\telse {\t\n\t\t\tvar b = this.splice(pos,(this.length-pos));\n\t\t\tthis[pos] = data;\n\t\t\tthis.push.apply(this,b); //reconstruct array without loosing this pointer\n\t\t}\n\t},\n\t//return index of element, -1 if it doesn't exists\n\tfind:function(data){ \n\t\tfor (var i=0; i<this.length; i++) \n\t\t\tif (data==this[i]) return i;\n\t\treturn -1; \n\t},\n\t//execute some method for each element of array\n\teach:function(functor,master){\n\t\tfor (var i=0; i < this.length; i++)\n\t\t\tfunctor.call((master||this),this[i]);\n\t},\n\t//create new array from source, by using results of functor \n\tmap:function(functor,master){\n\t\tfor (var i=0; i < this.length; i++)\n\t\t\tthis[i]=functor.call((master||this),this[i]);\n\t\treturn this;\n\t}, \n\tfilter:function(functor, master){\n\t\tfor (var i=0; i < this.length; i++)\n\t\t\tif (!functor.call((master||this),this[i])){\n\t\t\t\tthis.splice(i,1);\n\t\t\t\ti--;\n\t\t\t}\n\t\treturn this;\n\t}\n};\n\nwebix.env = {};\n\n// webix.env.transform \n// webix.env.transition\n(function(){\n\twebix.env.strict = !!window.webix_strict;\n\twebix.env.https = document.location.protocol === \"https:\";\n\n\tvar agent = navigator.userAgent;\n\n\tif (agent.indexOf(\"Mobile\")!=-1 || agent.indexOf(\"Windows Phone\")!=-1)\n\t\twebix.env.mobile = true;\n\tif (webix.env.mobile || agent.indexOf(\"iPad\")!=-1 || agent.indexOf(\"Android\")!=-1)\n\t\twebix.env.touch = true;\n\tif (agent.indexOf('Opera')!=-1)\n\t\twebix.env.isOpera=true;\n\telse{\n\t\t//very rough detection, but it is enough for current goals\n\t\twebix.env.isIE=!!document.all || (agent.indexOf(\"Trident\") !== -1);\n\t\tif (webix.env.isIE){\n\t\t\tvar version = parseFloat(navigator.appVersion.split(\"MSIE\")[1]);\n\t\t\tif (version == 8)\n\t\t\t\twebix.env.isIE8 = true;\n\t\t}\n\t\twebix.env.isEdge=(agent.indexOf(\"Edge\")!=-1);\n\t\twebix.env.isFF=(agent.indexOf(\"Firefox\")!=-1);\n\t\twebix.env.isWebKit=(agent.indexOf(\"KHTML\")!=-1);\n\t\twebix.env.isSafari=webix.env.isWebKit && (agent.indexOf('Mac')!=-1) && (agent.indexOf('Chrome')==-1);\n\n\t\t//maximum height/width for HTML elements in pixels (rough), bigger values will be ignored by browser\n\t\tif(webix.env.isIE || webix.env.isEdge || webix.env.isFF)\n\t\t\twebix.env.maxHTMLElementSize = 10000000;\n\t\tif(webix.env.isSafari)\n\t\t\twebix.env.maxHTMLElementSize = 100000000;\n\t}\n\n\tif(agent.toLowerCase().indexOf(\"android\")!=-1){\n\t\twebix.env.isAndroid = true;\n\t\tif(agent.toLowerCase().indexOf(\"trident\")){\n\t\t\twebix.env.isAndroid = false;\n\t\t\twebix.env.isIEMobile = true;\n\t\t}\n\t}\n\n\twebix.env.transform = false;\n\twebix.env.transition = false;\n\n\tvar found_index = -1;\n\tvar js_list =  ['', 'webkit', 'Moz', 'O', 'ms'];\n\tvar css_list = ['', '-webkit-', '-Moz-', '-o-', '-ms-'];\n\n\t\n\tvar d = document.createElement(\"DIV\");\n\tfor (var j=0; j < js_list.length; j++) {\n\t\tvar name = js_list[j] ? (js_list[j]+\"Transform\") : \"transform\";\n\t\tif(typeof d.style[name] != 'undefined'){\n\t\t\tfound_index = j;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\n\tif (found_index > -1){\n\t\twebix.env.cssPrefix = css_list[found_index];\n\t\tvar jp = webix.env.jsPrefix = js_list[found_index];\n\n\t\twebix.env.transform = jp ? jp+\"Transform\" : \"transform\";\n\t\twebix.env.transition = jp ? jp+\"Transition\" : \"transition\";\n\t\twebix.env.transitionDuration = jp ? jp+\"TransitionDuration\" : \"transitionDuration\";\n\n\t\td.style[webix.env.transform] = \"translate3d(0,0,0)\";\n\t\twebix.env.translate = (d.style[webix.env.transform])?\"translate3d\":\"translate\";\n\t\twebix.env.transitionEnd = ((webix.env.cssPrefix == '-Moz-')?\"transitionend\":(jp ? jp+\"TransitionEnd\" : \"transitionend\"));\n\t}\n\n\twebix.env.pointerevents = (!webix.env.isIE ||(new RegExp(\"Trident/.*rv:11\")).exec(agent) !== null);\n})();\n\n\nwebix.env.svg = (function(){\n\treturn document.implementation.hasFeature(\"http://www.w3.org/TR/SVG11/feature#BasicStructure\", \"1.1\");\n})();\n\nwebix.env.svganimation = (function(){\n\treturn document.implementation.hasFeature(\"https://www.w3.org/TR/SVG11/feature#SVG-animation\", \"1.1\");\n})();\n\n\n//html helpers\nwebix.html={\n\t_native_on_selectstart:0,\n\t_style_element:{},\n\tdenySelect:function(){\n\t\tif (!webix._native_on_selectstart)\n\t\t\twebix._native_on_selectstart = document.onselectstart;\n\t\tdocument.onselectstart = webix.html.stopEvent;\n\t},\n\tallowSelect:function(){\n\t\tif (webix._native_on_selectstart !== 0){\n\t\t\tdocument.onselectstart = webix._native_on_selectstart||null;\n\t\t}\n\t\twebix._native_on_selectstart = 0;\n\n\t},\n\tindex:function(node){\n\t\tvar k=0;\n\t\t//must be =, it is not a comparation!\n\t\twhile ((node = node.previousSibling)) k++;\n\t\treturn k;\n\t},\n\t_style_cache:{},\n\tcreateCss:function(rule, sufix){\n\t\tvar text = \"\";\n\t\t\tsufix = sufix || \"\";\n\n\t\tfor (var key in rule)\n\t\t\ttext+= key+\":\"+rule[key]+\";\";\n\t\t\n\t\tvar name = this._style_cache[text+sufix];\n\t\tif (!name){\n\t\t\tname = \"s\"+webix.uid();\n\t\t\tthis.addStyle(\".\"+name+(sufix||\"\")+\"{\"+text+\"}\");\n\t\t\tthis._style_cache[text+sufix] = name;\n\t\t}\n\t\treturn name;\n\t},\n\taddStyle:function(rule, group){\n\t\tvar style = group ? this._style_element[group] :this._style_element[\"default\"];\n\t\tif(!style){\n\t\t\tstyle = document.createElement(\"style\");\n\t\t\tstyle.setAttribute(\"type\", \"text/css\");\n\t\t\tstyle.setAttribute(\"media\", \"screen,print\");\n\t\t\tdocument.getElementsByTagName(\"head\")[0].appendChild(style);\n\n\t\t\tif (group)\n\t\t\t\tthis._style_element[group] = style;\n\t\t\telse\n\t\t\t\tthis._style_element[\"default\"] = style;\n\t\t}\n\t\t/*IE8*/\n\t\tif (style.styleSheet)\n\t\t\tstyle.styleSheet.cssText += rule;\n\t\telse\n\t\t\tstyle.appendChild(document.createTextNode(rule));\n\t},\n\tremoveStyle:function(group){\n\t\tvar box = this._style_element[group||\"default\"];\n\t\tif (box)\n\t\t\tbox.innerHTML = \"\";\n\t},\n\tcreate:function(name,attrs,html){\n\t\tattrs = attrs || {};\n\t\tvar node = document.createElement(name);\n\t\tfor (var attr_name in attrs)\n\t\t\tnode.setAttribute(attr_name, attrs[attr_name]);\n\t\tif (attrs.style)\n\t\t\tnode.style.cssText = attrs.style;\n\t\tif (attrs[\"class\"])\n\t\t\tnode.className = attrs[\"class\"];\n\t\tif (html)\n\t\t\tnode.innerHTML=html;\n\t\treturn node;\n\t},\n\t//return node value, different logic for different html elements\n\tgetValue:function(node){\n\t\tnode = webix.toNode(node);\n\t\tif (!node) return \"\";\n\t\treturn webix.isUndefined(node.value)?node.innerHTML:node.value;\n\t},\n\t//remove html node, can process an array of nodes at once\n\tremove:function(node){\n\t\tif (node instanceof Array)\n\t\t\tfor (var i=0; i < node.length; i++)\n\t\t\t\tthis.remove(node[i]);\n\t\telse if (node && node.parentNode)\n\t\t\tnode.parentNode.removeChild(node);\n\t},\n\t//insert new node before sibling, or at the end if sibling doesn't exist\n\tinsertBefore: function(node,before,rescue){\n\t\tif (!node) return;\n\t\tif (before && before.parentNode)\n\t\t\tbefore.parentNode.insertBefore(node, before);\n\t\telse\n\t\t\trescue.appendChild(node);\n\t},\n\t//return custom ID from html element \n\t//will check all parents starting from event's target\n\tlocate:function(e,id){\n\t\tvar trg;\n\t\tif (e.tagName)\n\t\t\ttrg = e;\n\t\telse {\n\t\t\te=e||event;\n\t\t\ttrg=e.target||e.srcElement;\n\t\t}\n\t\t\n\t\twhile (trg){\n\t\t\tif (trg.getAttribute){\t//text nodes has not getAttribute\n\t\t\t\tvar test = trg.getAttribute(id);\n\t\t\t\tif (test) return test;\n\t\t\t}\n\t\t\ttrg=trg.parentNode;\n\t\t}\t\n\t\treturn null;\n\t},\n\t//returns position of html element on the page\n\toffset:function(elem) {\n\t\tif (elem.getBoundingClientRect) { //HTML5 method\n\t\t\tvar box = elem.getBoundingClientRect();\n\t\t\tvar body = document.body;\n\t\t\tvar docElem = document.documentElement;\n\t\t\tvar scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;\n\t\t\tvar scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\n\t\t\tvar clientTop = docElem.clientTop || body.clientTop || 0;\n\t\t\tvar clientLeft = docElem.clientLeft || body.clientLeft || 0;\n\t\t\tvar top  = box.top +  scrollTop - clientTop;\n\t\t\tvar left = box.left + scrollLeft - clientLeft;\n\t\t\treturn { y: Math.round(top), x: Math.round(left), width:elem.offsetWidth, height:elem.offsetHeight };\n\t\t} else { //fallback to naive approach\n\t\t\tvar top=0, left=0;\n\t\t\twhile(elem) {\n\t\t\t\ttop = top + parseInt(elem.offsetTop,10);\n\t\t\t\tleft = left + parseInt(elem.offsetLeft,10);\n\t\t\t\telem = elem.offsetParent;\n\t\t\t}\n\t\t\treturn { y: top, x: left, width:elem.offsetHeight, height:elem.offsetWidth };\n\t\t}\n\t},\n\t//returns relative position of event\n\tposRelative:function(ev){\n\t\tev = ev || event;\n\t\tif (!webix.isUndefined(ev.offsetX))\n\t\t\treturn { x:ev.offsetX, y:ev.offsetY };\t//ie, webkit\n\t\telse\n\t\t\treturn { x:ev.layerX, y:ev.layerY };\t//firefox\n\t},\n\t//returns position of event\n\tpos:function(ev){\n\t\tev = ev || event;\n\t\tif (ev.touches && ev.touches[0])\n\t\t\tev = ev.touches[0];\n\n\t\tif(ev.pageX || ev.pageY)\t//FF, KHTML\n\t\t\treturn {x:ev.pageX, y:ev.pageY};\n\t\t//IE\n\t\tvar d  =  ((webix.env.isIE)&&(document.compatMode != \"BackCompat\"))?document.documentElement:document.body;\n\t\treturn {\n\t\t\tx:ev.clientX + d.scrollLeft - d.clientLeft,\n\t\t\ty:ev.clientY + d.scrollTop  - d.clientTop\n\t\t};\n\t},\n\t//prevent event action\n\tpreventEvent:function(e){\n\t\tif(e && e.preventDefault) e.preventDefault();\n\t\tif(e) e.returnValue = false;\n\t\treturn webix.html.stopEvent(e);\n\t},\n\t//stop event bubbling\n\tstopEvent:function(e){\n\t\te = (e||event);\n\t\tif(e.stopPropagation) e.stopPropagation();\n\t\te.cancelBubble=true;\n\t\treturn false;\n\t},\n\ttriggerEvent:function(node, type, name){\n\t\tif(document.createEventObject){\n\t\t\tvar ev = document.createEventObject();\n\t\t\tif (node.fireEvent)\n\t\t\t\tnode.fireEvent(\"on\"+name, ev);\n\t\t} else{\n\t\t\tvar ev = document.createEvent(type);\n\t\t\tev.initEvent(name, true, true);\n\t\t\tif (node.dispatchEvent)\n\t\t\t\tnode.dispatchEvent(ev);\n\t\t}\n\t},\n\t//add css class to the node\n\taddCss:function(node,name,check){\n\t\tif (!check || node.className.indexOf(name) === -1)\n\t\t\tnode.className+=\" \"+name;\n\t},\n\t//remove css class from the node\n\tremoveCss:function(node,name){\n\t\tnode.className=node.className.replace(RegExp(\" \"+name,\"g\"),\"\");\n\t},\n\tgetTextSize:function(text, css, width){\n\t\tvar d = webix.html.create(\"DIV\",{\"class\":\"webix_view webix_measure_size \"+(css||\"\")},\"\");\n\t\td.style.cssText = \"height:auto;visibility:hidden; position:absolute; top:0px; left:0px; overflow:hidden;\"+(width?(\"width:\"+width+\"px;\"):\"width:auto;white-space:nowrap;\");\n\t\tdocument.body.appendChild(d);\n\n\t\tvar all = (typeof text !==  \"object\") ? [text] : text;\n\t\tvar width = 0;\n\t\tvar height = 0;\n\n\t\tfor (var i = 0; i < all.length; i++) {\n\t\t\td.innerHTML = all[i];\n\t\t\twidth = Math.max(width, d.offsetWidth);\n\t\t\theight = Math.max(height, d.offsetHeight);\n\t\t}\n\t\t\n\t\twebix.html.remove(d);\n\t\treturn { width:width, height:height };\n\t},\n\tdownload:function(data, filename){\n\t\tvar objUrl = false;\n\n\t\tif(typeof data ==\"object\"){//blob\n\t\t\tif(window.navigator.msSaveBlob)\n\t\t\t\treturn window.navigator.msSaveBlob(data, filename);\n\t\t\telse {\n\t\t\t\tdata = window.URL.createObjectURL(data);\n\t\t\t\tobjUrl = true;\n\t\t\t}\n\t\t}\n\t\t//data url or blob url\n\t\tvar link = document.createElement(\"a\");\n\t\tlink.href = data;\n\t\tlink.download = filename;\n\t\tdocument.body.appendChild(link);\n\t\tlink.click(); \n\n\t\twebix.delay(function(){\n\t\t\tif(objUrl) window.URL.revokeObjectURL(data);\n\t\t\tdocument.body.removeChild(link);\n\t\t\tlink.remove();\n\t\t});\n\t},\n\t_getClassName: function(node){\n\t\tif(!node) return \"\";\n\n\t\tvar className = node.className || \"\";\n\t\tif(className.baseVal)//'className' exist but not a string - IE svg element in DOM\n\t\t\tclassName = className.baseVal;\n\n\t\tif(!className.indexOf)\n\t\t\tclassName = \"\";\n\n\t\treturn className;\n\t},\n\tsetSelectionRange:function(node, start, end){\n\t\tstart = start || 0;\n\t\tend  = end || start;\n\n\t\tnode.focus();\n\t\tif(node.setSelectionRange)\n\t\t\tnode.setSelectionRange(start, end);\n\t\telse{\n\t\t\t//ie8\n\t\t\tvar textRange = node.createTextRange();\n\t\t\ttextRange.collapse(true);\n\t\t\ttextRange.moveEnd('character', end);\n\t\t\ttextRange.moveStart('character', start);\n\t\t\ttextRange.select();\n\t\t}\n\t},\n\tgetSelectionRange:function(node){\n\t\tif(\"selectionStart\" in node)\n\t\t\treturn {start:node.selectionStart || 0, end:node.selectionEnd || 0};\n\t\telse{\n\t\t\t//ie8\n\t\t\tnode.focus();\n\t\t\tvar selection = document.selection.createRange();\n\t\t\tvar bookmark = selection.getBookmark();\n\t\t\tvar textRange = node.createTextRange();\n \n\t\t\ttextRange.moveToBookmark(bookmark);\n\t\t\tvar length = textRange.text.length;\n\t\t\t\n\t\t\ttextRange.collapse(true);\n\t\t\ttextRange.moveStart('character', -node.value.length);\n  \n\t\t\tvar start = textRange.text.length;\n\t\t\treturn {start:start, end: start + length};\n\t\t}\n\t}\n};\n\nwebix.ready = function(code){\n\tif (this._ready) code.call();\n\telse this._ready_code.push(code);\n};\nwebix.debug_ready = webix.ready; //same command but will work only in dev. build\nwebix._ready_code = [];\n\n//autodetect codebase folder\n(function(){\n\tvar temp = document.getElementsByTagName(\"SCRIPT\");\t//current script, most probably\n\twebix.assert(temp.length,\"Can't locate codebase\");\n\tif (temp.length){\n\t\t//full path to script\n\t\ttemp = (temp[temp.length-1].getAttribute(\"src\")||\"\").split(\"/\");\n\t\t//get folder name\n\t\ttemp.splice(temp.length-1, 1);\n\t\twebix.codebase = temp.slice(0, temp.length).join(\"/\")+\"/\";\n\t}\n\n\tvar ready = function(){\n\t\tif(webix.env.isIE)\n\t\t\tdocument.body.className += \" webix_ie\";\n\t\twebix.callEvent(\"onReady\",[]);\n\t};\n\n\tvar doit = function(){\n\t\twebix._ready = true;\n\n\t\t//global plugins\n\t\tif (window.webix_ready && webix.isArray(webix_ready))\n\t\t\twebix._ready_code = webix_ready.concat(webix._ready_code);\n\n\t\tfor (var i=0; i < webix._ready_code.length; i++)\n\t\t\twebix._ready_code[i].call();\n\t\twebix._ready_code=[];\n\t};\n\n\twebix.attachEvent(\"onReady\", function(force){\n\t\tif (force) \n\t\t\tdoit();\n\t\telse \n\t\t\twebix.delay(doit);\n\t});\n\n\tif (document.readyState == \"complete\") ready();\n\telse webix.event(window, \"load\", ready);\n\t\n})();\n\nwebix.locale=webix.locale||{};\n\n\nwebix.assert_core_ready();\n\n\nwebix.ready(function(){\n\twebix.event(document.body,\"click\", function(e){\n\t\twebix.callEvent(\"onClick\",[e||event]);\n\t});\n});\nwebix.editStop = function(){\n\twebix.callEvent(\"onEditEnd\", []);\n};\n\n\nwebix.debug_blacklist={\n\tonmousemoving:1\n};\n\n/**\n\nBazed on Promiz - A fast Promises/A+ library \nhttps://github.com/Zolmeister/promiz\n\nThe MIT License (MIT)\n\nCopyright (c) 2014 Zolmeister\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of\nthis software and associated documentation files (the \"Software\"), to deal in\nthe Software without restriction, including without limitation the rights to\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\nthe Software, and to permit persons to whom the Software is furnished to do so,\nsubject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\nFOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\nCOPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\nIN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\nCONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n*/\n\n/* jshint ignore:start */\n(function (self) {\n  var now = typeof setImmediate !== 'undefined' ? setImmediate : function(cb) {\n    setTimeout(cb, 0)\n  }\n  \n  /**\n   * @constructor\n   */\n  function promise(fn, er) {\n    var self = this\n\n    self.promise = self\n    self.state = 'pending'\n    self.val = null\n    self.fn = fn || null\n    self.er = er || null\n    self.next = [];\n  }\n\n  promise.prototype.resolve = function (v) {\n    var self = this\n    if (self.state === 'pending') {\n      self.val = v\n      self.state = 'resolving'\n\n      now(function () {\n        self.fire()\n      })\n    }\n  }\n\n  promise.prototype.reject = function (v) {\n    var self = this\n    if (self.state === 'pending') {\n      self.val = v\n      self.state = 'rejecting'\n\n      now(function () {\n        self.fire()\n      })\n    }\n  }\n\n  promise.prototype.then = function (fn, er) {\n    var self = this\n    var p = new promise(fn, er)\n    self.next.push(p)\n    if (self.state === 'resolved') {\n      p.resolve(self.val)\n    }\n    if (self.state === 'rejected') {\n      p.reject(self.val)\n    }\n    return p\n  }\n  promise.prototype.fail = function (er) {\n    return this.then(null, er)\n  }\n  promise.prototype.finish = function (type) {\n    var self = this\n    self.state = type\n\n    if (self.state === 'resolved') {\n      for (var i = 0; i < self.next.length; i++)\n        self.next[i].resolve(self.val);\n    }\n\n    if (self.state === 'rejected') {\n      for (var i = 0; i < self.next.length; i++)\n        self.next[i].reject(self.val);\n\n      if (webix.assert && !self.next.length)\n        throw(self.val);\n    }\n  }\n\n  // ref : reference to 'then' function\n  // cb, ec, cn : successCallback, failureCallback, notThennableCallback\n  promise.prototype.thennable = function (ref, cb, ec, cn, val) {\n    var self = this\n    val = val || self.val\n    if (typeof val === 'object' && typeof ref === 'function') {\n      try {\n        // cnt protects against abuse calls from spec checker\n        var cnt = 0\n        ref.call(val, function(v) {\n          if (cnt++ !== 0) return\n          cb(v)\n        }, function (v) {\n          if (cnt++ !== 0) return\n          ec(v)\n        })\n      } catch (e) {\n        ec(e)\n      }\n    } else {\n      cn(val)\n    }\n  }\n\n  promise.prototype.fire = function () {\n    var self = this\n    // check if it's a thenable\n    var ref;\n    try {\n      ref = self.val && self.val.then\n    } catch (e) {\n      self.val = e\n      self.state = 'rejecting'\n      return self.fire()\n    }\n\n    self.thennable(ref, function (v) {\n      self.val = v\n      self.state = 'resolving'\n      self.fire()\n    }, function (v) {\n      self.val = v\n      self.state = 'rejecting'\n      self.fire()\n    }, function (v) {\n      self.val = v\n      \n      if (self.state === 'resolving' && typeof self.fn === 'function') {\n        try {\n          self.val = self.fn.call(undefined, self.val)\n        } catch (e) {\n          self.val = e\n          return self.finish('rejected')\n        }\n      }\n\n      if (self.state === 'rejecting' && typeof self.er === 'function') {\n        try {\n          self.val = self.er.call(undefined, self.val)\n          self.state = 'resolving'\n        } catch (e) {\n          self.val = e\n          return self.finish('rejected')\n        }\n      }\n\n      if (self.val === self) {\n        self.val = TypeError()\n        return self.finish('rejected')\n      }\n\n      self.thennable(ref, function (v) {\n        self.val = v\n        self.finish('resolved')\n      }, function (v) {\n        self.val = v\n        self.finish('rejected')\n      }, function (v) {\n        self.val = v\n        self.state === 'resolving' ? self.finish('resolved') : self.finish('rejected')\n      })\n\n    })\n  }\n\n  promise.prototype.done = function () {\n    if (this.state = 'rejected' && !this.next) {\n      throw this.val\n    }\n    return null\n  }\n\n  promise.prototype.nodeify = function (cb) {\n    if (typeof cb === 'function') return this.then(function (val) {\n        try {\n          cb(null, val)\n        } catch (e) {\n          setImmediate(function () {\n            throw e\n          })\n        }\n\n        return val\n      }, function (val) {\n        try {\n          cb(val)\n        } catch (e) {\n          setImmediate(function () {\n            throw e\n          })\n        }\n\n        return val\n      })\n\n    return this\n  }\n\n  promise.prototype.spread = function (fn, er) {\n    return this.all().then(function (list) {\n      return typeof fn === 'function' && fn.apply(null, list)\n    }, er)\n  }\n  \n  promise.prototype.all = function() {\n    var self = this\n    return this.then(function(list){\n      var p = new promise()\n      if(!(list instanceof Array)) {\n        p.reject(TypeError)\n        return p\n      }\n      \n      var cnt = 0\n      var target = list.length\n      \n      function done() {\n        if (++cnt === target) p.resolve(list)\n      }\n      \n      for(var i=0, l=list.length; i<l; i++) {\n        var value = list[i]\n        var ref;\n        \n        try {\n          ref = value && value.then\n        } catch (e) {\n          p.reject(e)\n          break\n        }\n        \n        (function(i){\n          self.thennable(ref, function(val){\n            list[i] = val\n            done()\n          }, function(val){\n            p.reject(val);\n          }, function(){\n            done()\n          }, value)\n        })(i)\n      }\n\n      return p\n    })\n  }\n\n  // self object gets globalalized/exported\n  var promiz = {\n\n    all:function(list){\n      var p = new promise(null, null);\n      p.resolve(list);\n      return p.all();\n    },\n    // promise factory\n    defer: function () {\n      return new promise(null, null)\n    },\n\n    reject:function(v){\n      var t = this.defer();\n      t.state = \"rejected\";\n      t.val = v;\n      return t;\n    },\n\n    resolve:function(v){\n      var t = this.defer();\n      t.state = \"resolved\";\n      t.val = v;\n      return t;\n    },\n\n    // calls a function and resolved as a promise\n    fcall: function() {\n      var def = new promise()\n      var args = Array.apply([], arguments)\n      var fn = args.shift()\n      try {\n        var val = fn.apply(null, args)\n        def.resolve(val)\n      } catch(e) {\n        def.reject(e)\n      }\n\n      return def\n    },\n\n    // calls a node-style function (eg. expects callback as function(err, callback))\n    nfcall: function() {\n      var def = new promise()\n      var args = Array.apply([], arguments)\n      var fn = args.shift()\n      try {\n\n        // Add our custom promise callback to the end of the arguments\n        args.push(function(err, val){\n          if(err) {\n            return def.reject(err)\n          }\n          return def.resolve(val)\n        })\n        fn.apply(null, args)\n      } catch (e) {\n        def.reject(e)\n      }\n\n      return def\n    }\n  }\n  \n  self.promise = promiz\n})(webix);\n/* jshint ignore:end */\n\n(function(){\n\nvar error_key = \"__webix_remote_error\";\n\nfunction RemoteContext(url, config){\n\tthis._proxy = {};\n\tthis._queue = [];\n\tthis._url = url;\n\tthis._key = \"\";\n\n\tif (config)\n\t\tthis._process(config);\n\telse\n\t\tthis._ready = webix.ajax(url)\n\t\t\t.then(function(data){\n\t\t\t\treturn data.text();\n\t\t\t})\n\t\t\t.then(webix.bind(function(text){\n\t\t\t\ttext = text.split(\"/*api*/\")[1];\n\t\t\t\tthis._process(JSON.parse(text));\n\t\t\t\treturn this._proxy;\n\t\t\t}, this));\n}\nRemoteContext.prototype = {\n\t_process:function(config){\n\t\tif (config.$key)\n\t\t\tthis._key = config.$key;\n\t\tif (config.$vars)\n\t\t\tfor (var key in config.$vars)\n\t\t\t\tthis._proxy[key] = config.$vars[key];\n\n\t\tthis._parse(config, this._proxy, \"\");\n\t},\n\t_parse:function(api, obj, prefix){\n\t\tfor (var key in api){\n\t\t\tif (key === \"$key\" || key === \"$vars\") continue;\n\t\t\tvar val = api[key];\n\t\t\tif (typeof val == \"object\"){\n\t\t\t\tvar sub = obj[key] = {};\n\t\t\t\tthis._parse(val, sub, prefix+key+\".\");\n\t\t\t} else\n\t\t\t\tobj[key] = this._proxy_call(this, prefix+key);\n\t\t}\n\t},\n\t_call:function(name, args){\n\t\tvar def = this._deffer(this, name, args);\n\t\tthis._queue.push(def);\n\t\tthis._start_queue();\n\t\treturn def;\n\t},\n\t_start_queue:function(){\n\t\tif (!this._timer)\n\t\t\tthis._timer = setTimeout(webix.bind(this._run_queue, this), 1);\n\t},\n\t_run_queue:function(){\n\t\tvar data = [], defs = this._queue;\n\t\tfor (var i=0; i<this._queue.length; i++){\n\t\t\tvar def = this._queue[i];\n\t\t\tif (def.$sync){\n\t\t\t\tdefs.splice(i,1); i--;\n\t\t\t} else\n\t\t\t\tdata.push({ name: def.$name, args: def.$args });\t\n\t\t}\n\n\t\tif (defs.length){\n\t\t\tvar ajax = webix.ajax();\n\t\t\tvar pack = this._pack(data);\n\t\t\twebix.callEvent(\"onBeforeRemoteCall\", [ajax, pack, {}]);\n\t\t\tvar promise = ajax.post(this._url, pack)\n\t\t\t\t.then(function(res){\n\t\t\t\t\tvar data = res.json();\n\t\t\t\t\tvar results = data.data;\n\t\t\t\t\tfor (var i=0; i<results.length; i++){\n\t\t\t\t\t\tvar res = results[i];\n\t\t\t\t\t\tvar error = results[i] && results[i][error_key];\n\t\t\t\t\t\tif (error){\n\t\t\t\t\t\t\twebix.callEvent(\"onRemoteError\", [error]);\n\t\t\t\t\t\t\tdefs[i].reject(error);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdefs[i].resolve(res);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\t\t\n\t\t\t\t}, function(res){\n\t\t\t\t\tfor (var i=0; i<defs.length; i++)\n\t\t\t\t\t\tdefs[i].reject(res);\n\t\t\t\t\tthrow res;\n\t\t\t\t});\n\t\t\twebix.callEvent(\"onAfterRemoteCall\", [promise]);\n\t\t}\n\n\t\tthis._queue = [];\n\t\tthis._timer = null;\n\t},\n\t_sync:function(){\n\t\tvar value = null;\n\t\tthis.$sync = true;\n\t\tvar data = [{ name: this.$name, args: this.$args }];\n\n\t\ttry {\n\t\t\tvar ajax = webix.ajax();\n\t\t\tvar pack = this.$context._pack(data);\n\t\t\twebix.callEvent(\"onBeforeRemoteCall\", [ajax, pack, { sync: true }]);\n\t\t\tvar xhr = ajax.sync().post(this.$context._url, pack);\n\t\t\twebix.callEvent(\"onAfterRemoteCall\", [null]);\n\t\t\tvar value = JSON.parse(xhr.responseText).data[0];\n\t\t\tif (value[error_key])\n\t\t\t\tvalue = null;\n\t\t} catch(e){}\n\n\t\treturn value;\n\t},\n\t_deffer:function(master, name, args){\n\t\tvar pr = webix.promise.defer();\n\t\tpr.sync = master._sync;\n\t\tpr.$name = name;\n\t\tpr.$args = args;\n\t\tpr.$context = this;\n\n\t\treturn pr;\n\t},\n\t_proxy_call:function(master, name){\n\t\treturn function(){\n\t\t\treturn master._call(name, [].slice.call(arguments));\n\t\t};\n\t},\n\t_getProxy:function(){\n\t\treturn this._ready || this._proxy;\n\t},\n\t_pack:function(obj){\n\t\treturn {\n\t\t\tkey: this._key,\n\t\t\tpayload:obj\n\t\t};\n\t}\n};\n\nfunction getApi(url, config){\n\tvar ctx = new RemoteContext(url, config);\n\treturn ctx._getProxy();\n}\n\nwebix.remote = function(url, config){\n\tif (typeof url === \"object\"){\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tconfig = url;\n\t\turl = scripts[scripts.length - 1].src;\n\t\twebix.remote = getApi(url, config);\n\t} else \n\t\treturn getApi(url, config);\n};\n\n\n})();\n\n/*\n\tUI:DataView\n*/\n\n\nwebix.skin={};\n\nwebix.skin.air = {\n\ttopLayout:\"wide\",\n\t//bar in accordion\n\tbarHeight:34,\t\t\t//!!!Set the same in skin.less!!!\n\ttabbarHeight: 36,\n\trowHeight:34,\n\ttoolbarHeight:22,\n\tlistItemHeight:28,\t\t//list, grouplist, dataview, etc.\n\tinputHeight:34,\n\tinputPadding: 2,\n\tmenuHeight: 34,\n\tmenuMargin:0,\n\tlabelTopHeight: 16,\n\n\tinputSpacing: 4,\n\tborderWidth: 1,\n\n\tsliderHandleWidth: 16,\n\tsliderPadding: 10,\n\tsliderBorder: 1,\n\n\t//margin - distance between cells\n\tlayoutMargin:{ space:10, wide:4, clean:0, head:4, line:-1, toolbar:4, form:8  },\n\t//padding - distance insede cell between cell border and cell content\n\tlayoutPadding:{ space:10, wide:0, clean:0, head:0, line:0, toolbar:4, form:8  },\n\t//space between tabs in tabbar\n\ttabMargin:0,\n\n\tpopupPadding: 8,\n\n\tcalendarHeight: 70,\n\tpadding:0,\n\n\toptionHeight: 27\n};\nwebix.skin[\"aircompact\"] = {\n\ttopLayout:\"wide\",\n\t//bar in accordion\n\tbarHeight:24,\t\t\t//!!!Set the same in skin.less!!!\n\ttabbarHeight: 26,\n\trowHeight:26,\n\ttoolbarHeight:22,\n\tlistItemHeight:28,\t\t//list, grouplist, dataview, etc. \n\tinputHeight:29,\n\tinputPadding: 2,\n\tmenuHeight: 25,\n\tmenuMargin:0,\n\tlabelTopHeight: 16,\n\n\tinputSpacing: 4,\n\tborderWidth: 1,\n\n\tsliderHandleWidth: 16,\n\tsliderPadding: 10,\n\tsliderBorder: 1,\n\n\t//margin - distance between cells\n\tlayoutMargin:{ space:10, wide:4, clean:0, head:4, line:-1, toolbar:4, form:8  },\n\t//padding - distance insede cell between cell border and cell content\n\tlayoutPadding:{ space:10, wide:0, clean:0, head:0, line:0, toolbar:4, form:8  },\n\t//space between tabs in tabbar\n\ttabMargin:0,\n\n\tpopupPadding: 8,\n\n\tcalendarHeight: 70,\n\tpadding:0,\n\n\toptionHeight: 23\n};\n\nwebix.skin.web = {\n\tname:\"web\",\n\ttopLayout:\"space\",\n\t//bar in accordion\n\tbarHeight:28,\t\t\t//!!!Set the same in skin.less!!!\n\ttabbarHeight: 30,\n\trowHeight:30,\n\ttoolbarHeight:22,\n\tlistItemHeight:28,\t\t//list, grouplist, dataview, etc. \n\tinputHeight:28,\n\tinputPadding: 2,\n\tmenuMargin: 0,\n\tmenuHeight: 27,\n\tlabelTopHeight: 16,\n\t//accordionMargin: 9,\n\n\tinputSpacing: 4,\n\tborderWidth: 1,\n\n\tsliderHandleWidth: 16,\n\tsliderPadding: 10,\n\tsliderBorder: 1,\n\n\t//margin - distance between cells\n\tlayoutMargin:{ space:10, wide:4, clean:0, head:4, line:-1, toolbar:4, form:8, accordion: 9  },\n\t//padding - distance insede cell between cell border and cell content\n\tlayoutPadding:{ space:10, wide:0, clean:0, head:0, line:0, toolbar:4, form:8, accordion:0  },\n\t//space between tabs in tabbar\n\ttabMargin:3,\n\ttabTopOffset:3,\n\n\tpopupPadding: 8,\n\n\tcalendarHeight: 70,\n\tpadding:0,\n\n\toptionHeight: 22\n};\nwebix.skin.clouds = {\n\ttopLayout:\"wide\",\n\t//bar in accordion\n\tbarHeight:36,\t\t\t//!!!Set the same in skin.less!!!\n\ttabbarHeight: 46,\n\trowHeight:34,\n\ttoolbarHeight:22,\n\tlistItemHeight:32,\t\t//list, grouplist, dataview, etc.\n\tinputHeight:30,\n\tinputPadding: 2,\n\tmenuHeight: 34,\n\tlabelTopHeight: 16,\n\n\tinputSpacing: 4,\n\tborderWidth: 1,\n\n\tsliderHandleWidth: 16,\n\tsliderPadding: 10,\n\tsliderBorder: 1,\n\n\t//margin - distance between cells\n\tlayoutMargin:{ space:10, wide:4, clean:0, head:4, line:-1, toolbar:4, form:8  },\n\t//padding - distance insede cell between cell border and cell content\n\tlayoutPadding:{ space:10, wide:0, clean:0, head:0, line:0, toolbar:4, form:8  },\n\t//space between tabs in tabbar\n\ttabMargin:2,\n\ttabOffset:0,\n\ttabBottomOffset: 10,\n\n\tpopupPadding: 8,\n\n\tcalendarHeight: 70,\n\tpadding:0\n};\nwebix.skin.terrace = {\n\ttopLayout:\"space\",\n\t//bar in accordion\n\tbarHeight:37,\t\t\t//!!!Set the same in skin.less!!!\n\ttabbarHeight: 39,\n\trowHeight:38,\n\ttoolbarHeight:22,\n\tlistItemHeight:28,\t\t//list, grouplist, dataview, etc.\n\tinputHeight:30,\n\tinputPadding: 2,\n\tmenuMargin: 0,\n\tmenuHeight: 32,\n\tlabelTopHeight: 16,\n\n\tinputSpacing: 4,\n\tborderWidth: 1,\n\n\tsliderHandleWidth: 16,\n\tsliderPadding: 10,\n\tsliderBorder: 1,\n\n\t//margin - distance between cells\n\tlayoutMargin:{ space:20, wide:20, clean:0, head:4, line:-1, toolbar:4, form:8},\n\t//padding - distance insede cell between cell border and cell content\n\tlayoutPadding:{ space:20, wide:0, clean:0, head:0, line:0, toolbar:4, form:8 },\n\ttabMargin:2,\n\ttabOffset:0,\n\n\tpopupPadding: 8,\n\n\tcalendarHeight: 70,\n\t//space between tabs in tabbar\n\tpadding:17,\n\n\toptionHeight: 24\n};\nwebix.skin.metro = {\n\ttopLayout:\"space\",\n\t//bar in accordion\n\tbarHeight:36,\t\t\t//!!!Set the same in skin.less!!!\n\ttabbarHeight: 46,\n\trowHeight:34,\n\ttoolbarHeight:36,\n\tlistItemHeight:32,\t\t//list, grouplist, dataview, etc.\n\tinputHeight:30,\n\tbuttonHeight: 45,\n\tinputPadding: 2,\n\tmenuHeight: 36,\n\tlabelTopHeight: 16,\n\n\tinputSpacing: 4,\n\tborderWidth: 1,\n\n\tsliderHandleWidth: 16,\n\tsliderPadding: 10,\n\tsliderBorder: 1,\n\n\t//margin - distance between cells\n\tlayoutMargin:{ space:10, wide:4, clean:0, head:4, line:-1, toolbar:4, form:8, accordion: 9  },\n\t//padding - distance insede cell between cell border and cell content\n\tlayoutPadding:{ space:10, wide:0, clean:0, head:0, line:0, toolbar:0, form:8, accordion: 0  },\n\t//space between tabs in tabbar\n\ttabMargin:2,\n\ttabOffset:0,\n\ttabBottomOffset: 10,\n\n\tpopupPadding: 8,\n\n\tcalendarHeight: 70,\n\tpadding:0,\n\n\toptionHeight: 23\n};\nwebix.skin.light = {\n\ttopLayout:\"space\",\n\t//bar in accordion\n\tbarHeight:36,\t\t\t//!!!Set the same in skin.less!!!\n\ttabbarHeight: 46,\n\trowHeight:32,\n\ttoolbarHeight:36,\n\tlistItemHeight:32,\t\t//list, grouplist, dataview, etc.\n\tinputHeight:34,\n\tbuttonHeight: 45,\n\tinputPadding: 3,\n\tmenuHeight: 36,\n\tlabelTopHeight: 16,\n\n\tinputSpacing: 4,\n\tborderWidth: 1,\n\n\tsliderHandleWidth: 16,\n\tsliderPadding: 10,\n\tsliderBorder: 1,\n\n\t//margin - distance between cells\n\tlayoutMargin:{ space:15, wide:15, clean:0, head:4, line:-1, toolbar:4, form:8, accordion: 10  },\n\t//padding - distance insede cell between cell border and cell content\n\tlayoutPadding:{ space:15, wide:0, clean:0, head:0, line:0, toolbar:0, form:8, accordion: 0  },\n\t//space between tabs in tabbar\n\ttabMargin:2,\n\ttabOffset:0,\n\ttabBottomOffset: 10,\n\n\tpopupPadding: 8,\n\n\n\tcalendarHeight: 70,\n\tpadding:0,\n\n\toptionHeight: 27\n};\nwebix.skin.glamour = {\n\ttopLayout:\"space\",\n\t//bar in accordion\n\tbarHeight:39,\t\t\t//!!!Set the same in skin.less!!!\n\ttabbarHeight: 39,\n\trowHeight:32,\n\ttoolbarHeight:39,\n\tlistItemHeight:32,\t\t//list, grouplist, dataview, etc.\n\tinputHeight:34,\n\tbuttonHeight: 34,\n\tinputPadding: 3,\n\tmenuHeight: 36,\n\tlabelTopHeight: 16,\n\n\tinputSpacing: 4,\n\tborderWidth: 1,\n\n\tsliderHandleWidth: 16,\n\tsliderPadding: 10,\n\tsliderBorder: 1,\n\n\t//margin - distance between cells\n\tlayoutMargin:{ space:15, wide:15, clean:0, head:4, line:-1, toolbar:4, form:8, accordion: 10  },\n\t//padding - distance insede cell between cell border and cell content\n\tlayoutPadding:{ space:15, wide:0, clean:0, head:0, line:0, toolbar:3, form:8, accordion: 0  },\n\t//space between tabs in tabbar\n\ttabMargin:1,\n\ttabOffset:0,\n\ttabBottomOffset: 1,\n\n\tpopupPadding: 8,\n\n\tcalendarHeight: 70,\n\tpadding:0,\n\n\toptionHeight: 27\n};\nwebix.skin.touch = {\n\ttopLayout:\"space\",\n\t//bar in accordion\n\tbarHeight:42,\t\t\t//!!!Set the same in skin.less!!!\n\ttabbarHeight: 50,\n\trowHeight:42,\n\ttoolbarHeight: 42,\n\tlistItemHeight:42,\t\t//list, grouplist, dataview, etc.\n\tinputHeight:42,\n\tinputPadding: 4,\n\tmenuHeight: 42,\n\tlabelTopHeight: 24,\n\tunitHeaderHeight: 34,\n\n\tinputSpacing: 4,\n\tborderWidth: 1,\n\n\tsliderHandleWidth: 16,\n\tsliderPadding: 10,\n\tsliderBorder: 1,\n\n\t//margin - distance between cells\n\tlayoutMargin:{ space:10, wide:4, clean:0, head:4, line:-1, toolbar:0, form:0, accordion: 9  },\n\t//padding - distance insede cell between cell border and cell content\n\tlayoutPadding:{ space:10, wide:0, clean:0, head:0, line:0, toolbar:4, form:8, accordion: 0  },\n\t//space between tabs in tabbar\n\ttabMargin:2,\n\ttabOffset:0,\n\ttabBottomOffset: 10,\n\tcalendar:{headerHeight: 70, timepickerHeight:35, height: 310, width: 300},\n\tpadding:0,\n\tcustomCheckbox: true,\n\tcustomRadio: true,\n\n\tpopupPadding: 8,\n\n\toptionHeight: 32\n};\nwebix.skin.flat = {\n\ttopLayout:\"space\",\n\t//bar in accordion\n\tbarHeight:46,\t\t\t//!!!Set the same in skin.less!!!\n\ttabbarHeight: 46,\n\trowHeight:34,\n\ttoolbarHeight:46,\n\tlistItemHeight:34,\t\t//list, grouplist, dataview, etc.\n\tinputHeight: 38,\n\tbuttonHeight: 38,\n\tinputPadding: 3,\n\tmenuHeight: 34,\n\tlabelTopHeight: 22,\n\tpropertyItemHeight: 28,\n\n\tinputSpacing: 4,\n\tborderWidth: 1,\n\n\tsliderHandleWidth: 16,\n\tsliderPadding: 10,\n\tsliderBorder: 1,\n\n\t//margin - distance between cells\n\tlayoutMargin:{ space:10, wide:10, clean:0, head:4, line:-1, toolbar:4, form:8, accordion: 10  },\n\t//padding - distance insede cell between cell border and cell content\n\tlayoutPadding:{ space:10, wide:0, clean:0, head:0, line:0, toolbar:4, form:17, accordion: 0  },\n\t//space between tabs in tabbar\n\ttabMargin:4,\n\ttabOffset: 0,\n\ttabBottomOffset: 6,\n\ttabTopOffset:1,\n\n\tcustomCheckbox: true,\n\tcustomRadio: true,\n\n\tpopupPadding: 8,\n\n\tcalendarHeight: 70,\n\tpadding:0,\n\taccordionType: \"accordion\",\n\n\toptionHeight: 32\n};\nwebix.skin.compact = {\n\ttopLayout:\"space\",\n\t//bar in accordion\n\tbarHeight:34,\t\t\t//!!!Set the same in skin.less!!!\n\ttabbarHeight: 34,\n\trowHeight:24,\n\ttoolbarHeight:34,\n\tlistItemHeight:28,\t\t//list, grouplist, dataview, etc.\n\tinputHeight: 30,\n\tbuttonHeight: 30,\n\tinputPadding: 3,\n\tmenuHeight: 28,\n\tlabelTopHeight: 16,\n\n\tinputSpacing: 4,\n\tborderWidth: 1,\n\n\tsliderHandleWidth: 16,\n\tsliderPadding: 10,\n\tsliderBorder: 1,\n\n\t//margin - distance between cells\n\tlayoutMargin:{ space:5, wide:5, clean:0, head:4, line:-1, toolbar:4, form:4, accordion: 5  },\n\t//padding - distance insede cell between cell border and cell content\n\tlayoutPadding:{ space:5, wide:0, clean:0, head:0, line:0, toolbar:2, form:12, accordion: 0  },\n\t//space between tabs in tabbar\n\ttabMargin:3,\n\ttabOffset: 0,\n\ttabBottomOffset: 3,\n\ttabTopOffset:1,\n\n\tcustomCheckbox: true,\n\tcustomRadio: true,\n\n\tpopupPadding: 8,\n\n\tcalendarHeight: 70,\n\tpadding:0,\n\taccordionType: \"accordion\",\n\n\toptionHeight: 23\n};\nwebix.skin.material = {\n\ttopLayout:\"space\",\n\t//bar in accordion\n\tbarHeight:45,\t\t\t//!!!Set the same in skin.less!!!\n\ttabbarHeight:47,\n\trowHeight:38,\n\ttoolbarHeight:22,\n\tlistItemHeight:34,\t\t//list, grouplist, dataview, etc.\n\tinputHeight:38,\n\tbuttonHeight:38,\n\tinputPadding: 2,\n\tmenuMargin: 0,\n\tmenuHeight: 34,\n\tlabelTopHeight: 16,\n\tpropertyItemHeight: 34,\n\n\tinputSpacing: 4,\n\tborderWidth: 1,\n\n\tsliderHandleWidth: 16,\n\tsliderPadding: 10,\n\tsliderBorder: 1,\n\n\t//margin - distance between cells\n\tlayoutMargin:{ material:10, space:10, wide:10, clean:0, head:4, line:-1, toolbar:4, form:16, accordion: 0  },\n\t//padding - distance insede cell between cell border and cell content\n\tlayoutPadding:{ material:10, space:10, wide:0, clean:0, head:0, line:0, toolbar:4, form:16, accordion: 0  },\n\t//space between tabs in tabbar\n\ttabMargin:0,\n\ttabOffset: 0,\n\ttabBottomOffset: 0,\n\ttabTopOffset:0,\n\n\tcustomCheckbox: true,\n\tcustomRadio: true,\n\n\tpopupPadding: 8,\n\n\tcalendarHeight: 70,\n\tpadding:0,\n\taccordionType: \"accordion\"\n};\nwebix.skin.contrast = {\n\ttopLayout:\"space\",\n\t//bar in accordion\n\tbarHeight:46,\t\t\t// !!!Set the same in skin.less!!!\n\ttabbarHeight: 46,\n\trowHeight:34,\n\ttoolbarHeight:46,\n\tlistItemHeight:34,\t\t// list, grouplist, dataview, etc.\n\tinputHeight: 38,\n\tbuttonHeight: 38,\n\tinputPadding: 3,\n\tmenuHeight: 34,\n\tlabelTopHeight: 22,\n\tpropertyItemHeight: 28,\n\n\tinputSpacing: 4,\n\tborderWidth: 1,\n\n\tsliderHandleWidth: 16,\n\tsliderPadding: 10,\n\tsliderBorder: 1,\n\n\t//margin - distance between cells\n\tlayoutMargin:{ space:10, wide:10, clean:0, head:4, line:-1, toolbar:8, form:8, accordion: 10  },\n\t//padding - distance insede cell between cell border and cell content\n\tlayoutPadding:{ space:10, wide:0, clean:0, head:0, line:0, toolbar:4, form:17, accordion: 0  },\n\t//space between tabs in tabbar\n\ttabMargin:4,\n\ttabOffset: 0,\n\ttabBottomOffset: 6,\n\ttabTopOffset:1,\n\n\tcustomCheckbox: true,\n\tcustomRadio: true,\n\n\tpopupPadding: 8,\n\n\tcalendarHeight: 70,\n\tpadding:0,\n\taccordionType: \"accordion\",\n\n\toptionHeight: 32\n};\n\nwebix.skin.set = function(name){\n\twebix.assert(webix.skin[name], \"Incorrect skin name: \"+name);\n\n\twebix.skin.$active = webix.skin[name];\n\twebix.skin.$name = name;\n\tif (webix.ui){\n\t\tfor (var key in webix.ui){\n\t\t\tvar view = webix.ui[key];\n\t\t\tif (view && view.prototype && view.prototype.$skin)\n\t\t\t\tview.prototype.$skin(view.prototype);\n\t\t}\n\t}\t\t\n};\nwebix.skin.set(window.webix_skin || \"flat\");\n\n/*\n\tBehavior:Destruction\n\t\n\t@export\n\t\tdestructor\n*/\n\n\n\nwebix.Destruction = {\n\t$init:function(){\n\t\t//wrap in object to simplify removing self-reference\n\t\tvar t  = this._destructor_handler = { obj: this};\n\n\t\t//register self in global list of destructors\n\t\twebix.destructors.push(t);\n\t},\n\t//will be called automatically on unload, can be called manually\n\t//simplifies job of GC\n\tdestructor:function(){\n\t\tvar config = this._settings;\n\n\t\tif (this._last_editor)\n\t\t\tthis.editCancel();\n\n\t\tif(this.callEvent)\n\t\t\tthis.callEvent(\"onDestruct\",[]);\n\n\t\t//destructor can be called only once\n\t\tthis.destructor=function(){};\n\t\t//remove self reference from global destructions collection\n\t\tthis._destructor_handler.obj = null;\n\n\t\t//destroy child and related cells\n\t\tif (this.getChildViews){\n\t\t\tvar cells = this.getChildViews();\n\t\t\tif (cells)\n\t\t\t\tfor (var i=0; i < cells.length; i++)\n\t\t\t\t\tcells[i].destructor();\n\n\t\t\tif (this._destroy_with_me)\n\t\t\t\tfor (var i=0; i < this._destroy_with_me.length; i++)\n\t\t\t\t\tthis._destroy_with_me[i].destructor();\n\t\t}\n\n\t\tdelete webix.ui.views[config.id];\n\n\t\tif (config.$id){\n\t\t\tvar top = this.getTopParentView();\n\t\t\tif (top && top._destroy_child)\n\t\t\t\ttop._destroy_child(config.$id);\n\t\t}\n\n\t\t//html collection\n\t\tthis._htmlmap  = null;\n\t\tthis._htmlrows = null;\n\t\tthis._html = null;\n\n\n\t\tif (this._contentobj) {\n\t\t\tthis._contentobj.innerHTML=\"\";\n\t\t\tthis._contentobj._htmlmap = null;\n\t\t}\n\n\t\t//removes view container\n\t\tif (this._viewobj&&this._viewobj.parentNode){\n\t\t\tthis._viewobj.parentNode.removeChild(this._viewobj);\n\t\t}\n\n\t\tif (this.data && this.data.destructor)\n\t\t\tthis.data.destructor();\n\n\t\tif (this.unbind)\n\t\t\tthis.unbind();\n\n\t\tthis.data = null;\n\t\tthis._viewobj = this.$view = this._contentobj = this._dataobj = null;\n\t\tthis._evs_events = this._evs_handlers = {};\n\n\t\t//remove focus from destructed view\n\t\tif (webix.UIManager._view == this)\n\t\t\twebix.UIManager._view = null;\n\n\t\tvar url = config.url;\n\t\tif (url && url.$proxy && url.release)\n\t\t\turl.release();\n\n\t\tthis.$scope = null;\n\t\t// this flag is checked in delay method\n\t\tthis.$destructed = true;\n\t}\n};\n//global list of destructors\nwebix.destructors = [];\nwebix.event(window,\"unload\",function(){\n\twebix.callEvent(\"unload\", []);\n\twebix._final_destruction = true;\n\t\n\t//call all registered destructors\n\tfor (var i=0; i<webix.destructors.length; i++){\n\t\tvar obj = webix.destructors[i].obj;\n\t\tif (obj)\n\t\t\tobj.destructor();\n\t}\n\twebix.destructors = [];\n\twebix.ui._popups = webix.toArray();\n\n\t//detach all known DOM events\n\tfor (var a in webix._events)\n\t\twebix.eventRemove(a);\n});\n\n/*\n\tBehavior:Settings\n\t\n\t@export\n\t\tcustomize\n\t\tconfig\n*/\n\n/*\n\tTemplate - handles html templates\n*/\n\n\n\n(function(){\n\nvar _cache = {};\nvar _csp_cache = {};\nvar newlines = new RegExp(\"(\\\\r\\\\n|\\\\n)\",\"g\");\nvar quotes   = new RegExp(\"(\\\\\\\")\",\"g\");\nvar slashes  = new RegExp(\"(\\\\\\\\)\",\"g\");\nvar escape = {\n  \"&\": \"&amp;\",\n  \"<\": \"&lt;\",\n  \">\": \"&gt;\",\n  '\"': \"&quot;\",\n  \"'\": \"&#x27;\",\n  \"`\": \"&#x60;\"\n};\nvar badChars = /[&<>\"'`]/g;\nvar escapeChar = function(chr) {\n  return escape[chr] || \"&amp;\";\n};\n\n\nwebix.template = function(str){\n\tif (typeof str == \"function\") return str;\n\tif (_cache[str])\n\t\treturn _cache[str];\n\t\t\n\tstr=(str||\"\").toString();\t\t\t\n\tif (str.indexOf(\"->\")!=-1){\n\t\tvar teststr = str.split(\"->\");\n\t\tswitch(teststr[0]){\n\t\t\tcase \"html\": \t//load from some container on the page\n\t\t\t\tstr = webix.html.getValue(teststr[1]);\n\t\t\t\tbreak;\n\t\t\tcase \"http\": \t//load from external file\n\t\t\t\tstr = new webix.ajax().sync().get(teststr[1],{uid:webix.uid()}).responseText;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\t//do nothing, will use template as is\n\t\t\t\tbreak;\n\t\t}\n\t}\n\t\t\n\t//supported idioms\n\t// {obj.attr} => named attribute or value of sub-tag in case of xml\n\tstr=(str||\"\").toString();\t\t\n\n\t// Content Security Policy enabled\n\tif(webix.env.strict){\n\t\tif (!_csp_cache[str]){\n\t\t\t_csp_cache[str] = [];\n\n\t\t\t// get an array of objects (not sorted by position)\n\t\t\tvar temp_res = [];\n\t\t\tstr.replace(/\\{obj\\.([^}?]+)\\?([^:]*):([^}]*)\\}/g,function(search,s1,s2,s3,pos){\n\t\t\t\t\ttemp_res.push({pos: pos, str: search, fn: function(obj,common){\n\t\t\t\t\t\treturn obj[s1]?s2:s3;\n\t\t\t\t\t}});\n\t\t\t});\n\t\t\tstr.replace(/\\{common\\.([^}\\(]*)\\}/g,function(search,s,pos){\n\t\t\t\ttemp_res.push({pos: pos, str: search, fn: function(obj,common){\n\t\t\t\t\treturn common[s]||'';\n\t\t\t\t}});\n\t\t\t});\n\t\t\tstr.replace(/\\{common\\.([^\\}\\(]*)\\(\\)\\}/g,function(search,s,pos){\n\t\t\t\ttemp_res.push({pos: pos, str: search, fn: function(obj,common){\n\t\t\t\t\treturn (common[s]?common[s].apply(this, arguments):\"\");\n\t\t\t\t}});\n\t\t\t});\n\t\t\tstr.replace(/\\{obj\\.([^:}]*)\\}/g,function(search,s,pos){\n\t\t\t\ttemp_res.push({pos: pos, str: search, fn: function(obj,common){\n\t\t\t\t\treturn obj[s];\n\t\t\t\t}});\n\t\t\t});\n\t\t\tstr.replace(\"{obj}\",function(search,s,pos){\n\t\t\t\ttemp_res.push({pos: pos, str: search, fn: function(obj,common){\n\t\t\t\t\treturn obj;\n\t\t\t\t}});\n\t\t\t});\n\t\t\tstr.replace(/#([^#'\";, ]+)#/gi,function(search,s,pos){\n\t\t\t\tif(s.charAt(0)==\"!\"){\n\t\t\t\t\ts = s.substr(1);\n\t\t\t\t\ttemp_res.push({pos: pos, str: search, fn: function(obj,common){\n\t\t\t\t\t\tif(s.indexOf(\".\")!= -1)\n\t\t\t\t\t\t\tobj = webix.CodeParser.collapseNames(obj); // apply complex properties\n\t\t\t\t\t\treturn webix.template.escape(obj[s]);\n\t\t\t\t\t}});\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\ttemp_res.push({pos: pos, str: search, fn: function(obj,common){\n\t\t\t\t\t\tif(s.indexOf(\".\")!= -1)\n\t\t\t\t\t\t\tobj = webix.CodeParser.collapseNames(obj); // apply complex properties\n\t\t\t\t\t\treturn obj[s];\n\t\t\t\t\t}});\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\t// sort template parts by position\n\t\t\ttemp_res.sort(function(a,b){\n\t\t\t\treturn (a.pos > b.pos)?1:-1;\n\t\t\t});\n\n\t\t\t// create an array of functions that return parts of html string\n\t\t\tif(temp_res.length){\n\t\t\t\tvar lastPos = 0;\n\t\t\t\tvar addStr = function(str,n0,n1){\n\t\t\t\t\t_csp_cache[str].push(function(){\n\t\t\t\t\t\treturn str.slice(n0,n1);\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\tfor(var i = 0; i< temp_res.length; i++){\n\t\t\t\t\tvar pos = temp_res[i].pos;\n\t\t\t\t\taddStr(str,lastPos,pos);\n\t\t\t\t\t_csp_cache[str].push(temp_res[i].fn);\n\t\t\t\t\tlastPos = pos + temp_res[i].str.length;\n\t\t\t\t}\n\t\t\t\taddStr(str,lastPos,str.length);\n\t\t\t}\n\t\t\telse\n\t\t\t\t_csp_cache[str].push(function(){return str;});\n\t\t}\n\t\treturn function(){\n\t\t\tvar s = \"\";\n\t\t\tfor(var i=0; i < _csp_cache[str].length;i++){\n\t\t\t\ts += _csp_cache[str][i].apply(this,arguments);\n\t\t\t}\n\t\t\treturn s;\n\t\t};\n\t}\n\n\tstr=str.replace(slashes,\"\\\\\\\\\");\n\tstr=str.replace(newlines,\"\\\\n\");\n\tstr=str.replace(quotes,\"\\\\\\\"\");\n\n\tstr=str.replace(/\\{obj\\.([^}?]+)\\?([^:]*):([^}]*)\\}/g,\"\\\"+(obj.$1?\\\"$2\\\":\\\"$3\\\")+\\\"\");\n\tstr=str.replace(/\\{common\\.([^}\\(]*)\\}/g,\"\\\"+(common.$1||'')+\\\"\");\n\tstr=str.replace(/\\{common\\.([^\\}\\(]*)\\(\\)\\}/g,\"\\\"+(common.$1?common.$1.apply(this, arguments):\\\"\\\")+\\\"\");\n\tstr=str.replace(/\\{obj\\.([^}]*)\\}/g,\"\\\"+(obj.$1)+\\\"\");\n\tstr=str.replace(\"{obj}\",\"\\\"+obj+\\\"\");\n\tstr=str.replace(/#([^#'\";, ]+)#/gi,function(str, key){\n\t\tif (key.charAt(0)==\"!\")\n\t\t\treturn \"\\\"+webix.template.escape(obj.\"+key.substr(1)+\")+\\\"\";\n\t\telse\n\t\t\treturn \"\\\"+(obj.\"+key+\")+\\\"\";\n\t});\n\n\ttry {\n\t\t_cache[str] = Function(\"obj\",\"common\",\"return \\\"\"+str+\"\\\";\");\n\t} catch(e){\n\t\twebix.assert_error(\"Invalid template:\"+str);\n\t}\n\n\treturn _cache[str];\n};\n\n\n\nwebix.template.escape  = function(str){\n\tif (str === webix.undefined || str === null) return \"\";\n\treturn (str.toString() || \"\" ).replace(badChars, escapeChar);\n};\nwebix.template.empty=function(){\treturn \"\";\t};\nwebix.template.bind =function(value){\treturn webix.bind(webix.template(value),this); };\n\n\n\t/*\n\t\tadds new template-type\n\t\tobj - object to which template will be added\n\t\tdata - properties of template\n\t*/\nwebix.type=function(obj, data){ \n\tif (obj.$protoWait){\n\t\tif (!obj._webix_type_wait)\n\t\t\tobj._webix_type_wait = [];\n\t\t\t\tobj._webix_type_wait.push(data);\n\t\treturn;\n\t}\n\t\t\n\t//auto switch to prototype, if name of class was provided\n\tif (typeof obj == \"function\")\n\t\tobj = obj.prototype;\n\tif (!obj.types){\n\t\tobj.types = { \"default\" : obj.type };\n\t\tobj.type.name = \"default\";\n\t}\n\t\n\tvar name = data.name;\n\tvar type = obj.type;\n\tif (name)\n\t\ttype = obj.types[name] = webix.clone(data.baseType?obj.types[data.baseType]:obj.type);\n\t\n\tfor(var key in data){\n\t\tif (key.indexOf(\"template\")===0)\n\t\t\ttype[key] = webix.template(data[key]);\n\t\telse\n\t\t\ttype[key]=data[key];\n\t}\n\n\treturn name;\n};\n\n})();\n\n\nwebix.Settings={\n\t$init:function(){\n\t\t/* \n\t\t\tproperty can be accessed as this.config.some\n\t\t\tin same time for inner call it have sense to use _settings\n\t\t\tbecause it will be minified in final version\n\t\t*/\n\t\tthis._settings = this.config= {}; \n\t},\n\tdefine:function(property, value){\n\t\tif (typeof property == \"object\")\n\t\t\treturn this._parseSeetingColl(property);\n\t\treturn this._define(property, value);\n\t},\n\t_define:function(property,value){\n\t\t//method with name {prop}_setter will be used as property setter\n\t\t//setter is optional\n\t\tvar setter = this[property+\"_setter\"];\n\t\treturn (this._settings[property]=setter?setter.call(this,value,property):value);\n\t},\n\t//process configuration object\n\t_parseSeetingColl:function(coll){\n\t\tif (coll){\n\t\t\tfor (var a in coll)\t\t\t\t//for each setting\n\t\t\t\tthis._define(a,coll[a]);\t\t//set value through config\n\t\t}\n\t},\n\t//helper for object initialization\n\t_parseSettings:function(obj,initial){\n\t\t//initial - set of default values\n\t\tvar settings = {}; \n\t\tif (initial)\n\t\t\tsettings = webix.extend(settings,initial);\n\t\t\t\t\t\n\t\t//code below will copy all properties over default one\n\t\tif (typeof obj == \"object\" && !obj.tagName)\n\t\t\twebix.extend(settings,obj, true);\t\n\t\t//call config for each setting\n\t\tthis._parseSeetingColl(settings);\n\t},\n\t_mergeSettings:function(config, defaults){\n\t\tfor (var key in defaults)\n\t\t\tswitch(typeof config[key]){\n\t\t\t\tcase \"object\": \n\t\t\t\t\tconfig[key] = this._mergeSettings((config[key]||{}), defaults[key]);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"undefined\":\n\t\t\t\t\tconfig[key] = defaults[key];\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\t//do nothing\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\treturn config;\n\t}\n};\n/* \n\tajax operations \n\t\n\tcan be used for direct loading as\n\t\twebix.ajax(ulr, callback)\n\tor\n\t\twebix.ajax().getItem(url)\n\t\twebix.ajax().post(url)\n\n*/\n\n\n\n\n\nwebix.proxy = function(name, source, extra){\n\twebix.assert(webix.proxy[name], \"Invalid proxy name: \"+name);\n\n\tvar copy = webix.copy(webix.proxy[name]);\n\tcopy.source = source;\n\n\tif (extra)\n\t\twebix.extend(copy, extra, true);\n\n\tif (copy.init) copy.init();\n\treturn copy;\n};\n\nwebix.proxy.$parse = function(value){\n\tif (typeof value == \"string\" && value.indexOf(\"->\") != -1){\n\t\tvar parts = value.split(\"->\");\n\t\treturn webix.proxy(parts[0], parts[1]);\n\t}\n\treturn value;\n};\n\nwebix.proxy.post = {\n\t$proxy:true,\n\tload:function(view, callback, params){\n\t\tparams = webix.extend(params||{}, this.params || {}, true);\n\t\twebix.ajax().bind(view).post(this.source, params, callback);\n\t}\n};\n\nwebix.proxy.sync = {\n\t$proxy:true,\n\tload:function(view, callback){\n\t\twebix.ajax().sync().bind(view).get(this.source, null, callback);\n\t}\n};\n\nwebix.proxy.connector = {\n\t$proxy:true,\n\n\tconnectorName:\"!nativeeditor_status\",\n\tload:function(view, callback){\n\t\twebix.ajax(this.source, callback, view);\n\t},\n\tsaveAll:function(view, updates, dp, callback){\n\t\tvar url = this.source;\n\n\t\tvar data = {};\n\t\tvar ids = [];\n\t\tfor (var i = 0; i < updates.length; i++) {\n\t\t\tvar action = updates[i];\n\t\t\tids.push(action.id);\n\n\t\t\tfor (var j in action.data)\n\t\t\t\tif (j.indexOf(\"$\")!==0)\n\t\t\t\t\tdata[action.id+\"_\"+j] = action.data[j];\n\t\t\tdata[action.id+\"_\"+this.connectorName] = action.operation;\n\t\t}\n\n\t\tdata.ids = ids.join(\",\");\n\t\tdata.webix_security = webix.securityKey;\n\t\n\t\turl += (url.indexOf(\"?\") == -1) ? \"?\" : \"&\";\n\t\turl += \"editing=true\";\n\n\t\twebix.ajax().post(url, data, callback);\n\t},\n\tresult:function(state, view, dp, text, data, loader){\n\t\tdata = data.xml();\n\t\tif (!data)\n\t\t\treturn dp._processError(null, text, data, loader);\n\t\t\n\n\t\tvar actions = data.data.action;\n\t\tif (!actions.length)\n\t\t\tactions = [actions];\n\n\n\t\tvar hash = [];\n\n\t\tfor (var i = 0; i < actions.length; i++) {\n\t\t\tvar obj = actions[i];\n\t\t\thash.push(obj);\n\n\t\t\tobj.status = obj.type;\n\t\t\tobj.id = obj.sid;\n\t\t\tobj.newid = obj.tid;\n\n\t\t\tdp.processResult(obj, obj, {text:text, data:data, loader:loader});\n\t\t}\n\n\t\treturn hash;\n\t}\n};\n\nwebix.proxy.debug = {\n\t$proxy:true,\n\tload:function(){},\n\tsave:function(v,u,d,c){\n\t\twebix.delay(function(){\n\t\t\twindow.console.log(\"[DP] \"+u.id+\" -> \"+u.operation, u.data);\n\t\t\tvar data = {\n\t\t\t\tid:u.data.id,\n\t\t\t\tnewid:u.data.id,\n\t\t\t\tstatus:u.data.operation\n\t\t\t};\n\t\t\td.processResult(data, data);\n\t\t});\n\t}\n};\n\nwebix.proxy.rest = {\n\t$proxy:true,\n\tload:function(view, callback){\n\t\twebix.ajax(this.source, callback, view);\n\t},\n\tsave:function(view, update, dp, callback){\n\t\treturn webix.proxy.rest._save_logic.call(this, view, update, dp, callback, webix.ajax());\n\t},\n\t_save_logic:function(view, update, dp, callback, ajax){\n\t\tvar url = this.source;\n\t\tvar query = \"\";\n\t\tvar mark = url.indexOf(\"?\");\n\n\t\tif (mark !== -1){\n\t\t\tquery = url.substr(mark);\n\t\t\turl = url.substr(0, mark);\n\t\t}\n\n\t\turl += url.charAt(url.length-1) == \"/\" ? \"\" : \"/\";\n\t\tvar mode = update.operation;\n\n\n\t\tvar data = update.data;\n\t\tif (mode == \"insert\") delete data.id;\n\n\t\t//call rest URI\n\t\tif (mode == \"update\"){\n\t\t\tajax.put(url + data.id + query, data, callback);\n\t\t} else if (mode == \"delete\") {\n\t\t\tajax.del(url + data.id + query, data, callback);\n\t\t} else {\n\t\t\tajax.post(url + query, data, callback);\n\t\t}\n\t}\n};\n\nwebix.proxy.json = {\n\t$proxy:true,\n\tload:function(view, callback){\n\t\twebix.ajax(this.source, callback, view);\n\t},\n\tsave:function(view, update, dp, callback){\n\t\tvar ajax = webix.ajax().headers({ \"Content-Type\":\"application/json\" });\n\t\treturn webix.proxy.rest._save_logic.call(this, view, update, dp, callback, ajax);\n\t}\n};\n\nwebix.proxy.faye = {\n\t$proxy:true,\n\tinit:function(){\n\t\tthis.clientId = this.clientId || webix.uid();\n\t},\n\tload:function(view){\n\t\tvar selfid = this.clientId;\n\n\t\tthis.client.subscribe(this.source, function(update){\n\t\t\tif (update.clientId == selfid) return;\n\n\t\t\twebix.dp(view).ignore(function(){\n\t\t\t\tif (update.operation == \"delete\")\n\t\t\t\t\tview.remove(update.data.id);\n\t\t\t\telse if (update.operation == \"insert\")\n\t\t\t\t\tview.add(update.data);\n\t\t\t\telse if (update.operation == \"update\"){\n\t\t\t\t\tvar item = view.getItem(update.data.id);\n\t\t\t\t\tif (item){\n\t\t\t\t\t\twebix.extend(item, update.data, true);\n\t\t\t\t\t\tview.refresh(item.id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\tsave:function(view, update, dp, callback){\n\t\tupdate.clientId = this.clientId;\n\t\tthis.client.publish(this.source, update);\n\t}\n};\n\n//indexdb->database/collection\nwebix.proxy.indexdb = {\n\t$proxy:true,\n\tcreate:function(db, config, version, callback){\n\t\tthis.source = db + \"/\";\n\t\tthis._get_db(callback, version, function(e){\n\t\t\tvar db = e.target.result;\n\t\t\tfor (var key in config){\n\t\t\t\tvar data = config[key];\n\t\t\t\tvar store = db.createObjectStore(key, { keyPath: \"id\", autoIncrement:true });\n\t\t\t\tfor (var i = 0; i < data.length; i++)\n\t\t\t\t\tstore.put(data[i]);\n\t\t\t}\n\t\t});\n\t},\n\t_get_db:function(callback, version, upgrade){\n\t\tif (this.source.indexOf(\"/\") != -1){\n\t\t\tvar parts = this.source.split(\"/\");\n\t\t\tthis.source = parts[1];\n\t\t\tversion = version || parts[2];\n\n\t\t\tvar _index = window.indexedDB || window.webkitIndexedDB || window.mozIndexedDB;\n\n\t\t\tvar db;\n\t\t\tif (version)\n\t\t\t\tdb = _index.open(parts[0], version);\n\t\t\telse\n\t\t\t\tdb = _index.open(parts[0]);\n\n\t\t\tif (upgrade)\n\t\t\t\tdb.onupgradeneeded = upgrade;\n\t\t\tdb.onerror = function(){ };\n\t\t\tdb.onblocked = function(){ };\n\t\t\tdb.onsuccess = webix.bind(function(e){\n\t\t\t\tthis.db =  e.target.result;\n\t\t\t\tif (callback)\n\t\t\t\t\tcallback.call(this);\n\t\t\t},this);\n\t\t} else if (this.db)\n\t\t\tcallback.call(this);\n\t\telse \n\t\t\twebix.delay(this._get_db, this, [callback], 50);\n\t},\n\n\tload:function(view, callback){\n\t\tthis._get_db(function(){\n\t\t\tvar store = this.db.transaction(this.source).objectStore(this.source);\n\t\t\tvar data = [];\n\n\t\t\tstore.openCursor().onsuccess = function(e) {\n\t\t\t\tvar result = e.target.result;\n\t\t\t\tif(result){\n\t\t\t\t\tdata.push(result.value);\n\t\t\t\t\tresult[\"continue\"]();\n\t\t\t\t} else {\n\t\t\t\t\tview.parse(data);\n\t\t\t\t\twebix.ajax.$callback(view, callback, \"[]\", data);\n\t\t\t\t}\n\t\t\t};\n\t\t});\n\t},\n\tsave:function(view, update, dp, callback){\n\t\tthis._get_db(function(){\n\t\t\tvar mode = update.operation;\n\t\t\tvar data = update.data;\n\t\t\tvar id = update.id;\n\n\t\t\tvar store = this.db.transaction([this.source], \"readwrite\").objectStore(this.source);\n\n\t\t\tvar req;\n\t\t\tif (mode == \"delete\")\n\t            req = store[\"delete\"](id);\n\t       \telse if (mode == \"update\")\n\t       \t\treq = store.put(data);\n\t       \telse if (mode == \"insert\"){\n\t       \t\tdelete data.id;\n\t       \t\treq = store.add(data);\n\t       \t}\n\n\t\t\treq.onsuccess = function(e) {\n\t\t\t\tvar result = { status: mode, id:update.id };\n\t\t\t\tif (mode == \"insert\")\n\t\t\t\t\tresult.newid = e.target.result;\n\t\t\t\tdp.processResult(result, result);\n\t\t\t};\n\t\t});\n\t}\n};\n\nwebix.proxy.binary = {\n\t$proxy:true,\n\tload:function(view, callback){\n\t\tvar parts = this.source.split(\"@\");\n\t\tvar ext = parts[0].split(\".\").pop();\n\t\treturn webix.ajax().response(\"arraybuffer\").get(parts[0]).then(function(res){\n\t\t\tvar options = { ext:ext, dataurl : parts[1] };\n\t\t\twebix.ajax.$callback(view, callback, \"\", { data:res, options:options }, -1);\n\t\t});\n\t}\n};\n\nwebix.ajax = function(url,params,call){\n\t//if parameters was provided - made fast call\n\tif (arguments.length!==0)\n\t\treturn (new webix.ajax()).get(url,params,call);\n\n\tif (!this.getXHR) return new webix.ajax(); //allow to create new instance without direct new declaration\n\n\treturn this;\n};\nwebix.ajax.count = 0;\nwebix.ajax.prototype={\n\tmaster:null,\n\t//creates xmlHTTP object\n\tgetXHR:function(){\n\t\treturn new XMLHttpRequest();\n\t},\n\tstringify:function(obj){\n\t\treturn webix.stringify(obj);\n\t},\n\t/*\n\t\tsend data to the server\n\t\tparams - hash of properties which will be added to the url\n\t\tcall - callback, can be an array of functions\n\t*/\n\t_send:function(url, params, call, mode){\n\t\tvar master;\n\t\tif (params && (webix.isArray(params) || (typeof (params.success || params.error || params) == \"function\"))){\n\t\t\tmaster = call;\n\t\t\tcall = params;\n\t\t\tparams = null;\n\t\t}\n\n\t\tvar defer = webix.promise.defer();\n\n\t\tvar x=this.getXHR();\n\t\tif (!webix.isArray(call))\n\t\t\tcall = [call];\n\n\t\tcall.push({ success: function(t, d){ defer.resolve(d);\t},\n\t\t\t\t\terror: function(t, d){ defer.reject(x);\t}});\n\n\t\tvar headers = this._header || {};\n\n\t\tif (!webix.callEvent(\"onBeforeAjax\", [mode, url, params, x, headers, null, defer])) return;\n\n\t\t//add content-type to POST|PUT|DELETE\n\t\tvar json_mode = false;\n\t\tif (mode !== 'GET'){\n\t\t\tvar found = false;\n\t\t\tfor (var key in headers)\n\t\t\t\tif (key.toString().toLowerCase() == \"content-type\"){\n\t\t\t\t\tfound = true;\n\t\t\t\t\tif (headers[key] == \"application/json\")\n\t\t\t\t\t\tjson_mode = true;\n\t\t\t\t}\n\t\t\tif (!found)\n\t\t\t\theaders['Content-Type'] = 'application/x-www-form-urlencoded';\n\t\t}\n\n\t\t//add extra params to the url\n\t\tif (typeof params == \"object\" && !(window.FormData && (params instanceof window.FormData))){\n\t\t\tif (json_mode)\n\t\t\t\tparams = this.stringify(params);\n\t\t\telse {\n\t\t\t\tvar t=[];\n\t\t\t\tfor (var a in params){\n\t\t\t\t\tvar value = params[a];\n\t\t\t\t\tif (value === null || value === webix.undefined)\n\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t    if(typeof value===\"object\")\n\t\t\t\t        value = this.stringify(value);\n\t\t\t\t\tt.push(a+\"=\"+encodeURIComponent(value));// utf-8 escaping\n\t\t\t \t}\n\t\t\t\tparams=t.join(\"&\");\n\t\t\t}\n\t\t}\n\n\t\tif (params && mode==='GET'){\n\t\t\turl=url+(url.indexOf(\"?\")!=-1 ? \"&\" : \"?\")+params;\n\t\t\tparams = null;\n\t\t}\n\n\t\tx.open(mode, url, !this._sync);\n\n\t\tvar type = this._response;\n\t\tif (type) x.responseType = type;\n\n\t\t//if header was provided - use it\n\t\tfor (var key in headers)\n\t\t\tx.setRequestHeader(key, headers[key]);\n\t\t\n\t\t//async mode, define loading callback\n\t\tvar self=this;\n\t\tthis.master = this.master || master;\n\t\tx.onreadystatechange = function(){\n\t\t\tif (!x.readyState || x.readyState == 4){\n\t\t\t\tif (webix.debug_time) webix.log_full_time(\"data_loading\");\t//log rendering time\n\n\t\t\t\twebix.ajax.count++;\n\t\t\t\tif (call && self && !x.aborted){\n\t\t\t\t\t//IE8 and IE9, handling .abort call\n\t\t\t\t\tif (webix._xhr_aborted.find(x) != -1)\n\t\t\t\t\t\treturn webix._xhr_aborted.remove(x);\n\n\t\t\t\t\tvar owner = self.master||self;\n\n\t\t\t\t\tvar is_error = x.status >= 400 || x.status === 0;\n\t\t\t\t\tvar text, data;\n\t\t\t\t\tif (x.responseType == \"blob\" || x.responseType == \"arraybuffer\"){\n\t\t\t\t\t\ttext = \"\";\n\t\t\t\t\t\tdata = x.response;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttext = x.responseText||\"\";\n\t\t\t\t\t\tdata = self._data(x);\n\t\t\t\t\t}\n\n\t\t\t\t\twebix.ajax.$callback(owner, call, text, data, x, is_error);\n\t\t\t\t}\n\t\t\t\tif (self) self.master=null;\n\t\t\t\tcall=self=master=null;\t//anti-leak\n\t\t\t}\n\t\t};\n\n\t\tif (this._timeout)\n\t\t\tx.timeout = this._timeout;\n\n\t\t//IE can use sync mode sometimes, fix it\n\t\tif (!this._sync)\n\t\t\tsetTimeout(function(){\n\t\t\t\tif (!x.aborted){\n\t\t\t\t\t//abort handling in IE9\n\t\t\t\t\tif (webix._xhr_aborted.find(x) != -1)\n\t\t\t\t\t\twebix._xhr_aborted.remove(x);\n\t\t\t\t\telse\n\t\t\t\t\t\tx.send(params||null);\n\t\t\t\t}\n\t\t\t}, 1);\n\t\telse\n\t\t\tx.send(params||null);\n\n\t\tif (this.master && this.master._ajax_queue)\n\t\t\tthis.master._ajax_queue.push(x);\n\n\t\treturn this._sync?x:defer; //return XHR, which can be used in case of sync. mode\n\t},\n\t_data:function(x){\n\t\treturn {\n\t\t\txml:function(){ \n\t\t\t\ttry{\n\t\t\t\t\treturn webix.DataDriver.xml.tagToObject(webix.DataDriver.xml.toObject(x.responseText, this));\n\t\t\t\t}\n\t\t\t\tcatch(e){\n\t\t\t\t\twebix.log(x.responseText);\n\t\t\t\t\twebix.log(e.toString()); webix.assert_error(\"Invalid xml data for parsing\"); \n\t\t\t\t}\n\t\t\t},\n\t\t\trawxml:function(){ \n\t\t\t\tif (!window.XPathResult)\n\t\t\t\t\treturn webix.DataDriver.xml.fromString(x.responseText);\n\t\t\t\treturn x.responseXML;\n\t\t\t},\n\t\t\ttext:function(){ return x.responseText; },\n\t\t\tjson:function(){\n\t\t\t\treturn webix.DataDriver.json.toObject(x.responseText, false);\n\t\t\t}\n\t\t};\n\t},\n\t//GET request\n\tget:function(url,params,call){\n\t\treturn this._send(url,params,call,\"GET\");\n\t},\n\t//POST request\n\tpost:function(url,params,call){\n\t\treturn this._send(url,params,call,\"POST\");\n\t},\n\t//PUT request\n\tput:function(url,params,call){\n\t\treturn this._send(url,params,call,\"PUT\");\n\t},\n\t//DELETE request\n\tdel:function(url,params,call){\n\t\treturn this._send(url,params,call,\"DELETE\");\n\t},\n\t//PATCH request\n\tpatch:function(url,params,call){\n\t\treturn this._send(url,params,call,\"PATCH\");\n\t},\n\n\tsync:function(){\n\t\tthis._sync = true;\n\t\treturn this;\n\t},\n\ttimeout:function(num){\n\t\tthis._timeout = num;\n\t\treturn this;\n\t},\n\tresponse:function(value){\n\t\tthis._response = value;\n\t\treturn this;\n\t},\n\t//deprecated, remove in 3.0\n\t//[DEPRECATED]\n\theader:function(header){\n\t\twebix.assert(false, \"ajax.header is deprecated in favor of ajax.headers\");\n\t\tthis._header = header;\n\t\treturn this;\n\t},\n\theaders:function(header){\n\t\tthis._header = webix.extend(this._header||{},header);\n\t\treturn this;\n\t},\n\tbind:function(master){\n\t\tthis.master = master;\n\t\treturn this;\n\t}\n};\nwebix.ajax.$callback = function(owner, call, text, data, x, is_error){\n\tif (owner.$destructed) return;\n\tif (x === -1 && data && typeof data.json == \"function\")\n\t\tdata = data.json();\n\n\tif (is_error)\n\t\twebix.callEvent(\"onAjaxError\", [x]);\n\n\tif (!webix.isArray(call))\n\t\tcall = [call];\n\n\tif (!is_error)\n\t\tfor (var i=0; i < call.length; i++){\n\t\t\tif (call[i]){\n\t\t\t\tvar before = call[i].before;\n\t\t\t\tif (before)\n\t\t\t\t\tbefore.call(owner, text, data, x);\n\t\t\t}\n\t\t}\n\n\tfor (var i=0; i < call.length; i++)\t//there can be multiple callbacks\n\t\tif (call[i]){\n\t\t\tvar method = (call[i].success||call[i]);\n\t\t\tif (is_error)\n\t\t\t\tmethod = call[i].error;\n\t\t\tif (method && method.call)\n\t\t\t\tmethod.call(owner,text,data,x);\n\t\t}\n};\n\n/*submits values*/\nwebix.send = function(url, values, method, target){\n\tvar form = webix.html.create(\"FORM\",{\n\t\t\"target\":(target||\"_self\"),\n\t\t\"action\":url,\n\t\t\"method\":(method||\"POST\")\n\t},\"\");\n\tfor (var k in values) {\n\t\tvar field = webix.html.create(\"INPUT\",{\"type\":\"hidden\",\"name\": k,\"value\": values[k]},\"\");\n\t\tform.appendChild(field);\n\t}\n\tform.style.display = \"none\";\n\tdocument.body.appendChild(form);\n\tform.submit();\n\tdocument.body.removeChild(form);\n};\n\n\nwebix.AtomDataLoader={\n\t$init:function(config){\n\t\t//prepare data store\n\t\tthis.data = {}; \n\t\tthis.waitData = webix.promise.defer();\n\n\t\tif (config)\n\t\t\tthis._settings.datatype = config.datatype||\"json\";\n\t\tthis.$ready.push(this._load_when_ready);\n\t},\n\t_load_when_ready:function(){\n\t\tthis._ready_for_data = true;\n\t\t\n\t\tif (this._settings.url)\n\t\t\tthis.url_setter(this._settings.url);\n\t\tif (this._settings.data)\n\t\t\tthis.data_setter(this._settings.data);\n\t},\n\turl_setter:function(value){\n\t\tvalue = webix.proxy.$parse(value);\n\n\t\tif (!this._ready_for_data) return value;\n\t\tthis.load(value, this._settings.datatype);\t\n\t\treturn value;\n\t},\n\tdata_setter:function(value){\n\t\tif (!this._ready_for_data) return value;\n\t\tthis.parse(value, this._settings.datatype);\n\t\treturn true;\n\t},\n\t//loads data from external URL\n\tload:function(url,call){\n\t\tvar details = arguments[2] || null;\n\n\t\tif(!this.callEvent(\"onBeforeLoad\",[]))\n\t\t\treturn webix.promise.reject();\t\t\n\n\t\tif (typeof call == \"string\"){\t//second parameter can be a loading type or callback\n\t\t\t//we are not using setDriver as data may be a non-datastore here\n\t\t\tthis.data.driver = webix.DataDriver[call];\n\t\t\tcall = arguments[2];\n\t\t} else if (!this.data.driver)\n\t\t\tthis.data.driver = webix.DataDriver.json;\n\n\t\t//load data by async ajax call\n\t\t//loading_key - can be set by component, to ignore data from old async requests\n\t\tvar callback = [{\n\t\t\tsuccess: this._onLoad,\n\t\t\terror: this._onLoadError\n\t\t}];\n\t\t\n\t\tif (call){\n\t\t\tif (webix.isArray(call))\n\t\t\t\tcallback.push.apply(callback,call);\n\t\t\telse\n\t\t\t\tcallback.push(call);\n\t\t}\n\t\t\n\t\t//proxy\t\n\t\turl = webix.proxy.$parse(url);\n\t\tif (url.$proxy && url.load)\n\t\t\treturn url.load(this, callback, details);\n\n\t\t//promize\n\t\tif (typeof url === \"function\"){\n\t\t\treturn url(details).then(\n\t\t\t\twebix.bind(function(data){\n\t\t\t\t\twebix.ajax.$callback(this, callback, \"\", data, -1);\n\t\t\t\t}, this),\n\t\t\t\twebix.bind(function(x){\n\t\t\t\t\twebix.ajax.$callback(this, callback, \"\", null, x, true);\n\t\t\t\t}, this)\n\t\t\t);\n\t\t}\n\n\t\t//normal url\n\t\treturn webix.ajax(url,callback,this);\n\t},\n\t//loads data from object\n\tparse:function(data,type){\n\t\t//[webix.remote]\n\t\tif (data && data.then && typeof data.then == \"function\"){\n\t\t\treturn data.then(webix.bind(function(data){ \n\t\t\t\tif (data && typeof data.json == \"function\")\n\t\t\t\t\tdata = data.json();\n\t\t\t\tthis.parse(data, type); \n\t\t\t}, this));\n\t\t}\n\n\t\t//loading data from other component\n\t\tif (data && data.sync && this.sync)\n\t\t\treturn this._syncData(data);\n\n\t\tif(!this.callEvent(\"onBeforeLoad\",[]))\n\t\t\treturn webix.promise.reject();\n\n\t\tthis.data.driver = webix.DataDriver[type||\"json\"];\n\t\tthis._onLoad(data,null);\n\t},\n\t_syncData: function(data){\n\t\tif(this.data)\n\t\t\tthis.data.attachEvent(\"onSyncApply\",webix.bind(function(){\n\t\t\t\tif(this._call_onready)\n\t\t\t\t\tthis._call_onready();\n\t\t\t},this));\n\n\t\tthis.sync(data);\n\t},\n\t_parse:function(data){\n\t\tvar parsed, record,\n\t\t\tdriver = this.data.driver;\n\n\t\trecord = driver.getRecords(data)[0];\n\t\tparsed = record?driver.getDetails(record):{};\n\n\t\tif (this.setValues)\n\t\t\tthis.setValues(parsed);\n\t\telse\n\t\t\tthis.data = parsed;\n\t},\n\t_onLoadContinue:function(data, text, response, loader){\n\t\tif (data){\n\t\t\tif(!this.$onLoad || !this.$onLoad(data, this.data.driver)){\n\t\t\t\tif(this.data && this.data._parse)\n\t\t\t\t\tthis.data._parse(data); //datastore\n\t\t\t\telse\n\t\t\t\t\tthis._parse(data);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tthis._onLoadError(text, response, loader);\n\n\t\t//data loaded, view rendered, call onready handler\n\t\tif(this._call_onready)\n\t\t\tthis._call_onready();\n\n\t\tthis.callEvent(\"onAfterLoad\",[]);\n\t\tthis.waitData.resolve();\n\t},\n\t//default after loading callback\n\t_onLoad:function(text, response, loader){\n\t\tvar driver = this.data.driver;\n\t\tvar data;\n\n\t\tif (loader === -1)\n\t\t\tdata = driver.toObject(response);\n\t\telse{\n\t\t\t//ignore data loading command if data was reloaded \n\t\t\tif(this._ajax_queue)\n\t\t\t\tthis._ajax_queue.remove(loader);\n\t\t\tdata = driver.toObject(text, response);\n\t\t}\n\t\t\t\n\t\tif(!data || !data.then)\n\t\t\tthis._onLoadContinue(data);\n\t\telse if(data.then && typeof data.then == \"function\")\n\t\t\tdata.then(webix.bind(this._onLoadContinue, this));\n\t},\n\t_onLoadError:function(text, xml, xhttp){\n\t\tthis.callEvent(\"onAfterLoad\",[]);\n\t\tthis.callEvent(\"onLoadError\",arguments);\n\t\twebix.callEvent(\"onLoadError\", [text, xml, xhttp, this]);\n\t},\n\t_check_data_feed:function(data){\n\t\tif (!this._settings.dataFeed || this._ignore_feed || !data) return true;\n\t\tvar url = this._settings.dataFeed;\n\t\tif (typeof url == \"function\")\n\t\t\treturn url.call(this, (data.id||data), data);\n\t\turl = url+(url.indexOf(\"?\")==-1?\"?\":\"&\")+\"action=get&id=\"+encodeURIComponent(data.id||data);\n\t\tif(!this.callEvent(\"onBeforeLoad\",[])) \n\t\t\treturn false;\n\t\twebix.ajax(url, function(text,xml,loader){\n\t\t\tthis._ignore_feed=true;\n\t\t\tvar driver = webix.DataDriver.json;\n\t\t\tvar data = driver.toObject(text, xml);\n\t\t\tif (data)\n\t\t\t\tthis.setValues(driver.getDetails(driver.getRecords(data)[0]));\n\t\t\telse\n\t\t\t\tthis._onLoadError(text,xml,loader);\n\t\t\tthis._ignore_feed=false;\n\t\t\tthis.callEvent(\"onAfterLoad\",[]);\n\t\t}, this);\n\t\treturn false;\n\t}\n};\n\n/*\n\tAbstraction layer for different data types\n*/\n\nwebix.DataDriver={};\nwebix.DataDriver.json={\n\t//convert json string to json object if necessary\n\ttoObject:function(data){\n\t\tif (!data) return null;\n\t\tif (typeof data == \"string\"){\n\t\t\ttry{\n\t\t\t\tif (this.parseDates){\n\t\t\t\t\tvar isodate = /\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(.\\d{1-3})?Z/;\n\t\t\t\t\tdata = JSON.parse(data, function(key, value){\n\t\t\t\t\t\tif (typeof value == \"string\"){\n\t\t\t\t\t\t\tif (isodate.test(value))\n\t\t\t\t\t\t\t\treturn new Date(value);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tdata =JSON.parse(data);\n\t\t\t\t}\n\t\t\t} catch(e){\n\t\t\t\twebix.log(e);\n\t\t\t\twebix.log(data);\n\t\t\t\twebix.assert_error(\"Invalid JSON data for parsing\");\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t},\n\t//get array of records\n\tgetRecords:function(data){\n\t\tif (data && data.data)\n\t\t\tdata = data.data;\n\n\t\tif (data && !webix.isArray(data))\n\t\t\treturn [data];\n\t\treturn data;\n\t},\n\t//get hash of properties for single record\n\tgetDetails:function(data){\n\t\tif (typeof data == \"string\")\n\t\t\treturn { id:(data||webix.uid()), value:data };\n\t\treturn data;\n\t},\n\tgetOptions:function(data){\n\t\treturn data.collections;\n\t},\n\t//get count of data and position at which new data need to be inserted\n\tgetInfo:function(data){\n\t\treturn {\n\t\t\tsize:(data.total_count||0),\n\t\t\tfrom:(data.pos||0),\n\t\t\tparent:(data.parent||0),\n\t\t\tconfig:(data.config),\n\t\t\tkey:(data.webix_security)\n\t\t};\n\t},\n\tchild:\"data\",\n\tparseDates:false\n};\n\nwebix.DataDriver.html={\n\t/*\n\t\tincoming data can be\n\t\t - ID of parent container\n\t\t - HTML text\n\t*/\n\ttoObject:function(data){\n\t\tif (typeof data == \"string\"){\n\t\t var t=null;\n\t\t if (data.indexOf(\"<\")==-1)\t//if no tags inside - probably its an ID\n\t\t\tt = webix.toNode(data);\n\t\t if (!t){\n\t\t\tt=document.createElement(\"DIV\");\n\t\t\tt.innerHTML = data;\n\t\t }\n\t\t \n\t\t return t.firstChild;\n\t\t}\n\t\treturn data;\n\t},\n\t//get array of records\n\tgetRecords:function(node){\n\t\treturn node.getElementsByTagName(this.tag);\n\t},\n\t//get hash of properties for single record\n\tgetDetails:function(data){\n\t\treturn webix.DataDriver.xml.tagToObject(data);\n\t},\n\tgetOptions:function(){ \n\t\treturn false;\n\t},\n\t//dyn loading is not supported by HTML data source\n\tgetInfo:function(data){\n\t\treturn {\n\t\t\tsize:0,\n\t\t\tfrom:0\n\t\t};\n\t},\n\ttag: \"LI\"\n};\n\nwebix.DataDriver.jsarray={\n\t//parse jsarray string to jsarray object if necessary\n\ttoObject:function(data){\n\t\tif (typeof data == \"string\")\n\t\t\treturn JSON.parse(data);\n\t\treturn data;\n\t},\n\t//get array of records\n\tgetRecords:function(data){\n\t\tif (data && data.data)\n\t\t\tdata = data.data;\n\t\treturn data;\n\t},\n\t//get hash of properties for single record, in case of array they will have names as \"data{index}\"\n\tgetDetails:function(data){\n\t\tvar result = {};\n\t\tfor (var i=0; i < data.length; i++)\n\t\t result[\"data\"+i]=data[i];\n\t\tif (this.idColumn !== null)\n\t\t\tresult.id = data[this.idColumn];\n\t\t \n\t\treturn result;\n\t},\n\tgetOptions:function(){ return false; },\n\t//dyn loading is not supported by js-array data source\n\tgetInfo:function(data){\n\t\treturn {\n\t\t\tsize:0,\n\t\t\tfrom:0\n\t\t};\n\t},\n\tidColumn:null\n};\n\nwebix.DataDriver.csv={\n\t//incoming data always a string\n\ttoObject:function(data){\n\t\treturn data;\n\t},\n\t//get array of records\n\tgetRecords:function(data){\n\t\treturn data.split(this.row);\n\t},\n\t//get hash of properties for single record, data named as \"data{index}\"\n\tgetDetails:function(data){\n\t\tdata = this.stringToArray(data);\n\t\tvar result = {};\n\t\tfor (var i=0; i < data.length; i++) \n\t\t\tresult[\"data\"+i]=data[i];\n\n\t\tif (this.idColumn !== null)\n\t\t\tresult.id = data[this.idColumn];\n\t\t \n\t\treturn result;\n\t},\n\tgetOptions:function(){ return false; },\n\t//dyn loading is not supported by csv data source\n\tgetInfo:function(data){\n\t\treturn {\n\t\t\tsize:0,\n\t\t\tfrom:0\n\t\t};\n\t},\n\t//split string in array, takes string surrounding quotes in account\n\tstringToArray:function(data){\n\t\tdata = data.split(this.cell);\n\t\tfor (var i=0; i < data.length; i++)\n\t\t data[i] = data[i].replace(/^[ \\t\\n\\r]*(\\\"|)/g,\"\").replace(/(\\\"|)[ \\t\\n\\r]*$/g,\"\");\n\t\treturn data;\n\t},\n\tidColumn:null,\n\trow:\"\\n\",\t//default row separator\n\tcell:\",\"\t//default cell separator\n};\n\nwebix.DataDriver.xml={\n\t_isValidXML:function(data){\n\t\tif (!data || !data.documentElement)\n\t\t\treturn null;\n\t\tif (data.getElementsByTagName(\"parsererror\").length)\n\t\t\treturn null;\n\t\treturn data;\n\t},\n\t//convert xml string to xml object if necessary\n\ttoObject:function(text, response){\n\t\tvar data = response ? (response.rawxml ? response.rawxml() : response) :null;\n\t\tif (this._isValidXML(data))\n\t\t\treturn data;\n\t\tif (typeof text == \"string\")\n\t\t\tdata = this.fromString(text.replace(/^[\\s]+/,\"\"));\n\t\telse\n\t\t\tdata = text;\n\n\t\tif (this._isValidXML(data))\n\t\t\treturn data;\n\t\treturn null;\n\t},\n\t//get array of records\n\tgetRecords:function(data){\n\t\treturn this.xpath(data,this.records);\n\t},\n\trecords:\"/*/item\",\n\tchild:\"item\",\n\tconfig:\"/*/config\",\n\t//get hash of properties for single record\n\tgetDetails:function(data){\n\t\treturn this.tagToObject(data,{});\n\t},\n\tgetOptions:function(){ \n\t\treturn false;\n\t},\n\t//get count of data and position at which new data_loading need to be inserted\n\tgetInfo:function(data){\n\t\t\n\t\tvar config = this.xpath(data, this.config);\n\t\tif (config.length)\n\t\t\tconfig = this.assignTypes(this.tagToObject(config[0],{}));\n\t\telse \n\t\t\tconfig = null;\n\n\t\treturn {\n\t\t\tsize:(data.documentElement.getAttribute(\"total_count\")||0),\n\t\t\tfrom:(data.documentElement.getAttribute(\"pos\")||0),\n\t\t\tparent:(data.documentElement.getAttribute(\"parent\")||0),\n\t\t\tconfig:config,\n\t\t\tkey:(data.documentElement.getAttribute(\"webix_security\")||null)\n\t\t};\n\t},\n\t//xpath helper\n\txpath:function(xml,path){\n\t\tif (window.XPathResult){\t//FF, KHTML, Opera\n\t\t var node=xml;\n\t\t if(xml.nodeName.indexOf(\"document\")==-1)\n\t\t xml=xml.ownerDocument;\n\t\t var res = [];\n\t\t var col = xml.evaluate(path, node, null, XPathResult.ANY_TYPE, null);\n\t\t var temp = col.iterateNext();\n\t\t while (temp){ \n\t\t\tres.push(temp);\n\t\t\ttemp = col.iterateNext();\n\t\t}\n\t\treturn res;\n\t\t}\t\n\t\telse {\n\t\t\tvar test = true;\n\t\t\ttry {\n\t\t\t\tif (typeof(xml.selectNodes)==\"undefined\")\n\t\t\t\t\ttest = false;\n\t\t\t} catch(e){ /*IE7 and below can't operate with xml object*/ }\n\t\t\t//IE\n\t\t\tif (test)\n\t\t\t\treturn xml.selectNodes(path);\n\t\t\telse {\n\t\t\t\t//there is no interface to do XPath\n\t\t\t\t//use naive approach\n\t\t\t\tvar name = path.split(\"/\").pop();\n\n\t\t\t\treturn xml.getElementsByTagName(name);\n\t\t\t}\n\t\t}\n\t},\n\tassignTypes:function(obj){\n\t\tfor (var k in obj){\n\t\t\tvar test = obj[k];\n\t\t\tif (typeof test == \"object\")\n\t\t\t\tthis.assignTypes(test);\n\t\t\telse if (typeof test == \"string\"){\n\t\t\t\tif (test === \"\") \n\t\t\t\t\tcontinue;\n\t\t\t\tif (test == \"true\")\n\t\t\t\t\tobj[k] = true;\n\t\t\t\telse if (test == \"false\")\n\t\t\t\t\tobj[k] = false;\n\t\t\t\telse if (test == test*1)\n\t\t\t\t\tobj[k] = obj[k]*1;\n\t\t\t}\n\t\t}\n\t\treturn obj;\n\t},\n\t//convert xml tag to js object, all subtags and attributes are mapped to the properties of result object\n\ttagToObject:function(tag,z){\n\t\tvar isArray = tag.nodeType == 1 && tag.getAttribute(\"stack\");\n\t\tvar hasSubTags = 0;\n\n\t\tif (!isArray){\n\t\t\tz=z||{};\n\t\t\t\n\n\t\t\t//map attributes\n\t\t\tvar a=tag.attributes;\n\t\t\tif(a && a.length)\n\t\t\t\tfor (var i=0; i<a.length; i++){\n\t\t\t \t\tz[a[i].name]=a[i].value;\n\t\t\t \t\thasSubTags = 1;\n\t\t\t \t}\n\n\t\t\t//map subtags\n\t\t\tvar b=tag.childNodes;\n\t\t\tfor (var i=0; i<b.length; i++)\n\t\t\t\tif (b[i].nodeType==1){\n\t\t\t\t\tvar name = b[i].tagName;\n\t\t\t\t\tif (z[name]){\n\t\t\t\t\t\tif (typeof z[name].push != \"function\")\n\t\t\t\t\t\t\tz[name] = [z[name]];\n\t\t\t\t\t\tz[name].push(this.tagToObject(b[i],{}));\n\t\t\t\t\t} else\n\t\t\t\t\t\tz[name]=this.tagToObject(b[i],{});\t//sub-object for complex subtags\n\t\t\t\t\thasSubTags = 2;\n\t\t\t\t}\n\n\t\t\tif (!hasSubTags)\n\t\t\t\treturn this.nodeValue(tag);\n\t\t\t//each object will have its text content as \"value\" property\n\t\t\t//only if has not sub tags\n\t\t\tif (hasSubTags < 2)\n\t\t\t\tz.value = z.value||this.nodeValue(tag);\n\n\t\t} else {\n\t\t\tz = [];\n\t\t\tvar b=tag.childNodes;\n\t\t\tfor (var i=0; i<b.length; i++)\n\t\t\t\tif (b[i].nodeType==1)\n\t\t\t\t\tz.push(this.tagToObject(b[i],{}));\n\t\t}\n\n\t\treturn z;\n\t},\n\t//get value of xml node \n\tnodeValue:function(node){\n\t\tif (node.firstChild){\n\t\t\treturn node.firstChild.wholeText || node.firstChild.data;\n\t\t}\n\t\treturn \"\";\n\t},\n\t//convert XML string to XML object\n\tfromString:function(xmlString){\n\t\ttry{\n\t\t\tif (window.DOMParser)\t\t// FF, KHTML, Opera\n\t\t\t\treturn (new DOMParser()).parseFromString(xmlString,\"text/xml\");\n\t\t\tif (window.ActiveXObject){\t// IE, utf-8 only \n\t\t\t\tvar temp=new ActiveXObject(\"Microsoft.xmlDOM\");\n\t\t\t\ttemp.loadXML(xmlString);\n\t\t\t\treturn temp;\n\t\t\t}\n\t\t} catch(e){\n\t\t\twebix.assert_error(e);\n\t\t\treturn null;\n\t\t}\n\t\twebix.assert_error(\"Load from xml string is not supported\");\n\t}\n};\n\n\nwebix.debug_code(function(){\n\twebix.debug_load_event = webix.attachEvent(\"onLoadError\", function(text, xml, xhttp, owner){\n\t\ttext = text || \"[EMPTY DATA]\";\n\t\tvar error_text = \"Data loading error, check console for details\";\n\t\tif (text.indexOf(\"<?php\") === 0)\n\t\t\terror_text = \"PHP support missed\";\n\t\telse if (text.indexOf(\"WEBIX_ERROR:\") === 0)\n\t\t\terror_text = text.replace(\"WEBIX_ERROR:\",\"\");\n\n\t\tif (webix.message)\n\t\t\twebix.message({\n\t\t\t\ttype:\"debug\",\n\t\t\t\ttext:error_text,\n\t\t\t\texpire:-1\n\t\t\t});\n\t\tif (window.console){\n\t\t\tvar logger = window.console;\n\t\t\tlogger.log(\"Data loading error\");\n\t\t\tlogger.log(\"Object:\", owner);\n\t\t\tlogger.log(\"Response:\", text);\n\t\t\tlogger.log(\"XHTTP:\", xhttp);\n\t\t}\n\t});\n\n\twebix.ready(function(){\n\t\tvar path = document.location.href;\n\t\tif (path.indexOf(\"file:\")===0){\n\t\t\tif (webix.message)\n\t\t\t\twebix.message({\n\t\t\t\t\ttype:\"error\", \n\t\t\t\t\ttext:\"Please open sample by http,<br>not as file://\",\n\t\t\t\t\texpire:-1\n\t\t\t\t});\n\t\t\telse \n\t\t\t\twindow.alert(\"Please open sample by http, not as file://\");\n\t\t}\n\t});\n\t\n});\n\n\n\n//UI interface\nwebix.BaseBind = {\n\tbind:function(target, rule, format){\n\t\tif (!this.attachEvent)\n\t\t\twebix.extend(this, webix.EventSystem);\n\n\t\tif (typeof target == 'string')\n\t\t\ttarget = webix.$$(target);\n\t\t\t\n\t\tif (target._initBindSource) target._initBindSource();\n\t\tif (this._initBindSource) this._initBindSource();\n\n\t\t\n\t\t\t\n\t\tif (!target.getBindData)\n\t\t\twebix.extend(target, webix.BindSource);\n\n\t\tthis._bind_ready();\n\n\t\ttarget.addBind(this._settings.id, rule, format);\n\t\tthis._bind_source = target._settings.id;\n\n\t\tif (webix.debug_bind)\n\t\t\twebix.log(\"[bind] \"+this.name+\"@\"+this._settings.id+\" <= \"+target.name+\"@\"+target._settings.id);\n\n\t\tvar target_id = this._settings.id;\n\t\t//FIXME - check for touchable is not the best solution, to detect necessary event\n\t\tthis._bind_refresh_handler = this.attachEvent(this.touchable?\"onAfterRender\":\"onBindRequest\", function(){\n\t\t\treturn target.getBindData(target_id);\n\t\t});\n\n\t\tif (this.refresh && this.isVisible(this._settings.id))\n\t\t\tthis.refresh();\n\t},\n\tunbind:function(){\n\t\tif (this._bind_source){\n\t\t\tvar target = webix.$$(this._bind_source);\n\t\t\tif (target)\n\t\t\t\ttarget.removeBind(this._settings.id);\n\t\t\tthis.detachEvent(this._bind_refresh_handler);\n\t\t\tthis._bind_source = null;\n\t\t}\n\t},\n\t_bind_ready:function(){\n\t\tvar config = this._settings;\n\t\tif (this.filter){\n\t\t\tvar key = config.id;\n\t\t\tthis.data._on_sync = webix.bind(function(){\n\t\t\t\twebix.$$(this._bind_source)._bind_updated[key] = false;\n\t\t\t}, this);\n\t\t}\n\n\t\tvar old_render = this.render;\n\t\tthis.render = function(){\n\t\t\tif (this._in_bind_processing) return;\n\t\t\t\n\t\t\tthis._in_bind_processing = true;\n\t\t\tvar result = this.callEvent(\"onBindRequest\");\n\t\t\tthis._in_bind_processing = false;\n\t\t\t\n\t\t\treturn old_render.apply(this, ((result === false)?arguments:[]));\n\t\t};\n\n\t\tif (this.getValue||this.getValues)\n\t\t\tthis.save = function(data){\n\t\t\t\tvar source = webix.$$(this._bind_source);\n\t\t\t\tif (data)\n\t\t\t\t\tsource.setBindData(data);\n\t\t\t\telse {\n\t\t\t\t\tif (this.validate && !this.validate()) return false;\n\t\t\t\t\tvar values = this.getValue?this.getValue:this.getValues();\n\t\t\t\t\tsource.setBindData(values,this._settings.id);\n\t\t\t\t\t//reset form, so it will be counted as saved\n\t\t\t\t\tif (this.setDirty)\n\t\t\t\t\t\tthis.setDirty(false);\n\t\t\t\t}\n\t\t\t};\n\n\t\tthis._bind_ready = function(){};\n\t}\n};\n\n//bind interface\nwebix.BindSource = {\n\t$init:function(){\n\t\tthis._bind_hash = {};\t\t//rules per target\n\t\tthis._bind_updated = {};\t//update flags\n\t\tthis._ignore_binds = {};\n\t\t\n\t\t//apply specific bind extension\n\t\tthis._bind_specific_rules(this);\n\t},\n\tsaveBatch:function(code){\n\t\tthis._do_not_update_binds = true;\n\t\tcode.call(this);\n\t\tthis._do_not_update_binds = false;\n\t\tthis._update_binds();\n\t},\n\tsetBindData:function(data, key){\n\t\t//save called, updating master data\n\t\tif (key)\n\t\t\tthis._ignore_binds[key] = true;\n\n\t\tif (webix.debug_bind)\n\t\t\t\twebix.log(\"[bind:save] \"+this.name+\"@\"+this._settings.id+\" <= \"+\"@\"+key);\n\t\tif (this.setValue)\n\t\t\tthis.setValue(data);\n\t\telse if (this.setValues)\n\t\t\tthis.setValues(data);\n\t\telse {\n\t\t\tvar id = this.getCursor();\n\t\t\tif (id)\n\t\t\t\tthis.updateItem(id, data);\n\t\t\telse\n\t\t\t\tthis.add(data);\n\t\t}\n\t\tthis.callEvent(\"onBindUpdate\", [data, key]);\t\t\n\t\tif (this.save)\n\t\t\tthis.save();\n\t\t\n\t\tif (key)\n\t\t\tthis._ignore_binds[key] = false;\n\t},\n\t//fill target with data\n\tgetBindData:function(key, update){\n\t\t//fire only if we have data updates from the last time\n\t\tif (this._bind_updated[key]) return false;\n\t\tvar target = webix.$$(key);\n\t\t//fill target only when it visible\n\t\tif (target.isVisible(target._settings.id)){\n\t\t\tthis._bind_updated[key] = true;\n\t\t\tif (webix.debug_bind)\n\t\t\t\twebix.log(\"[bind:request] \"+this.name+\"@\"+this._settings.id+\" => \"+target.name+\"@\"+target._settings.id);\n\t\t\tthis._bind_update(target, this._bind_hash[key][0], this._bind_hash[key][1]); //trigger component specific updating logic\n\t\t\tif (update && target.filter)\n\t\t\t\ttarget.refresh();\n\t\t}\n\t},\n\t//add one more bind target\n\taddBind:function(source, rule, format){\n\t\tthis._bind_hash[source] = [rule, format];\n\t},\n\tremoveBind:function(source){\n\t\tdelete this._bind_hash[source];\n\t\tdelete this._bind_updated[source];\n\t\tdelete this._ignore_binds[source];\n\t},\n\t//returns true if object belong to \"collection\" type\n\t_bind_specific_rules:function(obj){\n\t\tif (obj.filter)\n\t\t\twebix.extend(this, webix.CollectionBind);\n\t\telse if (obj.setValue)\n\t\t\twebix.extend(this, webix.ValueBind);\n\t\telse\n\t\t\twebix.extend(this, webix.RecordBind);\n\t},\n\t//inform all binded objects, that source data was updated\n\t_update_binds:function(){\n\t\tif (!this._do_not_update_binds)\n\t\t\tfor (var key in this._bind_hash){\n\t\t\t\tif (this._ignore_binds[key]) continue;\n\t\t\t\tthis._bind_updated[key] = false;\n\t\t\t\tthis.getBindData(key, true);\n\t\t\t}\n\t},\n\t//copy data from source to the target\n\t_bind_update_common:function(target, rule, data){\n\t\tif (target.setValue)\n\t\t\ttarget.setValue((data&&rule)?data[rule]:data);\n\t\telse if (!target.filter){\n\t\t\tif (!data && target.clear)\n\t\t\t\ttarget.clear();\n\t\t\telse {\n\t\t\t\tif (target._check_data_feed(data))\n\t\t\t\t\ttarget.setValues(webix.clone(data));\n\t\t\t}\n\t\t} else {\n\t\t\ttarget.data.silent(function(){\n\t\t\t\tthis.filter(rule,data);\n\t\t\t});\n\t\t}\n\t\ttarget.callEvent(\"onBindApply\", [data,rule,this]);\n\t}\n};\n\n\n//pure data objects\nwebix.DataValue = webix.proto({\n\tname:\"DataValue\",\n\tisVisible:function(){ return true; },\n\t$init:function(config){ \n\t\tif (!config || webix.isUndefined(config.value))\n\t\t\tthis.data = config||\"\";\n\n\t\tvar id = (config&&config.id)?config.id:webix.uid();\n\t\tthis._settings = { id:id };\n\t\twebix.ui.views[id] = this;\n\t},\n\tsetValue:function(value){\n\t\tthis.data = value;\n\t\tthis.callEvent(\"onChange\", [value]);\n\t},\n\tgetValue:function(){\n\t\treturn this.data;\n\t},\n\trefresh:function(){ this.callEvent(\"onBindRequest\"); }\n}, webix.EventSystem, webix.BaseBind);\n\nwebix.DataRecord = webix.proto({\n\tname:\"DataRecord\",\n\tisVisible:function(){ return true; },\n\t$init:function(config){\n\t\tthis.data = config||{}; \n\t\tvar id = (config&&config.id)?config.id:webix.uid();\n\t\tthis._settings = { id:id };\n\t\twebix.ui.views[id] = this;\n\t},\n\tgetValues:function(){\n\t\treturn this.data;\n\t},\n\tsetValues:function(data, update){\n\t\tthis.data = update?webix.extend(this.data, data, true):data;\n\t\tthis.callEvent(\"onChange\", [data]);\n\t},\n\trefresh:function(){ this.callEvent(\"onBindRequest\"); }\n}, webix.EventSystem, webix.BaseBind, webix.AtomDataLoader, webix.Settings);\n\n\nwebix.ValueBind={\n\t$init:function(){\n\t\tthis.attachEvent(\"onChange\", this._update_binds);\n\t},\n\t_bind_update:function(target, rule, format){\n\t\trule = rule || \"value\";\n\t\tvar data = this.getValue()||\"\";\n\t\tif (format) data = format(data);\n\t\t\n\t\tif (target.setValue)\n\t\t\ttarget.setValue(data);\n\t\telse if (!target.filter){\n\t\t\tvar pod = {}; pod[rule] = data;\n\t\t\tif (target._check_data_feed(data))\n\t\t\t\ttarget.setValues(pod);\n\t\t} else{\n\t\t\ttarget.data.silent(function(){\n\t\t\t\tthis.filter(rule,data);\n\t\t\t});\n\t\t}\n\t\ttarget.callEvent(\"onBindApply\", [data,rule,this]);\n\t}\n};\n\nwebix.RecordBind={\n\t$init:function(){\n\t\tthis.attachEvent(\"onChange\", this._update_binds);\t\t\n\t},\n\t_bind_update:function(target, rule, format){\n\t\tvar data = this.getValues()||null;\n\t\tif (format)\n\t\t\tdata = format(data);\n\t\tthis._bind_update_common(target, rule, data);\n\t}\n};\n\nwebix.CollectionBind={\n\t$init:function(){\n\t\tthis._cursor = null;\n\t\tthis.attachEvent(\"onSelectChange\", function(data){\n\t\t\tvar sel = this.getSelectedId();\n\t\t\tthis.setCursor(sel?(sel.id||sel):null);\n\t\t});\n\t\tthis.attachEvent(\"onAfterCursorChange\", this._update_binds);\t\t\n\t\tthis.attachEvent(\"onAfterDelete\", function(id){\n\t\t\tif (id == this.getCursor())\n\t\t\t\tthis.setCursor(null);\n\t\t});\n\t\tthis.data.attachEvent(\"onStoreUpdated\", webix.bind(function(id, data, mode){\n\t\t\t//paint - ignored\n\t\t\t//delete - handled by onAfterDelete above\n\t\t\tif (id && id == this.getCursor() && mode != \"paint\" && mode != \"delete\")\n\t\t\t\tthis._update_binds();\n\t\t\t\n\t\t},this));\n\t\tthis.data.attachEvent(\"onClearAll\", webix.bind(function(){\n\t\t\tthis._cursor = null;\n\t\t},this));\n\t\tthis.data.attachEvent(\"onIdChange\", webix.bind(function(oldid, newid){\n\t\t\tif (this._cursor == oldid){\n\t\t\t\tthis._cursor = newid;\n\t\t\t\tthis._update_binds();\n\t\t\t}\n\t\t},this));\n\t},\n\trefreshCursor:function(){\n\t\tif (this._cursor)\n\t\t\tthis.callEvent(\"onAfterCursorChange\",[this._cursor]);\n\t},\n\tsetCursor:function(id){\n\t\tif (id == this._cursor || (id !== null && !this.getItem(id))) return;\n\t\t\n\t\tthis.callEvent(\"onBeforeCursorChange\", [this._cursor]);\n\t\tthis._cursor = id;\n\t\tthis.callEvent(\"onAfterCursorChange\",[id]);\n\t},\n\tgetCursor:function(){\n\t\treturn this._cursor;\n\t},\n\t_bind_update:function(target, rule, format){\n\t\tif (rule == \"$level\" && this.data.getBranch)\n\t\t\treturn (target.data || target).importData(this.data.getBranch(this.getCursor()));\n\n\t\tvar data = this.getItem(this.getCursor())|| this._settings.defaultData || null;\n\t\tif (rule == \"$data\"){\n\t\t\tif (typeof format === \"function\")\n\t\t\t\tformat.call(target, data, this);\n\t\t\telse\n\t\t\t\ttarget.data.importData(data?data[format]:[]);\n\t\t\ttarget.callEvent(\"onBindApply\", [data,rule,this]);\n\t\t} else {\n\t\t\tif (format)\n\t\t\t\tdata = format(data);\n\t\t\tthis._bind_update_common(target, rule, data);\n\t\t}\n\t}\n};\t\n\n\n\n/*\n\tREnders single item. \n\tCan be used for elements without datastore, or with complex custom rendering logic\n\t\n\t@export\n\t\trender\n*/\n\n\n\nwebix.AtomRender={\n\t//convert item to the HTML text\n\t_toHTML:function(obj){\n\t\tif (obj.$empty )\n\t\t\treturn \"\";\n\t\treturn this._settings.template(obj, this);\n\t},\n\t//render self, by templating data object\n\trender:function(){\n\t\tvar cfg = this._settings;\n\t\tif (this.isVisible(cfg.id)){\n\t\t\tif (webix.debug_render)\n\t\t\t\twebix.log(\"Render: \"+this.name+\"@\"+cfg.id);\n\t\t\tif (!this.callEvent || this.callEvent(\"onBeforeRender\",[this.data])){\n\t\t\t\tif (this.data && !cfg.content){\n\t\t\t\t\t//it is critical to have this as two commands\n\t\t\t\t\t//its prevent destruction race in Chrome\n\t\t\t\t\tthis._dataobj.innerHTML = \"\";\n\t\t\t\t\tthis._dataobj.innerHTML = this._toHTML(this.data);\n\t\t\t\t}\n\t\t\t\tif (this.callEvent) this.callEvent(\"onAfterRender\",[]);\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\tsync:function(source){\n\t\tthis._backbone_sync = false;\n\t\tif (source.name != \"DataStore\"){\n\t\t\tif (source.data && source.name == \"DataStore\"){\n\t\t\t\tsource = source.data;\n\t\t\t} else {\n\t\t\t\tthis._backbone_sync = true;\n\t\t\t}\n\t\t}\n\t\t\t\n\n\t\tif (this._backbone_sync)\n\t\t\tsource.bind(\"change\", webix.bind(function(data){\n\t\t\t\tif (data.id == this.data.id){\n\t\t\t\t\tthis.data = data.attributes;\n\t\t\t\t\tthis.refresh();\n\t\t\t\t}\n\t\t\t}, this));\n\t\telse\n\t\t\tsource.attachEvent(\"onStoreUpdated\", webix.bind(function(id){\n\t\t\t\tif (!id || id == this.data.id){\n\t\t\t\t\tthis.data = source.pull[id];\n\t\t\t\t\tthis.refresh();\n\t\t\t\t}\n\t\t\t}, this));\n\t},\n\ttemplate_setter:webix.template\n};\n\nwebix.SingleRender=webix.proto({\n    template_setter:function(value){\n\t\tthis.type.template=webix.template(value);\n\t},\n\t//convert item to the HTML text\n\t_toHTML:function(obj){\n\t\tvar type = this.type;\n\t\treturn (type.templateStart?type.templateStart(obj,type):\"\") + type.template(obj,type) + (type.templateEnd?type.templateEnd(obj,type):\"\");\n\t},\n\tcustomize:function(obj){\n\t\twebix.type(this,obj);\n\t}\n}, webix.AtomRender);\n\nwebix.UIManager = {\n\t_view: null,\n\t_hotkeys: {},\n\t_focus_time:0,\n\t_controls: {\n\t\t'enter': 13,\n\t\t'tab': 9,\n\t\t'esc': 27,\n\t\t'escape': 27,\n\t\t'up': 38,\n\t\t'down': 40,\n\t\t'left': 37,\n\t\t'right': 39,\n\t\t'pgdown': 34,\n\t\t'pagedown': 34,\n\t\t'pgup': 33,\n\t\t'pageup': 33,\n\t\t'end': 35,\n\t\t'home': 36,\n\t\t'insert': 45,\n\t\t'delete': 46,\n\t\t'backspace': 8,\n\t\t'space': 32,\n\t\t'meta': 91,\n\t\t'win': 91,\n\t\t'mac': 91,\n\t\t'multiply': 106,\n\t\t'add': 107,\n\t\t'subtract': 109,\n\t\t'decimal': 110,\n\t\t'divide': 111,\n\t\t'scrollock':145,\n\t\t'pausebreak':19,\n\t\t'numlock':144,\n\t\t'5numlocked':12,\n\t\t'shift':16,\n\t\t'capslock':20\n\t},\n\t_inputs:{\n\t\t\"input\": 1,\n\t\t\"button\":1,\n\t\t\"textarea\":1,\n\t\t\"select\":1\n\t},\n\t_enable: function() {\n\t\t// attaching events here\n\t\twebix.event(document.body, \"click\", webix.bind(this._focus_click, this));\n\t\twebix.event(document, \"keydown\", webix.bind(this._keypress, this));\n\n\t\tif (document.body.addEventListener)\n\t\t\twebix.event(document.body, \"focus\", this._focus_tab, { capture:true, bind: this });\n\n\t\twebix.destructors.push({obj:this});\n\t},\n\tdestructor:function(){\n\t\twebix.UIManager._view = null;\n\t},\n\tgetFocus: function() {\n\t\treturn this._view;\n\t},\n\t_focus_action:function(view){\n\t\tthis._focus_was_there = this._focus_was_there || view._settings.id;\n\t},\n\tsetFocus: function(view, only_api){\n\t\t//view can be empty\n\t\tview = webix.$$(view);\n\t\t//unfocus if view is hidden\n\t\tif (view && !view.$view) view = null;\n\n\t\t//store last click time, it is necessary to prevent refocusing\n\t\t//for example when user moves focus from onclick handler somewher\n\t\t//and we want to prevent autofocusing, when event will reach document.body\n\t\tthis._focus_time = webix._focus_time = new Date();\n\n\t\tif (this._view === view) return true;\n\t\tif (this._view && this._view.callEvent)\n\t\t\tthis._view.callEvent(\"onBlur\", [this._view]);\n\n\t\tif (view && view.callEvent)\n\t\t\tview.callEvent(\"onFocus\", [view, this._view]);\n\t\twebix.callEvent(\"onFocusChange\", [view, this._view]);\n\n\t\tif (this._view && this._view.blur && !only_api) this._view.blur();\n\t\tthis._view = view;\n\t\tif (view && view.focus && !only_api) view.focus();\n\t\treturn true;\n\t},\n\tapplyChanges: function(element){\n\t\tvar view = this.getFocus();\n\t\tif (view && view != element && view._applyChanges)\n\t\t\tview._applyChanges(element);\n\t},\n\thasFocus: function(view) {\n\t\treturn (view === this._view) ? true : false;\n\t},\n\t_focus: function(e, dont_clear) {\n\t\tvar view = webix.html.locate(e, \"view_id\") || this._focus_was_there;\n\n\t\t//if html was repainted we can miss the view, so checking last processed one\n\t\tview = webix.$$(view);\n\t\tthis._focus_was_there = null;\n\n\t\t//set timer, to fix issue with Android input focusin\n\t\twebix._focus_time = new Date();\n\n\t\tif (view == this._view) return;\n\n\t\tif (!dont_clear)\n\t\t\tthis._focus_was_there = null;\n\t\t\n\t\tif (view){\n\t\t\tview = webix.$$(view);\n\t\t\tif (this.canFocus(view)){\n\t\t\t\t//[ACTIVECONTENT] focus operations for active content\n\t\t\t\tif (view.getNode) view.getNode(e);\n\t\t\t\tthis.setFocus(view);\n\t\t\t}\n\t\t} else if (!dont_clear)\n\t\t\tthis.setFocus(null);\n\n\t\treturn true;\n\t},\n\t_focus_click:function(e){\n\t\t// if it was onfocus/onclick less then 100ms behore then we ignore it\n\t\tif ((new Date())-this._focus_time < 100) {\n\t\t\tthis._focus_was_there = null;\n\t\t\treturn false;\n\t\t}\n\t\treturn this._focus(e);\n\t},\n\t_focus_tab: function(e) {\n\t\tif(!this._inputs[e.target.nodeName.toLowerCase()])\n\t\t\treturn false;\n\t\treturn this._focus(e, true);\n\t},\n\tcanFocus:function(view){\n\t\treturn view.isVisible() && view.isEnabled();\n\t},\n\n\t_moveChildFocus: function(check_view){\n\t\tvar focus = this.getFocus();\n\t\t//we have not focus inside of closing item\n\t\tif (check_view && !this._is_child_of(check_view, focus))\n\t\t\treturn false;\n\n\t\tif (!this._focus_logic(\"getPrev\", check_view))\n\t\t\tthis._view = null;\n\t},\n\t_translation_table:{\n\t},\n\t_is_child_of: function(parent, child) {\n\t\tif (!parent) return false;\n\t\tif (!child) return false;\n\t\twhile (child) {\n\t\t\tif (child === parent) return true;\n\t\t\tchild = child.getParentView();\n\t\t}\n\t\treturn false;\n\t},\n\t_keypress_timed:function(){\n\t\tif (this && this.callEvent)\n\t\t\tthis.callEvent(\"onTimedKeyPress\",[]);\n\t},\n\t_isNumPad: function(code){\n\t\treturn code < 112 &&  code>105;\n\t},\n\t_keypress: function(e) {\n\t\tvar code = e.which || e.keyCode;\n\t\tif(code>95 && code< 106)\n\t\t\tcode -= 48; //numpad support (numbers)\n\t\tcode = this._translation_table[code] || code;\n\t\t\n\t\tvar ctrl = e.ctrlKey;\n\t\tvar shift = e.shiftKey;\n\t\tvar alt = e.altKey;\n\t\tvar meta = e.metaKey;\n\t\tvar codeid = this._keycode(code, ctrl, shift, alt, meta);\n\t\tvar view = this.getFocus();\n\t\tif (view && view.callEvent) {\n\t\t\tif (view.callEvent(\"onKeyPress\", [code,e]) === false)\n\t\t\t\twebix.html.preventEvent(e);\n\t\t\tif (view.hasEvent(\"onTimedKeyPress\")){\n\t\t\t\tclearTimeout(view._key_press_timeout);\n\t\t\t\tview._key_press_timeout = webix.delay(this._keypress_timed, view, [], (view._settings.keyPressTimeout||250));\n\t\t\t}\n\t\t}\n\n\t\tif(!this._isNumPad(code))\n\t\t\tcodeid = this._keycode(String.fromCharCode(code), ctrl, shift, alt, meta);\n\t\t//flag, that some non-special key was pressed\n\t\tvar is_any = !ctrl && !alt && !meta && (code!=9)&&(code!=27)&&(code!=13);\n\n\t\tif (this._check_keycode(codeid, is_any, e) === false) {\n\t\t\twebix.html.preventEvent(e);\n\t\t\treturn false;\n\t\t}\n\t},\n\n\t// dir - getNext or getPrev\n\t_focus_logic: function(dir) {\n\t\tif (!this.getFocus()) return null;\n\n\t\tdir = dir || \"getNext\";\n\t\tvar next = this.getFocus();\n\t\tvar start = next;\n\t\tvar marker = webix.uid();\n\n\t\twhile (true) {\n\t\t\tnext = this[dir](next);\n\t\t\t// view with focus ability\n\t\t\tif (next && this.canFocus(next))\n\t\t\t\treturn this.setFocus(next);\n\n\t\t\t// elements with focus ability not found\n\t\t\tif (next === start || next.$fmarker == marker)\n\t\t\t\treturn null;\n\t\t\t\n\t\t\t//prevents infinity loop\n\t\t\tnext.$fmarker = marker;\n\t\t}\n\t},\n\t_tab_logic:function(view, e){\n\t\tvar mode = !e.shiftKey;\n\t\twebix.UIManager._tab_time = new Date();\n\t\tif (view && view._custom_tab_handler && !view._custom_tab_handler(mode, e))\n\t\t\treturn false;\n\n\t\tif (view && view._in_edit_mode){\n\t\t\tif (view.editNext)\n\t\t\t\treturn view.editNext(mode);\n\t\t\telse if (view.editStop){\n\t\t\t\tview.editStop();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} else\n\t\t\twebix.delay(function(){\n\t\t\t\twebix.UIManager.setFocus(webix.$$(document.activeElement), true);\n\t\t\t},1);\n\t},\n\tgetTop: function(id) {\n\t\tvar next, view = webix.$$(id);\n\n\t\twhile (view && (next = view.getParentView()))\n\t\t\tview = next;\n\t\treturn view;\n\t},\n\n\tgetNext: function(view, _inner_call) {\n\t\tvar cells = view.getChildViews();\n\t\t//tab to first children\n\t\tif (cells.length && !_inner_call) return cells[0];\n\n\t\t//unique case - single view without child and parent\n\t\tvar parent = view.getParentView();\n\t\tif (!parent)\n\t\t\treturn view;\n\n\t\tvar p_cells = parent.getChildViews();\n\t\tif (p_cells.length){\n\t\t\tvar index = webix.PowerArray.find.call(p_cells, view)+1;\n\t\t\twhile (index < p_cells.length) {\n\t\t\t\t//next visible child\n\t\t\t\tif (this.canFocus(p_cells[index])) \n\t\t\t\t\treturn p_cells[index];\n\n\t\t\t\tindex++;\n\t\t\t}\n\t\t} \n\n\t\t//sibling of parent\n\t\treturn this.getNext(parent, true);\n\t},\n\n\tgetPrev: function(view, _inner_call) {\n\t\tvar cells = view.getChildViews();\n\t\t//last child of last child\n\t\tif (cells.length && _inner_call) \n\t\t\treturn this.getPrev(cells[cells.length - 1], true);\n\t\tif (_inner_call) return view;\n\n\t\t//fallback from top to bottom\n\t\tvar parent = view.getParentView();\n\t\tif (!parent) return this.getPrev(view, true);\n\n\n\t\tvar p_cells = parent.getChildViews();\n\t\tif (p_cells) {\n\t\t\tvar index = webix.PowerArray.find.call(p_cells, view)-1;\n\t\t\twhile (index >= 0) {\n\t\t\t\tif (this.canFocus(p_cells[index]))\n\t\t\t\t\treturn this.getPrev(p_cells[index], true);\n\t\t\t\tindex--;\n\t\t\t}\n\t\t}\n\n\t\treturn parent;\n\t},\n\taddHotKey: function(keys, handler, view) {\n\t\twebix.assert(handler, \"Hot key handler is not defined\");\n\t\tvar pack = this._parse_keys(keys);\n\t\twebix.assert(pack.letter, \"Unknown key code\");\n\t\tif (!view) view = null;\n\t\tpack.handler = handler;\n\t\tpack.view = view;\n\t\t\n\n\t\tvar code = this._keycode(pack.letter, pack.ctrl, pack.shift, pack.alt, pack.meta);\n\t\tif (!this._hotkeys[code]) this._hotkeys[code] = [];\n\t\tthis._hotkeys[code].push(pack);\n\n\t\treturn keys;\n\t},\n\tremoveHotKey: function(keys, func, view){\n\t\tvar pack = this._parse_keys(keys);\n\t\tvar code = this._keycode(pack.letter, pack.ctrl, pack.shift, pack.alt, pack.meta);\n\t\tif (!func && !view)\n\t\t\tdelete this._hotkeys[code];\n\t\telse {\n\t\t\tvar t = this._hotkeys[code];\n\t\t\tif (t){\n\t\t\t\tfor (var i = t.length - 1; i >= 0; i--) {\n\t\t\t\t\tif (view && t[i].view !== view) continue;\n\t\t\t\t\tif (func && t[i].handler !== func) continue;\n\t\t\t\t\tt.splice(i,1);\n\t\t\t\t}\n\t\t\t\tif (!t.length)\n\t\t\t\t\tdelete this._hotkeys[code];\n\t\t\t}\n\n\t\t}\n\t},\n\t_keycode: function(code, ctrl, shift, alt, meta) {\n\t\treturn code+\"_\"+[\"\", (ctrl ? '1' : '0'), (shift ? '1' : '0'), (alt ? '1' : '0'), (meta ? '1' : '0')].join('');\n\t},\n\n\t_check_keycode: function(code, is_any, e){\n\t\tvar focus = this.getFocus();\n\t\tif (this._hotkeys[code])\n\t\t\treturn  this._process_calls(this._hotkeys[code], focus, e);\n\t\telse if (is_any && this._hotkeys[\"ANY_0000\"])\n\t\t\treturn  this._process_calls(this._hotkeys[\"ANY_0000\"], focus, e);\n\n\t\treturn true;\n\t},\n\t_process_calls:function(calls, focus, e){\n\t\tfor (var i = 0; i < calls.length; i++) {\n\t\t\tvar key = calls[i];\n\t\t\tvar call = false;\n\t\t\tif ((key.view !== null) &&\t\t//common hot-key\n\t\t\t\t(focus !== key.view) &&\t\t//hot-key for current view\n\t\t\t\t//hotkey for current type of view\n\t\t\t\t(typeof(key.view) !== 'string' || !focus || focus.name !== key.view)) continue;\n\n\t\t\tvar temp_result = key.handler(focus, e);\n\t\t\tif (!!temp_result === temp_result) return temp_result;\n\t\t}\n\t\treturn true;\n\t},\n\t_parse_keys: function(keys) {\n\t\tvar controls = this._controls;\n\t\tvar parts = keys.toLowerCase().split(/[\\+\\-_]/);\n\t\tvar ctrl, shift, alt, meta;\n\t\tctrl = shift = alt = meta = 0;\n\t\tvar letter = \"\";\n\t\tfor (var i = 0; i < parts.length; i++) {\n\t\t\tif (parts[i] === 'ctrl') ctrl = 1;\n\t\t\telse if (parts[i] === 'shift') shift = 1;\n\t\t\telse if (parts[i] === 'alt') alt = 1;\n\t\t\telse if (parts[i] === 'command') meta = 1;\n\t\t\telse {\n\t\t\t\tif (controls[parts[i]]) {\n\t\t\t\t\tvar code = controls[parts[i]];\n\t\t\t\t\tif(this._isNumPad(code))\n\t\t\t\t\t\tletter = code.toString();\n\t\t\t\t\telse\n\t\t\t\t\t\tletter = String.fromCharCode(code);\n\t\t\t\t} else {\n\t\t\t\t\tletter = parts[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\tletter: letter.toUpperCase(),\n\t\t\tctrl: ctrl,\n\t\t\tshift: shift,\n\t\t\talt: alt,\n\t\t\tmeta: meta,\n\t\t\tdebug:keys\n\t\t};\n\t}\n};\n\nwebix.ready(function() {\n\twebix.UIManager._enable();\n\n\twebix.UIManager.addHotKey(\"enter\", function(view, ev){\n\t\tif (view && view.editStop && view._in_edit_mode){\n\t\t\tview.editStop();\n\t\t\treturn true;\n\t\t} else if (view && view.touchable){\n\t\t\tvar form = view.getFormView();\n\t\t\tif (form && !view._skipSubmit)\n\t\t\t\tform.callEvent(\"onSubmit\",[view,ev]);\n\t\t}\n\t});\n\twebix.UIManager.addHotKey(\"esc\", function(view){\n\t\tif (view){\n\t\t\tif (view.editCancel && view._in_edit_mode){\n\t\t\t\tview.editCancel();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tvar top = view.getTopParentView();\n\t\t\tif (top && top.setPosition)\n\t\t\t\ttop._hide();\n\t\t}\n\t});\n\twebix.UIManager.addHotKey(\"shift+tab\", webix.UIManager._tab_logic);\n\twebix.UIManager.addHotKey(\"tab\", webix.UIManager._tab_logic);\n});\n\nwebix.IdSpace = {\n\t$init:function(){\n\t\tthis._elements = {};\n\t\tthis._translate_ids = {};\n\t\tthis.getTopParentView = this._get_self = webix.bind(function(){ return this;}, this);\n\n\t\tthis._run_inner_init_logic();\n\t\tthis.$ready.push(this._run_after_inner_init_logic);\n\t},\n\t$$:function(id){\n\t\treturn this._elements[id];\n\t},\n\tinnerId:function(id){\n\t\treturn this._translate_ids[id];\n\t},\n\t_run_inner_init_logic:function(callback){\n\t\tthis._prev_global_col = webix._global_collection;\n\t\twebix._global_collection = this;\n\t},\n\t_run_after_inner_init_logic:function(temp){\n\t\tfor (var name in this._elements){\n\t\t\tvar input = this._elements[name];\n\t\t\tif (this.callEvent && input.mapEvent && !input._evs_map.onitemclick)\n\t\t\t\tinput.mapEvent({\n\t\t\t\t\tonitemclick:this\n\t\t\t\t});\n\t\t\tinput.getTopParentView = this._get_self;\n\t\t}\n\n\t\twebix._global_collection = this._prev_global_col;\n\t\tthis._prev_global_col = 0;\n\t},\n\t_destroy_child:function(id){\n\t\tdelete this._elements[id];\n\t},\n\tui:function(){\n\t\tthis._run_inner_init_logic();\n\t\tvar temp = webix.ui.apply(webix, arguments);\n\t\tthis._run_after_inner_init_logic();\n\t\treturn temp;\n\t}\n};\n\n\n(function(){\n\nvar resize = [];\nvar ui = webix.ui;\n\nif (!webix.ui){\n\tui = webix.ui = function(config, parent, id){\n\t\twebix._ui_creation = true;\n\t\tvar multiset = webix.isArray(config);\n\t\tvar node = webix.toNode((config.container||parent)||document.body);\n\n\t\t// solve problem with non-unique ids\n\t\tif(node._settings)\n\t\t\tid = _correctId(node, multiset, id);\n\n\t\tvar top_node;\n\t\tvar body_child = (node == document.body);\n\t\tif (config._settings || (node && multiset)){\n\t\t\ttop_node = config;\n\t\t} else {\n\t\t\tif (node && body_child)\n\t\t\t\tconfig.$topView = true;\n\t\t\tif (!config._inner)\n\t\t\t\tconfig._inner = {};\n\n\t\t\ttop_node = ui._view(config);\n\t\t}\n\n\t\tif (body_child && !top_node.setPosition && !top_node.$apiOnly)\n\t\t\twebix.ui._fixHeight();\n\n\t\tif (top_node._settings && top_node._settings._hidden && !node.$view){\n\t\t\ttop_node._settings._container = node;\n\t\t} else if (!top_node.$apiOnly){\n\t\t\tif (node.appendChild)\n\t\t\t\t_appendDom(node, top_node, config);\n\t\t\telse if (node.destructor){\n\t\t\t\tvar target = node;\n\n\t\t\t\t//addView or view moving with target id\n\t\t\t\tif (!id && id!==0 && !webix.isArray(top_node)){\n\t\t\t\t\tid = node;\n\t\t\t\t\tnode = node.getParentView();\n\t\t\t\t}\n\n\t\t\t\t//if target supports view adding\n\t\t\t\tif (node && node._replace){\n\t\t\t\t\t//if source supports view removing\n\t\t\t\t\tif (top_node.getParentView && top_node.getParentView())\n\t\t\t\t\t\ttop_node.getParentView()._remove(top_node);\n\n\t\t\t\t\tnode._replace(top_node, id);\n\t\t\t\t} else {\n\t\t\t\t\tvar parent = target.$view.parentNode;\n\t\t\t\t\ttarget.destructor();\n\t\t\t\t\t_appendDom(parent, top_node, config);\n\t\t\t\t}\n\t\t\t} else\n\t\t\t\twebix.assert_error(\"Not existing parent:\"+config.container);\n\t\t}\n\t\t\n\t\twebix._ui_creation = false;\n\t\treturn top_node;\n\t};\n\n\tvar _appendDom = function(node, top_node, config){\n\t\tnode.appendChild(top_node._viewobj);\n\t\t//resize window with position center or top\n\t\t//do not resize other windows and elements\n\t\t// which are attached to custom html containers\n\t\tif (((!top_node.setPosition || top_node._settings.fullscreen) && node == document.body) || top_node._settings.position )\n\t\t\tresize.push(top_node._destructor_handler);\n\t\tif (!config.skipResize)\n\t\t\ttop_node.adjust();\n\t};\n\n\tvar _correctId = function(target, multiset, id){\n\t\t//replace view\n\t\tvar views = [target];\n\t\t//replace content of layout\n\t\tif (multiset)\n\t\t\tviews = target.getChildViews();\n\t\t//replace content of window\n\t\telse if (target._body_cell)\n\t\t\tviews = [target._body_cell];\n\t\t//add cell in layout by number\n\t\telse if (typeof id == \"number\"){\n\t\t\treturn id;\n\t\t//replace cell in layout by id\n\t\t} else if (id){\n\t\t\tviews = [webix.$$(id)];\n\t\t\t_deleteIds(views);\n\t\t\treturn views[0].config.id;\n\t\t}\n\n\t\t_deleteIds(views);\n\t\treturn id;\n\t};\n\n\tvar _deleteIds = function(views){\n\t\tfor (var i = views.length - 1; i >= 0; i--){\n\t\t\t//remove original id\n\t\t\tdelete webix.ui.views[views[i].config.id];\n\t\t\t//create temp id\n\t\t\tviews[i].config.id = \"x\"+webix.uid();\n\t\t\twebix.ui.views[views[i].config.id] = views[i];\n\t\t\t//process childs\n\t\t\t_deleteIds(views[i].getChildViews());\n\t\t}\n\t};\n}\n\nwebix.ui.animate = function(ui, parent, config){\n\tvar pobj = webix.$$(parent);\n\tif (pobj){\n\t\tvar aniset = config || { type:\"slide\", direction:\"left\" };\n\t\tvar d = pobj._viewobj.cloneNode(true);\n\t\tvar view = webix.ui(ui, parent);\n\n\t\tview._viewobj.parentNode.appendChild(d);\n\t\tvar line = webix.animate.formLine(\n\t\t\tview._viewobj,\n\t\t\td,\n\t\t\taniset\n\t\t);\n\n\t\taniset.callback = function(){\n\t\t\twebix.animate.breakLine(line);\n\t\t};\n\t\twebix.animate(line, aniset);\n\n\t\treturn view;\n\t}\n};\n\nwebix.ui.animateView = function(view, stateHandler, config){\n\tview = webix.$$(view);\n\tif (view){\n\t\tconfig = config || { type:\"slide\", direction:\"left\" };\n\n\t\tvar getHTML = function(view){\n\t\t\tvar el = view._viewobj;\n\t\t\tvar css = el.className;\n\t\t\tvar content =el.innerHTML;\n\t\t\treturn \"<div class='\"+css+\"' style='width:\"+el.offsetWidth+\"px;height:\"+el.offsetHeight+\"px;'>\"+content+\"</div>\";\n\t\t};\n\n\t\t// get 'display' state of child nodes\n\t\tvar display = [];\n\t\tfor(var i =0; i< view._viewobj.childNodes.length;i++){\n\t\t\tvar node = view._viewobj.childNodes[i];\n\t\t\tvar value = node.currentStyle ?node.currentStyle.display : getComputedStyle(node, null).display;\n\t\t\tdisplay.push(value||\"\");\n\t\t}\n\t\t// get current html content\n\t\tvar currentState = getHTML(view);\n\n\t\t// apply new state\n\t\tif(typeof stateHandler == \"function\"){\n\t\t\tstateHandler.call(this);\n\t\t}\n\n\t\t// get new html content\n\t\tvar newState = getHTML(view);\n\n\t\t// insert elements into the view\n\t\tvar tempParent = view._viewobj.insertBefore(webix.html.create(\"DIV\",{\n\t\t\t\"class\" : \"webix_view_animate\",\n\t\t\t\"style\" : \"width:\"+view._viewobj.offsetWidth+\"px;height:\"+view._viewobj.offsetHeight+\"px;\"\n\t\t}, newState+currentState),view._viewobj.firstChild);\n\n\t\t// hide child nodes\n\t\tfor(var i =1; i< view._viewobj.childNodes.length;i++){\n\t\t\tview._viewobj.childNodes[i].style.display = \"none\";\n\t\t}\n\n\t\t// animate inserted elements\n\t\tvar line = webix.animate.formLine(\n\t\t\ttempParent.childNodes[0],\n\t\t\ttempParent.childNodes[1],\n\t\t\tconfig\n\t\t);\n\t\tconfig.callback = function(){\n\t\t\tif(tempParent){\n\t\t\t\tview._viewobj.removeChild(tempParent);\n\t\t\t\ttempParent = null;\n\t\t\t\t// restore 'display' state of child nodes\n\t\t\t\tfor(var i =0; i< view._viewobj.childNodes.length;i++){\n\t\t\t\t\tview._viewobj.childNodes[i].style.display = display[i];\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\twebix.animate(line, config);\n\n\t\treturn view;\n\t}\n};\n\n/*called in baseview $init for calculate scrollSize*/\nwebix.ui._detectScrollSize = function(){\n\tvar div = webix.html.create(\"div\");\n\tdiv.className = \"webix_skin_mark\";\n\tdiv.style.cssText=\"position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;min-height:100px;overflow-y:scroll;\";\n\n\tdocument.body.appendChild(div);\n\tvar width = div.offsetWidth-div.clientWidth;\n\tvar skin = { 110:\"air\", 120:\"aircompact\", 130:\"clouds\", 140:\"web\", 150:\"terrace\", 160:\"metro\", 170:\"light\", 180:\"glamour\", 190:\"touch\", 200:\"flat\" , 210:\"compact\", 220:\"material\", 230: \"contrast\" }[Math.floor(div.offsetHeight/10)*10];\n\tdocument.body.removeChild(div);\n\n\tif (skin){\n\t\tvar skinobj = webix.skin[skin];\n\t\tif (skinobj && skinobj != webix.skin.$active)\n\t\t\twebix.skin.set(skin);\n\t}\n\n\tif (webix.env.$customScroll) return 0;\n\treturn width;\n};\nwebix.ui.scrollSize = ((webix.env.touch||webix.env.$customScroll)?0:17);\nwebix.ready(function(){\n\tvar size = webix.ui._detectScrollSize();\n\twebix.ui.scrollSize = webix.env.touch ? 0 : size;\n});\n\nwebix.ui._uid = function(name){\n\treturn \"$\"+name+(this._namecount[name] = (this._namecount[name]||0)+1);\n};\nwebix.ui._namecount = {};\n\nwebix.ui._fixHeight = function (){\n\twebix.html.addStyle(\"html, body{ height:100%; }\");\n\tdocument.body.className+=\" webix_full_screen\";\n\twebix.ui._fixHeight = function(){};\n\twebix.Touch.limit(false);\n};\nwebix.ui.resize = function(){\n\twebix.UIManager.applyChanges();\n\twebix.callEvent(\"onClick\",[]);\n\tif (!webix.ui.$freeze)\n\t\tfor (var i=resize.length - 1; i>=0; i--){\n\t\t\tif (resize[i].obj)\n\t\t\t\tresize[i].obj.adjust();\n\t\t}\n};\nwebix.ui.each = function(parent, logic, master, include){\n\tif (parent){\n\t\tvar children = include ? [parent] : parent.getChildViews();\n\t\tfor (var i = 0; i < children.length; i++){\n\t\t\tif (logic.call((master || webix), children[i]) !== false)\n\t\t\t\twebix.ui.each(children[i], logic, master);\n\t\t}\n\t}\n};\nwebix.event(window, \"resize\", function() {\n\t// check for virtual keyboard\n\tif(webix.env.touch && ( webix.edit_open_time && (new Date())-webix.edit_open_time < 750 || webix._focus_time && (new Date())-webix._focus_time < 750)){\n\t\t//workaround for android chrome bug with scrolling to the focused input if overflow:hidden on container\n\t\tif(webix.env.isWebKit && document.activeElement){\n\t\t\tvar wactiv = webix.$$(document.activeElement);\n\t\t\tif (wactiv && wactiv.getInputNode && document.activeElement.scrollIntoView)\n\t\t\t\tdocument.activeElement.scrollIntoView();\n\t\t}\n\t\treturn;\n\t} else {\n\t\twebix.ui.resize();\n\t}\n});\n\nui._delays = {};\nui.delay = function(config){\n\twebix.ui._delays[config.id] = config;\n};\nui.hasMethod = function(view, method){\n\tvar obj = webix.ui[view];\n\tif (!obj) return false;\n\n\tif (obj.$protoWait)\n\t\tobj = obj.call(webix);\n\n\treturn !!webix.ui[view].prototype[method];\n};\nwebix.ui.zIndex = function(){\n\treturn webix.ui.zIndexBase++;\n};\nwebix.ui.zIndexBase = 100;\n\nui._view = function(config){\n\twebix.assert_config(config);\n\tif (config.view){\n\t\tvar view = config.view;\n\t\twebix.assert(ui[view], \"unknown view:\"+view);\n\t\treturn new ui[view](config);\n\t} else if (config.rows || config.cols){\n\t\tvar cells = config.rows||config.cols;\n\t\tvar accordion = false;\n\t\tfor (var i=0; i<cells.length; i++){\n\t\t\tif (cells[i].body && !cells[i].view && !cells[i].align)\n\t\t\t\taccordion = true;\n\t\t}\n\t\tif (accordion){\n\t\t\treturn new ui.headerlayout(config);\n\t\t} else\n\t\t\treturn new ui.layout(config);\n\t}\n\telse if (config.cells)\n\t\treturn new ui.multiview(config);\n\telse if (config.template || config.content)\n\t\treturn new ui.template(config);\t\n\telse if (config.align && config.body){\n\t\treturn new ui.align(config);\n\t} else return new ui.spacer(config);\n};\n\nui.views = {};\nwebix.$$ = function(id){\n\tif (!id) return null;\n\t\n\tif (ui.views[id]) return ui.views[id];\n\tif (ui._delays[id]) return webix.ui(ui._delays[id]);\n\t\n\tvar name = id;\n\tif (typeof id == \"object\"){\n\t\tif (id._settings)\n\t\t\treturn id;\n\t\tname = (id.target||id.srcElement)||id;\n\t}\n\treturn ui.views[webix.html.locate({ target:webix.toNode(name)},\"view_id\")];\n};\nif (webix.isUndefined(window.$$)) window.$$=webix.$$;\n\nwebix.UIExtension = window.webix_view||{};\n\nwebix.protoUI({\n\tname:\"baseview\",\n\t//attribute , which will be used for ID storing\n\t$init:function(config){\n\t\tif (!config.id) \n\t\t\tconfig.id = webix.ui._uid(this.name);\n\t\t\n\t\tthis._parent_cell = webix._parent_cell;\n\t\twebix._parent_cell = null;\n\n\t\tthis.$scope = config.$scope || (this._parent_cell ? this._parent_cell.$scope : null);\n\t\t\n\t\tif (!this._viewobj){\n\t\t\tthis._contentobj = this._viewobj = webix.html.create(\"DIV\",{\n\t\t\t\t\"class\":\"webix_view\"\n\t\t\t});\n\t\t\tthis.$view = this._viewobj;\n\t\t}\n\t},\n\t$skin:false,\n\tdefaults:{\n\t\twidth:0,\n\t\theight:0,\n\t\tgravity:1\n\t},\n\tgetNode:function(){\n\t\treturn this._viewobj;\n\t},\n\tgetParentView:function(){\n\t\treturn this._parent_cell||null;\t\n\t},\n\tgetTopParentView:function(){\n\t\tvar parent = this.getParentView();\n\t\treturn parent ? parent.getTopParentView() :  this;\n\t},\n\tgetFormView:function(){\n\t\tvar parent = this.getParentView();\n\t\treturn (!parent || parent.setValues) ? parent : parent.getFormView();\n\t},\n\tgetChildViews:function(){ return []; },\n\tisVisible:function(base_id, prev_id){\n\t\tif (this._settings.hidden){\n            if(base_id){\n                if (!this._hidden_render) {\n                    this._hidden_render = [];\n                    this._hidden_hash = {};\n                }\n                if (!this._hidden_hash[base_id]){\n                    this._hidden_hash[base_id] =  true;\n                    this._hidden_render.push(base_id);\n                }\n            }\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tvar parent = this.getParentView();\n\t\tif (parent) return parent.isVisible(base_id, this._settings.id);\n\t\t\n\t\treturn true;\n\t},\n\tisEnabled:function(){\n\t\tif(this._disable_cover)\n\t\t\treturn false;\n\n\t\tvar parent= this.getParentView();\n\t\tif(parent)\n\t\t\treturn parent.isEnabled();\n\n\t\treturn true;\n\t},\n\tdisable:function(){\n\t\twebix.html.remove(this._disable_cover);\n\t\tthis._settings.disabled = true;\n\n\t\tthis._disable_cover = webix.html.create('div',{\n\t\t\t\"class\":\"webix_disabled\"\n\t\t});\n\n\t\tif(window.getComputedStyle)\n\t\t\tthis._disabled_view_pos = window.getComputedStyle(this._viewobj, null).getPropertyValue(\"position\");\n\t\t\n\t\tif (this._disabled_view_pos != \"absolute\")\n\t\t\tthis._viewobj.style.position = \"relative\";\n\t\tthis._viewobj.appendChild(this._disable_cover);\n\t\tthis._viewobj.setAttribute(\"aria-disabled\", \"true\");\n\t\twebix.html.addCss(this._viewobj,\"webix_disabled_view\",true);\n\t\twebix.UIManager._moveChildFocus(this);\n\t},\n\tenable:function(){\n\t\tthis._settings.disabled = false;\n\n\t\tif (this._disable_cover){\n\t\t\twebix.html.remove(this._disable_cover);\n\t\t\twebix.html.removeCss(this._viewobj,\"webix_disabled_view\");\n\t\t\tthis._viewobj.removeAttribute(\"aria-disabled\");\n\t\t\tthis._disable_cover = null;\n\t\t\tif(this._disabled_view_pos)\n\t\t\t\tthis._viewobj.style.position = this._disabled_view_pos;\n\t\t}\n\t},\n\tdisabled_setter:function(value){\n\t\tif (value)\n\t\t\tthis.disable();\n\t\telse\n\t\t\tthis.enable();\n\t\treturn value;\n\t},\n\tcontainer_setter:function(value){\n\t\twebix.assert(webix.toNode(value),\"Invalid container\");\n\t\treturn true;\n\t},\n\tcss_setter:function(value){\n\t\tif (typeof value == \"object\")\n\t\t\tvalue = webix.html.createCss(value);\n\n\t\tthis._viewobj.className += \" \"+value;\n\t\treturn value;\n\t},\n\tid_setter:function(value){\n\t\tif (webix._global_collection && (webix._global_collection != this || this._prev_global_col)){\n\t\t\tvar oldvalue = this.config.$id = value;\n\t\t\t(this._prev_global_col || webix._global_collection)._elements[value] = this;\n\t\t\tvalue = webix.ui._uid(this.name);\n\t\t\t(this._prev_global_col || webix._global_collection)._translate_ids[value]=oldvalue;\n\t\t}\n\t\twebix.assert(!webix.ui.views[value], \"Non unique view id: \"+value);\n\t\twebix.ui.views[value] = this;\n\t\tthis._viewobj.setAttribute(\"view_id\", value);\n\t\treturn value;\n\t},\n\t$setSize:function(x,y){\n\t\tvar last = this._last_size;\n\t\tif (last && last[0]==x && last[1]==y) {\n\t\t\twebix.debug_size_box(this, [x,y,\"not changed\"]);\n\t\t\treturn false;\n\t\t}\n\n\t\twebix.debug_size_box(this, [x,y]);\n\t\t\n\t\tthis._last_size = [x,y];\n\t\tthis.$width  = this._content_width = x-(this._scroll_y?webix.ui.scrollSize:0);\n\t\tthis.$height = this._content_height = y-(this._scroll_x?webix.ui.scrollSize:0);\n\n\t\tvar config = this._settings;\n\t\tif (!config.flex){\n\t\t\tthis._viewobj.style.width = x+\"px\";\n\t\t\tthis._viewobj.style.height = y+\"px\";\n\t\t}\n\n\t\treturn true;\n\t},\n\t$getSize:function(dx, dy){\n\t\tvar s = this._settings;\n\n\t\tvar size = [\n\t\t\t(s.width || s.minWidth || 0)*1,\n\t\t\t(s.width || s.maxWidth || 100000)*1,\n\t\t\t(s.height || s.minHeight || 0)*1,\n\t\t\t(s.height || s.maxHeight || 100000)*1,\n\t\t\ts.gravity\n\t\t];\n\n\t\tif (webix.assert){\n\t\t\tvar check = (isNaN(size[0]) || isNaN(size[1]) || isNaN(size[2]) || isNaN(size[3]));\n\t\t\tif (check){\n\t\t\t\twebix.assert(false, \"Size is not a number \"+this._settings.id);\n\t\t\t\ts.width = s.height = s.maxWidth = s.maxHeight = s.minWidth = s.minHeight = 0;\n\t\t\t\tsize = [0,0,100000,100000,1];\n\t\t\t}\n\t\t}\n\n\t\tsize[0]+=dx; size[1]+=dx;\n\t\tsize[2]+=dy; size[3]+=dy;\n\t\treturn size;\n\t},\n\tshow:function(force, animate_settings){\n\t\tvar parent = this.getParentView();\n        var show = !arguments[2];\n\t\tif (parent) {\n\t\t\tif(!animate_settings && animate_settings !== false && this._settings.animate)\n\t\t\t\tif (parent._settings.animate)\n\t\t\t\t\tanimate_settings = webix.extend((parent._settings.animate?webix.extend({},parent._settings.animate):{}), this._settings.animate, true);\n\n\t\t\tif (show?parent._show:parent._hide)\n\t\t\t\t(show?parent._show:parent._hide).call(parent, this, animate_settings);\n\t\t\tif (show)\n\t\t\t\tthis._render_hidden_views();\n\n\t\t\t//force show of parent view\n\t\t\t//stop further processing is view is a part of isolated scope\n\t\t\tif (force && show)  \n\t\t\t\tparent.show(parent.$$?false:force);\n\t\t}\n        else{\n            if (this._settings.hidden){\n            \tif (show){\n            \t\tvar node = webix.toNode(this._settings._container||document.body);\n        \t\t\tnode.appendChild(this._viewobj);\n        \t\t\tthis._settings.hidden = false;\n\n        \t\t\tthis.adjust();\n        \t\t\tthis._render_hidden_views();\n            \t}\n            } else {\n            \tif (!show){\n            \t\tthis._settings.hidden = this._settings._hidden = true;\n            \t\tif (this._viewobj){\n            \t\t\tthis._settings._container = this._viewobj.parentNode;\n        \t\t\t\twebix.html.remove(this._viewobj);\n        \t\t\t}\n            \t}\n            }\n        }\n\t},\n\t_render_hidden_views:function(){\n\t\tif (this._hidden_render){\n\t\t\tfor (var i=0; i < this._hidden_render.length; i++){\n\t\t\t\tvar ui_to_render = webix.$$(this._hidden_render[i]);\n\t\t\t\tif (ui_to_render)\n\t\t\t\t\tui_to_render.render();\n\t\t\t}\n\t\t\tthis._hidden_render = [];\n\t\t\tthis._hidden_hash = {};\n\t\t}\n\t},\n\t_onKeyPress:function(code, e){\n\t\tvar target = e.srcElement || e.target, role = target.getAttribute(\"role\");\n\n\t\tif((code === 13 || code === 32) && role == \"button\" && !this._settings.disabled){\n\t\t\twebix.html.triggerEvent(target, \"MouseEvents\", \"click\");\n\t\t\twebix.html.preventEvent(e);\n\t\t}\n\t},\n\thidden_setter:function(value){\n\t\tif (value) this.hide();\n\t\treturn this._settings.hidden;\n\t},\n\thide:function(){\n\t\tthis.show(null, null, true);\n\t\twebix.UIManager._moveChildFocus(this);\n\t},\n\tadjust:function(){\n\t\tif(!this._viewobj.parentNode)\n\t\t\treturn false;\n\n\t\tvar x = this._viewobj.parentNode.clientWidth||0;\n\t\tvar y = this._viewobj.parentNode.clientHeight||0;\n\n\t\tvar sizes=this.$getSize(0,0);\n\t\tvar fullscreen = (this._viewobj.parentNode == document.body) && !this.setPosition;\n\n\t\t//minWidth\n\t\tif (sizes[0]>x) x = sizes[0];\n\t\t//minHeight\n\t\tif (sizes[2]>y) y = sizes[2];\n\n\t\t//maxWidth rule\n\t\tif ((!fullscreen || this._settings.width)  && x>sizes[1]) x = sizes[1];\n\t\t//maxHeight rule\n\t\tif ((!fullscreen || this._settings.height) && y>sizes[3]) y = sizes[3];\n\n\t\tthis.$setSize(x,y);\n\t\tif (webix._responsive_exception){\n\t\t\twebix._responsive_exception = false;\n\t\t\tthis.adjust();\n\t\t}\n\t},\n\tresize:function(force){\n\t\tif (webix._child_sizing_active || webix.ui.$freeze || webix._responsive_tinkery ) return;\n\n\t\tvar parent = this.getParentView();\n\t\tif (parent){\n\t\t\tif (parent.resizeChildren)\n\t\t\t\tparent.resizeChildren();\n\t\t\telse\n\t\t\t\tparent.resize();\n\t\t} else {\n\t\t\tthis.adjust();\n\t\t\twebix.callEvent(\"onResize\",[]);\n\t\t}\n\t}\n}, webix.Settings, webix.Destruction, webix.BaseBind, webix.UIExtension);\n\n\n\n/*\n\tdon't render borders itself , but aware of layout , which can set some borders\n*/\nwebix.protoUI({\n\tname:\"view\",\n\t$init:function(config){\n\t\tthis._set_inner(config);\n\t},\n\n\t//deside, will component use borders or not\n\t_set_inner:function(config){\n\t\tvar border_not_set = webix.isUndefined(config.borderless);\n\t\tif (border_not_set && !this.setPosition && config.$topView){\n\t\t\tconfig.borderless = true;\n\t\t\tborder_not_set = false;\n\t\t}\n\n\t\tif ((border_not_set && this.defaults.borderless) || config.borderless){\n\t\t\t//button and custom borderless\n\t\t\tconfig._inner = { top:true, left:true, bottom:true, right:true };\n\t\t} else {\n\t\t\t//default borders\n\t\t\tif (!config._inner)\n\t\t\t\tconfig._inner = {};\n\t\t\tthis._contentobj.style.borderWidth=\"1px\";\n\t\t}\n\t},\n\n\t$getSize:function(dx, dy){\n\n\t\tvar _borders = this._settings._inner;\n\t\tif (_borders){\n\t\t\tdx += (_borders.left?0:1)+(_borders.right?0:1);\n\t\t\tdy += (_borders.top?0:1)+(_borders.bottom?0:1);\n\t\t}\n\t\t\n\t\tvar size = webix.ui.baseview.prototype.$getSize.call(this, dx, dy);\n\t\t\n\t\twebix.debug_size_box(this, size, true);\n\t\treturn size;\n\t},\n\t$setSize:function(x,y){\n\t\twebix.debug_size_box(this, [x,y]);\n\t\t\t\n\t\tvar _borders = this._settings._inner;\n\t\tif (_borders){\n\t\t\tx -= (_borders.left?0:1)+(_borders.right?0:1);\n\t\t\ty -= (_borders.top?0:1)+(_borders.bottom?0:1);\n\t\t}\n\t\t\t\n\t\treturn webix.ui.baseview.prototype.$setSize.call(this,x,y);\n\t}\n}, webix.ui.baseview);\n\n})();\n\nwebix.ui.view.call(webix);\n\nwebix.debug_size_indent = 0;\nwebix.debug_size_step = function(){\n\tvar str = \"\";\n\tfor (var i=0; i<webix.debug_size_indent; i++)\n\t\tstr+=\"|  \";\n\treturn str;\n};\nwebix.debug_size_box_start = function(comp, get){\n\tif (!webix.debug_size) return;\n\tif (!webix.debug_size_indent)\n\t\twebix.log(get?\"--- get sizes ---\":\"--- set sizes ---\");\n\twebix.log(webix.debug_size_step()+comp.name+\"@\"+comp.config.id);\n\twebix.debug_size_indent++;\n};\nwebix.debug_size_box_end = function(comp, sizes){\n\tif (!webix.debug_size) return;\n\twebix.debug_size_indent--;\n\twebix.log(webix.debug_size_step()+sizes.join(\",\"));\n};\n\nwebix.debug_size_box = function(comp, sizes, get){\n\tif (!webix.debug_size) return;\n\tif (!webix.debug_size_indent)\n\t\twebix.log(get?\"--- get sizes ---\":\"--- set sizes ---\");\n\twebix.log(webix.debug_size_step()+comp.name+\"@\"+comp.config.id+\" \"+sizes.join(\",\"));\n};\n\nwebix.protoUI({\n\tname:\"spacer\",\n\tdefaults:{\n\t\tborderless:true\n\t},\n\t$init:function(){\n\t\tthis._viewobj.className += \" webix_spacer\";\n\t}\n}, webix.ui.view);\n\nwebix.protoUI({\n\tname:\"baselayout\",\n\t$init:function(config){\n\t\tthis.$ready.push(this._parse_cells);\n\t\tthis._dataobj  = this._contentobj;\n\t\tthis._layout_sizes = [];\n\t\tthis._responsive = [];\n\n\t\tif (config.$topView){\n\t\t\tconfig.borderless = true;\n\t\t\tconfig._inner = { top:true, left:true, bottom:true, right:true };\n\t\t}\n\n\t\tif (config.isolate)\n\t\t\twebix.extend(this, webix.IdSpace);\n\t},\n\trows_setter:function(value){\n\t\tthis._vertical_orientation = 1;\n\t\tthis._collection = value;\n\t},\n\tcols_setter:function(value){\n\t\tthis._vertical_orientation = 0;\n\t\tthis.$view.style.whiteSpace = \"nowrap\";\n\t\tthis._collection = value;\n\t},\n\t_remove:function(view){\n\t\twebix.PowerArray.removeAt.call(this._cells, webix.PowerArray.find.call(this._cells, view));\n\t\tthis.resizeChildren(true);\n\t},\n\t_replace:function(new_view,target_id){\n\t\tif (webix.isUndefined(target_id)){\n\t\t\tfor (var i=0; i < this._cells.length; i++)\n\t\t\t\tthis._cells[i].destructor();\n\t\t\tthis._collection = new_view;\n\t\t\tthis._parse_cells();\n\t\t} else {\n\t\t\tvar source;\n\t\t\tif (typeof target_id == \"number\"){\n\t\t\t\tif (target_id<0 || target_id > this._cells.length)\n\t\t\t\t\ttarget_id = this._cells.length;\n\t\t\t\tvar prev_node = (this._cells[target_id]||{})._viewobj;\n\t\t\t\twebix.PowerArray.insertAt.call(this._cells, new_view, target_id);\n\t\t\t\tif (!new_view._settings.hidden)\n\t\t\t\t\twebix.html.insertBefore(new_view._viewobj, prev_node, this._dataobj);\n\t\t\t} else {\n\t\t\t\tsource = webix.$$(target_id);\n\t\t\t\ttarget_id = webix.PowerArray.find.call(this._cells, source);\n\t\t\t\twebix.assert(target_id!=-1, \"Attempt to replace the non-existing view\");\n\t\t\t\tvar parent = source._viewobj.parentNode;\n\t\t\t\tif (parent && !new_view._settings.hidden)\n\t\t\t\t\tparent.insertBefore(new_view._viewobj, source._viewobj);\n\n\t\t\t\tsource.destructor();\t\n\t\t\t\tthis._cells[target_id] = new_view;\n\t\t\t}\n\n\t\t\tif (!this._vertical_orientation)\n\t\t\t\tthis._fix_vertical_layout(new_view);\n\t\t\t\n\t\t\tthis._cells[target_id]._parent_cell = this;\n\t\t}\n\t\tthis.resizeChildren(true);\n\n\t\tvar form = this.elements ? this : this.getFormView();\n\t\tif (form) form._recollect_elements();\n\n\t\twebix.callEvent(\"onReconstruct\",[this]);\n\t},\n\t_fix_vertical_layout:function(cell){\n\t\tcell._viewobj.style.display = \"inline-block\";\n\t\tcell._viewobj.style.verticalAlign = \"top\";\n\t},\n\taddView:function(view, index){\n\t\tif (webix.isUndefined(index))\n\t\t\tindex = this._cells.length;\n\t\tvar top = this.$$ ? this : this.getTopParentView();\n\t\ttop = (top && top.ui) ? top : webix;\n\t\treturn top.ui(view, this, index)._settings.id;\n\t},\n\tremoveView:function(id){\n\t\tvar view;\n\t\tif (typeof id != \"object\")\n\t\t\tview = webix.$$(id) || (this.$$ ? this.$$(id) : null);\n\t\telse\n\t\t\tview = id;\n\n\t\tvar target = webix.PowerArray.find.call(this._cells, view);\n\t\tif (target >= 0){\n\t\t\tif (this._beforeRemoveView)\n\t\t\t\tthis._beforeRemoveView(target, view);\n\n\t\t\tvar form = this.elements ? this : this.getFormView();\n\n\t\t\tthis._cells.splice(target, 1);\n\t\t\tif (form)\n\t\t\t\twebix.ui.each(view, function(sub){\n\t\t\t\t\tif (sub.name)\n\t\t\t\t\t\tdelete form.getCleanValues()[sub.config.name];\n\t\t\t\t}, form, true);\t\t\t\t\n\n\t\t\tview.destructor();\n\t\t\tthis.resizeChildren(true);\n\t\t\t\n\t\t\tif (form)\n\t\t\t\tform._recollect_elements();\n\t\t} else\n\t\t\twebix.assert(false, \"Attemp to remove not existing view: \"+id);\n\n\t\twebix.callEvent(\"onReconstruct\",[this]);\n\t},\n\treconstruct:function(){\n\t\tthis._hiddencells = 0;\n\t\tthis._replace(this._collection);\n\t},\n\t_hide:function(obj, settings, silent){\n\t\tif (obj._settings.hidden) return;\n\t\tobj._settings.hidden = true;\n\t\twebix.html.remove(obj._viewobj);\n        this._hiddencells++;\n\t\tif (!silent && !webix._ui_creation)\n\t\t\tthis.resizeChildren(true);\t\n\t},\n\t_signal_hidden_cells:function(view){\n\t\tif (view.callEvent)\n\t\t\tview.callEvent(\"onViewShow\",[]);\n\t},\n\tresizeChildren:function(){\n\t\tif (webix.ui.$freeze) return;\n\n\t\tif (this._layout_sizes){\n\t\t\tvar parent = this.getParentView();\n\t\t\tif (parent){\n\t\t\t\tif (parent.resizeChildren)\n\t\t\t\t\treturn parent.resizeChildren();\n\t\t\t\telse\n\t\t\t\t\treturn parent.resize();\n\t\t\t}\n\t\t\t\t\n\t\t\tvar sizes = this.$getSize(0,0);\n\n\t\t\tvar x,y,nx,ny;\n\t\t\tnx = x = this._layout_sizes[0] || 0;\n\t\t\tny = y = this._layout_sizes[1] || 0;\n\n\t\t\t//for auto-fill content, use adjust strategy\n\t\t\tif ((sizes[1]>=100000 || sizes[3] >= 100000) && this._viewobj.parentNode){\n\t\t\t\t//in hidden container adjust doesn't work, so fallback to last known size\n\t\t\t\t//also, ensure that min-size is not violated\n\t\t\t\tnx = x = Math.max(sizes[0], (this._settings.width || this._viewobj.parentNode.offsetWidth || x || 0));\n\t\t\t\tny = y = Math.max(sizes[2], (this._settings.height || this._viewobj.parentNode.offsetHeight || y || 0));\n\t\t\t}\n\t\t\t\n\t\t\tif (!parent){\n\t\t\t\t//minWidth\n\t\t\t\tif (sizes[0]>x) nx = sizes[0];\n\t\t\t\t//minHeight\n\t\t\t\tif (sizes[2]>y) ny = sizes[2];\n\n\t\t\t\t//maxWidth rule\n\t\t\t\tif (x>sizes[1]) nx = sizes[1];\n\t\t\t\t//maxHeight rule\n\t\t\t\tif (y>sizes[3]) ny = sizes[3];\n\n\t\t\t\tthis.$setSize(nx,ny);\n\t\t\t} else\n\t\t\t\tthis._set_child_size(x,y);\n\n\t\t\tif (webix._responsive_exception){\n\t\t\t\twebix._responsive_exception = false;\n\t\t\t\tthis.resizeChildren();\n\t\t\t}\n\n\t\t\twebix.callEvent(\"onResize\",[]);\n\t\t}\n\t},\n\tgetChildViews:function(){\n\t\treturn this._cells;\n\t},\n\tindex:function(obj){\n\t\tif (obj._settings)\n\t\t\tobj = obj._settings.id;\n\t\tfor (var i=0; i < this._cells.length; i++)\n\t\t\tif (this._cells[i]._settings.id == obj)\n\t\t\t\treturn i;\n\t\treturn -1;\n\t},\n\t_show:function(obj, settings, silent){\n\n\t\tif (!obj._settings.hidden) return;\n\t\tobj._settings.hidden = false;\n\n        //index of sibling cell, next to which new item will appear\n        var index = this.index(obj)+1;\n        //locate nearest visible cell\n        while (this._cells[index] && this._cells[index]._settings.hidden) index++;\n        var view = this._cells[index] ? this._cells[index]._viewobj : null;\n\n        webix.html.insertBefore(obj._viewobj, view, (this._dataobj||this._viewobj));\n        this._hiddencells--;\n\n        if (!silent){\n            this.resizeChildren(true);\n            if (obj.refresh)\n                obj.refresh();\n        }\n\n        if (obj.callEvent){\n        \tobj.callEvent(\"onViewShow\", []);\n\t\t\twebix.ui.each(obj, this._signal_hidden_cells);\n\t\t}\n\t},\n\tshowBatch:function(name, mode){\n\t\tvar preserve = typeof mode != \"undefined\";\n\t\tmode = mode !== false;\n\n\t\tif (!preserve){\n\t\t\tif (this._settings.visibleBatch == name ) return;\n\t\t\tthis._settings.visibleBatch = name;\n\t\t} else \n\t\t\tthis._settings.visibleBatch = \"\";\n\n\t\tvar show = [];\n\t\tfor (var i=0; i < this._cells.length; i++){\n\t\t\tif (!this._cells[i]._settings.batch) \n\t\t\t\tshow.push(this._cells[i]);\n\t\t\telse if (this._cells[i]._settings.batch == name){\n\t\t\t\tif (mode)\n\t\t\t\t\tshow.push(this._cells[i]);\n\t\t\t\telse\n\t\t\t\t\tthis._hide(this._cells[i], null, true);\n\t\t\t} else if (!preserve)\n\t\t\t\tthis._hide(this._cells[i], null, true);\n\t\t}\n\n\t\tfor (var i=0; i < show.length; i++){\n\t\t\tthis._show(show[i], null, true);\n\t\t\tshow[i]._render_hidden_views();\n\t\t}\n\t\t\t\n\t\tthis.resizeChildren(true);\n\t},\n\t_parse_cells:function(collection){\n\t\tthis._cells=[];\n\n\t\twebix.assert(collection,this.name+\" was incorrectly defined. <br><br> You have missed rows|cols|cells|elements collection\"); \n\t\tfor (var i=0; i<collection.length; i++){\n\t\t\twebix._parent_cell = this;\n\t\t\tif (!collection[i]._inner)\n\t\t\t\tcollection[i].borderless = true;\n\n\t\t\tthis._cells[i]=webix.ui._view(collection[i], this);\n\t\t\tif (!this._vertical_orientation)\n\t\t\t\tthis._fix_vertical_layout(this._cells[i]);\n\t\t\t\n\t\t\tif (this._settings.visibleBatch && this._settings.visibleBatch != this._cells[i]._settings.batch && this._cells[i]._settings.batch){\n\t\t\t\tthis._cells[i]._settings.hidden = true;\n\t\t\t\tthis._hiddencells++;\n\t\t\t}\n\t\t\t\n\t\t\tif (!this._cells[i]._settings.hidden){\n\t\t\t\t(this._dataobj||this._contentobj).appendChild(this._cells[i]._viewobj);\n\t\t\t\tif (this._cells[i].$nospace)\n\t\t\t\t\tthis._hiddencells++;\n\t\t\t}\n\t\t}\n\n\t\tif (this._parse_cells_ext_end)\n\t\t\tthis._parse_cells_ext_end(collection);\t\n\t},\n\t_bubble_size:function(prop, size, vertical){\n\t\tif (this._vertical_orientation != vertical)\n\t\t\tfor (var i=0; i<this._cells.length; i++){\n\t\t\t\tthis._cells[i]._settings[prop] = size;\n\t\t\t\tif (this._cells[i]._bubble_size)\n\t\t\t\t\tthis._cells[i]._bubble_size(prop, size, vertical);\n\t\t\t}\n\t},\n\t$getSize:function(dx, dy){\n\t\twebix.debug_size_box_start(this, true);\n\t\tvar minWidth = 0; \n\t\tvar maxWidth = 100000;\n\t\tvar maxHeight = 100000;\n\t\tvar minHeight = 0;\n\t\tif (this._vertical_orientation) maxHeight=0; else maxWidth = 0;\n\t\t\n\t\tvar fixed = 0;\n\t\tvar fixed_count = 0;\n\t\tvar gravity = 0;\n\t\tthis._sizes=[];\n\n\t\tfor (var i=0; i < this._cells.length; i++) {\n\t\t\t//ignore hidden cells\n\t\t\tif (this._cells[i]._settings.hidden)\n\t\t\t\tcontinue;\n\t\t\t\n\t\t\tvar sizes = this._sizes[i] = this._cells[i].$getSize(0,0);\n\n\t\t\tif (this._cells[i].$nospace){\n \t\t\t\tfixed_count++;\n \t\t\t\tcontinue;\n \t\t\t}\n\n\t\t\tif (this._vertical_orientation){\n\t\t\t\t//take max minSize value\n\t\t\t\tif (sizes[0]>minWidth) minWidth = sizes[0];\n\t\t\t\t//take min maxSize value\n\t\t\t\tif (sizes[1]<maxWidth) maxWidth = sizes[1];\n\t\t\t\t\n\t\t\t\tminHeight += sizes[2];\n\t\t\t\tmaxHeight += sizes[3];\n\n\t\t\t\tif (sizes[2] == sizes[3] && sizes[2] != -1){ fixed+=sizes[2]; fixed_count++; }\n\t\t\t\telse gravity += sizes[4];\n\t\t\t} else {\n\t\t\t\t//take max minSize value\n\t\t\t\tif (sizes[2]>minHeight) minHeight = sizes[2];\n\t\t\t\t//take min maxSize value\n\t\t\t\tif (sizes[3]<maxHeight) maxHeight = sizes[3];\n\t\t\t\t\n\t\t\t\tminWidth += sizes[0];\n\t\t\t\tmaxWidth += sizes[1];\n\n\t\t\t\tif (sizes[0] == sizes[1] && sizes[0] != -1){ fixed+=sizes[0]; fixed_count++; }\n\t\t\t\telse gravity += sizes[4];\n\t\t\t}\n\t\t}\n\n\t\tif (minHeight>maxHeight)\n\t\t\tmaxHeight = minHeight;\n\t\tif (minWidth>maxWidth)\n\t\t\tmaxWidth = minWidth;\n\n\t\tthis._master_size = [fixed, this._cells.length - fixed_count, gravity];\n\t\tthis._desired_size = [minWidth+dx, minHeight+dy];\n\n\t\t//get layout sizes\n\t\tvar self_size = webix.ui.baseview.prototype.$getSize.call(this, 0, 0);\n\t\t//use child settings if layout's one was not defined\n\t\tif (self_size[1] >= 100000) self_size[1]=0;\n\t\tif (self_size[3] >= 100000) self_size[3]=0;\n\n\t\tself_size[0] = (self_size[0] || minWidth ) +dx;\n\t\tself_size[1] = Math.max(self_size[0], (self_size[1] || maxWidth ) +dx);\n\t\tself_size[2] = (self_size[2] || minHeight) +dy;\n\t\tself_size[3] = Math.max(self_size[2], (self_size[3] || maxHeight) +dy);\n\n\t\twebix.debug_size_box_end(this, self_size);\n\n\t\tif (!this._vertical_orientation && this._settings.responsive)\n\t\t\tself_size[0] = 0;\n\n\t\treturn self_size;\n\t},\n\t$setSize:function(x,y){\n\t\tthis._layout_sizes = [x,y];\n\t\twebix.debug_size_box_start(this);\n\n\t\twebix.ui.baseview.prototype.$setSize.call(this,x,y);\n\t\tthis._set_child_size(x,y);\n\n\t\twebix.debug_size_box_end(this, [x,y]);\n\t},\n\t_set_child_size_a:function(sizes, min, max){\n\t\tmin = sizes[min]; max = sizes[max];\n\t\tvar height = min;\n\n\t\tif (min != max){\n\t\t\tvar ps = this._set_size_delta * sizes[4]/this._set_size_gravity;\n\t\t\tif (ps < min){\n\t\t\t\theight = min;\n\t\t\t\tthis._set_size_gravity -= sizes[4]; \n\t\t\t\tthis._set_size_delta -= height;\n\t\t\t} else  if (ps > max){\n\t\t\t\theight = max;\n\t\t\t\tthis._set_size_gravity -= sizes[4]; \n\t\t\t\tthis._set_size_delta -= height;\n\t\t\t} else {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\n\t\treturn height;\n\t},\n\t_responsive_hide:function(cell, mode){\n\t\tvar target =  webix.$$(mode);\n\n\t\tif (target === \"hide\" || !target){\n\t\t\tcell.hide();\n\t\t\tcell._responsive_marker = \"hide\";\n\t\t} else{\n\t\t\t//for SideBar in Webix 1.9\n\t\t\tif (!target)\n\t\t\t\ttarget = webix.ui({ view:\"popup\", body:[{}]});\n\n\t\t\tcell._responsive_width = cell._settings.width;\n\t\t\tcell._responsive_height = cell._settings.height;\n\t\t\tcell._responsive_marker = target._settings.id;\n\t\t\tcell._settings.width = 0;\n\t\t\tif (!cell._settings.height)\n\t\t\t\tcell._settings.autoheight = true;\n\n\t\t\twebix.ui(cell, target, this._responsive.length);\n\t\t}\n\n\t\tthis._responsive.push(cell);\n\t},\n\t_responsive_show:function(cell){\n\t\tvar target = cell._responsive_marker;\n\t\tcell._responsive_marker = 0;\n\n\t\tif (target === \"hide\" || !target){\n\t\t\tcell.show();\n\t\t} else {\n\t\t\tcell._settings.width = cell._responsive_width;\n\t\t\tcell._settings.height = cell._responsive_height;\n\t\t\tdelete cell._settings.autoheight;\n\n\t\t\tvar index = 0;\n\t\t\twhile (this._cells[index] && this._cells[index]._settings.responsiveCell === false) index++;\n\t\t\twebix.ui(cell, this, index);\n\t\t}\n\t\tthis._responsive.pop();\n\t},\n\t_responsive_cells:function(x,y){\n\t\twebix._responsive_tinkery = true;\n\t\tif (x + this._paddingX*2 + this._margin * (this._cells.length-1)< this._desired_size[0]){\n\t\t\tvar max = this._cells.length - 1;\n\t\t\tfor (var i = 0; i < max; i++){\n\t\t\t\tvar cell = this._cells[i];\n\t\t\t\tif (!cell._responsive_marker){\n\t\t\t\t\tif (cell._settings.responsiveCell !== false){\n\t\t\t\t\t\tthis._responsive_hide(cell, this._settings.responsive);\n\t\t\t\t\t\twebix.callEvent(\"onResponsiveHide\", [cell._settings.id]);\n\t\t\t\t\t\twebix._responsive_exception = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmax = this._cells.length;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else  if (this._responsive.length){\n\t\t\tvar cell = this._responsive[this._responsive.length-1];\n\t\t\tvar dx = cell._responsive_marker == \"hide\" ? 0 : cell._responsive_width;\n\t\t\tvar px = cell.$getSize(dx,0);\n\t\t\tif (px[0] + this._desired_size[0] + this._margin + 20 <= x ){\n\t\t\t\tthis._responsive_show(cell);\n\t\t\t\twebix.callEvent(\"onResponsiveShow\", [cell._settings.id]);\n\t\t\t\twebix._responsive_exception = true;\n\t\t\t}\n\t\t}\n\n\t\twebix._responsive_tinkery = false;\n\t},\n\t_set_child_size:function(x,y){ \n\t\twebix._child_sizing_active = (webix._child_sizing_active||0)+1;\n\n\t\tif (!this._vertical_orientation && this._settings.responsive)\n\t\t\tthis._responsive_cells(x,y);\n\n\n\t\tthis._set_size_delta = (this._vertical_orientation?y:x) - this._master_size[0];\n\t\tthis._set_size_gravity = this._master_size[2];\n\t\tvar width = x; var height = y;\n\n\t\tvar auto = [];\n\t\tfor (var i=0; i < this._cells.length; i++){\n\t\t\t//ignore hidden cells\n\t\t\tif (this._cells[i]._settings.hidden || !this._sizes[i])\n\t\t\t\tcontinue;\n\n\t\t\tvar sizes = this._sizes[i];\n\n\t\t\tif (this._vertical_orientation){\n\t\t\t\tvar height = this._set_child_size_a(sizes,2,3);\n\t\t\t\tif (height < 0)\t{ auto.push(i); continue; }\n\t\t\t} else {\n\t\t\t\tvar width = this._set_child_size_a(sizes,0,1);\n\t\t\t\tif (width < 0)\t{ auto.push(i); continue; }\n\t\t\t}\n\t\t\tthis._cells[i].$setSize(width,height);\n\t\t}\n\n\t\tfor (var i = 0; i < auto.length; i++){\n\t\t\tvar index = auto[i];\n\t\t\tvar sizes = this._sizes[index];\n\t\t\tvar dx = Math.round(this._set_size_delta * sizes[4]/this._set_size_gravity);\n\t\t\tthis._set_size_delta -= dx; this._set_size_gravity -= sizes[4];\n\t\t\tif (this._vertical_orientation)\n\t\t\t\theight = dx;\n\t\t\telse {\n\t\t\t\twidth = dx;\n\t\t\t}\n\n\t\t\tthis._cells[index].$setSize(width,height);\n\t\t}\n\n\t\twebix._child_sizing_active -= 1;\n\t},\n\t_next:function(obj, mode){\n\t\tvar index = this.index(obj);\n\t\tif (index == -1) return null;\n\t\treturn this._cells[index+mode];\n\t}, \n\t_first:function(){\n\t\treturn this._cells[0];\n\t}\n}, webix.EventSystem, webix.ui.baseview);\n\n\n\n\nwebix.protoUI({\n\tname:\"layout\",\n\t$init:function(config){\n\t\tthis._hiddencells = 0;\n\t},\n\tdefaults:{\n\t\ttype:\"line\"\n\t},\n\t_parse_cells:function(){\n\t\tif (this._parse_cells_ext)\n\t\t\tcollection = this._parse_cells_ext(collection);\n\n\t\tif (!this._parse_once){\n\t\t\tthis._viewobj.className += \" webix_layout_\"+(this._settings.type||\"\");\n\t\t\tthis._parse_once = 1;\n\t\t}\n\n\t\tif (this._settings.margin !== webix.undefined)\n\t\t\tthis._margin = this._settings.margin;\n\n\t\tif (this._settings.padding != webix.undefined)\n\t\t\tthis._paddingX = this._paddingY = this._settings.padding;\n\t\tif (this._settings.paddingX !== webix.undefined)\n\t\t\tthis._paddingX = this._settings.paddingX;\n\t\tif (this._settings.paddingY !== webix.undefined)\n\t\t\tthis._paddingY = this._settings.paddingY;\n\n\t\tif (this._paddingY || this._paddingX)\n\t\t\tthis._padding = true;\n\n\t\t//if layout has paddings we need to set the visible border \n\t\tif (this._hasBorders() && !this._settings.borderless){\n\t\t \tthis._contentobj.style.borderWidth=\"1px\";\n\t\t\t//if layout has border - normal bordering rules are applied\n\t\t\tthis._render_borders = true;\n\t\t}\n\t\n\t\t\n\t\tvar collection = this._collection;\n\t\n\t\tif (this._settings.borderless)\n\t\t\tthis._settings._inner = { top:true, left:true, right:true, bottom:true};\n\n\t\tthis._beforeResetBorders(collection);\n\t\twebix.ui.baselayout.prototype._parse_cells.call(this, collection);\n\t\tthis._afterResetBorders(collection);\n\t},\n\t$getSize:function(dx, dy){\n\t\tdx=dx||0; dy=dy||0;\n\n\t\tvar correction = this._margin*(this._cells.length-this._hiddencells-1);\n\t\tif (this._render_borders || this._hasBorders()){\n\t\t\tvar _borders = this._settings._inner;\n\t\t\tif (_borders){\n\t\t\t\tdx += (_borders.left?0:1)+(_borders.right?0:1);\n\t\t\t\tdy += (_borders.top?0:1)+(_borders.bottom?0:1);\n\t\t\t}\n\t\t}\n\n\t\tif (!this._settings.height)\n\t\t\tdy += (this._paddingY||0)*2 + (this._vertical_orientation ? correction : 0);\n\n\t\tif (!this._settings.width)\n\t\t\tdx += (this._paddingX||0)*2 + (this._vertical_orientation ? 0 : correction);\n\t\t\t\t\n\t\treturn webix.ui.baselayout.prototype.$getSize.call(this, dx, dy);\n\t},\n\t$setSize:function(x,y){\n\t\tthis._layout_sizes = [x,y];\n\t\twebix.debug_size_box_start(this);\n\n\t\tvar result;\n\t\tif (this._hasBorders()||this._render_borders)\n\t\t\tresult = webix.ui.view.prototype.$setSize.call(this,x,y);\n\t\telse\t\n\t\t\tresult = webix.ui.baseview.prototype.$setSize.call(this,x,y);\n\n\t\t//form with scroll\n\t\ty = this._content_height;\n\t\tx = this._content_width;\n\n\t\tvar config = this._settings;\n\t\tif (config.scroll){\n\t\t\ty = Math.max(y, this._desired_size[1]);\n\t\t\tx = Math.max(x, this._desired_size[0]);\n\t\t}\n\t\t\n\t\tthis._set_child_size(x, y);\n\n\t\twebix.debug_size_box_end(this, [x,y]);\n\t},\n\t_set_child_size:function(x,y){\n\t\tvar correction = this._margin*(this._cells.length-this._hiddencells-1);\n\n\t\tif (this._vertical_orientation){\n\t\t\ty-=correction+this._paddingY*2;\n\t\t\tx-=this._paddingX*2;\n\t\t}\n\t\telse {\n\t\t\tx-=correction+this._paddingX*2;\n\t\t\ty-=this._paddingY*2;\n\t\t}\n\t\treturn webix.ui.baselayout.prototype._set_child_size.call(this, x, y);\n\t},\n\tresizeChildren:function(structure_changed){ \n\t\tif (structure_changed){\n\t\t\tthis._last_size = null; //forces children resize\n\t\t\tvar config = [];\n\t\t\tfor (var i = 0; i < this._cells.length; i++){\n\t\t\t\tvar cell = this._cells[i];\n\t\t\t\tconfig[i] = cell._settings;\n\t\t\t\tvar n = ((cell._layout_sizes && !cell._render_borders) || cell._settings.borderless)?\"0px\":\"1px\";\n\n\t\t\t\tcell._viewobj.style.borderTopWidth=cell._viewobj.style.borderBottomWidth=cell._viewobj.style.borderLeftWidth=cell._viewobj.style.borderRightWidth=n;\n\t\t\t}\n\t\t\t\n\t\t\tthis._beforeResetBorders(config);\n\t\t\tfor (var i=0; i<config.length; i++)\n\t\t\t\tif (config[i].borderless && this._cells[i]._set_inner)\n\t\t\t\t\tthis._cells[i]._set_inner(config[i]);\n\t\t\tthis._afterResetBorders(this._cells);\n\t\t}\n\n\t\tif (webix._responsive_tinkery) return;\n\t\twebix.ui.baselayout.prototype.resizeChildren.call(this);\n\t},\n\t_hasBorders:function(){\n\t\treturn this._padding && this._margin>0 && !this._cleanlayout;\n\t},\n\t_beforeResetBorders:function(collection){\n\t\tif (this._hasBorders() && (!this._settings.borderless || this._settings.type == \"space\")){\n\t\t\tfor (var i=0; i < collection.length; i++){\n\t\t\t\tif (!collection[i]._inner || !collection[i].borderless)\n\t\t\t\t\tcollection[i]._inner={ top:false, left:false, right:false, bottom:false};\n\t\t\t}\n\t\t} else {\n\t\t\tfor (var i=0; i < collection.length; i++)\n\t\t\t\tcollection[i]._inner=webix.clone(this._settings._inner);\n\t\t\tvar mode = false;\n\t\t\tif (this._cleanlayout)\n\t\t\t\tmode = true;\n\t\t\t\t\n\t\t\tvar maxlength = collection.length;\t\t\t\t\n\t\t\tif (this._vertical_orientation){\n\t\t\t\tfor (var i=1; i < maxlength-1; i++)\n\t\t\t\t\tcollection[i]._inner.top = collection[i]._inner.bottom = mode;\n\t\t\t\tif (maxlength>1){\n\t\t\t\t\tif (this._settings.type!=\"head\")\n\t\t\t\t\t\tcollection[0]._inner.bottom = mode;\n\n\t\t\t\t\twhile (collection[maxlength-1].hidden && maxlength>1)\n\t\t\t\t\t\tmaxlength--;\n\t\t\t\t\tif (maxlength>0)\n\t\t\t\t\t\tcollection[maxlength-1]._inner.top = mode;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfor (var i=1; i < maxlength-1; i++)\n\t\t\t\t\tcollection[i]._inner.left = collection[i]._inner.right= mode;\n\t\t\t\tif (maxlength>1){\n\t\t\t\t\tif (this._settings.type!=\"head\")\n\t\t\t\t\t\tcollection[0]._inner.right= mode;\n\t\t\t\t\tcollection[maxlength-1]._inner.left = mode;\n\n\t\t\t\t\twhile (maxlength>1 && collection[maxlength-1].hidden)\n\t\t\t\t\t\tmaxlength--;\n\t\t\t\t\tif (maxlength>0)\n\t\t\t\t\t\tcollection[maxlength-1]._inner.left = mode;\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t},\n\t_fix_container_borders:function(style, inner){\n\t\tif (inner.top) \n\t\t\tstyle.borderTopWidth=\"0px\";\n\t\tif (inner.left) \n\t\t\tstyle.borderLeftWidth=\"0px\";\n\t\tif (inner.right) \n\t\t\tstyle.borderRightWidth=\"0px\";\n\t\tif (inner.bottom) \n\t\t\tstyle.borderBottomWidth=\"0px\";\n\t},\n\t_afterResetBorders:function(collection){\n\t\tvar start = 0; \n\t\tfor (var i=0; i<collection.length; i++){\n\t\t\tvar cell = this._cells[i];\n\n\t\t\tvar s_inner = cell._settings._inner;\n\t\t\tif (cell._settings.hidden && this._cells[i+1]){\n\t\t\t\tvar s_next = this._cells[i+1]._settings._inner;\n\t\t\t\tif (!s_inner.top)\n\t\t\t\t\ts_next.top = false;\n\t\t\t\tif (!s_inner.left)\n\t\t\t\t\ts_next.left = false;\n\n\t\t\t\tif (i==start) start++;\n\t\t\t}\n\t\t\tthis._fix_container_borders(cell._viewobj.style, cell._settings._inner);\n\t\t}\n\n\t\tvar style = this._vertical_orientation?\"marginLeft\":\"marginTop\";\n\t\tvar contrstyle = this._vertical_orientation?\"marginTop\":\"marginLeft\";\n\t\tvar padding = this._vertical_orientation?this._paddingX:this._paddingY;\n\t\tvar contrpadding = this._vertical_orientation?this._paddingY:this._paddingX;\n\n\t\t//add top offset to all\n\t\tfor (var i=0; i<collection.length; i++)\n\t\t\tthis._cells[i]._viewobj.style[style] = (padding||0) + \"px\";\t\t\t\n\n\t\t//add left offset to first cell\n\t\tif (this._cells.length)\n\t\t\tthis._cells[start]._viewobj.style[contrstyle] = (contrpadding||0)+\"px\";\n\n\t\t//add offset between cells\n\t\tfor (var index=start+1; index<collection.length; index++)\n\t\t\tthis._cells[index]._viewobj.style[contrstyle]=this._margin+\"px\";\n\t\t\n\t},\n\ttype_setter:function(value){\n\t\tthis._margin = (typeof this._margin_set[value] != \"undefined\"? this._margin_set[value]: this._margin_set[\"line\"]);\n\t\tthis._paddingX = this._paddingY = (typeof this._margin_set[value] != \"undefined\"? this._padding_set[value]: this._padding_set[\"line\"]);\n\t\tthis._cleanlayout = (value==\"material\" || value==\"clean\");\n\t\tif (value == \"material\")\n\t\t\tthis._settings.borderless = true;\n\n\t\treturn value;\n\t},\n\t$skin:function(){\n\t\tvar skin = webix.skin.$active;\n\t\tthis._margin_set = skin.layoutMargin;\n\t\tthis._padding_set = skin.layoutPadding;\n\t}\n}, webix.ui.baselayout);\n\nwebix.ui.layout.call(webix);\n\nwebix.FlexLayout = {\n\t$init:function(){\n\t\tthis.$view.className += \" webix_flexlayout\";\n\t},\n\t_fix_vertical_layout:function(){\n\n\t},\n\t_beforeResetBorders:function(){\n\n\t},\n\t_afterResetBorders:function(){\n\n\t},\n\t$getSize:function(dx, dy){\n\t\twebix.debug_size_box_start(this, true);\n\t\t\n\t\tvar w=0, h=0, g = this._settings.gravity;\n\t\tthis._sizes = [];\n\n\t\tfor (var i=0; i<this._cells.length; i++){\n\t\t\tvar size = this._cells[i].$getSize(0,0);\n\t\t\tthis._sizes.push(size);\n\n\t\t\tw = Math.max(w, size[0]);\n\t\t\th = Math.max(h, size[2]);\n\t\t}\n\n\t\tw += (this._paddingX||0)*2;\n\t\th += (this._paddingY||0)*2;\n\n\t\tif (this._settings.width)\n\t\t\tw = Math.max(w, this._settings.width);\n\t\tif (this._settings.height)\n\t\t\th = Math.max(h, this._settings.height);\n\n\t\tvar self_size = [w, 100000, h, 100000, g];\n\t\twebix.debug_size_box_end(this, self_size);\n\t\treturn self_size;\n\t},\n\t_set_child_size:function(x,y){\n\t\tvar st = this.$view.style;\n\t\tvar margin = Math.round(this._margin/2);\n\t\tst.paddingTop = st.paddingBottom = this._paddingY-margin + \"px\";\n\t\tst.paddingLeft = st.paddingRight = this._paddingX-margin + \"px\";\n\n\t\tfor (var i=0; i<this._cells.length; i++){\n\t\t\tif (this._cells[i]._settings.hidden) continue;\n\t\t\tvar view = this._cells[i].$view;\n\t\t\tvar size = this._sizes[i];\n\t\t\tvar config = this._cells[i]._settings;\n\n\t\t\tif (view){\n\t\t\t\tview.style.minWidth = size[0]+\"px\";\n\t\t\t\tif (size[1] < 100000 && size[1] != size[0])\n\t\t\t\t\tview.style.maxWidth = size[1]+\"px\";\n\n\t\t\t\tview.style.flexBasis = config.flexBasis || (size[0])+\"px\";\n\t\t\t\tview.style.flexGrow = config.flexGrow || ((size[1] != size[0]) ? size[4] : 0);\n\t\t\t\tview.style.height = (size[3] != size[2]) ? \"auto\" : (size[2] + \"px\");\n\n\t\t\t\tview.style.minHeight = size[2]+\"px\";\n\t\t\t\tif (size[3] < 100000 && size[3] != size[2])\n\t\t\t\t\tview.style.maxHeight = size[3]+\"px\";\n\n\t\t\t\tview.style.margin = margin + \"px\";\n\t\t\t}\n\t\t}\n\n\t\tvar whs = [];\n\t\tfor (var i=0; i<this._cells.length; i++){\n\t\t\tif (this._cells[i]._settings.hidden) continue;\n\t\t\tvar view = this._cells[i].$view;\n\t\t\twhs[i] = [view.offsetWidth, view.offsetHeight];\n\t\t}\n\t\t\n\t\tfor (var i=0; i<this._cells.length; i++){\n\t\t\tif (this._cells[i]._settings.hidden) continue;\n\t\t\tvar cell = this._cells[i];\n\t\t\tvar view = cell.$view;\n\t\t\tif (view){\n\t\t\t\tcell._settings.flex = true;\n\t\t\t\tvar size = this._sizes[i];\n\t\t\t\tvar h = size[2] == size[3] ? size[2] : whs[i][1];\n\t\t\t\tcell.$setSize(whs[i][0], h);\n\t\t\t\tcell._settings.flex = false;\n\t\t\t}\n\t\t}\n\n\t\tthis.$height = this._content_height = this.$view.scrollHeight;\n\t\tthis.$view.style.height = this._content_height+\"px\";\n\t}\n};\nwebix.protoUI({\n\t$init:function(){\n\t\twebix.extend(this, webix.FlexLayout, true);\n\t},\n\tname:\"flexlayout\"\n}, webix.ui.layout);\n\n\nwebix.protoUI({\n\tname:\"align\",\n\tdefaults:{\n\t\tborderless:true,\n\t\tleft:0, top:0, right:0, bottom:0\n\t},\n\t$init:function(){\n\t\tthis._viewobj.className\t+= \" webix_view_align\";\n\t},\n\tbody_setter:function(value){\n\t\tvalue._inner = { top:false, left:false, right:false, bottom:false};\n\t\tthis._body_cell = webix.ui._view(value);\n\t\tthis._body_cell._parent_cell = this;\n\n\t\tthis._viewobj.appendChild(this._body_cell._viewobj);\n\t\treturn value;\n\t},\n\talign_setter:function(value){\n\t\tif (typeof value === \"string\")\n\t\t\tvalue = value.split(\",\");\n\n\t\tthis._x_align = this._y_align = this._p_align = \"\";\n\t\tfor (var i=0; i<value.length; i++){\n\t\t\tvar c = value[i];\n\t\t\tif (c === \"center\" || c === \"left\" || c === \"right\")\n\t\t\t\tthis._x_align = c;\n\t\t\tif (c === \"top\" || c === \"bottom\" || c === \"middle\")\n\t\t\t\tthis._y_align = c;\n\t\t\tif (c === \"absolute\")\n\t\t\t\tthis._x_align = this._y_align = this._p_align = \"precise\";\n\t\t}\n\n\t\treturn value;\n\t},\n\tgetBody:function(){\n\t\treturn this._body_cell;\n\t},\n\t$setSize:function(x,y){\n\t\twebix.ui.view.prototype.$setSize.call(this, x,y);\n\n\t\tvar dx, dy;\n\t\tif (this._p_align){\n\t\t\tdx = x - this._settings.left - this._settings.right;\n\t\t\tdy = y - this._settings.top - this._settings.bottom;\n\t\t} else {\n\t\t\tdx = this._desired_size[0] || x;\n\t\t\tdy = this._desired_size[2] || y;\n\t\t}\n\n\n\n\t\tthis._body_cell.$setSize(dx, dy);\n\n\t\tvar box = this._body_cell._viewobj;\n\n\t\tif (this._x_align == \"center\")\n\t\t\tbox.style.marginLeft = Math.ceil((x-dx)/2)+\"px\";\n\t\telse if (this._x_align == \"right\")\n\t\t\tbox.style.marginLeft = (x-dx)+\"px\";\n\t\telse\n\t\t\tbox.style.marginLeft = (this._p_align ? this._settings.left : 0) +\"px\";\n\n\t\tif (this._y_align == \"middle\") \n\t\t\tbox.style.marginTop = Math.ceil((y-dy)/2)+\"px\";\n\t\telse if (this._y_align == \"bottom\")\n\t\t\tbox.style.marginTop = (y-dy)+\"px\";\n\t\telse\n\t\t\tbox.style.marginTop = (this._p_align ? this._settings.top : 0) + \"px\";\n\t},\n\t$getSize:function(dx,dy){\n\t\tvar size = this._desired_size = this._body_cell.$getSize(0,0);\n\t\tvar self_size = webix.ui.baseview.prototype.$getSize.call(this, 0, 0);\n\t\n\t\tif (this._p_align){\n\t\t\tdx += this._settings.left + this._settings.right;\n\t\t\tdy += this._settings.top + this._settings.bottom;\n\t\t}\n\n\t\tif (!this._x_align || this._p_align){\n\t\t\tself_size[0] = size[0]+dx;\n\t\t\tself_size[1] = size[1]+dx;\n\t\t} else {\n\t\t\tself_size[0] = (self_size[0] || size[0] ) +dy;\n\t\t\tself_size[1] +=\tdx;\n\t\t}\n\n\t\tif (!this._y_align || this._p_align){\n\t\t\tself_size[2] = size[2]+dy;\n\t\t\tself_size[3] = size[3]+dy;\n\t\t} else {\n\t\t\tself_size[2] = (self_size[2] || size[2] ) +dy;\n\t\t\tself_size[3] +=\tdy;\n\t\t}\n\n\t\treturn self_size;\n\t}\n}, webix.ui.view);\n\n\n\nwebix.animate = function(html_element, config){\n\tvar animation = config;\n\tif (webix.isArray(html_element)){\n\t\tfor (var i=0; i < html_element.length; i++) {\n\t\t\tif(webix.isArray(config))\n\t\t\t\tanimation = config[i];\n\n\t\t\tif(animation.type == 'slide'){\n\t\t\t\tif(animation.subtype == 'out' && i===0) { // next\n\t\t\t\t    continue;\n\t\t\t\t}\n\t\t\t\tif(animation.subtype == 'in' && i==1) { // current\n\t\t\t\t    continue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(animation.type == 'flip'){\n\t\t\t\tvar animation_copy = webix.clone(animation);\n\t\t\t\tif(i===0) { // next\n\t\t\t\t    animation_copy.type = 'flipback';\n\t\t\t\t}\n\t\t\t\tif(i==1) { // current\n\t\t\t\t    animation_copy.callback = null;\n\t\t\t\t}\n\t\t\t\twebix.animate(html_element[i], animation_copy);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\twebix.animate(html_element[i], animation);\n\t\t}\n\t\treturn;\n\t}\n\tvar node = webix.toNode(html_element);\n\tif (node._has_animation)\n\t\twebix.animate.end(node, animation);\n\telse\n\t\twebix.animate.start(node, animation);\n};\nwebix.animate.end = function(node, animation){\n\t//stop animation\n\tnode.style[webix.env.transitionDuration] = \"1ms\";\n\tnode._has_animation = null;\n\t//clear animation wait order, if any\n\tif (webix._wait_animate)\n\t\twindow.clearTimeout(webix._wait_animate);\n\n\t//plan next animation, if any\n\twebix._wait_animate = webix.delay(webix.animate, webix, [node,animation],10);\n};\nwebix.animate.isSupported=function(){\n\treturn !webix.$testmode && !webix.noanimate && webix.env.transform && webix.env.transition && !webix.env.isOpera;\n};\nwebix.animate.formLine=function(next, current, animation){\n    var direction = animation.direction;\n\n    //sometimes user can initiate animation multiple times ( fast clicking )\n    //as result animation may be called against already removed from the dom node\n    if(current.parentNode)\n        current.parentNode.style.position = \"relative\";\n    \n    current.style.position = \"absolute\";\n\tnext.style.position = \"absolute\";\n\n\t//this is initial shift of second view in animation\n\t//normally we need to have this value as 0\n\t//but FF has bug with animation initially invisible elements\n\t//so we are adjusting this value, to make 1px of second view visible\n\tvar defAniPos = webix.env.isFF ? ( direction == \"top\" || direction == \"left\" ? -1 : 1) : 0;\n\n\tif(direction==\"top\"||direction==\"bottom\"){\n\t\tnext.style.left=\"0px\";\n\t\tnext.style.top = (animation.top || defAniPos) + (direction==\"top\"?1:-1)*current.offsetHeight+\"px\";\n\t}\n\telse{\n\t\tnext.style.top = (animation.top || 0) + \"px\";\n\t\tnext.style.left = defAniPos + (direction==\"left\"?1:-1)*current.offsetWidth+\"px\";\n\t}\n\n\t// apply 'keepViews' mode, iframe solution\n\t//( keepViews won't work in case of \"in\" and \"out\" subtypes )\n\tif(current.parentNode == next.parentNode && animation.keepViews)\n\t\tnext.style.display = \"\";\n\telse\n\t\twebix.html.insertBefore(next, current.nextSibling, current.parentNode);\n\n\tif(animation.type == 'slide' && animation.subtype == 'out') {\n\t\tnext.style.left = \"0px\";\n\t\tnext.style.top = (animation.top || 0)+\"px\";\n\t\tcurrent.parentNode.removeChild(current);\n\t\twebix.html.insertBefore(current, next.nextSibling, next.parentNode);\n\t}\n\treturn [next, current];\n};\nwebix.animate.breakLine=function(line){\n\tif(arguments[1])\n\t\tline[1].style.display = \"none\"; // 'keepViews' multiview mode\n\telse\n\t\twebix.html.remove(line[1]); // 1 = current\n\twebix.animate.clear(line[0]);\n\twebix.animate.clear(line[1]);\n\tline[0].style.position=\"\";\n};\nwebix.animate.clear=function(node){\n\tnode.style[webix.env.transform] = \"none\";\n\tnode.style[webix.env.transition] = \"none\";\n\tnode.style.top = node.style.left = \"\";\n};\nwebix.animate.defaults = {\n\t\ttype: 'slide',\n\t\tdelay: '0',\n\t\tduration: '500',\n\t\ttiming: 'ease-in-out',\n\t\tx: 0,\n\t\ty: 0\n};\nwebix.animate.start = function(node, animation){\n\t//getting config object by merging specified and default options\n \tif (typeof animation == 'string')\n\t\tanimation = {type: animation};\n\n    animation = webix.Settings._mergeSettings(animation,webix.animate.defaults);\n\n\tvar prefix = webix.env.cssPrefix;\n    var settings = node._has_animation = animation;\n    var skew_options, scale_type;\n\n    //jshint -W086:true\n\tswitch(settings.type == 'slide' && settings.direction) { // getting new x, y in case it is slide with direction\n\t\tcase 'right':\n\t\t\tsettings.x = node.offsetWidth;\n\t\t\tbreak;\n\t\tcase 'left':\n\t\t\tsettings.x = -node.offsetWidth;\n\t\t\tbreak;\n\t\tcase 'top':\n\t\t\tsettings.y = -node.offsetHeight;\n\t\t\tbreak;\n\t\tcase 'bottom':\n\t\tdefault:\n\t\t\tsettings.y = settings.y||node.offsetHeight;\n\t\t\tbreak;\n\t}\n\n    if(settings.type == 'flip' || settings.type == 'flipback') {\n    \t\tskew_options = [0, 0];\n            scale_type = 'scaleX';\n            if(settings.subtype == 'vertical') {\n                skew_options[0] = 20;\n                scale_type = 'scaleY';\n            }\n            else\n                skew_options[1] = 20;\n            if(settings.direction == 'right' || settings.direction == 'bottom') {\n                skew_options[0] *= -1; skew_options[1] *= -1;\n            }\n    }\n\n\tvar duration = settings.duration + \"ms \" + settings.timing + \" \" + settings.delay+\"ms\";\n\tvar css_general = prefix+\"TransformStyle: preserve-3d;\"; // general css rules\n\tvar css_transition = '';\n\tvar css_transform = '';\n\n\tswitch(settings.type) {\n\t\tcase 'fade': // changes opacity to 0\n\t\t\tcss_transition = \"opacity \" + duration;\n\t\t\tcss_general = \"opacity: 0;\";\n\t\t\tbreak;\n\t\tcase 'show': // changes opacity to 1\n\t\t\tcss_transition = \"opacity \" + duration;\n\t\t\tcss_general = \"opacity: 1;\";\n\t\t\tbreak;\n        case 'flip':\n            duration = (settings.duration/2) + \"ms \" + settings.timing + \" \" + settings.delay+\"ms\";\n            css_transform = \"skew(\"+skew_options[0]+\"deg, \"+skew_options[1]+\"deg) \"+scale_type+\"(0.00001)\";\n            css_transition = \"all \"+(duration);\n            break;\n        case 'flipback':\n            settings.delay += settings.duration/2;\n            duration = (settings.duration/2) + \"ms \" + settings.timing + \" \" + settings.delay+\"ms\";\n            node.style[webix.env.transform] = \"skew(\"+(-1*skew_options[0])+\"deg, \"+(-1*skew_options[1])+\"deg) \"+scale_type+\"(0.00001)\";\n            node.style.left = \"0\";\n\n            css_transform = \"skew(0deg, 0deg) \"+scale_type+\"(1)\";\n            css_transition = \"all \"+(duration);\n            break;\n\t\tcase 'slide': // moves object to specified location\n\t\t\tvar x = settings.x +\"px\";\n\t\t\tvar y = settings.y +\"px\";\n            // translate(x, y) OR translate3d(x, y, 0)\n\t\t\tcss_transform = webix.env.translate+\"(\"+x+\", \"+y+((webix.env.translate==\"translate3d\")?\", 0\":\"\")+\")\";\n\t\t\tcss_transition = prefix+\"transform \" + duration;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t}\n\n\t//set styles only after applying transition settings\n    webix.delay(function(){\n        node.style[webix.env.transition] = css_transition;\n        webix.delay(function(){\n            if (css_general)\n                node.style.cssText += css_general;\n            if (css_transform)\n                node.style[webix.env.transform] = css_transform;\n            var transitionEnded = false;\n            var tid = webix.event(node, webix.env.transitionEnd, function(ev){\n                node._has_animation = null;\n                if (settings.callback) settings.callback.call((settings.master||window), node,settings,ev);\n                transitionEnded = true;\n                webix.eventRemove(tid);\n            });\n            window.setTimeout(function(){\n                if(!transitionEnded){\n                    node._has_animation = null;\n                    if (settings.callback) settings.callback.call((settings.master||window), node,settings);\n                    transitionEnded = true;\n                    webix.eventRemove(tid);\n                }\n            }, (settings.duration*1+settings.delay*1)*1.3);\n        });\n    });\n};\n\n/*\n\tBehavior:MouseEvents - provides inner evnets for  mouse actions\n*/\n\nwebix.MouseEvents={\n\t$init: function(config){\n\t\tconfig = config || {};\n\n\t\tthis._clickstamp = 0;\n\t\tthis._dbl_sensetive = 300;\n\t\tthis._item_clicked = null;\n\n\t\tthis._mouse_action_extend(config.onClick, \"on_click\");\n\t\tthis._mouse_action_extend(config.onContext, \"on_context\");\n\t\tthis._mouse_action_extend(config.onDblClick, \"on_dblclick\");\n\t\tthis._mouse_action_extend(config.onMouseMove, \"on_mouse_move\");\n\n\t\t//attach dom events if related collection is defined\n\t\tif (this.on_click){\n\t\t\twebix._event(this._contentobj,\"click\",this._onClick,{bind:this});\n\t\t\tif (webix.env.isIE8 && this.on_dblclick)\n\t\t\t\twebix._event(this._contentobj, \"dblclick\", this._onDblClick, {bind:this});\n\t\t}\n\t\tif (this.on_context)\n\t\t\twebix._event(this._contentobj,\"contextmenu\",this._onContext,{bind:this});\n\n\t\tif (this.on_mouse_move)\n\t\t\tthis._enable_mouse_move();\n\t},\n\n\t_enable_mouse_move:function(){\n\t\tif (!this._mouse_move_enabled){\n\t\t\tthis.on_mouse_move = this.on_mouse_move || {};\n\t\t\twebix._event(this._contentobj,\"mousemove\",this._onMouse,{bind:this});\n\t\t\twebix._event(this._contentobj,(webix.env.isIE?\"mouseleave\":\"mouseout\"),this._onMouse,{bind:this});\n\t\t\tthis._mouse_move_enabled = 1;\n\t\t\tthis.attachEvent(\"onDestruct\", function(){\n\t\t\t\tif (this._mouse_move_timer)\n\t\t\t\t\twindow.clearTimeout(this._mouse_move_timer);\n\t\t\t});\n\t\t}\n\n\t},\n\n\t_mouse_action_extend:function(config, key){\n\t\tif (config){\n\t\t\tvar now = this[key];\n\t\t\tvar step = now ? webix.extend({}, now) : {};\n\t\t\tthis[key] = webix.extend(step, config);\n\t\t}\n\t},\n\n\t//inner onclick object handler\n\t_onClick: function(e){\n\t\tif(!this.isEnabled())\n\t\t\treturn false;\n\n\t\twebix.UIManager._focus_action(this);\n\t\tif(this.on_dblclick){\n\t\t\t// emulates double click\n\t\t\tvar stamp = (new Date()).valueOf();\n\n\t\t\tif (stamp - this._clickstamp <= this._dbl_sensetive && this.locate){\n\t\t\t\tvar item = this.locate(e);\n\t\t\t\tif (\"\"+item == \"\"+this._item_clicked) {\n\t\t\t\t\tthis._clickstamp = 0;\n\t\t\t\t\treturn this._onDblClick(e);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._clickstamp = stamp;\n\t\t}\n\n\t\tvar result = this._mouseEvent(e,this.on_click,\"ItemClick\");\n\t\treturn result;\n\t},\n\t//inner ondblclick object handler\n\t_onDblClick: function(e) {\n\t\treturn this._mouseEvent(e,this.on_dblclick,\"ItemDblClick\");\n\t},\n\t//process oncontextmenu events\n\t_onContext: function(e) {\n\t\tthis._mouseEvent(e, this.on_context, \"BeforeContextMenu\", \"AfterContextMenu\");\n\t},\n\t/*\n\t\tevent throttler - ignore events which occurs too fast\n\t\tduring mouse moving there are a lot of event firing - we need no so much\n\t\talso, mouseout can fire when moving inside the same html container - we need to ignore such fake calls\n\t*/\n\t_onMouse:function(e){\n\t\tif (this.$destructed) return;\n\t\tif (document.createEventObject)\t//make a copy of event, will be used in timed call\n\t\t\te = document.createEventObject(event);\n\t\telse if (!webix.$testmode && !webix.isUndefined(e.movementY) && !e.movementY && !e.movementX)\n\t\t\treturn; //logitech mouse driver can send false signals in Chrome\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\tif (this._mouse_move_timer)\t//clear old event timer\n\t\t\twindow.clearTimeout(this._mouse_move_timer);\n\t\t\t\t\n\t\t//this event just inform about moving operation, we don't care about details\n\t\tthis.callEvent(\"onMouseMoving\",[e]);\n\t\t//set new event timer\n\t\tthis._mouse_move_timer = window.setTimeout(webix.bind(function(){\n\t\t\t//called only when we have at least 100ms after previous event\n\t\t\tif (e.type == \"mousemove\")\n\t\t\t\tthis._onMouseMove(e);\n\t\t\telse\n\t\t\t\tthis._onMouseOut(e);\n\t\t},this),(this._settings.mouseEventDelay||500));\n\t},\n\n\t//inner mousemove object handler\n\t_onMouseMove: function(e) {\n\t\tif (!this._mouseEvent(e,this.on_mouse_move,\"MouseMove\"))\n\t\t\tthis.callEvent(\"onMouseOut\",[e||event]);\n\t},\n\t//inner mouseout object handler\n\t_onMouseOut: function(e) {\n\t\tthis.callEvent(\"onMouseOut\",[e||event]);\n\t},\n\t//common logic for click and dbl-click processing\n\t_mouseEvent:function(e,hash,name, pair){\n\t\te=e||event;\n\n\t\tif (e.processed || !this._viewobj) return;\n\t\te.processed = true;\n\n\t\tvar trg=e.target||e.srcElement;\n\n\t\t//IE8 can't modify event object\n\t\t//so we need to stop event bubbling to prevent double processing\n\t\tif (webix.env.isIE8){\n\t\t\tvar vid = this._settings.id;\n\t\t\tvar wid = trg.w_view;\n\n\t\t\tif (!wid) trg.w_view = vid; else if (wid !== vid) return;\n\t\t}\n\n\t\tvar css = \"\";\n\t\tvar id = null;\n\t\tvar found = false;\n\t\t//loop through all parents\n\t\t//we need to check for this._viewobj as some handler can destroy the view\n\t\twhile (trg && trg.parentNode && this._viewobj && trg != this._viewobj.parentNode){\n\t\t\tif (!found && trg.getAttribute){\t\t\t\t\t\t\t\t\t\t\t\t\t//if element with ID mark is not detected yet\n\t\t\t\tid = trg.getAttribute(this._id);\t\t\t\t\t\t\t//check id of current one\n\t\t\t\tif (id){\n\t\t\t\t\tthis._item_clicked = id;\n\t\t\t\t\tif (this.callEvent){\n\t\t\t\t\t\t//it will be triggered only for first detected ID, in case of nested elements\n\t\t\t\t\t\tif (!this.callEvent(\"on\"+name,[id,e,trg])) return;\n\t\t\t\t\t\tif (pair) this.callEvent(\"on\"+pair,[id,e,trg]);\n\t\t\t\t\t}\n\t\t\t\t\t//set found flag\n\t\t\t\t\tfound = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tcss=webix.html._getClassName(trg);\n\t\t\tif (css){\t\t//check if pre-defined reaction for element's css name exists\n\t\t\t\tcss = css.toString().split(\" \");\n\t\t\t\tfor (var i=0; i<css.length; i++){\n\t\t\t\t\tif (hash[css[i]]){\n\t\t\t\t\t\tvar functor = webix.toFunctor(hash[css[i]], this.$scope);\n\t\t\t\t\t\tvar res =  functor.call(this,e,id||webix.html.locate(e, this._id),trg);\n\t\t\t\t\t\tif(res === false)\n\t\t\t\t\t\t\treturn found;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\ttrg=trg.parentNode;\n\t\t}\n\t\t\t\n\t\treturn found;\t//returns true if item was located and event was triggered\n\t}\n};\n\n\nwebix.protoUI({\n\tname:\"accordionitem\",\n\t$init:function(config){\n\t\tthis._viewobj.innerHTML = \"<div webix_ai_id='\"+config.id+\"'  class='webix_accordionitem_header'><div tabindex='0' role='button' class='webix_accordionitem_button' ></div><div class='webix_accordionitem_label' ></div></div><div class='webix_accordionitem_body'></div>\";\n\t\t\n\t\tthis._contentobj = this._viewobj;\n\t\tthis._headobj = this._contentobj.childNodes[0];\n\t\tif(!config.header)\n\t\t\tthis._headobj.style.display = \"none\";\n\t\tthis._headlabel = this._contentobj.childNodes[0].childNodes[1];\n\t\tthis._headbutton = this._contentobj.childNodes[0].childNodes[0];\n\t\tthis._bodyobj = this._contentobj.childNodes[1];\n\t\tthis._viewobj.className +=\" webix_accordionitem\";\n\t\tthis._head_cell = this._body_cell = null;\n\t\tthis._cells = true;\n\n\t\tthis._bodyobj.setAttribute(\"role\", \"tabpanel\");\n\t\tthis._headobj.setAttribute(\"role\", \"tab\");\n\n\t\tthis.attachEvent(\"onKeyPress\", this._onKeyPress);\n\t},\n\t_remove:function(){\n\t\tthis._body_cell = { destructor:function(){} };\n\t},\n\t_replace:function(new_view){\n\t\tthis._body_cell.destructor();\n\t\tthis._body_cell = new_view;\n\t\tthis._body_cell._parent_cell = this;\n\t\t\n\t\tthis._bodyobj.appendChild(this._body_cell._viewobj);\n\t\tthis.resize();\n\t},\n\t_id:\"webix_ai_id\",\n\tgetChildViews:function(){\n\t\treturn [this._body_cell];\n\t},\n\tbody_setter:function(value){\n\t\tif (typeof value != \"object\")\n\t\t\tvalue = {template:value };\n\n\t\tvalue._inner = { top:true, left:true, right:true, bottom:true};\n\t\tthis._body_cell = webix.ui._view(value);\n\t\tthis._body_cell.$view.style.border = \"0px solid red\";\n\t\tthis._body_cell._parent_cell = this;\n\n\t\tthis._bodyobj.appendChild(this._body_cell._viewobj);\n\t\treturn value;\n\t},\n\theader_setter:function(value){\n\t\tif(value)\n\t\t\tvalue = webix.template(value);\n\t\treturn value;\n\t},\n\theaderAlt_setter:function(value){\n\t\tif(value)\n\t\t\tvalue = webix.template(value);\n\t\treturn value;\n\t},\n\t$getSize:function(dx, dy){\n\t\tvar size =  this._body_cell.$getSize(0, 0);\n\n\t\t//apply external border to inner content sizes\n\t\tvar _borders = this._settings._inner;\n\t\tif (_borders){\n\t\t\tdx += (_borders.left?0:1)+(_borders.right?0:1);\n\t\t\tdy += (_borders.top?0:1)+(_borders.bottom?0:1);\n\t\t}\n\n\t\tvar header = 0;\n\t\tvar self_size = webix.ui.baseview.prototype.$getSize.call(this, 0, 0);\n\n\t\t//use child settings if layout's one was not defined\n\t\tself_size[0] = (self_size[0] || size[0] ) +dx;\n\t\tif (self_size[1] >= 100000)\n\t\t\tself_size[1] = size[1];\n\t\tself_size[1] +=\tdx;\n\t\t\n\t\tself_size[2] = (self_size[2] || size[2] ) +dy;\n\t\tvar fixedHeight = (self_size[3]< 100000);\n\t\tif (!fixedHeight)\n\t\t\tself_size[3] = size[3];\n\n\t\tself_size[3] += dy;\n\n\t\tif(this.getParentView()._vertical_orientation){\n\t\t\tif (this._settings.collapsed){\n\t\t\t\tself_size[2] = self_size[3] = this._getHeaderSize();\n\t\t\t} else if(this._settings.header)\n\t\t\t\theader = this._settings.headerHeight;\n\t\t} else {\n\t\t\tif (this._settings.collapsed)\n\t\t\t\tself_size[0] = self_size[1] = this._getHeaderSize();\n\t\t\tif(this._settings.header)\n\t\t\t\theader = this._settings.headerHeight;\n\t\t}\n\n\t\t//include header in total height calculation\n\t\tif(!fixedHeight){\n\t\t\tself_size[2] += header;\n\t\t\tself_size[3] += header;\n\t\t}\n\n\t\twebix.debug_size_box(this, self_size, true);\n\t\treturn self_size;\n\t},\n\ton_click:{\n\t\twebix_accordionitem_header:function(e, id){\n\t\t\tthis._toggle(e);\n\t\t\treturn false;\n\t\t},\n\t\twebix_accordionitem_header_v:function(e, id){\n\t\t\tthis._toggle(e);\n\t\t\treturn false;\n\t\t}\n\t},\n\t_toggle:function(e){\n\t\tthis.define(\"collapsed\", !this._settings.collapsed);\n\t},\n\tcollapsed_setter:function(value){\n\t\tif (this._settings.header === false) return;\n\t\t//use last layout element if parent is not known yet\n\t\tvar parent = this.getParentView();\n\t\tif(parent){\n\t\t\tif(!value)\n\t\t\t\tthis._expand();\n\t\t\telse{\n\t\t\t\tif ( parent._canCollapse(this))\n\t\t\t\t\tthis._collapse();\n\t\t\t\telse{\n\t\t\t\t\tvar success = 0;\n\t\t\t\t\tif(parent._cells.length > 1)\n\t\t\t\t\t\tfor (var i=0; i < parent._cells.length; i++){\n\t\t\t\t\t\t\tvar sibl = parent._cells[i];\n\t\t\t\t\t\t\tif (this != sibl && sibl.isVisible() && sibl.expand){\n\t\t\t\t\t\t\t\tsibl.expand();\n\t\t\t\t\t\t\t\tthis._collapse();\n\t\t\t\t\t\t\t\tsuccess = 1;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\tif (!success) return;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._settings.collapsed = value;\n\t\t\tif (!value) parent._afterOpen(this);\n\n\t\t\tthis.refresh();\n\t\t\tif (!webix._ui_creation)\n\t\t\t\tthis.resize();\n\n\t\t\tparent.callEvent(\"onAfter\"+(value?\"Collapse\":\"Expand\"), [this._settings.id]);\n\n\t\t\tthis._settings.$noresize = value;\n\t\t}\n\t\treturn value;\n\t},\n\tcollapse:function(){\n\t\tthis.define(\"collapsed\", true);\n\t\twebix.UIManager._moveChildFocus(this);\n\t},\n\texpand:function(){\n\t\tthis.define(\"collapsed\", false);\n\t},\n\t_show: function() {\n\t\tthis.show();\n\t},\n\t_hide: function() {\n\t\tthis.hide();\n\t},\n\t_expand:function(){\n\t\tthis._bodyobj.style.display = \"\";\n\t\twebix.html.removeCss(this.$view, \"collapsed\");\n\t\twebix.html.removeCss(this._headobj, \"collapsed\");\n\n\t\tthis._headobj.setAttribute(\"aria-expanded\", \"true\");\n\t},\n\t_collapse:function(){\n\t\tvar vertical = this.getParentView()._vertical_orientation;\n\t\t//this._original_size = (vertical?this._settings.height:this._settings.width)||-1;\n\n\t\tif(this._settings.headerAlt)\n\t\t\tthis._headlabel.innerHTML = this._settings.headerAlt();\n\t\tthis._bodyobj.style.display = \"none\";\n\t\twebix.html.addCss(this.$view, \"collapsed\");\n\t\twebix.html.addCss(this._headobj, \"collapsed\");\n\n\t\tthis._headobj.setAttribute(\"aria-expanded\", \"false\");\n\t},\n\trefresh:function(){\n\t\tvar template = this._settings[this._settings.collapsed?\"headerAlt\":\"header\"] ||this._settings.header;\n\t\tif (template){\n\t\t\tthis._headlabel.innerHTML = template();\n\t\t\tthis._headbutton.setAttribute(\"aria-label\", template());\n\t\t}\n\t\t\t\n\t\tvar css = (this.getParentView()._vertical_orientation?\"vertical\":\"horizontal\");\n\t\tif(this._viewobj.className.indexOf(\" \"+css) < 0 ){\n\t\t\twebix.html.addCss(this._viewobj, css);\n\t\t}\n\t\t//fix collapsed columns in IE8\n\t\tif(!webix.env.transform){\n\t\t\twebix.html.addCss(this._viewobj,\"webix_ie\",true);\n\t\t}\n\t},\n\t_getHeaderSize:function(){\n\t\treturn (this._settings.collapsed?this._settings.headerAltHeight:this._settings.headerHeight);\n\t},\n\t$setSize:function(x,y){\n\t\tif (webix.ui.view.prototype.$setSize.call(this,x,y) || this._getHeaderSize() != this._last_set_header_size){\n\t\t\tx = this._content_width;\n\t\t\ty = this._content_height;\n\n\t\t\tvar headerSize = this._last_set_header_size = this._getHeaderSize();//-(this._settings._inner.top?0:1);\n\t\t\tif (this._settings.header){\n\n\t\t\t\tthis._headobj.style.height=headerSize+\"px\";\n\t\t\t\tthis._headobj.style.width=\"auto\";\n\t\t\t\tthis._headobj.style[webix.env.transform]=\"\";\n\n\t\t\t\t\n\t\t\t\tthis._headobj.style.borderBottomWidth = (this._settings.collapsed?0:1)+\"px\";\n\n\t\t\t\tif(this.getParentView()._vertical_orientation||!this._settings.collapsed){\n\t\t\t\t\ty-=this._getHeaderSize();\n\t\t\t\t} else if (this._settings.collapsed){\n\t\t\t\t\t//-2 - borders\n\t\t\t\t\tif (webix.animate.isSupported()){\n\t\t\t\t\t\tthis._headobj.style.width = y + \"px\";\n\t\t\t\t\t\tthis._headobj.style.height = x + 3 + \"px\";\n\t\t\t\t\t\tvar d = Math.floor(y/2-x/2)+(x-this._settings.headerAltHeight)/2;\n\t\t\t\t\t\tthis._headobj.style[webix.env.transform]=\"rotate(90deg) translate(\"+d+\"px, \"+(d+1)+\"px)\";\n\t\t\t\t\t}\n\t\t\t\t\telse { //IE8 fix\n\t\t\t\t\t\tthis._headobj.style.width = x + \"px\";\n\t\t\t\t\t\tthis._headobj.style.height = y + 3 + \"px\";\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(!this._settings.collapsed){\n\t\t\t\tthis._body_cell.$setSize(x,y);\n\t\t\t\tthis._last_size_y = y;\n\t\t\t}\n\t\t} else if (!this._settings.collapsed){\n\t\t\tvar body = this._body_cell;\n\t\t\tif (this._last_size_y)\n\t\t\t\tbody.$setSize(this._content_width, this._last_size_y);\n\t\t}\n\t},\n\t$skin:function(){\n\t\tvar defaults = this.defaults;\n\t\tdefaults.headerAltHeight = defaults.headerHeight = webix.skin.$active.barHeight;\n\t\tif(webix.skin.$active.borderlessAccordion)\n\t\t\tdefaults.borderless = true;\n\t},\n\tdefaults:{\n\t\theader:false,\n\t\theaderAlt:false,\n\t\tbody:\"\"\n\t}\n}, webix.MouseEvents, webix.EventSystem, webix.ui.view);\n\nwebix.protoUI({\n\tname:\"accordion\",\n\tdefaults:{\n\t\tpanelClass:\"accordionitem\",\n\t\tmulti:false,\n\t\tcollapsed:false\n\t},\n\t$init:function(){\n\t\tthis._viewobj.setAttribute(\"role\", \"tablist\");\n\t\tthis._viewobj.setAttribute(\"aria-multiselectable\", \"true\");\n\t},\n\taddView:function(view){\n\t\t//adding view to the accordion\n\t\tvar id = webix.ui.layout.prototype.addView.apply(this, arguments);\n\t\tvar child = webix.$$(id);\n\t\t//repainting sub-panels in the accordion\n\t\tif (child.collapsed_setter && child.refresh) child.refresh();\n\t\treturn id;\n\t},\n\t_parse_cells:function(){\n\t\tvar panel = this._settings.panelClass;\n\t\tvar cells = this._collection;\n\n\t\tfor (var i=0; i<cells.length; i++){\n\t\t\tif ((cells[i].body || cells[i].header)&& !cells[i].view && !cells[i].align)\n\t\t\t\tcells[i].view = panel;\n\t\t\tif (webix.isUndefined(cells[i].collapsed))\n\t\t\t\tcells[i].collapsed = this._settings.collapsed;\n\n\t\t}\n\n\t\n\t\tthis._skin_render_collapse = true;\n\t\twebix.ui.layout.prototype._parse_cells.call(this);\n\t\tthis._skin_render_collapse = false;\n\n\t\tfor (var i=0; i < this._cells.length; i++){\n\t\t\tif (this._cells[i].name == panel) \n\t\t\t\tthis._cells[i].refresh();\n\t\t\tthis._cells[i]._accLastChild = false;\n\t\t}\n\t\tvar found = false;\n\t\tfor (var i= this._cells.length-1; i>=0 &&!found; i--){\n\t\t\tif(!this._cells[i]._settings.hidden){\n\t\t\t\tthis._cells[i]._accLastChild = true;\n\t\t\t\tfound = true;\n\t\t\t}\n\t\t}\n\n\t},\n\t_afterOpen:function(view){\n\t\tif (this._settings.multi === false && this._skin_render_collapse !== true){\n\t\t\tfor (var i=0; i < this._cells.length; i++) {\n\t\t\t\tif (view != this._cells[i] && !this._cells[i]._settings.collapsed && this._cells[i].collapse)\n\t\t\t\t\tthis._cells[i].collapse();\n\t\t\t}\n\t\t}\n\t\tif (view.callEvent){\n\t\t\tview.callEvent(\"onViewShow\",[]);\n\t\t\twebix.ui.each(view, this._signal_hidden_cells);\n\t\t}\n\t},\n\t_canCollapse:function(view){\n\t\tif (this._settings.multi === true || this._skin_render_collapse) return true;\n\t\t//can collapse only if you have other item to open\n\t\tfor (var i=0; i < this._cells.length; i++)\n\t\t\tif (view != this._cells[i] && !this._cells[i]._settings.collapsed && this._cells[i].isVisible() && !this._cells[i].$nospace)\n\t\t\t\treturn true;\n\t\treturn false;\n\t},\n\t$skin:function(){\n\t\tvar defaults = this.defaults;\n\t\tif(webix.skin.$active.accordionType)\n\t\t\tdefaults.type = webix.skin.$active.accordionType;\n\t}\n}, webix.ui.layout);\n\nwebix.protoUI({\n\tname:\"headerlayout\",\n\tdefaults:{\n\t\ttype: \"accordion\",\n\t\tmulti:\"mixed\",\n\t\tcollapsed:false\n\t}\n}, webix.ui.accordion);\n\n\n\n\n\n/*\n\tBehavior:DND - low-level dnd handling\n\t@export\n\t\tgetContext\n\t\taddDrop\n\t\taddDrag\n\t\t\n\tDND master can define next handlers\n\t\tonCreateDrag\n\t\tonDragIng\n\t\tonDragOut\n\t\tonDrag\n\t\tonDrop\n\tall are optional\n*/\n\n\n\nwebix.DragControl={\n\t//has of known dnd masters\n\t_drag_masters : webix.toArray([\"dummy\"]),\n\t/*\n\t\tregister drop area\n\t\t@param node \t\t\thtml node or ID\n\t\t@param ctrl \t\t\toptions dnd master\n\t\t@param master_mode \t\ttrue if you have complex drag-area rules\n\t*/\n\taddDrop:function(node,ctrl,master_mode){\n\t\tnode = webix.toNode(node);\n\t\tnode.webix_drop=this._getCtrl(ctrl);\n\t\tif (master_mode) node.webix_master=true;\n\t},\n\t//return index of master in collection\n\t//it done in such way to prevent dnd master duplication\n\t//probably useless, used only by addDrop and addDrag methods\n\t_getCtrl:function(ctrl){\n\t\tctrl = ctrl||webix.DragControl;\n\t\tvar index = this._drag_masters.find(ctrl);\n\t\tif (index<0){\n\t\t\tindex = this._drag_masters.length;\n\t\t\tthis._drag_masters.push(ctrl);\n\t\t}\n\t\treturn index;\n\t},\n\t_createTouchDrag: function(e){\n\t\tvar dragCtrl = webix.DragControl;\n\t\tvar master = this._getActiveDragMaster();\n\t\t// for data items only\n\t\tif(master && master._getDragItemPos){\n\n\t\t\tif(!dragCtrl._html)\n\t\t\t\tdragCtrl.createDrag(e);\n\t\t\tvar ctx = dragCtrl._drag_context;\n\t\t\tdragCtrl._html.style.left= e.x+dragCtrl.left+ (ctx.x_offset||0)+\"px\";\n\t\t\tdragCtrl._html.style.top= e.y+dragCtrl.top+ (ctx.y_offset||0) +\"px\";\n\t\t}\n\t},\n\t/*\n\t\tregister drag area\n\t\t@param node \thtml node or ID\n\t\t@param ctrl \toptions dnd master\n\t*/\n\taddDrag:function(node,ctrl){\n\t    node = webix.toNode(node);\n\t    node.webix_drag=this._getCtrl(ctrl);\n\t\twebix._event(node,webix.env.mouse.down,this._preStart,{ bind:node });\n\t\twebix._event(node,\"dragstart\",webix.html.preventEvent);\n\t},\n\t//logic of drag - start, we are not creating drag immediately, instead of that we hears mouse moving\n\t_preStart:function(e){\n\t\tif (webix.DragControl._active){\n\t\t\t//if we have nested drag areas, use the top one and ignore the inner one\n\t\t\tif (webix.DragControl._saved_event == e) return;\n\t\t\twebix.DragControl._preStartFalse();\n\t\t\twebix.DragControl.destroyDrag(e);\n\t\t}\n\t\twebix.DragControl._active=this;\n\n\t\tvar evobj = webix.env.mouse.context(e);\n\t\twebix.DragControl._start_pos=evobj;\n\t\twebix.DragControl._saved_event = e;\n\n\t\twebix.DragControl._webix_drag_mm = webix.event(document.body,webix.env.mouse.move,webix.DragControl._startDrag);\n\t\twebix.DragControl._webix_drag_mu = webix.event(document,webix.env.mouse.up,webix.DragControl._preStartFalse);\n\n\t\t//need to run here, or will not work in IE\n\t\twebix.html.addCss(document.body,\"webix_noselect\", 1);\n\t},\n\t//if mouse was released before moving - this is not a dnd, remove event handlers\n\t_preStartFalse:function(){\n\t\twebix.DragControl._clean_dom_after_drag();\n\t},\n\t//mouse was moved without button released - dnd started, update event handlers\n\t_startDrag:function(e){\n\t\t//prevent unwanted dnd\n\t\tvar pos = webix.env.mouse.context(e);\n\t\tvar master = webix.DragControl._getActiveDragMaster();\n\t\t// only long-touched elements can be dragged\n\n\t\tvar longTouchLimit = (master && webix.env.touch && master._getDragItemPos && !webix.Touch._long_touched);\n\t\tif (longTouchLimit || Math.abs(pos.x-webix.DragControl._start_pos.x)<5 && Math.abs(pos.y-webix.DragControl._start_pos.y)<5)\n\t\t\treturn;\n\n\t\twebix.DragControl._clean_dom_after_drag(true);\n\t\tif(!webix.DragControl._html)\n\t\t\tif (!webix.DragControl.createDrag(webix.DragControl._saved_event)) return;\n\t\t\n\t\twebix.DragControl.sendSignal(\"start\"); //useless for now\n\t\twebix.DragControl._webix_drag_mm = webix.event(document.body,webix.env.mouse.move,webix.DragControl._moveDrag);\n\t\twebix.DragControl._webix_drag_mu = webix.event(document,webix.env.mouse.up,webix.DragControl._stopDrag);\n\t\twebix.DragControl._moveDrag(e);\n\n\t\tif (webix.env.touch)\n\t\t\treturn webix.html.preventEvent(e);\n\t},\n\t//mouse was released while dnd is active - process target\n\t_stopDrag:function(e){\n\t\twebix.DragControl._clean_dom_after_drag();\n\t\twebix.DragControl._saved_event = null;\n\n\t\tif (webix.DragControl._last){\t//if some drop target was confirmed\n\t\t\twebix.DragControl.$drop(webix.DragControl._active, webix.DragControl._last, e);\n\t\t\twebix.DragControl.$dragOut(webix.DragControl._active,webix.DragControl._last,null,e);\n\t\t}\n\t\twebix.DragControl.destroyDrag(e);\n\t\twebix.DragControl.sendSignal(\"stop\");\t//useless for now\n\t},\n\t_clean_dom_after_drag:function(still_drag){\n\t\tthis._webix_drag_mm = webix.eventRemove(this._webix_drag_mm);\n\t\tthis._webix_drag_mu = webix.eventRemove(this._webix_drag_mu);\n\t\tif (!still_drag)\n\t\t\twebix.html.removeCss(document.body,\"webix_noselect\");\n\t},\n\t//dnd is active and mouse position was changed\n\t_moveDrag:function(e){\n\t\tvar dragCtrl = webix.DragControl;\n\t\tvar pos = webix.html.pos(e);\n\t\tvar evobj = webix.env.mouse.context(e);\n\n\t\t//give possibility to customize drag position\n\t\tvar customPos = dragCtrl.$dragPos(pos, e);\n\t\t//adjust drag marker position\n\t\tvar ctx = dragCtrl._drag_context;\n\t\tdragCtrl._html.style.top=pos.y+dragCtrl.top+(customPos||!ctx.y_offset?0:ctx.y_offset) +\"px\";\n\t\tdragCtrl._html.style.left=pos.x+dragCtrl.left+(customPos||!ctx.x_offset?0:ctx.x_offset)+\"px\";\n\n\t\tif (dragCtrl._skip)\n\t\t\tdragCtrl._skip=false;\n\t\telse {\n\t\t\tvar target = evobj.target = webix.env.touch ? document.elementFromPoint(evobj.x, evobj.y) : evobj.target;\n\t\t\tvar touch_event = webix.env.touch ? evobj : e;\n\t\t\tdragCtrl._checkLand(target, touch_event);\n\t\t}\n\t\t\n\t\treturn webix.html.preventEvent(e);\n\t},\n\t//check if item under mouse can be used as drop landing\n\t_checkLand:function(node,e){\n\t\twhile (node && node.tagName!=\"BODY\"){\n\t\t\tif (node.webix_drop){\t//if drop area registered\n\t\t\t\tif (this._last && (this._last!=node || node.webix_master))\t//if this area with complex dnd master\n\t\t\t\t\tthis.$dragOut(this._active,this._last,node,e);\t\t\t//inform master about possible mouse-out\n\t\t\t\tif (!this._last || this._last!=node || node.webix_master){\t//if this is new are or area with complex dnd master\n\t\t\t\t\tthis._last=null;\t\t\t\t\t\t\t\t\t\t//inform master about possible mouse-in\n\t\t\t\t\tthis._landing=this.$dragIn(webix.DragControl._active,node,e);\n\t\t\t\t\tif (this._landing)\t//landing was rejected\n\t\t\t\t\t\tthis._last=node;\n\t\t\t\t\treturn;\t\t\t\t\n\t\t\t\t} \n\t\t\t\treturn;\n\t\t\t}\n\t\t\tnode=node.parentNode;\n\t\t}\n\t\tif (this._last)\t//mouse was moved out of previous landing, and without finding new one \n\t\t\tthis._last = this._landing = this.$dragOut(this._active,this._last,null,e);\n\t},\n\t//mostly useless for now, can be used to add cross-frame dnd\n\tsendSignal:function(signal){\n\t\twebix.DragControl.active=(signal==\"start\");\n\t},\n\t\n\t//return master for html area\n\tgetMaster:function(t){\n\t\treturn this._drag_masters[t.webix_drag||t.webix_drop];\n\t},\n\t//return dhd-context object\n\tgetContext:function(){\n\t\treturn this._drag_context;\n\t},\n\tgetNode:function(){\n\t\treturn this._html;\n\t},\n\t//called when dnd is initiated, must create drag representation\n\tcreateDrag:function(e){ \n\t\tvar dragCtl = webix.DragControl;\n\t\tvar a=dragCtl._active;\n\n\t\tdragCtl._drag_context = {};\n\t\tvar master = this._drag_masters[a.webix_drag];\n        var drag_container;\n\n\t\t//if custom method is defined - use it\n\t\tif (master.$dragCreate){\n\t\t\tdrag_container=master.$dragCreate(a,e);\n\t\t\tif (!drag_container) return false;\n\t\t\tthis._setDragOffset(e);\n\t\t\tdrag_container.style.position = 'absolute';\n\t\t} else {\n\t\t//overvise use default one\n\t\t\tvar text = dragCtl.$drag(a,e);\n\t\t\tdragCtl._setDragOffset(e);\n\n\t\t\tif (!text) return false;\n\t\t\tdrag_container = document.createElement(\"DIV\");\n\t\t\tdrag_container.innerHTML=text;\n\t\t\tdrag_container.className=\"webix_drag_zone\";\n\t\t\tdocument.body.appendChild(drag_container);\n\n\t\t\tvar context = dragCtl._drag_context;\n\t\t\tif (context.html && webix.env.pointerevents){\n\t\t\t\tcontext.x_offset = -Math.round(drag_container.offsetWidth  * 0.5);\n\t\t\t\tcontext.y_offset = -Math.round(drag_container.offsetHeight * 0.75);\n\t\t\t}\n\t\t}\n\t\t/*\n\t\t\tdragged item must have topmost z-index\n\t\t\tin some cases item already have z-index\n\t\t\tso we will preserve it if possible\n\t\t*/\n\t\tdrag_container.style.zIndex = Math.max(drag_container.style.zIndex,webix.ui.zIndex());\n\n\t\twebix.DragControl._skipDropH = webix.event(drag_container,webix.env.mouse.move,webix.DragControl._skip_mark);\n\n\t\tif (!webix.DragControl._drag_context.from)\n\t\t\twebix.DragControl._drag_context = {source:a, from:a};\n\t\t\n\t\twebix.DragControl._html=drag_container;\n\t\treturn true;\n\t},\n\t//helper, prevents unwanted mouse-out events\n\t_skip_mark:function(){\n\t\twebix.DragControl._skip=true;\n\t},\n\t//after dnd end, remove all traces and used html elements\n\tdestroyDrag:function(e){\n\t\tvar a=webix.DragControl._active;\n\t\tvar master = this._drag_masters[a.webix_drag];\n\n\t\tif (master && master.$dragDestroy){\n\t\t\twebix.DragControl._skipDropH = webix.eventRemove(webix.DragControl._skipDropH);\n\t\t\tif(webix.DragControl._html)\n\t\t\t\tmaster.$dragDestroy(a,webix.DragControl._html,e);\n\t\t}\n\t\telse{\n\t\t\twebix.html.remove(webix.DragControl._html);\n\t\t}\n\t\twebix.DragControl._landing=webix.DragControl._active=webix.DragControl._last=webix.DragControl._html=null;\n\t\t//webix.DragControl._x_offset = webix.DragControl._y_offset = null;\n\t},\n\t_getActiveDragMaster: function(){\n\t\treturn webix.DragControl._drag_masters[webix.DragControl._active.webix_drag];\n\t},\n\ttop:5,\t //relative position of drag marker to mouse cursor\n\tleft:5,\n\t_setDragOffset:function(e){\n\t\tvar dragCtl = webix.DragControl;\n\t\tvar pos = dragCtl._start_pos;\n\t\tvar ctx = dragCtl._drag_context;\n\n\t\tif(typeof ctx.x_offset != \"undefined\" && typeof ctx.y_offset != \"undefined\")\n\t\t\treturn null;\n\n\t\tctx.x_offset = ctx.y_offset = 0;\n\t\tif(webix.env.pointerevents){\n\t\t\tvar m=webix.DragControl._getActiveDragMaster();\n\n\t\t\tif (m._getDragItemPos && m!==this){\n\t\t\t\tvar itemPos = m._getDragItemPos(pos,e);\n\n\t\t\t\tif(itemPos){\n\t\t\t\t\tctx.x_offset = itemPos.x - pos.x;\n\t\t\t\t\tctx.y_offset = itemPos.y - pos.y;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\t},\n\t$dragPos:function(pos, e){\n\t\tvar m=this._drag_masters[webix.DragControl._active.webix_drag];\n\t\tif (m.$dragPos && m!=this){\n\t\t\tm.$dragPos(pos, e, webix.DragControl._html);\n\t\t\treturn true;\n\t\t}\n\t},\n\t//called when mouse was moved in drop area\n\t$dragIn:function(s,t,e){\n\t\tvar m=this._drag_masters[t.webix_drop];\n\t\tif (m.$dragIn && m!=this) return m.$dragIn(s,t,e);\n\t\tt.className=t.className+\" webix_drop_zone\";\n\t\treturn t;\n\t},\n\t//called when mouse was moved out drop area\n\t$dragOut:function(s,t,n,e){\n\t\tvar m=this._drag_masters[t.webix_drop];\n\t\tif (m.$dragOut && m!=this) return m.$dragOut(s,t,n,e);\n\t\tt.className=t.className.replace(\"webix_drop_zone\",\"\");\n\t\treturn null;\n\t},\n\t//called when mouse was released over drop area\n\t$drop:function(s,t,e){\n\t\tvar m=this._drag_masters[t.webix_drop];\n\t\twebix.DragControl._drag_context.from = webix.DragControl.getMaster(s);\n\t\tif (m.$drop && m!=this) return m.$drop(s,t,e);\n\t\tt.appendChild(s);\n\t},\n\t//called when dnd just started\n\t$drag:function(s,e){\n\t\tvar m=this._drag_masters[s.webix_drag];\n\t\tif (m.$drag && m!=this) return m.$drag(s,e);\n\t\treturn \"<div style='\"+s.style.cssText+\"'>\"+s.innerHTML+\"</div>\";\n\t}\t\n};\n\n//global touch-drag handler\nwebix.attachEvent(\"onLongTouch\", function(ev){\n\tif(webix.DragControl._active)\n\t\twebix.DragControl._createTouchDrag(ev);\n});\n\n/*\n\tBehavior:DataMove - allows to move and copy elements, heavily relays on DataStore.move\n\t@export\n\t\tcopy\n\t\tmove\n*/\nwebix.DataMove={\n\t//creates a copy of the item\n\tcopy:function(sid,tindex,tobj, details){\n\t\tdetails = details || {};\n\t\tvar new_id = details.newId || sid;\n\t\ttobj = tobj||this;\n\n\t\tvar data = this.getItem(sid);\n\t\twebix.assert(data,\"Incorrect ID in DataMove::copy\");\n\t\t\n\t\t//make data conversion between objects\n\t\tif (tobj)\n\t\t\tdata = tobj._externalData(data);\n\t\t\n\t\t//adds new element same as original\n\t\treturn tobj.data.add(tobj._externalData(data,new_id),tindex,(details.parent || 0));\n\t},\n\t_next_move_index:function(nid, next, source){\n\t\tif (next && nid){\n\t\t\tvar new_index = this.getIndexById(nid);\n\t\t\treturn new_index+(source == this && source.getIndexById(next)<new_index?0:1);\n\t\t}\n\t},\n\t//move item to the new position\n\tmove:function(sid,tindex,tobj, details){\n\t\tdetails = details || {};\n\t\tvar new_id = details.newId || sid;\n\n\t\ttobj = tobj||this;\n\t\twebix.assert(tobj.data, \"moving attempt to component without datastore\");\n\t\tif (!tobj.data) return;\n\n\t\t//can process an arrya - it allows to use it from onDrag \n\t\tif (webix.isArray(sid)){\n\t\t\t//block separate repaint operations\n\t\t\tif (sid.length > 3) //heuristic value, duplicated below\n\t\t\t\tthis.$blockRender = tobj.$blockRender = true;\n\n\t\t\tfor (var i=0; i < sid.length; i++) {\n\t\t\t\t//increase index for each next item in the set, so order of insertion will be equal to order in the array\n\t\t\t\tvar nid = this.move(sid[i], tindex, tobj, details);\n\t\t\t\ttindex = tobj._next_move_index(nid, sid[i+1], this);\n\t\t\t}\n\n\t\t\tthis.$blockRender = tobj.$blockRender = false;\n\t\t\tif (sid.length > 3){\n\t\t\t\t//repaint whole component\n\t\t\t\tthis.refresh();\n\t\t\t\tif (tobj != this)\n\t\t\t\t\ttobj.refresh();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tvar nid = sid; //id after moving\n\n\t\tvar data = this.getItem(sid);\n\t\twebix.assert(data,\"Incorrect ID in DataMove::move\");\n\t\t\n\t\tif (!tobj || tobj == this){\n\t\t\tif (tindex < 0) tindex = this.data.order.length - 1;\n\t\t\tthis.data.move(this.getIndexById(sid),tindex);\t//move inside the same object\n\t\t\tthis.data.callEvent(\"onDataMove\", [sid, tindex, null, this.data.order[tindex+1]]);\n\t\t} else {\n\t\t\t//copy to the new object\n\t\t\tnid = tobj.data.add(tobj._externalData(data,new_id),tindex, (details.parent || 0));\n\t\t\tthis.data.remove(sid);//delete in old object\n\t\t}\n\t\treturn nid;\t//return ID of item after moving\n\t},\n\t//move item on one position up\n\tmoveUp:function(id,step){\n\t\treturn this.move(id,this.getIndexById(id)-(step||1));\n\t},\n\t//move item on one position down\n\tmoveDown:function(id,step){\n\t\treturn this.moveUp(id, (step||1)*-1);\n\t},\n\t//move item to the first position\n\tmoveTop:function(id){\n\t\treturn this.move(id,0);\n\t},\n\t//move item to the last position\n\tmoveBottom:function(id){\n\t\treturn this.move(id,this.data.count()-1);\n\t},\n\t/*\n\t\tthis is a stub for future functionality\n\t\tcurrently it just makes a copy of data object, which is enough for current situation\n\t*/\n\t_externalData:function(data,id){\n\t\tvar newdata = webix.extend({},data);\n\t\tnewdata.id = (!id || this.data.pull[id])?webix.uid():id;\n\t\t\n\n\t\tnewdata.$template=null;\n\n\t\tif (this._settings.externalData)\n\t\t\tnewdata = this._settings.externalData.call(this, newdata, id, data);\n\t\treturn newdata;\n\t}\n};\n\n\nwebix.Movable = {\n\tmove_setter: function (value) { \n\t\tif (value){\n\t\t\tthis._move_admin = webix.clone(this._move_admin);\n\t\t\tthis._move_admin.master = this;\n\n\t\t\twebix.DragControl.addDrag(this._headobj, this._move_admin);\n\t\t}\n\t\treturn value;\n\t},\n\t_move_admin: {\n\t\t$dragCreate:function(object, e){\n\t\t\tif(this.master.config.move){\n\t\t\t\tvar offset = webix.html.offset(object);\n\t\t\t\tvar pos = webix.html.pos(e);\n\t\t\t\twebix.DragControl.top = offset.y - pos.y;\n\t\t\t\twebix.DragControl.left = offset.x - pos.x;\n\n\t\t\t\treturn webix.toNode(this.master._viewobj);\n\t\t\t}\n\t\t},\n\t\t$dragDestroy:function(node, drag){\n\t\t\tvar view = this.master;\n\t\t\tif (view._settings){\n\t\t\t\tview._settings.top = parseInt(drag.style.top,10);\n\t\t\t\tview._settings.left = parseInt(drag.style.left,10);\n\t\t\t}\n\n\t\t\twebix.DragControl.top = webix.DragControl.left = 5;\n\t\t\tthis.master.callEvent(\"onViewMoveEnd\", []);\n\t\t\treturn;\n\t\t},\n\t\t$dragPos:function(pos, e){\n\t\t\tthis.master.callEvent(\"onViewMove\", [pos, e]);\n\t\t}\n\t}\n};\n\n\n\nwebix.Modality = {\n    _modal_set:function(value){\n\t    if (value){\n\t    \tif (!this._modal_cover){\n\t\t        this._modal_cover = webix.html.create('div',{\n\t\t        \t\"class\":\"webix_modal\"\n\t\t    \t});\n\t\t    \t/*\twith below code we will have the same zIndex for modal layer as for the previous \n\t\t\t\t\tabs positioned element, but because of attaching order modal layer will be on top anyway\n\t\t    \t*/\n\t\t    \tvar zIndex = this._settings.zIndex||webix.ui.zIndex();\n\n\t\t    \t//set topmost modal layer\n\t\t    \tthis._previous_modality = webix._modality;\n\t\t    \twebix._modality = zIndex;\n\n\n\t\t    \tthis._modal_cover.style.zIndex = zIndex-1;\n\t\t    \tthis._viewobj.style.zIndex = zIndex;\n\t\t        document.body.appendChild(this._modal_cover);\n\t\t        document.body.style.overflow = \"hidden\";\n\t\t\t\twebix._event( this._modal_cover, \"click\", webix.bind(this._ignore_clicks, this));\n\t        }\n\t    }\n\t    else {\n\t        if (this._modal_cover){\n\t            webix.html.remove(this._modal_cover);\n\t            document.body.style.overflow = \"visible\";\n\n\t            //restore topmost modal layer\n\t        \t//set delay, as current window closing may have not finished click event\n\t        \t//need to wait while it is not fully processed\n\t        \tvar topmost = this._previous_modality;\n\t        \tsetTimeout(function(){ webix._modality = topmost; }, 1);\n\n\t        \tthis._modal_cover = null;\n\t        }\n\t    }\n\t    return value;\n    }\n};\n\n\t\nwebix.protoUI({\n\tname:\"window\",\n\n\t$init:function(config){\n\t\tthis._viewobj.innerHTML = \"<div class='webix_win_content'><div class='webix_win_head'></div><div class='webix_win_body'></div></div>\";\n\t\t\n\t\tthis._contentobj = this._viewobj.firstChild;\n\t\tthis._headobj = this._contentobj.childNodes[0];\n\t\tthis._dataobj = this._bodyobj = this._contentobj.childNodes[1];\n\t\tthis._viewobj.className +=\" webix_window\";\n\n\t\tthis._viewobj.setAttribute(\"role\", \"dialog\");\n\t\tthis._viewobj.setAttribute(\"tabindex\", \"0\");\n\t\t\n\t\tthis._head_cell = this._body_cell = null;\n\t\tthis._settings._inner = {top:false, left:false, right:false, bottom:false }; //set border flags\n\t\tif (!config.id) config.id = webix.uid();\n\n\t\twebix._event(this._contentobj, \"click\", webix.bind(this._ignore_clicks, this));\n\n\t\t// IE8 does not allow to define event capturing\n\t\tif(this._contentobj.addEventListener)\n\t\t\twebix._event(this._contentobj, \"click\", function(){\n\t\t\t\t// brings a window to the front of other windows\n\t\t\t\tif(!this._settings.zIndex && this._settings.toFront){\n\t\t\t\t\tthis._viewobj.style.zIndex = webix.ui.zIndex();\n\t\t\t\t}\n\t\t\t}, {bind:this, capture: true});\n\n\t\t// hidden_setter handling\n\t\tif(config.modal)\n\t\t\tthis._modal = true;\n\n\t\tthis.attachEvent(\"onViewMoveEnd\", function(){\n\t\t\tif(this._settings.position)\n\t\t\t\tdelete this._settings.position;\n\t\t});\n\t},\n\t_ignore_clicks:function(e){\n\t\tvar popups = webix.ui._popups;\n\t\tvar index = popups.find(this);\n\t\tif (index == -1)\n\t\t\tindex = popups.length - 1;\n\n\t\te.click_view = index;\n\t\tif (webix.env.isIE8)\n\t\t\te.srcElement.click_view = index;\n\t},\n\tgetChildViews:function(){\n\t\tif (this._head_cell)\n\t\t\treturn [this._head_cell, this._body_cell];\n\t\telse\n\t\t\treturn [this._body_cell];\n\t},\n\tzIndex_setter:function(value){\n        this._viewobj.style.zIndex = value;\n        return value;\n    },\n\t_remove:function(){ \n\t\tthis._body_cell = { destructor:function(){} };\t\n\t},\n\t_replace:function(new_view){\n\t\tthis._body_cell.destructor();\n\t\tthis._body_cell = new_view;\n\t\tthis._body_cell._parent_cell = this;\n\t\t\n\t\tthis._bodyobj.appendChild(this._body_cell._viewobj);\n\n\t\tvar cell = this._body_cell._viewobj.style;\n\t\tcell.borderTopWidth = cell.borderBottomWidth = cell.borderLeftWidth = cell.borderRightWidth = \"1px\";\n\t\tthis._body_cell._settings._inner = webix.clone(this._settings._inner);\n\n\t\tthis.resize(true);\n\t},\n\tshow:function(node, mode, point){\n\t\tif (node === true){\n\t\t\t//recursive call from some child item\n\t\t\tif (!this._settings.hidden)\n\t\t\t\treturn;\n\t\t\tnode = null;\n\t\t}\n\n\t\tif(!this.callEvent(\"onBeforeShow\",arguments))\n\t\t\treturn false;\n\n\t\tthis._settings.hidden = false;\n\t\tthis._viewobj.style.zIndex = (this._settings.zIndex||webix.ui.zIndex());\n\t\tif (this._settings.modal || this._modal){\n\t\t\tthis._modal_set(true);\n\t\t\tthis._modal = null; // hidden_setter handling\n\t\t}\n\n\t\tvar pos, dx, dy;\n\t\tmode = mode || {};\n\t\tif (!mode.pos)\n\t\t\tmode.pos = this._settings.relative;\n\n\t\t//get position of source html node\n\t\t//we need to show popup which pointing to that node\n\t\tif (node){\n\t\t\t//if event was provided - get node info from it\n\t\t\tif (typeof node == \"object\" && !node.tagName){\n\t\t\t\t/*below logic is far from ideal*/\n\t\t\t\tif (node.target || node.srcElement){\n\t\t\t\t\tpos = webix.html.pos(node);\n\t\t\t\t\tdx = 20;\n\t\t\t\t\tdy = 5;\n\t\t\t\t} else\n\t\t\t\t\tpos = node;\n\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\tnode = webix.toNode(node);\n\t\t\t\twebix.assert(node,\"Not existing target for window:show\");\n\t\t\t\tpos = webix.html.offset(node);\n\t\t\t}\t\n\n\t\t\t//size of body, we need to fit popup inside\n\t\t\tvar x = Math.max(window.innerWidth || 0, document.body.offsetWidth);\n\t\t\tvar y = Math.max(window.innerHeight || 0, document.body.offsetHeight);\n\n\t\t\t//size of node, near which popup will be rendered\n\t\t\tdx = dx || node.offsetWidth  || 0;\n\t\t\tdy = dy || node.offsetHeight || 0;\n\t\t\t//size of popup element\n\t\t\tvar size = this._last_size;\n\n \t\t\tvar fin_x = pos.x;\n\t\t\tvar fin_y = pos.y;\n\t\t\tvar point_y=0;\n\t\t\tvar point_x = 0;\n\n\t\t\tvar fit = this._settings.autofit;\n\t\t\tif (fit){\n\t\t\t\tvar nochange = (fit === \"node\");\n\t\t\t\tvar delta_x = 6; var delta_y=6; var delta_point = 6;\n\n\t\t\t\t//default pointer position - top \n\t\t\t\tpoint = \"top\";\n\t\t\t\tfin_y=0; fin_x = 0;\n\n\t\t\t\tvar scrollLeft = window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft;\n\t\t\t\t//if we want to place menu at righ, but there is no place move it to left instead\n\t\t\t\tif (x - pos.x - dx < size[0] && mode.pos == \"right\" && !nochange)\n\t\t\t\t\tmode.pos = \"left\";\n\n\t\t\t\tif (mode.pos == \"right\"){\n\t\t\t\t\tfin_x = pos.x+delta_x+dx; \n\t\t\t\t\tdelta_y = -dy;\n\t\t\t\t\tpoint = \"left\";\n\t\t\t\t\tpoint_y = Math.round(pos.y+dy/2);\n\t\t\t\t\tpoint_x = fin_x - delta_point;\n\t\t\t\t} else if (mode.pos == \"left\"){\n\t\t\t\t\tfin_x = pos.x-delta_x-size[0]-1;\n\t\t\t\t\tdelta_y = -dy;\n\t\t\t\t\tpoint = \"right\";\n\t\t\t\t\tpoint_y = Math.round(pos.y+dy/2);\n\t\t\t\t\tpoint_x = fin_x + size[0]+1;\n\t\t\t\t} else  {\n\t\t\t\t\t//left border of screen\n\t\t\t\t\tif (pos.x < scrollLeft){\n\t\t\t\t\t\tfin_x = scrollLeft;\n\t\t\t\t\t//popup exceed the right border of screen\n\t\t\t\t\t} else if (x+scrollLeft-pos.x > size[0]){\n\t\t\t\t\t\tfin_x = pos.x; //aligned\n\t\t\t\t\t} else{\n\t\t\t\t\t\tfin_x = x+scrollLeft-delta_x-size[0]; //not aligned\n\t\t\t\t\t}\n\n\t\t\t\t\tpoint_x = Math.round(pos.x+dx/2);\n\t\t\t\t\t//when we have a small popup, point need to be rendered at center of popup\n\t\t\t\t\tpoint_x = Math.min(point_x, fin_x + size[0] - delta_point*3);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//if height is not fixed - use default position\n\t\t\t\tvar scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;\n\t\t\t\tif (((!size[1] || (y+scrollTop-dy-pos.y-delta_y > size[1])) || nochange) && mode.pos != \"top\"){\n\t\t\t\t\t//bottom\t\n\t\t\t\t\tfin_y = dy+pos.y+delta_y - 4;\n\t\t\t\t\tif (!point_y){\n\t\t\t\t\t\tpoint = \"top\";\n\t\t\t\t\t\tpoint_y = fin_y-delta_point;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t//top\n\t\t\t\t\tfin_y = pos.y-delta_y - size[1];\n\t\t\t\t\tif (fin_y < 0){\n\t\t\t\t\t\tfin_y = 0; \n\t\t\t\t\t\t//left|right point can be used, but there is no place for top point\n\t\t\t\t\t\tif (point == \"top\") point = false;\n\t\t\t\t\t} else if (!point_y){\n\t\t\t\t\t\tpoint = \"bottom\";\n\t\t\t\t\t\tfin_y --;\n\t\t\t\t\t\tpoint_y = fin_y+size[1]+1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar deltax = (mode.x || 0);\n\t\t\tvar deltay = (mode.y || 0);\n\t\t\tthis.setPosition(fin_x+deltax, fin_y+deltay);\n\t\t\tif (this._set_point){\n\t\t\t\tif (point)\n\t\t\t\t\tthis._set_point(point,point_x+deltax, point_y+deltay);\n\t\t\t\telse\n\t\t\t\t\tthis._hide_point();\n\t\t\t}\n\t\t} else if (this._settings.position)\n\t\t\tthis._setPosition();\n\n\t\tthis._viewobj.style.display = \"block\";\n\t\tthis._hide_timer = 1;\n\t\twebix.delay(function(){ this._hide_timer = 0; }, this, [], (webix.env.touch ? 400 : 100 ));\n\t\t\n\t\tthis._render_hidden_views();\n\t\t\n\t\t\n\t\tif (this.config.autofocus){\n\t\t\tthis._prev_focus = webix.UIManager.getFocus();\n\t\t\twebix.UIManager.setFocus(this);\n\t\t}\n\n\t\tif (-1 == webix.ui._popups.find(this))\n\t\t\twebix.ui._popups.push(this);\n\n\t\tthis.callEvent(\"onShow\",[]);\n\t}, \n\t_hide:function(e){\n\t\t//do not hide modal windows\n\t\tif (this._settings.hidden || this._settings.modal || this._hide_timer || (e && e.showpopup)) return;\n\t\t//do not hide popup, when we have modal layer above the popup\n\t\tif (webix._modality && this._settings.zIndex <= webix._modality) return;\n\n\t\t//ignore inside clicks and clicks in child-popups\n\n\t\tif (e){\n\t\t\tvar index = webix.env.isIE8 ? e.srcElement.click_view : e.click_view;\n\t\t\tif (!index && index !== 0) index = -1;\n\n\t\t\tvar myindex = webix.ui._popups.find(this);\n\n\t\t\tif (myindex <= index) return;\n\t\t}\n\n\t\tthis.hide();\n\t},\n\thidden_setter:function(value){\n\t\tif(value) \n\t\t\tthis.hide();\n\t\telse\n\t\t\tthis.show();\n\t\treturn !!value;\n\t},\n\thide:function(force){\n\t\tif (this.$destructed) return;\n\n\t\tif (!force)\n\t\t\tif(this._settings.hidden) return;\n\n\t\tif (this._settings.modal)\n\t\t\tthis._modal_set(false);\n\t\t\t\n\t\tif (this._settings.position == \"top\"){\n\t\t\twebix.animate(this._viewobj, {type: 'slide', x:0, y:-(this._content_height+20), duration: 300,\n\t\t\t\t\t\t\t\t\t\t\tcallback:this._hide_callback, master:this});\n\t\t}\n\t\telse \n\t\t\tthis._hide_callback();\n\n\t\tif (this._settings.autofocus){\n\t\t\tvar el = document.activeElement;\n\t\t\t//as result of hotkey, we can have a activeElement set to document.body\n\t\t\tif (el && this._viewobj && (this._viewobj.contains(el) || el === document.body)){\n\t\t\t\twebix.UIManager.setFocus(this._prev_focus);\n\t\t\t\tthis._prev_focus = null;\n\t\t\t}\n\t\t}\n\n\t\tthis._hide_sub_popups();\n\t},\n\t//hide all child-popups\n\t_hide_sub_popups:function(){\n\t\tvar order = webix.ui._popups;\n\t\tvar index = order.find(this);\n\t\tvar size = order.length - 1;\n\n\t\tif (index > -1)\n\t\t\tfor (var i = size; i > index; i--)\n\t\t\t\tif (order[i]._hide_point)\t//hide only popups, skip windows\n\t\t\t\t\torder[i].hide();\n\t\t\n\t\torder.removeAt(index);\n\t},\n\tdestructor: function() {\n\t\tthis._modal_set(false);\n\t\twebix.html.remove(this._viewobj);\n\t\t\n\t\tif (this._settings.autofocus){\n\t\t\tif (!webix._final_destruction)\n\t\t\t\twebix.UIManager.setFocus(this._prev_focus);\n\t\t\tthis._prev_focus = null;\n\t\t}\n\t\t\n\t\tthis._hide_sub_popups();\n\t\tif (this._hide_point)\n\t\t\tthis._hide_point();\n\t\twebix.Destruction.destructor.apply(this, []);\n\t},\n\t_hide_callback:function(){\n\t\tif (!this.$destructed){\n\t\t\tthis._viewobj.style.display = \"none\";\n\t\t\tthis._settings.hidden = true;\n\t\t\tthis.callEvent(\"onHide\",[]);\n\t\t}\n\t},\n\tclose:function(){\n\t\tthis.destructor(); \n\t},\n\t_inner_body_set:function(value){\n\t\tvalue.borderless = true;\n\t},\n\tbody_setter:function(value){\n\t\tif (typeof value != \"object\")\n\t\t\tvalue = {template:value };\n\t\tthis._inner_body_set(value);\n\n\t\twebix._parent_cell = this;\n\t\tthis._body_cell = webix.ui._view(value);\n\t\tthis._body_cell._parent_cell = this;\n\n\t\tthis._bodyobj.appendChild(this._body_cell._viewobj);\n\t\treturn value;\n\t},\n\thead_setter:function(value){\n\t\tif (value === false) return value;\n\t\tif (typeof value != \"object\"){\n\t\t\tthis._viewobj.setAttribute(\"aria-label\", value);\n\t\t\tvalue = { template:value, padding:0 };\n\t\t}\n\t\t\n\t\tvalue.borderless = true;\n\n\t\twebix._parent_cell = this;\n\t\tthis._head_cell = webix.ui._view(value);\n\t\tthis._head_cell._parent_cell = this;\n\n\t\tthis._headobj.appendChild(this._head_cell._viewobj);\n\t\treturn value;\n\t},\n\tgetBody:function(){\n\t\treturn this._body_cell;\n\t},\n\tgetHead:function(){\n\t\treturn this._head_cell;\n\t},\n\tadjust:function(){ return this.resize(); },\n\tresizeChildren:function(){\n\t\tif (this._body_cell)\n\t\t\tthis.resize();\n\t},\n\tresize:function(){\n\t\twebix.ui.baseview.prototype.adjust.call(this);\n\t\tthis._setPosition(this._settings.left, this._settings.top);\n\t},\n\t_setPosition:function(x,y){\n\t\tif (this._settings.position){\n\t\t\tthis.$view.style.position = \"fixed\";\n\n\t\t\tvar width = this._content_width;\n\t\t\tvar height = this._content_height;\n\t\t\twebix.assert(width && height, \"Attempt to show not rendered window\");\n\n\t\t\tvar maxWidth = (window.innerWidth||document.documentElement.offsetWidth);\n\t\t\tvar maxHeight = (window.innerHeight||document.documentElement.offsetHeight);\n\t\t\tvar left = Math.round((maxWidth-width)/2);\n\t\t\tvar top = Math.round((maxHeight-height)/2);\n\n\t\t\tif (typeof this._settings.position == \"function\"){\n\t\t\t\tvar state = { \tleft:left, top:top, \n\t\t\t\t\t\t\t\twidth:width, height:height, \n\t\t\t\t\t\t\t\tmaxWidth:maxWidth, maxHeight:maxHeight };\n\t\t\t\tthis._settings.position.call(this, state);\n\t\t\t\tif (state.width != width || state.height != height)\n\t\t\t\t\tthis.$setSize(state.width, state.height);\n\n\t\t\t\tthis.setPosition(state.left, state.top);\n\t\t\t} else {\n\t\t\t\tif (this._settings.position == \"top\"){\n\t\t\t\t\tif (webix.animate.isSupported())\n\t\t\t\t\t\ttop = -1*height;\n\t\t\t\t\telse\n\t\t\t\t\t\ttop = 10;\n\t\t\t\t}\n\t\t\t\tthis.setPosition(left, top);\n\t\t\t}\n\t\t\t\n\t\t\tif (this._settings.position == \"top\")\n\t\t\t\twebix.animate(this._viewobj, {type: 'slide', x:0, y:height-((this._settings.padding||0)*2), duration: 300 ,callback:this._topPositionCallback, master:this});\n\t\t} else \n\t\t\tthis.setPosition(x,y);\n\t},\n\t_topPositionCallback:function(node){\n\t\twebix.animate.clear(node);\n\t\tthis._settings.top=-((this._settings.padding||0)*2);\n\t\tthis.setPosition(this._settings.left, this._settings.top);\n\t},\n\tsetPosition:function(x,y){\n\t\tthis._viewobj.style.top = y+\"px\";\n\t\tthis._viewobj.style.left = x+\"px\";\n\t\tthis._settings.left = x; this._settings.top=y;\n\t},\n\t$getSize:function(dx, dy){\n\t\tvar _borders = this._settings._inner;\n\t\tif (_borders){\n\t\t\tdx += (_borders.left?0:1)+(_borders.right?0:1);\n\t\t\tdy += (_borders.top?0:1)+(_borders.bottom?0:1);\n\t\t}\n\t\t//line between head and body\n\t\tif (this._settings.head)\n\t\t\tdy += 1;\n\n\t\tvar size =  this._body_cell.$getSize(0,0);\n\t\tvar headMinWidth = 0;\n\t\tif (this._head_cell){\n\t\t\tvar head_size = this._head_cell.$getSize(0,0);\n\t\t\tif (head_size[3]==head_size[2])\n\t\t\t\tthis._settings.headHeight = head_size[3];\n\t\t\tdy += this._settings.headHeight;\n\t\t\theadMinWidth = head_size[0];\n\t\t}\n\n\t\tif (this._settings.fullscreen){\n\t\t\tvar width = window.innerWidth || document.body.clientWidth;\n\t\t\tvar height = window.innerHeight || document.body.clientHeight;\n\t\t\treturn [width, width, height, height];\n\t\t}\n\n\t\t//get layout sizes\n\t\tvar self_size = webix.ui.view.prototype.$getSize.call(this, 0, 0);\n\n\t\t//use child settings if layout's one was not defined\n\t\tif (headMinWidth && size[1] > 100000)\n\t\t\tsize[0] = Math.max(headMinWidth, size[0]);\n\n\t\tself_size[1] = Math.min(self_size[1],(size[1]>=100000&&self_size[1]>=100000?Math.max(size[0], 300):size[1])+dx);\n\t\tself_size[3] = Math.min(self_size[3],(size[3]>=100000&&self_size[3]>=100000?Math.max(size[2], 200):size[3])+dy);\n\n\t\tself_size[0] = Math.min(Math.max(self_size[0],size[0] + dx), self_size[1]);\n\t\tself_size[2] = Math.min(Math.max(self_size[2],size[2] + dy), self_size[3]);\n\n\t\treturn self_size;\n\t},\n\t$setSize:function(x,y){\n\t\twebix.ui.view.prototype.$setSize.call(this,x,y);\n\t\tx = this._content_width;\n\t\ty = this._content_height;\n\t\tif (this._settings.head === false) {\n\t\t\tthis._headobj.style.display=\"none\";\n\t\t\tthis._body_cell.$setSize(x,y);\n\t\t} else { \n\t\t\tthis._head_cell.$setSize(x,this._settings.headHeight);\n\t\t\tthis._body_cell.$setSize(x,y-this._settings.headHeight);\n\t\t}\n\t},\n\t$skin:function(){\n\t\tthis.defaults.headHeight = webix.skin.$active.barHeight;\n\t},\n\tdefaults:{\n\t\ttop:0,\n\t\tleft:0,\n\t\tautofit:true,\n\t\trelative:\"bottom\",\n\t\tbody:\"\",\n\t\thead:\"\",\n\t\thidden: true,\n\t\tautofocus:true\n\t}\n}, webix.ui.view, webix.Movable, webix.Modality, webix.EventSystem);\n\nwebix.protoUI({\n\tname:\"popup\",\n\t$init:function(){\n\t\tthis._settings.head = false;\n\t\tthis.$view.className += \" webix_popup\";\n\t\twebix.attachEvent(\"onClick\", webix.bind(this._hide, this));\n\t\tthis.attachEvent(\"onHide\", this._hide_point);\n\t},\n\t$skin:function(){\n\t\tthis.defaults.headHeight = webix.skin.$active.barHeight;\n\t\tthis.defaults.padding = webix.skin.$active.popupPadding;\n\t},\n    close:function(){\n        webix.html.remove(this._point_element);\n        webix.ui.window.prototype.close.call(this);\n\t},\n\t$getSize:function(x,y){\n\t\treturn webix.ui.window.prototype.$getSize.call(this, x+this._settings.padding*2,y+this._settings.padding*2);\n\t},\n\t$setSize:function(x,y){\n\t\t\twebix.ui.view.prototype.$setSize.call(this,x,y);\n\t\t\tx = this._content_width-this._settings.padding*2;\n\t\t\ty = this._content_height-this._settings.padding*2;\n\t\t\tthis._contentobj.style.padding = this._settings.padding+\"px\";\n\t\t\tthis._headobj.style.display=\"none\";\n\t\t\tthis._body_cell.$setSize(x,y);\n\t},\n\t//redefine to preserve inner borders\n\t_inner_body_set:function(){},\n\thead_setter:function(){\n\t},\n\t_set_point:function(mode, left, top){\n\t\tthis._hide_point();\n\t\tdocument.body.appendChild(this._point_element = webix.html.create(\"DIV\",{ \"class\":\"webix_point_\"+mode },\"\"));\n\t\tthis._point_element.style.zIndex = webix.ui.zIndex();\n\t\tthis._point_element.style.top = top+\"px\";\n\t\tthis._point_element.style.left = left+\"px\";\n\t},\n\t_hide_point:function(){\n\t\tthis._point_element = webix.html.remove(this._point_element);\n\t}\n}, webix.ui.window);\n\nwebix.ui._popups = webix.toArray();\n\nwebix.extend(webix.ui.window, {\n\tresize_setter:function(value){\n\t\tif (value && !this._resizeHandlers)\n\t\t\tthis._renderResizeHandler();\n\n\t\treturn value;\n\t},\n\t_renderResizeHandler: function(){\n\t\tif(!this._rwHandle){\n\t\t\tthis._viewobj.firstChild.style.position = \"relative\";\n\t\t\tthis._rwHandle = webix.html.create(\"DIV\",{\n\t\t\t\t\"class\"\t: \"webix_resize_handle\"\n\t\t\t});\n\t\t\tthis._viewobj.firstChild.appendChild(this._rwHandle);\n\t\t\twebix._event(this._rwHandle, webix.env.mouse.down, this._wrDown, {bind:this});\n\t\t}\n\t},\n\t_showResizeFrame: function(width,height){\n\t\tif(!this._resizeFrame){\n\t\t\tthis._resizeFrame = webix.html.create(\"div\", {\"class\":\"webix_resize_frame\"},\"\");\n\t\t\tdocument.body.appendChild(this._resizeFrame);\n\t\t\tvar pos = webix.html.offset(this._viewobj);\n\t\t\tthis._resizeFrame.style.left = pos.x+\"px\";\n\t\t\tthis._resizeFrame.style.top = pos.y+\"px\";\n\t\t\tthis._resizeFrame.style.zIndex = webix.ui.zIndex();\n\t\t}\n\n\t\tthis._resizeFrame.style.width = width + \"px\";\n\t\tthis._resizeFrame.style.height = height + \"px\";\n\t},\n\t_wrDown:function(e){\n\t\tif (this.config.resize){\n\t\t\twebix.html.addCss(document.body,\"webix_noselect webix_resize_cursor\");\n\t\t\tthis._wsReady = webix.html.offset(this._viewobj);\n\n\t\t\tthis._resizeHandlersMove = webix.event(document.body, webix.env.mouse.move, this._wrMove, {bind:this});\n\t\t\tthis._resizeHandlersUp   = webix.event(document.body, webix.env.mouse.up, this._wrUp, {bind:this});\n\t\t}\n\t},\n\t_wrMove:function(e){\n\t\tif (this._wsReady !== false){\n\t\t\tvar pos = webix.html.pos(e);\n\t\t\tvar progress = {x:pos.x - this._wsReady.x+10, y: pos.y - this._wsReady.y+10};\n\n\t\t\tif (Math.abs(this._wsReady.x - pos.x) < (this.config.minWidth||100) || Math.abs(this._wsReady.y - pos.y) < (this.config.maxHeight||100))\n\t\t\t\treturn;\n\n\t\t\tthis._wsProgress = progress;\n\t\t\tthis._showResizeFrame(progress.x,progress.y);\n\t\t}\n\t},\n\t_wrUp:function(){\n\t\t// remove resize frame and css styles\n\t\tif (this._resizeFrame)\n\t\t\tthis._resizeFrame = webix.html.remove(this._resizeFrame);\n\t\t\n\t\twebix.html.removeCss(document.body,\"webix_resize_cursor\");\n\t\twebix.html.removeCss(document.body,\"webix_noselect\");\n\t\twebix.eventRemove(this._resizeHandlersMove);\n\t\twebix.eventRemove(this._resizeHandlersUp);\n\n\t\t// set Window sizes\n\t\tif (this._wsProgress){\n\t\t\tthis.config.width = this._wsProgress.x;\n\t\t\tthis.config.height = this._wsProgress.y;\n\t\t\tthis.resize();\n\t\t}\n\n\t\tthis._wsReady = this._wsProgress = false;\n\t\tthis.callEvent(\"onViewResize\",[]);\n\t}\n});\n\n\nwebix.protoUI({\n\tname:\"suggest\",\n\tdefaults:{\n\t\tautofocus:false,\n\t\ttype:\"list\",\n\t\tkeyPressTimeout:1,\n\t\tbody:{\n\t\t\tyCount:10,\n\t\t\tautoheight:true,\n\t\t\tbody:true,\n\t\t\tselect:true,\n\t\t\tborderless:true,\n\t\t\tnavigation:true\n\t\t},\n\t\tfilter:function(item,value){\n\t\t\tif (item.value.toString().toLowerCase().indexOf(value.toLowerCase())===0) return true;\n   \t\t\treturn false;\n\t\t}\n\t},\n\ttemplate_setter:webix.template,\n    filter_setter:function(value){\n        return webix.toFunctor(value, this.$scope);\n    },\n\t$init:function(obj){\n\t\tvar temp = {};\n\t\twebix.extend(temp, webix.copy(this.defaults.body));\n\t\ttemp.view = obj.type || this.defaults.type;\n\n\t\tvar etemp = this._get_extendable_cell(temp);\n\t\tif (obj.body)\n\t\t\twebix.extend(etemp, obj.body, true);\n\n\t\tif (obj.data)\n\t\t\tetemp.data = obj.data;\n\t\tif (obj.url)\n\t\t\tetemp.url = obj.url;\n\t\tif (obj.datatype)\n\t\t\tetemp.datatype = obj.datatype;\n\n\t\tif (obj.id)\n\t\t\ttemp.id = temp.id || (obj.id+\"_\"+temp.view);\n\n\t\tobj.body = temp;\n\t\tthis.$ready.push(this._set_on_popup_click);\n\n\t\tthis.attachEvent(\"onShow\", function(){\n\t\t\tif (this._settings.master){\n\t\t\t\tvar master = webix.$$(this._settings.master);\n\t\t\t\tif(master){\n\t\t\t\t\tvar node = master._getInputDiv ? master._getInputDiv() : master.getInputNode();\n\t\t\t\t\tnode.setAttribute(\"aria-expanded\", \"true\");\n\t\t\t\t}\n\t\t\t\t\t\n\t\t\t}\n\t\t\tthis._show_selection();\n\t\t});\n\t\tthis.attachEvent(\"onHide\", function(){\n\t\t\tif (this._settings.master){\n\t\t\t\tvar master = webix.$$(this._settings.master);\n\t\t\t\tif(master){\n\t\t\t\t\tvar node = master._getInputDiv ? master._getInputDiv() : master.getInputNode();\n\t\t\t\t\tnode.setAttribute(\"aria-expanded\", \"false\");\n\t\t\t\t}\n\t\t\t\t\t\n\t\t\t}\n\t\t});\n\t\tthis._old_text = {};\n\t},\n\t_get_extendable_cell:function(obj){\n\t\treturn obj;\n\t},\n\t_preselectMasterOption: function(data){\n\t\tvar master, node, text = \"\";\n\n\t\tif (data){\n\t\t\tif (this._settings.master){\n\t\t\t\tmaster = webix.$$(this._settings.master);\n\t\t\t\tnode = master.getInputNode();\n\t\t\t\tif(node && master.$setValueHere){\n\t\t\t\t\tmaster.$setValueHere(data.value);\n\t\t\t\t}\n\t\t\t\telse if (node){\n\t\t\t\t\tif(master.options_setter)\n\t\t\t\t\t\ttext = this.getItemText(data.id);\n\t\t\t\t\telse if(data.value)\n\t\t\t\t\t\ttext = master._get_visible_text ? master._get_visible_text(data.value) : data.value.toString();\n\n\t\t\t\t\tif (webix.isUndefined(node.value))\n\t\t\t\t\t\tnode.innerHTML = text;\n\t\t\t\t\telse\n\t\t\t\t\t\tnode.value = text.replace(/<[^>]*>/g,\"\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tnode = node || this._last_input_target;\n\t\tif(node)\n\t\t\tnode.focus();\n\t},\n\tsetMasterValue:function(data, refresh){\n\t\tvar text = data.id ? this.getItemText(data.id) : (data.text||data.value);\n\n\t\tif (this._settings.master){\n\t\t\tvar master = webix.$$(this._settings.master);\n\t\t\tif (refresh && data.id)\n\t\t\t\tmaster.refresh();\n\t\t\telse if (master.options_setter)\n\t\t\t\tmaster.setValue(data.$empty?\"\":data.id);\n\t\t\telse if(master.setValueHere)\n\t\t\t\tmaster.setValueHere(text);\n\t\t\telse\n\t\t\t\tmaster.setValue(text);\n\t\t} else if (this._last_input_target){\n\t\t\tthis._last_input_target.value = text;\n\t\t}\n\n\t\tif (!refresh){\n\t\t\tthis.hide(true);\n\t\t\tif (this._last_input_target)\n\t\t\t\tthis._last_input_target.focus();\n\t\t}\n\t\tthis.callEvent(\"onValueSuggest\", [data, text]);\n\t\twebix.delay(function(){\n\t\t\t webix.callEvent(\"onEditEnd\",[]);\n\t\t});\n\t},\n\tgetMasterValue:function(){\n\t\tif (this._settings.master)\n\t\t\treturn webix.$$(this._settings.master).getValue();\n\t\treturn null;\n\t},\n\tgetItemId:function(text){\n\t\tvar list = this.getList();\n\t\tvar type = list.type;\n\t\tfor (var key in list.data.pull){\n\t\t\tvar obj = list.getItem(key);\n\t\t\tif (this._settings.filter.call(this, obj, text))\n\t\t\t\treturn obj.id;\n\t\t}\n\t},\n\tgetItemText:function(id){\n\t\tvar item = this.getList().getItem(id);\n\n\t\tif (!item)\n\t\t\treturn this._old_text[id] || \"\";\n\n\t\tif (this._settings.template)\n\t\t\treturn this._settings.template.call(this, item, this.type);\n\n\t\tif (this._settings.textValue)\n\t\t\treturn item[this._settings.textValue];\n\t\t\n\t\tvar type = this.getList().type;\n\t\tvar text = type.template.call(type, item, type);\n\n\t\treturn (this._old_text[id] = text);\n\t},\n\tgetSuggestion:function(){\n\t\tvar id,\n\t\t\tlist = this.getList(),\n\t\t\torder = list.data.order;\n\n\t\tif (list.getSelectedId)\n\t\t\tid = list.getSelectedId();\n\n\t\tif (order.length && (!id || order.find(id) <0) )\n\t\t\tid = order[0];\n\n\t\t//complex id in datatable\n\t\tif (id && typeof id == \"object\") id = id+\"\";\n\t\treturn id;\n\t},\n\tgetList:function(){\n\t\treturn this._body_cell;\n\t},\n\t_set_on_popup_click:function(){\n\t\tvar list = this.getList();\n\t\tvar type = this._settings.type;\n\n\t\tif (list.count){\n\t\t\tlist.attachEvent(\"onItemClick\", webix.bind(function(item){\n\t\t\t\tthis.setMasterValue(list.getItem(item));\n\t\t\t}, this));\n\t\t\tlist.data.attachEvent(\"onstoreupdated\",webix.bind(function(id, obj, mode){\n\t\t\t\tif (mode == \"delete\" && id == this.getMasterValue())\n\t\t\t\t\tthis.setMasterValue({ id:\"\", text:\"\" }, 1);\n\t\t\t\telse if (mode == \"update\" && id == this.getMasterValue()){\n\t\t\t\t\tthis.setMasterValue(obj, 1);\n\t\t\t\t}\n\t\t\t}, this));\n\t\t\tlist.data.attachEvent(\"onAfterFilter\", webix.bind(this._suggest_after_filter, this));\n\t\t\tlist.data.attachEvent(\"onStoreLoad\", webix.bind(this._suggest_after_filter, this));\n\t\t\tif (webix.isUndefined(this._settings.fitMaster))\n\t\t\t\tthis._settings.fitMaster = true;\n\t\t} else if (type == \"calendar\"){\n\t\t\tlist.attachEvent(\"onDateSelect\", function(date){\n\t\t\t\tthis.getParentView().setMasterValue({ value:date});\n\t\t\t});\n\t\t\tlist.attachEvent(\"onTodaySet\", function(date){\n\t\t\t\tthis.getParentView().setMasterValue({ value:date});\n\t\t\t});\n\t\t\tlist.attachEvent(\"onDateClear\", function(date){\n\t\t\t\tthis.getParentView().setMasterValue({ value:date});\n\t\t\t});\n\t\t} else if (type == \"colorboard\"){\n\t\t\tlist.attachEvent(\"onItemClick\", function(value){\n\t\t\t\tthis.getParentView().setMasterValue({ value:value });\n\t\t\t});\n\t\t}\n\t},\n\tinput_setter: function(value) {\n\t\tthis.linkInput(value);\n\t\treturn 0;\n\t},\n\tlinkInput: function(input){\n\t\tvar node;\n\t\tif (input.getInputNode){\n\t\t\tnode = input.getInputNode();\n\t\t\tnode.webix_master_id = input._settings.id;\n\t\t} else\n\t\t\tnode = webix.toNode(input);\n\n\t\twebix._event(node,\"keydown\",function(e){\n\t\t\tif ((node != document.body || this.isVisible()) && (input.config ? (!input.config.readonly) : (!node.getAttribute(\"readonly\"))))\n\t\t\t\tthis._suggestions(e);\n\t\t},{bind:this});\n\t\t\n\t\tif(input._getInputDiv)\n\t\t\tnode = input._getInputDiv();\n\t\t\n\t\tnode.setAttribute(\"aria-autocomplete\", \"list\");\n\t\tnode.setAttribute(\"aria-expanded\", \"false\");\n\n\t\tif(node.tagName === \"DIV\"){\n\t\t\tnode.setAttribute(\"aria-live\", \"assertive\");\n\t\t\tnode.setAttribute(\"aria-atomic\", \"true\");\n\t\t}\n\n\t\tthis._non_ui_mode = true;\n\t},\n\t_suggestions: function(e){\n\t\te = (e||event);\n\t\tvar list = this.getList();\n\t\t\n\t\tvar trg = e.target||e.srcElement;\n\n\t\tthis._last_input_target = trg;\n\t\tthis._settings.master = trg.webix_master_id;\n\n\t\twindow.clearTimeout(this._key_timer);\n\n\t\tvar code = e.keyCode;\n\t\t//shift and ctrl\n\t\tif (code == 16 || code == 17) return;\n\n\t\t// tab - hide popup and do nothing\n\t\tif (code == 9)\n\t\t\treturn this._tab_key(this,list);\n\n\t\t// escape - hide popup\n\t\tif (code == 27)\n\t\t\treturn this._escape_key(this,list);\n\n\t\t// enter\n\t\tif (code == 13)\n\t\t\treturn this.$enterKey(this,list);\n\n\t\t// up/down/right/left are used for navigation\n\t\tif (this._navigate(e)) {\n\t\t\twebix.html.preventEvent(e);\n\t\t\treturn false;\n\t\t}\n\n\t\tif (webix.isUndefined(trg.value)) return;\n\n\t\tclearTimeout(this._last_delay);\n\t\tthis._last_delay = webix.delay(function(){\n\t\t\t//focus moved to the different control, suggest is not necessary\n\t\t\tif (!this._non_ui_mode && \n\t\t\t\t\twebix.UIManager.getFocus() != webix.$$(this._settings.master)) return;\n\n\t\t\tthis._resolve_popup = true;\n\t\t\t//for multicombo\n\t\t\tvar val = trg.value;\n\n\t\t\t// used to prevent showing popup when it was initialized\n\t\t\tif (list.config.dataFeed)\n\t\t\t\tlist.filter(\"value\", val);\n\t\t\telse if (list.filter){\n\t\t\t\tlist.filter(webix.bind(function(item){\n\t\t\t\t\treturn this._settings.filter.call(this,item,val);\n\t\t\t\t}, this));\n\t\t\t}\n\t\t},this, [], this._settings.keyPressTimeout);\n\t},\n\t_suggest_after_filter: function() {\n\t\tif (!this._resolve_popup) return true;\n\t\tthis._resolve_popup = false;\n\n\t\tvar list = this.getList();\n\t\t\n\t\t// filtering is complete\n\t\t// if there are as min 1 variant it must be shown, hidden otherwise\n\t\tif (list.count() >0){\n\t\t\tthis.adjust();\n\t\t\tif(!this.isVisible())\n\t\t\t\tthis._dont_unfilter = true;\n\t\t\tthis.show(this._last_input_target,null,true);\n\t\t\tthis._dont_unfilter = false;\n\t\t} else {\n\t\t\tthis.hide(true);\n\t\t\tthis._last_input_target = null;\n\t\t}\n\t},\n\n\tshow:function(node){\n\t\tif (!this.isVisible()){\n\t\t\tvar list = this.getList();\n\t\t\tif (list.filter && !this._dont_unfilter){\n\t\t\t\tlist.filter(\"\");\n\t\t\t}\n\n\t\t\tif(this.$customWidth){\n\t\t\t\tthis.$customWidth(node);\n\t\t\t}\n\t\t\tif (node.tagName && this._settings.fitMaster){\n\t\t\t\tthis._settings.width = node.offsetWidth -2 ; //2 - borders\n\t\t\t}\n\t\t\tif (list._zoom_level)\n\t\t\t\tlist.render();\n\n\t\t\tthis.adjust();\n\n\t\t\t// needed to return focus\n\t\t\tif(node.tagName == \"INPUT\")\n\t\t\t\tthis._last_input_target = node;\n\t\t}\n\t\twebix.ui.popup.prototype.show.apply(this, arguments);\n\t},\n\t_show_selection:function(list){\n\t\tlist = list||this.getList();\n\t\tvar value = this.getMasterValue();\n\n\t\tif( list.select && list.showItem ){\n\n\t\t\tif (value && list.exists && list.exists(value)){\n\t\t\t\tlist.select(value);\n\t\t\t\tlist.showItem(value);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tlist.unselect();\n\t\t\t\tlist.showItem(list.getFirstId());\n\t\t\t}\n\t\t}\n\t\telse if(list.setValue){\n\t\t\tif (this._settings.master)\n\t\t\t\tvalue = webix.$$(this._settings.master).$prepareValue(value);\n\t\t\tlist.setValue(value);\n\t\t}\n\t},\n\t$enterKey: function(popup,list) {\n\t\tvar value;\n\n\t\tif (popup.isVisible()) {\n\t\t\tif (list.count && list.count()){\n\t\t\t\tvalue = list.getSelectedId(false, true);\n\t\t\t\tif(list.count()==1 && list.getFirstId()!=value)\n\t\t\t\t\tvalue = list.getFirstId();\n\t\t\t\tif(value)\n\t\t\t\t\tvalue = list.getItem(value);\n\t\t\t}\n\t\t\telse if(list.getSelectedDate && list.getSelectedDate())\n\t\t\t\tvalue = { value:list.getSelectedDate() };\n\t\t\telse if(list.getValue && list.getValue())\n\t\t\t\tvalue = {value: list.getValue() };\n\t\t\t\n\t\t\tif (value)\n\t\t\t\tthis.setMasterValue(value);\n\t\t\t\n\t\t\tpopup.hide(true);\n\t\t}\n\t\telse\n\t\t\tpopup.show(this._last_input_target);\n\t},\n\t_escape_key: function(popup, list) {\n\t\treturn popup.hide(true);\n\t},\n\t_tab_key: function(popup, list) {\n\t\treturn popup.hide(true);\n\t},\n\t/*! suggestions navigation: up/down buttons move selection\n\t *\t@param e\n\t *\t\tevent object\n\t **/\n\t_navigate: function(e) {\n\t\tvar list = this.getList();\n\t\tvar code = e.keyCode;\n\t\tvar data;\n\n\t\tif( list.moveSelection && code < 41 && code > 32 && !e.ctrlKey && !e.metaKey && !e.shiftKey && !e.altKey) {\n\t\t\t// down arrow\n\t\t\tif (code === 40 ) {\n\t\t\t\tvar visible = this.isVisible();\n\t\t\t\tif (!visible)\n\t\t\t\t\tthis.show(this._last_input_target);\n\t\t\t\t\n\t\t\t\tlist.moveSelection(\"down\");\n\t\t\t}// other arrows\n\t\t\telse {\n\t\t\t\tvar master = this._settings.master;\n\t\t\t\tif((list.count && code !==38) || (!list.count && !list.isVisible()))\n\t\t\t\t\treturn false;\n\n\t\t\t\tvar dir;\n\t\t\t\tif(code == 33) dir = \"pgup\";\n\t\t\t\tif(code == 34) dir = \"pgdown\";\n\t\t\t\tif(code == 35) dir = \"bottom\";\n\t\t\t\tif(code == 36) dir = \"top\";\n\t\t\t\tif(code == 37) dir = \"left\";\n\t\t\t\tif(code == 38) dir = \"up\";\n\t\t\t\tif(code == 39) dir = \"right\";\n\n\t\t\t\tlist.moveSelection(dir);\n\t\t\t}\n\t\t\tif(list.count)\n\t\t\t\tdata = list.getSelectedItem();\n\t\t\telse if(list.getSelectedDate)\n\t\t\t\tdata = { value:list.getVisibleDate()};\n\t\t\telse if(list.getValue)\n\t\t\t\tdata = { value:list.getValue() };\n\t\t\t\n\t\t\tthis._preselectMasterOption(data);\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\tgetValue:function(){\n\t\tvar list = this.getList();\n\t\tvar  value = (list.getValue ? list.getValue() : list.getSelectedId()) || \"\";\n\t\tvalue = value.id || value;\n\n\t\t// check empty\n\t\tif(list.getItem){\n\t\t\tvar item = list.getItem(value);\n\t\t\tif(item && item.$empty)\n\t\t\t\treturn \"\";\n\t\t}\n\t\treturn value;\n\t},\n\tsetValue:function(value){\n\t\tvar list = this.getList();\n\t\tif(value){\n            if(list.exists(value)){\n                list.select(value);\n                list.showItem(value);\n            }\n        }else{\n            list.unselect();\n            list.showItem(list.getFirstId());\n        }\n\t}\n}, webix.ui.popup);\n/*aria-style handling for options of multiple-value controls (radio, segmented, tabbar)*/\n\nwebix.HTMLOptions = {\n\t$init:function(config){\n\t\tif(webix.skin.$active.customRadio || this.addOption)\n\t\t\twebix._event( this.$view, \"keydown\", this._moveSelection, {bind:this});\n\t},\n\t_focus: function(){\n\t\tvar input = this._getInputNode();\n\t\tif(input)\n\t\t\tfor(var i=0; i<input.length; i++){\n\t\t\t\tif(input[i].getAttribute(\"tabindex\") == \"0\")\n\t\t\t\t\tinput[i].focus();\n\t\t\t}\n\t},\n\t_blur: function(){\n\t\tvar input = this._getInputNode();\n\t\tif(input)\n\t\t\tfor(var i=0; i<input.length; i++){\n\t\t\t\tif(input[i].getAttribute(\"tabindex\") == \"0\") input[i].blur();\n\t\t\t}\n\t},\n\t_moveSelection:function(e){\n\t\tvar code = e.which || e.keyCode;\n\n\t\tvar startCode = this.addOption?34:36;\n\n\t\tif(code>startCode && code <41){\n\t\t\twebix.html.preventEvent(e);\n\t\t\tvar index;\n\t\t\tvar inp = this._getInputNode();\n\n\t\t\tif(code == 35) index = inp.length-1;\n\t\t\telse if(code === 36 ) index = 0;\n\t\t\telse{\n\t\t\t\tvar dir = (code === 37 || code ===38)?-1:1;\n\t\t\t\tfor(var i =0; i<inp.length; i++){\n\t\t\t\t\tif(inp[i].getAttribute(\"tabindex\") == \"0\"){\n\t\t\t\t\t\tindex = i + dir;\n\t\t\t\t\t\tif(index<0) index = inp.length-1;\n\t\t\t\t\t\telse if(index>=inp.length) index = 0;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(!webix.isUndefined(index)){\n\t\t\t\tvar id = this.addOption ? inp[index].getAttribute(\"button_id\") : inp[index].value;\n\t\t\t\tif(webix.skin.$active.customRadio && !this.addOption)\n\t\t\t\t\tinp = this.$view.getElementsByTagName(\"BUTTON\");\n\n\t\t\t\tthis.setValue(id);\n\t\t\t\tinp[index].focus();\n\t\t\t}\n\t\t}\n\t}\n};\n\n\nwebix.attachEvent(\"onClick\", function(e){\n\tvar element = webix.$$(e);\n\tif (element && element.touchable){\n\t\twebix.UIManager.applyChanges(element);\n\n\t\t//for inline elements - restore pointer to the master element\n\t\telement.getNode(e);\n\t\t//reaction on custom css elements in buttons\n\t\tvar trg=e.target||e.srcElement;\n\t\tif (trg.className == \"webix_disabled\")\n\t\t\treturn;\n\n\t\tvar css = \"\";\n\t\tvar id = null;\n\t\tvar found = false;\n\t\tif (trg.className && trg.className.toString().indexOf(\"webix_view\")===0) return;\n\n\t\tif (element)\n\t\t\twebix.UIManager._focus_action(element);\n\n\t\t//loop through all parents\n\t\twhile (trg && trg.parentNode){\n\t\t\tif (trg.getAttribute){\n\t\t\t\tif (trg.getAttribute(\"view_id\"))\n\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\tcss=trg.className;\n\t\t\t\tif (css){\n\t\t\t\t\tcss = css.toString().split(\" \");\n\t\t\t\t\tfor (var i =0; i<css.length; i++){\n\t\t\t\t\t\tif (element.on_click[css[i]]){\n\t\t\t\t\t\t\tvar res =  element.on_click[css[i]].call(element,e,element._settings.id,trg);\n\t\t\t\t\t\t\tif (res===false)\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\ttrg=trg.parentNode;\n\t\t}\n\n\n\t\tif (element._settings.click){\n\t\t\tvar code = webix.toFunctor(element._settings.click, element.$scope);\n\t\t\tif (code && code.call) code.call(element, element._settings.id, e);\n\t\t}\n\n\n\n\t\tvar popup = element._settings.popup;\n\t\tif (element._settings.popup && !element._settings.readonly){\n\t\t\tif (typeof popup == \"object\" && !popup.name)\n\t\t\t\tpopup = element._settings.popup = webix.ui(popup)._settings.id;\n\n\t\t\tvar popup = webix.$$(popup);\n\t\t\twebix.assert(popup, \"Unknown popup\");\n\n\t\t\tif (!popup.isVisible()){\n\t\t\t\tpopup._settings.master = element._settings.id;\n\t\t\t\tpopup.show((element.getInputNode()||element.getNode()),null,true);\n\t\t\t}\n\t\t}\n\n\t\telement.callEvent(\"onItemClick\", [element._settings.id, e]);\n\t}\n});\n\n\nwebix.protoUI({\n\tname:\"button\",\n\ttouchable:true,\n\t$skin:function(){\n\t\tthis.defaults.height = webix.skin.$active.buttonHeight||webix.skin.$active.inputHeight;\n\t\t//used in \"text\"\n\t\tthis._labelTopHeight = webix.skin.$active.labelTopHeight||15;\n\t\tthis._borderWidth = webix.skin.$active.borderWidth;\n\t},\n\tdefaults:{\n\t\ttemplate:function(obj, common){\n\t\t\tvar text = common.$renderInput(obj, common);\n\t\t\tif (obj.badge) text = text.replace(\"</button>\", \"<span class='webix_badge'>\"+obj.badge+\"</span></button>\");\n\t\t\treturn \"<div class='webix_el_box' style='width:\"+obj.awidth+\"px; height:\"+obj.aheight+\"px'>\"+ text + \"</div>\";\n\t\t},\n\t\tlabel:\"\",\n\t\tborderless:true\n\t},\n\t$renderInput:function(obj){\n\t\tvar css = \"class='webixtype_\"+(obj.type||\"base\")+\"' \";\n\t\treturn \"<button type='button' \"+(obj.popup?\"aria-haspopup='true'\":\"\")+css+\">\"+webix.template.escape(obj.label||obj.value)+\"</button>\";\n\t},\n\t$init:function(config){\n\t\tthis._viewobj.className += \" webix_control webix_el_\"+(this.$cssName||this.name);\n\n\t\tthis.data = this._settings;\n\t\tthis._dataobj = this._viewobj;\n\n\t\tthis._calc_size(config);\n\t},\n\thotkey_setter: function(key){\n\t\tvar control = this;\n\t\tthis._addElementHotKey(key, function(view,ev){\n\t\t\tvar elem = control.$view.firstChild;\n\t\t\twebix.html.triggerEvent(elem, \"MouseEvents\", \"click\");\n\t\t\twebix.html.preventEvent(ev);\n\t\t});\n\t},\n\n\t_addElementHotKey: function(key, func, view){\n\t\tvar keyCode = webix.UIManager.addHotKey(key, func, view);\n\t\tthis.attachEvent(\"onDestruct\", function(){\n\t\t\twebix.UIManager.removeHotKey(keyCode, func, view);\n\t\t});\n\t},\n\ttooltip_setter: function(value){\n\t\tvar box = this._getBox() || this.$view.firstChild;\n\t\tif(box)\n\t\t\tbox.title = value;\n\t\treturn value;\n\t},\n\ttype_setter:function(value){\n\t\tif (this._types[value])\n\t\t\tthis.$renderInput = webix.template(this._types[value]);\n\t\tif (value == 'prev' || value == 'next')\n\t\t\tthis._set_inner_size = this._set_inner_size_next;\n\t\telse\n\t\t\tthis._set_inner_size = false;\n\t\treturn value;\n\t},\n\t_types:{\n\t\thtmlbutton: \"<button type='button' class='webix_el_htmlbutton webixtype_base'>#label#</button>\",\n\n\t\tprev:\"<input type='button' class='webixtype_prev' value='#label#' /><div class='webix_el_arrow webixtype_prev_arrow'></div>\",\n\t\tnext:\"<input type='button' class='webixtype_next' value='#label#' /><div class='webix_el_arrow webixtype_next_arrow'></div>\",\n\n\t\timageButton:\"<button type='button' class='webix_img_btn_abs webixtype_base' style='width:100%; line-height:#cheight#px'><div class='webix_image' style='width:#dheight#px;height:#dheight#px;background-image:url(#image#);'> </div> #label#</button>\",\n\t\timageButtonTop:\"<button type='button' class='webix_img_btn_abs webix_img_btn_abs_top webixtype_base'><div class='webix_image' style='width:100%;height:100%;background-image:url(#image#);'> </div> <div class='webix_img_btn_text'>#label#</div></button>\",\n\n\t\timage:\"<button type='button' class='webix_img_btn' style='line-height:#cheight#px;'><div class='webix_image' style='width:#cheight#px;height:#cheight#px;background-image:url(#image#);'> </div> #label#</button>\",\n\t\timageTop:\"<button type='button' class='webix_img_btn_top'><div class='webix_image' style='width:100%;height:100%;background-image:url(#image#);'></div> <div class='webix_img_btn_text'>#label#</div></button>\",\n\n\t\ticon:\"<button type='button' class='webix_img_btn' style='line-height:#cheight#px;'><span class='webix_icon_btn fa-#icon#' style='max-width:#cheight#px;'></span>#label#</button>\",\n\t\ticonButton:\"<button type='button' class='webix_img_btn_abs webixtype_base' style='width:100%;'><span class='webix_icon fa-#icon#'></span> #label#</button>\",\n\t\ticonTop:\"<button type='button' class='webix_img_btn_top' style='width:100%;top:4px;text-align:center;'><span class='webix_icon fa-#icon#'></span><div class='webix_img_btn_text'>#label#</div></button>\",\n\t\ticonButtonTop:\"<button type='button' class='webix_img_btn_abs webix_img_btn_abs_top webixtype_base' style='width:100%;top:0px;text-align:center;'><span class='webix_icon fa-#icon#'></span><div class='webix_img_btn_text'>#label#</div></button>\"\n\n\t},\n\t_findAllInputs: function(){\n\t\tvar result = [];\n\t\tvar tagNames = [\"input\",\"select\",\"textarea\",\"button\"];\n\t\tfor(var i=0; i< tagNames.length; i++){\n\t\t\tvar inputs = this.$view.getElementsByTagName(tagNames[i]);\n\t\t\tfor(var j = 0; j< inputs.length; j++){\n\t\t\t\tresult.push(inputs[j]);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t},\n\tdisable: function(){\n        var i, node,\n\t        elem = this._getBox();\n    \twebix.ui.baseview.prototype.disable.apply(this, arguments);\n\t\tif(elem && elem.className.indexOf(\" webix_disabled_box\")== -1){\n\t\t\telem.className += \" webix_disabled_box\";\n\t\t\tvar inputs = this._findAllInputs();\n\t\t\tfor(i=0; i< inputs.length; i++)\n\t\t\t\tinputs[i].setAttribute(\"disabled\",true);\n\n\t\t\t// richselect and based on it\n\t\t\tnode = this.getInputNode();\n\t\t\tif(node && node.tagName.toLowerCase() == \"div\"){\n\t\t\t\tthis._disabledTabIndex = node.getAttribute(\"tabIndex\");\n\t\t\t\tnode.removeAttribute(\"tabIndex\");\n\t\t\t}\n\n\t\t\tif(this._settings.labelPosition == \"top\"){\n\t\t\t\tvar label = this._dataobj.firstChild;\n\t\t\t\tif(label)\n\t\t\t\t\tlabel.className += \" webix_disabled_top_label\";\n\t\t\t}\n\t\t}\n\t},\n\tenable: function(){\n\t\twebix.ui.baseview.prototype.enable.apply(this, arguments);\n\t\tvar node,\n\t\t\telem = this._getBox();\n\t\tif(elem){\n\t\t\telem.className = elem.className.replace(\" webix_disabled_box\",\"\");\n\t\t\tvar inputs = this._findAllInputs();\n\t\t\tfor(var i=0; i< inputs.length; i++)\n\t\t\t\tinputs[i].removeAttribute(\"disabled\");\n\n\t\t\tnode = this.getInputNode();\n\t\t\tif(node && !webix.isUndefined(this._disabledTabIndex))\n\t\t\t\tnode.setAttribute(\"tabIndex\",this._disabledTabIndex);\n\n\t\t\tif(this._settings.labelPosition == \"top\"){\n\t\t\t\tvar label = this._dataobj.firstChild;\n\t\t\t\tif(label)\n\t\t\t\t\tlabel.className = label.className.replace(\" webix_disabled_top_label\",\"\");\n\t\t\t}\n\t\t}\n\t},\n\t$setSize:function(x,y){\n\t\tif(webix.ui.view.prototype.$setSize.call(this,x,y)){\n\t\t\tthis.render();\n\t\t}\n\t},\n\tsetValue:function(value){\n\t\tvalue = this.$prepareValue(value);\n\t\tvar oldvalue = this._settings.value;\n\t\t\n\t\tif (this.$compareValue(oldvalue, value)) return false;\n\t\t\n\t\tthis._settings.value = value;\n\t\tif (this._rendered_input)\n\t\t\tthis.$setValue(value);\n\n\t\tthis.callEvent(\"onChange\", [value, oldvalue]);\n\t},\n\t$compareValue:function(oldvalue, value){ return oldvalue == value; },\n\t$prepareValue:function(value){ return this._pattern(value, false); },\n\t_pattern :function(value){ return value; },\n\t//visual part of setValue\n\t$setValue:function(value){\n//\t\tthis._settings.label = value;\n\t\t(this.getInputNode()||{}).value = value;\n\t},\n\tgetValue:function(){\n\t\t//if button was rendered - returning actual value\n\t\t//otherwise - returning last set value\n\t\tvar value = this._rendered_input? this.$getValue() : this._settings.value;\n\t\treturn (typeof value == \"undefined\") ? \"\" : value;\n\t},\n\t$getValue:function(){\n\t\treturn this._settings.value||\"\";\t\n\t},\n\tfocus:function(){\n\t\tif(!this._settings.disabled){\n\t\t\tvar input = this.getInputNode();\n\t\t\tif (input && input.focus) input.focus();\n\t\t}\n\n\t},\n\tblur:function() {\n\t\tvar input = this.getInputNode();\n\t\tif (input && input.blur) input.blur();\n\t},\n\t//get input element\n\tgetInputNode: function() {\n\t\treturn this._dataobj.getElementsByTagName('input')[0]||this._dataobj.getElementsByTagName('button')[0];\n\t},\n\t//get top-level sub-container\n\t_getBox:function(){\n\t\tfor(var i=0;i< this._dataobj.childNodes.length;i++){\n\t\t\tif(this._dataobj.childNodes[i].className.indexOf(\"webix_el_box\")>=0)\n\t\t\t\treturn this._dataobj.childNodes[i];\n\t\t}\n\t\treturn null;\n\t},\n\t_sqrt_2:Math.sqrt(2),\n\t_set_inner_size_next:function(){\n\t\tvar cfg = this._settings;\n\t\tvar arrow = this._getBox().childNodes[1];\n\t\tvar button = arrow.previousSibling;\n\t\tvar style = cfg.type == \"next\"?\"right\":\"left\";\n\t\tvar height = cfg.aheight-webix.skin.$active.inputPadding*2-2*this._borderWidth; //-2 - borders\n\n\t\tvar arrowEdge = height*this._sqrt_2/2;\n\t\tarrow.style.width = arrowEdge+\"px\";\n\t\tarrow.style.height = arrowEdge+\"px\";\n\t\tarrow.style.top = (height - arrowEdge)/2 + webix.skin.$active.inputPadding+ \"px\";\n\t\tarrow.style[style] = (height - arrowEdge)/2 +this._sqrt_2/2+ \"px\";\n\t\tbutton.style.width = cfg.awidth - height/2 -2  + \"px\";\n\t\tbutton.style.height = height + 2 + \"px\";\n\t\tbutton.style[style] =  height/2 + 2 + \"px\";\n\t\tbutton.style.top = webix.skin.$active.inputPadding+ \"px\";\n\n\t},\n\t_calc_size:function(config){\n\t\tconfig = config || this._settings;\n\t\tif (config.autowidth)\n\t\t\tconfig.width = webix.html.getTextSize((config.value||config.label), \"webixbutton\").width +\n\t\t\t\t(config.badge ? 15 : 0) +\n\t\t\t\t(config.type === \"iconButton\" ? 30 : 0) +\n\t\t\t\t(config.type === \"icon\"? 20 : 0);\n\t},\n\t_calck_input_size:function(){\n\t\t//use width for both width and inputWidth settings in clever way\n\t\t//in form, we can define width for some element smaller than for siblings\n\t\t//it will use inputWidth to render the desired view\n\t\tthis._input_width = this._settings.inputWidth || \n\t\t\t((this._content_width - this._settings.width > 2)?this._settings.width:0) || this._content_width;\n\t\tthis._input_height = this._settings.inputHeight||this._inputHeight||0;\n\t},\n\tresize: function(){\n\t\tthis._calc_size();\n\t\treturn webix.ui.view.prototype.resize.apply(this,arguments);\n\t},\n\trender:function(){\n\t\tthis._calck_input_size();\n\t\tthis._settings.awidth  = this._input_width||this._content_width;\n\t\tthis._settings.aheight = this._input_height||this._content_height;\n\n\t\t//image button - image width\n\t\tthis._settings.bheight = this._settings.aheight+2;\n\t\tthis._settings.cheight = this._settings.aheight- 2*webix.skin.$active.inputPadding;\n\t\tthis._settings.dheight = this._settings.cheight - 2; // - borders\n\n\t\tif(webix.AtomRender.render.call(this)){\n\t\t\tthis._rendered_input = true;\n\t\t\tif (this._set_inner_size) this._set_inner_size();\n\t\t\tif (this._settings.align){\n\t\t\t\tvar handle = this._dataobj.firstChild;\n\t\t\t\tif (this._settings.labelPosition == \"top\" && handle.nextSibling)\n\t\t\t\t\thandle = handle.nextSibling;\n\n\t\t\t\tswitch(this._settings.align){\n\t\t\t\t\tcase \"right\":\n\t\t\t\t\t\thandle.style.cssFloat = \"right\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"center\":\n\t\t\t\t\t\thandle.style.display = \"inline-block\";\n\t\t\t\t\t\thandle.parentNode.style.textAlign = \"center\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"middle\":\n\t\t\t\t\t\thandle.style.marginTop = Math.round((this._content_height-this._input_height)/2)+\"px\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"bottom\": \n\t\t\t\t\t\thandle.style.marginTop = (this._content_height-this._input_height)+\"px\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"left\":\n\t\t\t\t\t\thandle.style.cssFloat = \"left\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\twebix.assert(false, \"Unknown align mode: \"+this._settings.align);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.$render)\n\t\t\t\tthis.$render(this.data);\n\n\t\t\tif (this._settings.disabled)\n\t\t\t\tthis.disable();\n\n\t\t\t// set tooltip after render\n\t\t\tif (this._settings.tooltip)\n\t\t\t\tthis.define(\"tooltip\",this._settings.tooltip );\n\n\t\t\tif (this._init_once){\n\t\t\t\tthis._init_once(this.data);\n\t\t\t\tthis._init_once = 0;\n\t\t\t}\n\t\t}\n\t},\n\n\trefresh:function(){ this.render(); },\n\n\ton_click:{\n\t\t_handle_tab_click: function(ev, button){\n\t\t\tvar id = webix.html.locate(ev, \"button_id\");\n\t\t\tif (id && this.callEvent(\"onBeforeTabClick\", [id, ev])){\n\t\t\t\tthis.setValue(id);\n\t\t\t\tthis.callEvent(\"onAfterTabClick\", [id, ev]);\n\t\t\t}\n\t\t},\n\t\twebix_all_segments:function(ev, button){\n\t\t\tthis.on_click._handle_tab_click.call(this, ev, button);\n\t\t},\n\t\twebix_all_tabs:function(ev, button) {\n\t\t\tthis.on_click._handle_tab_click.call(this, ev, button);\n\t\t},\n\t\twebix_inp_counter_next:function(e, obj, node){\n\t\t\tif (!this._settings.readonly)\n\t\t\t\tthis.next();\n\t\t},\n\t\twebix_inp_counter_prev:function(e, obj, node){\n\t\t\tif (!this._settings.readonly)\n\t\t\t\tthis.prev();\n\t\t},\n\t\twebix_inp_combo:function(e, obj, node){\n\t\t\tnode.focus();\n\t\t},\n\t\twebix_inp_checkbox_border: function(e, obj, node) {\n\t\t\tif (!this._settings.disabled && (e.target||e.srcElement).tagName != \"DIV\" && !this._settings.readonly)\n\t\t\t\tthis.toggle();\n\t\t},\n\t\twebix_inp_checkbox_label: function(e, obj, node) {\n\t\t\tif (!this._settings.readonly)\n\t\t\t\tthis.toggle();\n\t\t},\n\t\twebix_inp_radio_border: function(e, obj, node) {\n\t\t\tvar value = webix.html.locate(e, \"radio_id\");\n\t\t\tthis.setValue(value);\n\t\t},\n\t\twebix_inp_radio_label: function(e, obj, node) {\n\t\t\tnode = node.parentNode.getElementsByTagName('input')[0];\n\t\t\treturn this.on_click.webix_inp_radio_border.call(this, node, obj, node);\n\t\t},\n\t\twebix_tab_more_icon: function(ev,obj, node){\n\t\t\tthis.getPopup().resize();\n\t\t\tthis.getPopup().show(node,null,true);\n\t\t},\n\t\twebix_tab_close:function(ev, obj, node){\n\t\t\tvar id = webix.html.locate(ev, \"button_id\");\n            if (id && this.callEvent(\"onBeforeTabClose\", [id, ev]))\n\t\t\t    this.removeOption(id);\n\t\t}\n\t},\n\n\t//method do not used by button, but  used by other child-views\n\t_check_options:function(opts){\n\t\twebix.assert(opts, this.name+\": options not defined\");\n\t\tfor(var i=0;i<opts.length;i++){\n\t\t\t//FIXME: asserts need to be removed in final version\t\t\t\n\t\t\twebix.assert(!opts[i].text, \"Please replace .text with .value in control config\");\n\t\t\twebix.assert(!opts[i].label, \"Please replace .label with .value in control config\");\n\n\t\t\tif(typeof opts[i]==\"string\"){\n\t\t\t\topts[i] = {id:opts[i], value:opts[i]};\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif(webix.isUndefined(opts[i].id))\n\t\t\t\t\topts[i].id = opts[i].value;\n\n\t\t\t\tif(webix.isUndefined(opts[i].value))\n\t\t\t\t\topts[i].value = opts[i].id;\n\t\t\t}\n\t\t}\n\t\treturn opts;\n\t},\n\t_get_div_placeholder: function(obj){\n\t\tvar placeholder = (obj?obj.placeholder:this._settings.placeholder);\n\t\treturn (placeholder?\"<span class='webix_placeholder'>\"+placeholder+\"</span>\":\"\");\n\t}\n}, webix.ui.view, webix.AtomRender, webix.Settings, webix.EventSystem);\n\nwebix.protoUI({\n\tname:\"label\",\n\tdefaults:{\n\t\ttemplate:\"<div style='height:100%;line-height:#cheight#px'>#label#</div>\"\n\t},\n\t$skin:function(){\n\t\tthis.defaults.height = webix.skin.$active.inputHeight;\n\t},\n\tfocus:function(){ return false; },\n\t_getBox:function(){\n\t\treturn this._dataobj.firstChild;\n\t},\n\tsetHTML:function(html){\n\t\tthis._settings.template = function(){ return html; };\n\t\tthis.refresh();\n\t},\n\tsetValue: function(value){\n\t\tthis._settings.label = value;\n\t\twebix.ui.button.prototype.setValue.apply(this,arguments);\n\t},\n\t$setValue:function(value){\n\t\tthis._dataobj.firstChild.innerHTML = value;\n\t},\n\t_set_inner_size:function(){}\n}, webix.ui.button);\n\nwebix.protoUI({\n\tname:\"icon\",\n\t$skin:function(){\n\t\tthis.defaults.height = webix.skin.$active.inputHeight;\n\t},\n\tdefaults:{\n\t\ttemplate:function(obj){\n\t\t\treturn \"<button type='button' \"+\" style='height:100%;width:100%;' class='webix_icon_button'><span class='webix_icon fa-\"+obj.icon+\" '></span>\"+\n\t\t\t\t(obj.badge ? \"<span class='webix_badge'>\"+obj.badge+\"</span>\":\"\")+\n\t\t\t\t\"</button>\";\n\t\t},\n\t\twidth:33\n\t},\n\t_set_inner_size:function(){\n\t\t\n\t}\n}, webix.ui.button);\n\n\n\nwebix.protoUI({\n\tname:\"text\",\n\t_allowsClear:true,\n\t_init_onchange:function(){\n\t\tif (this._allowsClear){\n\t\t\t//define event id to prevent memory leak\n\t\t\twebix._event(this.getInputNode(),\"change\",this._applyChanges,{bind:this});\n\t\t\tif (this._settings.suggest)\n\t\t   \t\twebix.$$(this._settings.suggest).linkInput(this);\n\t\t }\n\t},\n\t_applyChanges: function(){\n\t\tvar newvalue = this.getValue();\n\n\t\tif (newvalue != this._settings.value)\n\t\t\tthis.setValue(newvalue, true);\n\t},\n\t$skin:function(){\n\t\tthis.defaults.height = webix.skin.$active.inputHeight;\n\t\tthis.defaults.inputPadding = webix.skin.$active.inputPadding;\n\t\tthis._inputSpacing = webix.skin.$active.inputSpacing;\n\t},\n\t$init:function(config){\n\t\tif (config.labelPosition == \"top\")\n\t\t\tif (webix.isUndefined(config.height) && this.defaults.height)  // textarea\n\t\t\t\tconfig.height = this.defaults.height + this._labelTopHeight;\n\n\t\t//suggest reference for destructor\n\t\tthis._destroy_with_me = [];\n\n\t\tthis.attachEvent(\"onAfterRender\", this._init_onchange);\n\t\tthis.attachEvent(\"onBlur\", function(){\n\t\t\tif(this._onBlur) this._onBlur();\n\t\t});\n\t},\n\t$renderIcon:function(){\n\t\tvar config = this._settings;\n\t\tif (config.icon){\n\t\t\tvar height = config.aheight - 2*config.inputPadding,\n\t\t\t\tpadding = (height - 18)/2 -1,\n\t\t\t\taria = this.addSection ? \"role='button' tabindex='0' aria-label='\"+(webix.i18n.aria[\"multitext\"+(config.mode || \"\")+\"Section\"])+\"'\": \"\";\n\t\t\t\treturn \"<span style='height:\"+(height-padding)+\"px;padding-top:\"+padding+\"px;' class='webix_input_icon fa-\"+config.icon+\"' \"+aria+\"></span>\";\n\t\t\t}\n\t\t\treturn \"\";\n\t},\n\trelatedView_setter:function(value){\n\t\tthis.attachEvent(\"onChange\", function(){\n\t\t\tvar value = this.getValue();\n\t\t\tvar mode = this._settings.relatedAction;\n\t\t\tvar viewid = this._settings.relatedView;\n\t\t\tvar view = webix.$$(viewid);\n\t\t\tif (!view){\n\t\t\t\tvar top = this.getTopParentView();\n\t\t\t\tif (top && top.$$)\n\t\t\t\t\tview = top.$$(viewid);\n\t\t\t}\n\n\t\t\twebix.assert(view, \"Invalid relatedView: \"+viewid);\n\n\t\t\tif (mode == \"enable\"){\n\t\t\t\tif (value) view.enable(); else view.disable();\n\t\t\t} else {\n\t\t\t\tif (value) view.show(); else view.hide();\n\t\t\t}\n\t\t});\n\t\treturn value;\n\t},\n\tvalidateEvent_setter:function(value){\n\t\tif (value == \"blur\")\n\t\t\tthis.attachEvent(\"onBlur\", this.validate);\n\n\t\tif (value == \"key\")\n\t\t\tthis.attachEvent(\"onTimedKeyPress\", this.validate);\n\n\t\treturn value;\n\t},\n\tvalidate:function(){\n\t\tvar rule = this._settings.validate;\n\t\tif (!rule && this._settings.required)\n\t\t\trule = webix.rules.isNotEmpty;\n\n\t\tvar form =this.getFormView();\n\t\tvar name = this._settings.name;\n\t\tvar value = this.getValue();\n\t\tvar data = {}; data[name] = value;\n\n\t\twebix.assert(form, \"Validation works only for fields in the form\");\n\t\twebix.assert(name, \"Validation works only for fields with name\");\n\n\t\tif (rule && !form._validate(rule, value, data, name))\n\t\t\treturn false;\n\t\treturn true;\n\t},\n\tbottomLabel_setter: function(value){\n\t\tif(!this._settings.bottomPadding)\n\t\t\tthis._settings.bottomPadding = 18;\n\t\treturn value;\n\t},\n\t_getInvalidText: function(){\n\t\tvar text = this._settings.invalidMessage;\n\t\tif(typeof text == \"function\"){\n\t\t\ttext.call(this);\n\t\t}\n\t\treturn text;\n\t},\n\tsetBottomText: function(text, height){\n\t\tvar config = this._settings;\n\t\tif (typeof text != \"undefined\"){\n\t\t\tif (config.bottomLabel == text) return;\n\t\t\tconfig.bottomLabel = text;\n\t\t}\n\n\t\tvar message = (config.invalid ? config.invalidMessage : \"\" ) || config.bottomLabel;\n\t\tif (!message && !config.bottomPadding)\n\t\t\tconfig.inputHeight = 0;\n\t\tif (message && !config.bottomPadding){\n\t\t\tthis._restorePadding = 1;\n\t\t\tconfig.bottomPadding = config.bottomPadding || height || 18;\t\n\t\t\tthis.render();\n\t\t\tthis.resize();\n\t\t} else if (!message && this._restorePadding){\n\t\t\tconfig.bottomPadding = this._restorePadding = 0;\n\t\t\t//textarea\n\t\t\tif (!config.height)\n\t\t\t\tthis.render();\n\t\t\tthis.resize();\n\t\t} else\n\t\t\tthis.render();\n\t},\n\t$getSize: function(){\n\t\tvar sizes = webix.ui.view.prototype.$getSize.apply(this,arguments);\n\t\tvar heightInc = this.config.bottomPadding;\n\t\tif(heightInc){\n\t\t\tsizes[2] += heightInc;\n\t\t\tsizes[3] += heightInc;\n\t\t}\n\t\treturn sizes;\n\t},\n\t$setSize:function(x,y){\n\t\tvar config = this._settings;\n\n\t\tif(webix.ui.view.prototype.$setSize.call(this,x,y)){\n\t\t\tif (!x || !y) return;\n\n\t\t\tif (config.labelPosition == \"top\"){\n\t\t\t\t// textarea\n\t\t\t\tif (!config.inputHeight)\n\t\t\t\t\tthis._inputHeight = this._content_height - this._labelTopHeight - (this.config.bottomPadding||0);\n\t\t\t\tconfig.labelWidth = 0;\n\t\t\t} else if (config.bottomPadding){\n\t\t\t\tconfig.inputHeight = this._content_height - this.config.bottomPadding;\n\t\t\t}\n\t\t\tthis.render();\n\t\t}\n\t},\n\t_get_input_width: function(config){\n\t\tvar width = (this._input_width||0)-(config.label?this._settings.labelWidth:0) - this._inputSpacing - (config.iconWidth || 0);\n\n\t\t//prevent js error in IE\n\t\treturn (width < 0)?0:width;\n\t},\n\t_render_div_block:function(obj, common){\n\t\tvar id = \"x\"+webix.uid();\n\t\tvar width = common._get_input_width(obj);\n\t\tvar inputAlign = obj.inputAlign || \"left\";\n\t\tvar icon = this.$renderIcon?this.$renderIcon(obj):\"\";\n\t\tvar height = this._settings.aheight - 2*webix.skin.$active.inputPadding -2*this._borderWidth;\n\t\tvar text = (obj.text||obj.value||this._get_div_placeholder(obj));\n\t\tvar html = \"<div class='webix_inp_static' role='combobox' aria-label='\"+webix.template.escape(obj.label)+\"' tabindex='0'\"+(obj.readonly?\" aria-readonly='true'\":\"\")+(obj.invalid?\"aria-invalid='true'\":\"\")+\" onclick='' style='line-height:\"+height+\"px;width: \" + width + \"px; text-align: \" + inputAlign + \";' >\"+ text +\"</div>\";\n\t\treturn common.$renderInput(obj, html, id);\n\t},\n\t_baseInputHTML:function(tag){\n\t\tvar html = \"<\"+tag+(this._settings.placeholder?\" placeholder='\"+this._settings.placeholder+\"' \":\" \");\n\t\tif (this._settings.readonly)\n\t\t\thtml += \"readonly='true' aria-readonly=''\";\n\t\tif(this._settings.required)\n\t\t\thtml += \"aria-required='true'\";\n\t\tif(this._settings.invalid)\n\t\t\thtml += \"aria-invalid='true'\";\n\n\t\tvar attrs = this._settings.attributes;\n\t\tif (attrs)\n\t\t\tfor(var prop in attrs)\n\t\t\t\thtml += prop+\"='\"+attrs[prop]+\"' \";\n\t\treturn html;\n\t},\n\t$renderLabel: function(config, id){\n\t\tvar labelAlign = (config.labelAlign||\"left\");\n\t\tvar top = this._settings.labelPosition == \"top\";\n\t\tvar labelTop =  top?\"display:block;\":(\"width: \" + this._settings.labelWidth + \"px;\");\n\t\tvar label = \"\";\n\t\tvar labelHeight = top?this._labelTopHeight-2*this._borderWidth:( this._settings.aheight - 2*this._settings.inputPadding);\n\t\tif (config.label)\n\t\t\tlabel = \"<label style='\"+labelTop+\"text-align: \" + labelAlign + \";line-height:\"+labelHeight+\"px;' onclick='' for='\"+id+\"' class='webix_inp_\"+(top?\"top_\":\"\")+\"label \"+(config.required?\"webix_required\":\"\")+\"'>\" + (config.label||\"\") + \"</label>\";\n\t\treturn label;\n\t},\n\t$renderInput: function(config, div_start, id) {\n\t\tvar inputAlign = (config.inputAlign||\"left\");\n\t\tvar top = (config.labelPosition == \"top\");\n\t\tvar inputWidth = this._get_input_width(config);\n\n\t\tid = id||webix.uid();\n\n\t\tvar label = this.$renderLabel(config,id);\n\n\t\tvar html = \"\";\n\t\tif(div_start){\n\t\t\thtml += div_start;\n\t\t} else {\n\t\t\tvar value =  webix.template.escape(config.text || this._pattern(config.value)|| ( config.value ===0 ?\"0\":\"\") );\n\t\t\thtml += this._baseInputHTML(\"input\")+\"id='\" + id + \"' type='\"+(config.type||this.name)+\"'\"+(config.editable?\" role='combobox'\":\"\")+\" value='\" + value + \"' style='width: \" + inputWidth + \"px; text-align: \" + inputAlign + \";'\";\n\t\t\tvar attrs = config.attributes;\n\t\t\tif (attrs)\n\t\t\t\tfor(var prop in attrs)\n\t\t\t\t\thtml += \" \"+prop+\"='\"+attrs[prop]+\"'\";\n\t\t\thtml += \" />\";\n\t\t}\n\t\tvar icon = this.$renderIcon?this.$renderIcon(config):\"\";\n\t\thtml += icon;\n\n\t\tvar result = \"\";\n\t\t//label position, top or left\n\t\tif (top)\n\t\t\tresult = label+\"<div class='webix_el_box' style='width:\"+config.awidth+\"px; height:\"+config.aheight+\"px'>\"+html+\"</div>\";\n\t\telse\n\t\t\tresult = \"<div class='webix_el_box' style='width:\"+config.awidth+\"px; height:\"+config.aheight+\"px'>\"+label+html+\"</div>\";\n\n\n\t\t//bottom message width\n\t\tvar padding = config.awidth-inputWidth-webix.skin.$active.inputPadding*2;\n\t\t//bottom message text\n\t\tvar message = (config.invalid ? config.invalidMessage : \"\") || config.bottomLabel;\n\t\tif (message)\n\t\t\tresult +=  \"<div class='webix_inp_bottom_label'\"+(config.invalid?\"role='alert' aria-relevant='all'\":\"\")+\" style='width:\"+(inputWidth||config.awidth)+\"px;margin-left:\"+Math.max(padding,webix.skin.$active.inputPadding)+\"px;'>\"+message+\"</div>\";\n\n\t\treturn result;\n\t},\n\tdefaults:{\n\t\ttemplate:function(obj, common){\n\t\t\treturn common.$renderInput(obj);\n\t\t},\n\t\tlabel:\"\",\n\t\tlabelWidth:80\n\t},\n\ttype_setter:function(value){ return value; },\n\t_set_inner_size:false,\n\t$setValue:function(value){\n\t\tthis.getInputNode().value = this._pattern(value);\n\t},\n\t$getValue:function(){\n\t\treturn this._pattern(this.getInputNode().value, false);\n\t},\n\tsuggest_setter:function(value){\n\t\tif (value){\n\t\t\twebix.assert(value !== true, \"suggest options can't be set as true, data need to be provided instead\");\n\n\t\t\tif (typeof value == \"string\"){\n\t\t\t\tvar attempt = webix.$$(value);\n\t\t\t\tif (attempt) \n\t\t\t\t\treturn webix.$$(value)._settings.id;\n\n\t\t\t\tvalue = { body: { url:value , dataFeed :value } };\n\t\t\t} else if (webix.isArray(value))\n\t\t\t\tvalue = { body: { data: this._check_options(value) } };\n\t\t\telse if (!value.body)\n\t\t\t\tvalue.body = {};\n\n\t\t\twebix.extend(value, { view:\"suggest\" });\n\n\t\t\tvar view = webix.ui(value);\n\t\t\tthis._destroy_with_me.push(view);\n\t\t\treturn view._settings.id;\n\t\t}\n\t\treturn false;\n\t}\n}, webix.ui.button);\n\nwebix.protoUI({\n\tname:\"segmented\",\n\t_allowsClear:false,\n\t$init:function(){\n\t\tthis.attachEvent(\"onChange\", function(value){\n\t\t\tif (this._settings.multiview)\n\t\t\t\tthis._show_view(value);\n\t\t});\n\t\tthis.attachEvent(\"onAfterRender\", webix.once(function(){\n\t\t\tif (this._settings.multiview && this._settings.value)\n\t\t\t\tthis._show_view(this._settings.value);\n\t\t}));\n\t},\n\t_show_view:function(value){\n\t\tvar top = this.getTopParentView();\n\t\tvar view = null;\n\n\t\t//get from local isolate\n\t\tif (top && top.$$)\n\t\t\tview = top.$$(value);\n\t\t//or check globally\n\t\tif (!view)\n\t\t\tview = webix.$$(value);\n\n\t\tif(view && view.show)\n\t\t\tview.show();\n\t},\n\tdefaults:{\n\t\ttemplate:function(obj, common){\n\t\t\tif(!obj.options)\n\t\t\t\twebix.assert(false, \"segmented: options undefined\");\n\t\t\tvar options = obj.options;\n\t\t\tcommon._check_options(options);\n\t\t\toptions = common._filterOptions(options);\n\n\t\t\tvar width = common._get_input_width(obj);\n\n\t\t\tvar id = webix.uid();\n\t\t\tvar html = \"<div style='width:\"+width+\"px' class='webix_all_segments' role='tablist' aria-label='\"+webix.template.escape(obj.label)+\"'>\";\n\t\t\tvar optionWidth = obj.optionWidth || Math.floor(width/options.length);\n\t\t\tif(!obj.value)\n\t\t\t\tobj.value = options[0].id;\n\n\t\t\tfor(var i=0; i<options.length; i++){\n\t\t\t\thtml+=\"<button type='button' style='width:\"+(options[i].width || optionWidth)+\"px' role='tab' aria-selected='\"+(obj.value==options[i].id?\"true\":\"false\")+\"' tabindex='\"+(obj.value==options[i].id?\"0\":\"-1\")+\"'\";\n\t\t\t\thtml+=\"class='\"+\"webix_segment_\"+((i==options.length-1)?\"N\":(i>0?1:0))+((obj.value==options[i].id)?\" webix_selected \":\"\")+\"' button_id='\"+options[i].id+\"' >\";\n\t\t\t\thtml+= options[i].value+\"</button>\";\n\t\t\t}\n\t\t\t\n\t\t\treturn common.$renderInput(obj, html+\"</div>\", id);\n\t\t}\n\t},\n\t_getInputNode:function(){\n\t\treturn this.$view.getElementsByTagName(\"BUTTON\");\n\t},\n\tfocus: function(){ this._focus(); },\n\tblur: function(){ this._blur(); },\n\t$setValue:function(value){\n\n\t\tvar options = this._getInputNode();\n\n\t\tfor(var i=0; i<options.length; i++){\n\t\t\tvar id = options[i].getAttribute(\"button_id\");\n\t\t\toptions[i].setAttribute(\"aria-selected\", (value==id?\"true\":\"false\"));\n\t\t\toptions[i].setAttribute(\"tabindex\", (value==id?\"0\":\"-1\"));\n\t\t\tif(value==id)\n\t\t\t\twebix.html.addCss(options[i], \"webix_selected\");\n\t\t\telse\n\t\t\t\twebix.html.removeCss(options[i], \"webix_selected\");\n\t\t}\n\t},\n\tgetValue:function(){\n\t\treturn this._settings.value;\n\t},\n\tgetInputNode:function(){\n\t\treturn null;\n\t},\n\toptionIndex:function(id){\n\t\tvar pages = this._settings.options;\n\t\tfor (var i=0; i<pages.length; i++)\n\t\t\tif (pages[i].id == id)\n\t\t\t\treturn i;\n\t\treturn -1;\n\t},\n\taddOption:function(id, value, show, index){\n\t\tvar obj = id;\n\t\tif (typeof id != \"object\"){\n\t\t\tvalue = value || id;\n\t\t\tobj = { id:id, value:value };\n\t\t} else {\n\t\t\tid = obj.id;\n\t\t\tindex = show;\n\t\t\tshow = value;\n\t\t}\n\n\t\tif (this.optionIndex(id) < 0)\n\t\t\twebix.PowerArray.insertAt.call(this._settings.options, obj, index);\n\t\tthis.refresh();\n\n\t\tif (show)\n\t\t\tthis.setValue(id);\n\t},\n\tremoveOption:function(id, value){\n\t\tvar index = this.optionIndex(id);\n\t\tvar options = this._settings.options;\n\n\t\tif (index >= 0)\n\t\t\twebix.PowerArray.removeAt.call(options, index);\n\n\t\t// if we remove a selected option\n\t\tif(this._settings.value == id)\n\t\t\tthis._setNextVisible(options, index);\n\t\t\t\n        this.callEvent(\"onOptionRemove\", [id, this._settings.value]);\n\t\tthis.refresh();\n\n\t},\n\t_setNextVisible: function(options, index){\n\t\tvar size = options.length;\n\n\t\tif(size){\n\t\t\tindex = Math.min(index, size-1);\n\t\t\t//forward search\n\t\t\tfor (var i=index; i<size; i++)\n\t\t\t\tif (!options[i].hidden)\n\t\t\t\t\treturn this.setValue(options[i].id);\n\t\t\t//backward search\n\t\t\tfor (var i=index; i>=0; i--)\n\t\t\t\tif (!options[i].hidden)\n\t\t\t\t\treturn this.setValue(options[i].id);\n\t\t}\n\t\t\n\t\t//nothing found\t\t\n\t\tthis.setValue(\"\");\n\t},\n\t_filterOptions: function(options){\n\t\tvar copy = [];\n\t\tfor(var i=0; i<options.length;i++)\n\t\t\tif(!options[i].hidden)\n\t\t\t\tcopy.push(options[i]);\n\t\treturn copy;\n\t},\n\t_setOptionVisibility: function(id, state){\n\t\tvar options = this._settings.options;\n\t\tvar index = this.optionIndex(id);\n\t\tvar option = options[index];\n\t\tif (option && state == !!option.hidden){  //new state differs from previous one\n\t\t\toption.hidden = !state;\n\t\t\tif (state || this._settings.value != id){ \t//show item, no need for extra steps\n\t\t\t\tthis.refresh();\n\t\t\t} else {\t\t\t\t\t\t\t\t\t//hide item, switch to next visible one\n\t\t\t\tthis._setNextVisible(options, index);\n\t\t\t}\n\t\t}\n\t},\n\thideOption: function(id){\n\t\tthis._setOptionVisibility(id,false);\n\t},\n\tshowOption: function(id){\n\t\tthis._setOptionVisibility(id,true);\n\t},\n\t_set_inner_size:false\n}, webix.HTMLOptions, webix.ui.text);\n\nwebix.protoUI({\n\tname:\"search\",\n\t$skin:function(){\n\t\tthis.defaults.inputPadding = webix.skin.$active.inputPadding;\n\t},\n\ton_click:{\n\t\t\"webix_input_icon\":function(e){\n\t\t\treturn this.callEvent(\"onSearchIconClick\", [e]);\n\t\t}\n\t},\n\tdefaults:{\n\t\ttype:\"text\",\n\t\ticon:\"search\"\n\t}\n}, webix.ui.text);\n\nwebix.protoUI({\n\tname:\"toggle\",\n\t_allowsClear:true,\n\t$init:function(){\n\t\tthis.attachEvent(\"onItemClick\", function(){\n\t\t\tthis.toggle();\n\t\t});\n\t},\n\t$setValue:function(value){\n\t\tvar input = this.getInputNode();\n\t\tvar obj = this._settings;\n\t\tvar isPressed = (value && value != \"0\");\n\t\tvar text = (isPressed ? obj.onLabel : obj.offLabel) || obj.label;\n\t\t\n\t\tinput.setAttribute(\"aria-pressed\", isPressed?\"true\":false);\n\t\tinput.value = text;\n\t\tif (input.lastChild)\n\t\t\tinput.lastChild.nodeValue = \" \"+text;\n\n\t\t//icon or image button\n\t\tif(input.firstChild && input.firstChild.nodeName ===\"SPAN\" && obj.onIcon && obj.offIcon && obj.onIcon !==obj.offIcon)\n\t\t\tinput.firstChild.className = input.firstChild.className.replace((isPressed?obj.offIcon:obj.onIcon),  (isPressed?obj.onIcon:obj.offIcon));\n\t\t\n\t\tvar parent = input.parentNode;\n\t\tif(isPressed)\n\t\t\twebix.html.addCss(parent, \"webix_pressed\");\n\t\telse\n\t\t\twebix.html.removeCss(parent, \"webix_pressed\");\n\t},\n\ttoggle:function(){\n\t\tthis.setValue(!this.getValue());\n\t},\n\tgetValue:function(){\n\t\tvar value = this._settings.value;\n\t\treturn  (!value||value==\"0\")?0:1;\n\t},\n\tdefaults:{\n\t\ttemplate:function(obj, common){\n\t\t\tvar isPressed = (obj.value && obj.value != \"0\");\n\t\t\tvar css = isPressed ? \" webix_pressed\" : \"\";\n\n\t\t\tobj.label = (isPressed ? obj.onLabel : obj.offLabel) || obj.label;\n\t\t\tobj.icon = (isPressed ? obj.onIcon : obj.offIcon) || obj.icon;\n\t\t\tvar html =  \"<div class='webix_el_box\"+css+\"' style='width:\"+obj.awidth+\"px; height:\"+obj.aheight+\"px'>\"+common.$renderInput(obj, common)+\"</div>\";\n\t\t\thtml = html.replace(/(button)\\s*(?=\\w)/, \"$1\"+(\" aria-pressed='\"+(isPressed?\"true\":\"false\")+\"' \"));\n\t\t\treturn html;\n\t\t}\n\t},\n\t_set_inner_size:false\n}, webix.ui.button);\n\nwebix.protoUI({\n\tname:\"select\",\n\tdefaults:{\n\t\ttemplate:function(obj,common) {\n\t\t\tvar options = common._check_options(obj.options);\n\t\t\tvar id = \"x\"+webix.uid();\n\t\t\tvar html = common._baseInputHTML(\"select\")+\"id='\"+id+\"' style='width:\"+common._get_input_width(obj)+\"px;'>\";\n\n\t\t\tvar optview = webix.$$(options);\n            if(optview && optview.data && optview.data.each){\n                optview.data.each(function(option){\n                    html+=\"<option\"+((option.id == obj.value)?\" selected='true'\":\"\")+\" value='\"+option.id+\"'>\"+option.value+\"</option>\";\n                });\n            }else\n                for(var i=0; i<options.length; i++) {\n                    html+=\"<option\"+((options[i].id == obj.value)?\" selected='true'\":\"\")+\" value='\"+options[i].id+\"'>\"+options[i].value+\"</option>\";\n                }\n\t\t\thtml += \"</select>\";\n\t\t\treturn common.$renderInput(obj, html, id);\n\t\t}\n\t},\n    options_setter:function(value){\n        if(value){\n            if(typeof value ==\"string\"){\n                var collection = new webix.DataCollection({url:value});\n                collection.data.attachEvent(\"onStoreLoad\", webix.bind(this.refresh, this));\n                return collection;\n            }\n            else\n                return value;\n        }\n    },\n\t//get input element\n\tgetInputNode: function() {\n\t\treturn this._dataobj.getElementsByTagName('select')[0];\n\t}\n}, webix.ui.text);\n\nwebix.protoUI({\n\tname:\"textarea\",\n\tdefaults:{\n\t\ttemplate:function(obj, common){ \n\t\t\tvar name = obj.name || obj.id;\n\t\t\tvar id = \"x\"+webix.uid();\n\n\t\t\tvar html = common._baseInputHTML(\"textarea\")+\"style='width:\"+common._get_input_width(obj)+\"px;'\";\n\t\t\thtml +=\" id='\"+id+\"' name='\"+name+\"' class='webix_inp_textarea'>\"+common._pattern(obj.value|| (obj.value ===0?\"0\":\"\"))+\"</textarea>\";\n\n\t\t\treturn common.$renderInput(obj, html, id);\n\t\t},\n\t\theight:0,\n\t\tminHeight:60\n\t},\n\t$skin:function(){\n\t\tthis.defaults.inputPadding = webix.skin.$active.inputPadding;\n\t\tthis._inputSpacing = webix.skin.$active.inputSpacing;\n\t},\n\t_skipSubmit: true,\n\t$renderLabel: function(config, id){\n\t\tvar labelAlign = (config.labelAlign||\"left\");\n\t\tvar top = this._settings.labelPosition == \"top\";\n\t\tvar labelTop =  top?\"display:block;\":(\"width: \" + this._settings.labelWidth + \"px;\");\n\t\tvar label = \"\";\n\t\tvar labelHeight = top?this._labelTopHeight-2*this._borderWidth:( (webix.skin.$active.inputHeight||this._settings.aheight) - 2*this._settings.inputPadding);\n\t\tif (config.label)\n\t\t\tlabel = \"<label style='\"+labelTop+\"text-align: \" + labelAlign + \";' onclick='' for='\"+id+\"' class='webix_inp_\"+(top?\"top_\":\"\")+\"label \"+(config.required?\"webix_required\":\"\")+\"'>\" + (config.label||\"\") + \"</label>\";\n\t\treturn label;\n\t},\n\t//get input element\n\tgetInputNode: function() {\n\t\treturn this._dataobj.getElementsByTagName('textarea')[0];\n\t}\n}, webix.ui.text);\n\nwebix.protoUI({\n\tname:\"counter\",\n\tdefaults:{\n\t\ttemplate:function(config, common){\n\t\t\tvar value = (config.value||0);\n\n\t\t\tvar id = \"x\"+webix.uid();\n\t\t\tvar html = \"<div role='spinbutton' aria-label='\"+webix.template.escape(config.label)+\"' aria-valuemin='\"+config.min+\"' aria-valuemax='\"+config.max+\"' aria-valuenow='\"+config.value+\"' class='webix_el_group' style='width:\"+common._get_input_width(config)+\"px'>\";\n\t\t\t\thtml +=  \"<button type='button' class='webix_inp_counter_prev' tabindex='-1' aria-label='\"+webix.i18n.aria.decreaseValue+\"'>-</button>\";\n\t\t\t\thtml += common._baseInputHTML(\"input\")+\" id='\"+id+\"' type='text' class='webix_inp_counter_value' aria-live='assertive'\"+\" value='\"+value+\"'></input>\";\n\t\t\t\thtml += \"<button type='button' class='webix_inp_counter_next' tabindex='-1' aria-label='\"+webix.i18n.aria.increaseValue+\"'>+</button></div>\";\n\t\t\treturn common.$renderInput(config, html, id);\n\t\t},\n\t\tmin:0,\n\t\tmax:Infinity,\n\t\tstep:1\n\t},\n\t$init:function(){\n\t\twebix._event(this.$view, \"keydown\", this._keyshift, {bind:this});\n\t},\n\t_keyshift:function(e){\n\t\tvar code = e.which || e.keyCode, c = this._settings, value = c.value || c.min;\n\n\t\tif(code>32 && code <41){\n\t\t\tif(code === 35) value = c.min;\n\t\t\telse if(code === 36) value = c.max === Infinity? 1000000 :c.max;\n\t\t\telse if(code === 33) this.next();\n\t\t\telse if(code === 34) this.prev();\n\t\t\telse value = value+(code === 37 || code ===40?-1:1);\n\t\t\t\n\t\t\tif(code>34 && value>=c.min && value <=c.max)\n\t\t\t\tthis.setValue(value);\n\t\t}\n\t},\n\t$setValue:function(value){\n\t\tthis.getInputNode().value = value;\n\t},\n\tgetInputNode:function(){\n\t\treturn this._dataobj.getElementsByTagName(\"input\")[0];\n\t},\n\tgetValue:function(obj){\n\t\treturn  webix.ui.button.prototype.getValue.apply(this,arguments)*1;\n\t},\n\tnext:function(step){\n\t\tstep = this._settings.step;\n\t\tthis.shift(step);\n\t},\n\tprev:function(step){\n\t\tstep = (-1)*this._settings.step;\n\t\tthis.shift(step);\n\t},\n\tshift:function(step){\n\t\tvar min = this._settings.min;\n\t\tvar max = this._settings.max;\n\n\t\tvar new_value = this.getValue() + step;\n\t\tif (new_value >= min && new_value <= max)\n\t\t\tthis.setValue(new_value);\n\t}\n}, webix.ui.text);\n\n\nwebix.protoUI({\n\tname:\"checkbox\",\n\tdefaults:{\n\t\tcheckValue:1,\n\t\tuncheckValue:0,\n\t\ttemplate:function(config, common) {\n\t\t\tvar id = \"x\"+webix.uid();\n\t\t\tvar rightlabel = \"\";\n\t\t\tif (config.labelRight){\n\t\t\t\trightlabel = \"<label class='webix_label_right'>\"+config.labelRight+\"</label>\";\n\t\t\t\t//user clearly attempts to hide the label, help him\n\t\t\t\tif (config.labelWidth)\n\t\t\t\t\tconfig.label = config.label || \"&nbsp;\";\n\t\t\t}\n\t\t\tvar checked = (config.checkValue == config.value);\n\t\t\tvar margin = Math.floor((common._settings.aheight-16)/2);\n\t\t\tvar ch = common._baseInputHTML(\"input\")+\"style='margin-top:\"+margin+\"px;\"+(config.customCheckbox?\"display:none\":\"\")+\"' id='\"+id+\"' type='checkbox' \"+(checked?\"checked='1'\":\"\")+(config.labelRight?\" aria-label='\"+webix.template.escape(config.labelRight)+\"'\":\"\")+\"/>\";\n\t\t\tvar className = \"webix_inp_checkbox_border webix_el_group webix_checkbox_\"+(checked?\"1\":\"0\");\n\t\t\tvar customCheckbox = config.customCheckbox || \"\";\n\t\t\tif(customCheckbox){\n\t\t\t\tcustomCheckbox = customCheckbox.replace(/(aria-checked=')\\w*(?=')/, \"$1\"+(config.value == config.checkValue?\"true\":\"false\"));\n\t\t\t\tcustomCheckbox = customCheckbox.replace(/(aria-label=')\\w*(?=')/, \"$1\"+webix.template.escape(config.labelRight || config.label));\n\t\t\t\tcustomCheckbox = customCheckbox.replace(/(aria-invalid=')\\w*(?=')/, \"$1\"+(config.invalid?\"true\":\"false\"));\n\t\t\t}\n\t\t\tvar html = \"<div style='line-height:\"+common._settings.cheight+\"px' class='\"+className+\"'>\"+ch+customCheckbox+rightlabel+\"</div>\";\n\t\t\treturn common.$renderInput(config, html, id);\n\t\t}\n\t},\n\tcustomCheckbox_setter: function(value){\n\t\tif( value === true && webix.skin.$active.customCheckbox){\n\t\t\tvalue = \"<a role='presentation' onclick='javascript:void(0)'><button role='checkbox' aria-checked='false' aria-label='' type='button' aria-invalid='' class='webix_custom_checkbox'></button></a>\";\n\t\t}\n\t\treturn value;\n\t},\n\tfocus: function(){\n\t\tvar input = this.$view.getElementsByTagName(this._settings.customCheckbox?\"button\":\"input\")[0];\n\t\tif(input)\n\t\t\tinput.focus();\n\t},\n\tblur: function(){\n\t\tvar input = this.$view.getElementsByTagName(this._settings.customCheckbox?\"button\":\"input\")[0];\n\t\tif(input)\n\t\t\tinput.blur();\n\t},\n\t_init_onchange: function(){},\n\t$setValue:function(value){\n\t\tvar isChecked = (value == this._settings.checkValue);\n\t\tvar parentNode = this.getInputNode()?this.getInputNode().parentNode:null;\n\n\t\tif(parentNode && this._settings.customCheckbox){\n\t\t\tvar button = parentNode.getElementsByTagName(\"BUTTON\");\n\t\t\tif(button[0]) button[0].setAttribute(\"aria-checked\", isChecked?\"true\":\"false\");\n\t\t}\n\t\tif(parentNode){\n\t\t\tparentNode.className = parentNode.className.replace(/(webix_checkbox_)\\d/,\"$1\"+(isChecked?1:0));\n\t\t}\n\t\tthis.getInputNode().checked = isChecked;\n\t},\n\ttoggle:function(){\n\t\tvar value = (this.getValue() != this._settings.checkValue)?this._settings.checkValue:this._settings.uncheckValue;\n\t\tthis.setValue(value);\n\t},\n\tgetValue:function(){\n\t\tvar value = this._settings.value;\n\t\treturn  (value == this._settings.checkValue)?this._settings.checkValue:this._settings.uncheckValue;\n\t},\n\t$skin:function(){\n\t\tif(webix.skin.$active.customCheckbox)\n\t\t\tthis.defaults.customCheckbox = true;\n\t}\n}, webix.ui.text);\n\nwebix.protoUI({\n\tname:\"radio\",\n\tdefaults:{\n\t\ttemplate: function(config,common) {\n\t\t\tvar options = common._check_options(config.options);\n\t\t\tvar html = [];\n\t\t\tvar id;\n\n\t\t\tfor (var i=0; i < options.length; i++) {\n\t\t\t\tvar eachid = \"x\"+webix.uid();\n\t\t\t\tid = id || eachid;\n\n\t\t\t\tif  (i && (options[i].newline || config.vertical))\n\t\t\t\t\thtml.push(\"<div class='webix_line_break'></div>\");\n\t\t\t\tvar isChecked = (options[i].id == config.value);\n\t\t\t\tvar label = options[i].value || \"\";\n\t\t\t\t\n\t\t\t\tvar customRadio = config.customRadio|| \"\";\n\t\t\t\tif(customRadio){\n\t\t\t\t\tvar optlabel = (i === 0 ? config.label+\" \" : \"\")+label;\n\t\t\t\t\tcustomRadio = customRadio.replace(/(aria-label=')\\w*(?=')/, \"$1\"+webix.template.escape(optlabel));\n\t\t\t\t\tcustomRadio = customRadio.replace(/(aria-checked=')\\w*(?=')/, \"$1\"+(isChecked?\"true\":\"false\"));\n\t\t\t\t\tcustomRadio = customRadio.replace(/(tabindex=')\\w*(?=')/, \"$1\"+(isChecked || (i === 0 && !config.value)?\"0\":\"-1\"));\n\t\t\t\t\tcustomRadio = customRadio.replace(/(aria-invalid=')\\w*(?=')/, \"$1\"+(config.invalid?\"true\":\"false\"));\n\t\t\t\t}\n\t\t\t\tvar rd = common._baseInputHTML(\"input\")+\" name='\"+(config.name || config.id)+\"' type='radio' \"+(isChecked?\"checked='1'\":\"\")+\"tabindex=\"+(isChecked || (i === 0 && !config.value)?\"0\":\"-1\")+\" value='\"+options[i].id+\"' id='\"+eachid+\"' style='\"+(customRadio?\"display:none\":\"\")+\"' />\";\n\t\t\t\tvar input = \"<div radio_id='\"+options[i].id+\"' class='webix_inp_radio_border webix_radio_\"+(isChecked?\"1\":\"0\")+\"' role='presentation'>\"+rd+customRadio+\"</div>\";\n\t\t\t\tif (label)\n\t\t\t\t\tlabel = \"<label for='\"+eachid+\"' class='webix_label_right'>\" + label + \"</label>\";\n\n\t\t\t\thtml.push(\"<div class='webix_radio_option' role='presentation'>\"+input + label+\"</div>\");\n\t\t\t\t\n\t\t\t}\n\t\t\thtml = \"<div class='webix_el_group' role='radiogroup' style='margin-left:\"+(config.label?config.labelWidth:0)+\"px;'>\"+html.join(\"\")+\"</div>\";\n\t\t\t\n\t\t\treturn common.$renderInput(config, html, id);\n\t\t}\n\t},\n\trefresh:function(){\n\t\tthis.render();\n\t\tif (this._last_size && this.$getSize(0,0)[2] != this._last_size[1])\n\t\t\tthis.resize();\n\t},\n\t$getSize:function(dx, dy){\n\t\tvar size = webix.ui.button.prototype.$getSize.call(this, dx, dy);\n\t\tif (this._settings.options){\n\t\t\tvar count = this._settings.vertical?0:1;\n\t\t\tfor (var i=0; i < this._settings.options.length; i++)\n\t\t\t\tif (this._settings.vertical || this._settings.options[i].newline)\n\t\t\t\t\tcount++;\n\t\t\tsize[3] = size[2] = Math.max(size[2], (this._settings.optionHeight||25) * count+this._settings.inputPadding*2+ (this._settings.labelPosition == \"top\"?this._labelTopHeight:0));\n\t\t}\n\t\tvar heightInc = this.config.bottomPadding;\n\t\tif(heightInc){\n\t\t\tsize[2] += heightInc;\n\t\t\tsize[3] += heightInc;\n\t\t}\n\t\treturn size;\n\t},\n\t_getInputNode: function(){\n\t\treturn this._dataobj.getElementsByTagName('input');\n\t},\n\t$setValue:function(value){\n\t\tvar inp = this._getInputNode();\n\n\t\tfor (var i=0; i < inp.length; i++){\n\t\t\tif (inp[i].parentNode.getAttribute(\"radio_id\")==value){\n\t\t\t\tinp[i].className = \"webix_inp_radio_on\";\t\n\t\t\t\tinp[i].checked = true;\n\t\t\t\tinp[i].setAttribute(\"tabindex\",\"0\");\n\t\t\t} else{\n\t\t\t\tinp[i].className = \"webix_inp_radio_on webix_hidden\";\n\t\t\t\tinp[i].checked = false;\n\t\t\t\tinp[i].setAttribute(\"tabindex\",\"-1\");\n\t\t\t}\n\t\t\tvar parentNode = inp[i]?inp[i].parentNode:null;\n\n\t\t\tif(parentNode){\n\t\t\t\tparentNode.className = parentNode.className.replace(/(webix_radio_)\\d/,\"$1\"+(inp[i].checked?1:0));\n\t\t\t\tif(this._settings.customRadio){\n\t\t\t\t\tvar button = parentNode.getElementsByTagName(\"BUTTON\");\n\t\t\t\t\tif(button[0]){\n\t\t\t\t\t\tbutton[0].setAttribute(\"aria-checked\", inp[i].checked?\"true\":\"false\");\n\t\t\t\t\t\tbutton[0].setAttribute(\"tabindex\", inp[i].checked?\"0\":\"-1\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tgetValue:function(obj){\n\t\treturn this._settings.value;\n\t},\n\tfocus: function(){ this._focus(); },\n\tblur: function(){ this._blur(); },\n\tcustomRadio_setter: function(value){\n\t\tif(value === true && webix.skin.$active.customRadio)\n\t\t\tvalue = \"<a role='presentation' onclick='javascript:void(0)'><button type='button' class='webix_custom_radio' role='radio' aria-checked='false' aria-label='' aria-invalid='' tabindex=''></button></a>\";\n\t\treturn value;\n\t},\n\t$skin:function(){\n\t\tif(webix.skin.$active.customRadio)\n\t\t\tthis.defaults.customRadio = true;\n\t\tif(webix.skin.$active.optionHeight)\n\t\t\tthis.defaults.optionHeight = webix.skin.$active.optionHeight;\n\t}\n}, webix.HTMLOptions, webix.ui.text);\n\nwebix.protoUI({\n\tname:\"richselect\",\n\tdefaults:{\n\t\ttemplate:function(obj,common){\n\t\t\treturn common._render_div_block(obj, common);\n\t\t},\n\t\tpopupWidth:200,\n\t\ticon: \"angle-down\"\n\t},\n\t_onBlur:function(){\n\t\tif (this._settings.text == this.getText() || (webix.isUndefined(this._settings.text) && !this.getText()))\n\t\t\treturn;\n\n\t\tvar suggest =  this.getPopup(),\n\t\t\tvalue = suggest.getSuggestion();\n\n\t\tif (value && !(this.getInputNode().value===\"\" && suggest.getItemText(value)!==\"\"))\n\t\t\tthis.setValue(value);\n\t\telse if(this._revertValue)\n\t\t\tthis._revertValue();\n\t},\n\tsuggest_setter:function(value){\n\t\treturn this.options_setter(value);\n\t},\n\toptions_setter:function(value){\n\t\tvalue = this._suggest_config ? this._suggest_config(value) : value;\n\t\tvar suggest = (this._settings.popup = this._settings.suggest = webix.ui.text.prototype.suggest_setter.call(this, value));\n\t\tvar list = webix.$$(suggest).getList();\n\t\tif (list)\n\t\t\tlist.attachEvent(\"onAfterLoad\", webix.bind(this._reset_value, this));\n\n\t\treturn suggest;\n\t},\n\tgetList: function(){\n\t\tvar suggest = webix.$$(this._settings.suggest);\n\t\twebix.assert(suggest, \"Input doesn't have a list\");\n\t\treturn suggest.getList();\n\t},\n\t_reset_value:function(){\n\t\tvar value = this._settings.value;\n\t\t//this._dataobj.firstChild - check that input is already rendered, as in IE11 it can be destroy during parent repainting\n\t\tif(!webix.isUndefined(value) && !this.getPopup().isVisible() && !this._settings.text && this._dataobj.firstChild)\n\t\t\tthis.$setValue(value);\n\t},\n\t$skin:function(){\n\t\tthis.defaults.inputPadding = webix.skin.$active.inputPadding;\n\t},\n\t$render:function(obj){\n\t\tif (webix.isUndefined(obj.value)) return;\n\t\tthis.$setValue(obj.value);\n\t},\n\tgetInputNode: function(){\n\t\treturn this._dataobj.getElementsByTagName(\"DIV\")[1];\n\t},\n\tgetPopup: function(){\n\t \treturn webix.$$(this._settings.popup);\n\t},\n\tgetText:function(){\n\t\tvar value = this._settings.value,\n\t\t\tnode = this.getInputNode();\n\t\tif(!node)\n\t\t\treturn value?this.getPopup().getItemText(value):\"\";\n\t\treturn typeof node.value == \"undefined\" ? (this.getValue()?node.innerHTML:\"\") : node.value;\n\t},\n\t$setValue:function(value){\n\t\tif (!this._rendered_input) return;\n\n\t\tvar text = value;\n\t\tvar popup = this.getPopup();\n\n\t\tif (popup)\n\t\t\tvar text = this.getPopup().getItemText(value);\n\n\t\tif (!text && value && value.id){ //add new value\n\t\t\tthis.getPopup().getList().add(value);\n\t\t\ttext = this.getPopup().getItemText(value.id);\n\t\t\tthis._settings.value = value.id;\n\t\t}\n\n\t\tvar node = this.getInputNode();\n\n\t\tif (webix.isUndefined(node.value))\n\t\t\tnode.innerHTML = text || this._get_div_placeholder();\n\t\telse \n\t\t\tnode.value = text = text.replace(/<[^>]*>/g,\"\");\n\n\t\tthis._settings.text = text;\n\t},\n\tgetValue:function(){\n\t\treturn this._settings.value||\"\";\n\t}\n}, webix.ui.text);\n\n\nwebix.protoUI({\n\tname:\"combo\",\n\tgetInputNode:function(){\n\t\treturn this._dataobj.getElementsByTagName('input')[0];\n\t},\n\t$render:function(obj){\n\t\tif (webix.isUndefined(obj.value)) return;\n\t\tthis.$setValue(obj.value);\n\t},\n\t_revertValue:function(){\n\t\tif(!this._settings.editable){\n\t\t\tvar value = this.getValue();\n\t\t\tthis.$setValue(webix.isUndefined(value)?\"\":value);\n\t\t}\n\t},\n\t_applyChanges:function(){\n\t\tvar input = this.getInputNode(),\n\t\t\tvalue = \"\",\n\t\t\tsuggest =  this.getPopup();\n\n\t\tif (input.value){\n\t\t\tvalue = this._settings.value;\n\t\t\tif(suggest.getItemText(value) != this.getText())\n\t\t\t\tvalue = suggest.getSuggestion()||value;\n\t\t}\n\t\tif (value != this._settings.value)\n\t\t\tthis.setValue(value, true);\n\t\telse\n\t\t\tthis.$setValue(value);\n\t},\n\tdefaults:{\n\t\ttemplate:function(config, common){\n\t\t\treturn common.$renderInput(config).replace(/(<input)\\s*(?=\\w)/, \"$1\"+\" role='combobox'\");\n\t\t},\n\t\ticon: \"angle-down\"\n\t}\n}, webix.ui.richselect);\n\n\nwebix.protoUI({\n\tname:\"datepicker\",\n\t$init:function(){\n\t\tthis.$ready.push(this._init_popup);\n\t},\n\tdefaults:{\n\t\ttemplate:function(obj, common){\n\t\t\tif(common._settings.type == \"time\"){\n\t\t\t\tcommon._settings.icon = common._settings.timeIcon;\n\t\t\t}\n\t\t\t//temporary remove obj.type [[DIRTY]]\n\t\t\tvar t = obj.type; obj.type = \"\";\n\t\t\tvar res = obj.editable?common.$renderInput(obj):common._render_div_block(obj, common);\n\t\t\tobj.type = t;\n\t\t\treturn res;\n\t\t},\n\t\tstringResult:false,\n\t\ttimepicker:false,\n\t\ticon:\"calendar\",\n\t\ticons: true,\n\t\ttimeIcon: \"clock-o\"\n\t},\n\t_onBlur:function(){\n\t\tif (this._settings.text == this.getText() || (webix.isUndefined(this._settings.text) && !this.getText()))\n\t\t\treturn;\n\n\t\tvar value = this.getPopup().getValue();\n\t\tif (value)\n\t\t\tthis.setValue(value);\n\t},\n\t$skin:function(){\n\t\tthis.defaults.inputPadding = webix.skin.$active.inputPadding;\n\t},\n\tgetPopup: function(){\n\t \treturn webix.$$(this._settings.popup);\n\t},\n\t_init_popup:function(){ \n\t\tvar obj = this._settings;\n\t\tif (obj.suggest)\n\t\t\tobj.popup = obj.suggest;\n\t\telse if (!obj.popup){\n\t\t\tvar timepicker = this._settings.timepicker;\n\t\t\tobj.popup = obj.suggest = this.suggest_setter({\n\t\t\t\ttype:\"calendar\", height:240+(timepicker?30:0), width:250, padding:0,\n\t\t\t\tbody: { timepicker:timepicker, type: this._settings.type, icons: this._settings.icons }\n\t\t\t});\n\t\t}\n\n\t\tthis._init_once = function(){};\n\t},\n\t$render:function(obj){\n\t\tif (webix.isUndefined(obj.value)) return;\n\t\tobj.value = this.$prepareValue(obj.value);\n\t\tthis.$setValue(obj.value);\n\t},\n\t$prepareValue:function(value){\n\t\tvar type = this._settings.type;\n\t\tvar timeMode = type == \"time\";\n\n\t\t//setValue(\"1980-12-25\")\n\t\tif(!isNaN(parseFloat(value)))\n\t\t\tvalue = \"\"+value;\n\n\t\tif (typeof value==\"string\" && value){\n\t\t\tvar formatDate = null;\n\t\t\tif((type == \"month\" || type == \"year\") && this._formatDate){\n\t\t\t\tformatDate = this._formatDate;\n\t\t\t}\n\t\t\telse\n\t\t\t\tformatDate = (timeMode?webix.i18n.parseTimeFormatDate:webix.i18n.parseFormatDate);\n\t\t\tvalue = formatDate(value);\n\t\t}\n\n\t\tif (value){\n\t\t\t//time mode\n\t\t\tif(timeMode){\n\t\t\t\t//setValue([16,24])\n\t\t\t\tif(webix.isArray(value)){\n\t\t\t\t\tvar time = new Date();\n\t\t\t\t\ttime.setHours(value[0]);\n\t\t\t\t\ttime.setMinutes(value[1]);\n\t\t\t\t\tvalue = time;\n\t\t\t\t}\n\t\t\t}\n\t\t\t//setValue(invalid date)\n\t\t\tif(isNaN(value.getTime()))\n\t\t\t\tvalue = \"\";\n\t\t}\n\n\t\treturn value;\n\t},\n\t_get_visible_text:function(value){\n\t\tvar timeMode = this._settings.type == \"time\";\n\t\tvar timepicker = this.config.timepicker;\n\t\tvar formatStr = this._formatStr||(timeMode?webix.i18n.timeFormatStr:(timepicker?webix.i18n.fullDateFormatStr:webix.i18n.dateFormatStr));\n\t\treturn formatStr(value);\n\t},\n\t_set_visible_text:function(){\n\t\tvar node = this.getInputNode();\n\t\tif(node.value == webix.undefined){\n\t\t\tnode.innerHTML = this._settings.text || this._get_div_placeholder();\n\t\t}\n\t\telse{\n\t\t\tnode.value = this._settings.text || \"\";\n\t\t}\n\t},\n\t$compareValue:function(oldvalue, value){\n\t\tif(!oldvalue && !value) return true;\n\t\treturn webix.Date.equal(oldvalue, value);\n\t},\n\t$setValue:function(value){\n\t\tthis._settings.text = (value?this._get_visible_text(value):\"\");\n\t\tthis._set_visible_text();\n\t},\n\tformat_setter:function(value){\n\t\tif(value){\n\t\t\tif (typeof value === \"function\")\n\t\t\t\tthis._formatStr = value;\n\t\t\telse {\n\t\t\t\tthis._formatStr = webix.Date.dateToStr(value);\n\t\t\t\tthis._formatDate = webix.Date.strToDate(value);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tthis._formatStr = this._formatDate = null;\n\t\treturn value;\n\t},\n\tgetInputNode: function(){\n\t\treturn this._settings.editable?this._dataobj.getElementsByTagName('input')[0]:this._dataobj.getElementsByTagName(\"DIV\")[1];\n\t},\n\tgetValue:function(){\n\t\tvar type = this._settings.type;\n\t\t//time mode\n\t\tvar timeMode = (type == \"time\");\n\t\t//date and time mode\n\t\tvar timepicker = this.config.timepicker;\n\n\t\tvar value = this._settings.value;\n\n\t\t//input was not rendered, we need to parse value from setValue method\n\t\tif (!this._rendered_input)\n\t\t\tvalue = this.$prepareValue(value) || null;\n\t\t//rendere and in edit mode\n\t\telse if (this._settings.editable){\n\t\t\tvar formatDate = this._formatDate||(timeMode?webix.i18n.timeFormatDate:(timepicker?webix.i18n.fullDateFormatDate:webix.i18n.dateFormatDate));\n\t\t\tvalue = formatDate(this.getInputNode().value);\n\t\t}\n\n\t\t//return string from getValue\n\t\tif(this._settings.stringResult){\n\t\t\tvar formatStr =webix.i18n.parseFormatStr;\n\t\t\tif(timeMode)\n\t\t\t\tformatStr = webix.i18n.parseTimeFormatStr;\n\t\t\tif(this._formatStr && (type == \"month\" || type == \"year\")){\n\t\t\t\tformatStr = this._formatStr;\n\t\t\t}\n\n\t\t\treturn (value?formatStr(value):\"\");\n\t\t}\n\t\t\n\t\treturn value||null;\n\t},\n\tgetText:function(){\n\t\tvar node = this.getInputNode();\n\t\treturn (node?(typeof node.value == \"undefined\" ? (this.getValue()?node.innerHTML:\"\") : node.value):\"\");\n\t}\n}, webix.ui.text);\n\nwebix.protoUI({\n\tname:\"colorpicker\",\n\t$init:function(){\n\t\tthis.$ready.push(this._init_popup);\n\t},\n\tdefaults:{\n\t\ticon:true\n\t},\n\t_init_popup:function(){\n\t\tvar obj = this._settings;\n\t\tif (obj.suggest)\n\t\t\tobj.popup = obj.suggest;\n\t\telse if (!obj.popup)\n\t\t\tobj.popup = obj.suggest = this.suggest_setter({\n\t\t\t\ttype:\"colorboard\", height:200\n\t\t\t});\n\t\tthis._init_once = function(){};\n\t},\n\t$render:function(obj){\n\t\tif (webix.isUndefined(obj.value)) return;\n\t\tobj.value = this.$prepareValue(obj.value);\n\t\tthis.$setValue(obj.value);\n\t},\n\tgetValue:function(){\n\t\tif (this._rendered_input && this._settings.editable)\n\t\t\treturn this.getInputNode().value;\n\t\telse\n\t\t\treturn this._settings.value;\n\t},\n\t$prepareValue:function(value){\n\t\tif(value && value.charAt && value.charAt(0) != \"#\")\n\t\t\tvalue = '#' + value;\n\t\treturn value;\n\t},\n\t_getColorNode: function(){\n\t\treturn this.$view.getElementsByTagName(\"DIV\")[this._settings.editable?1:2];\n\t},\n\t_get_visible_text:function(value){\n\t\treturn value;\n\t},\n\t$setValue:function(value){\n\t\tthis._getColorNode().style.backgroundColor = value;\n\t\tthis._settings.text = value;\n\n\t\tvar node = this.getInputNode();\n\t\tif(node.value == webix.undefined)\n\t\t\tnode.innerHTML = value;\n\t\telse\n\t\t\tnode.value = value;\n\t},\n\t$renderIcon:function(){\n\t\tvar config = this.config;\n\t\treturn '<div class=\"webix_input_icon\" style=\"background-color:'+config.value+';\"> </div>';\n\t}\n}, webix.ui.datepicker);\n\n\n/*\n\tRenders collection of items\n\tBehavior uses plain strategy which suits only for relative small datasets\n\t\n*/\n\n\nwebix.RenderStack={\n\t$init:function(){\n\t\twebix.assert(this.data,\"RenderStack :: Component doesn't have DataStore\");\n        webix.assert(webix.template,\"webix.template :: webix.template is not accessible\");\n\n\t\t//used for temporary HTML elements\n\t\t//automatically nulified during destruction\n\t\tthis._html = document.createElement(\"DIV\");\n\t\t\t\t\n\t\tthis.data.attachEvent(\"onIdChange\", webix.bind(this._render_change_id, this));\n\t\tthis.attachEvent(\"onItemClick\", this._call_onclick);\n\t\t\n\t\t//create copy of default type, and set it as active one\n\t\tif (!this.types){ \n\t\t\tthis.types = { \"default\" : this.type };\n\t\t\tthis.type.name = \"default\";\n\t\t}\n\n\t\tthis.type = webix.clone(this.type);\n\t},\n\t\n\tcustomize:function(obj){ \n\t\twebix.type(this,obj);\n\t},\n\titem_setter:function(value){\n\t\treturn this.type_setter(value);\n\t},\n\ttype_setter:function(value){\n\t\tif(!this.types[value])\n\t\t\tthis.customize(value);\n\t\telse {\n\t\t\tthis.type = webix.clone(this.types[value]);\n\t\t\tif (this.type.css) \n\t\t\t\tthis._contentobj.className+=\" \"+this.type.css;\n\t\t}\n\t\tif (this.type.on_click)\n\t\t\twebix.extend(this.on_click, this.type.on_click);\n\n\t\treturn value;\n\t},\n\t\n\ttemplate_setter:function(value){\n\t\tthis.type.template=webix.template(value);\n\t},\n\t//convert single item to HTML text (templating)\n\t_toHTML:function(obj){\n\t\t\tvar mark = this.data._marks[obj.id];\n\t\t\t//check if related template exist\n\t\t\twebix.assert((!obj.$template || this.type[\"template\"+obj.$template]),\"RenderStack :: Unknown template: \"+obj.$template);\n\t\t\tthis.callEvent(\"onItemRender\",[obj]);\n\t\t\treturn this.type.templateStart(obj,this.type, mark)+(obj.$template?this.type[\"template\"+obj.$template]:this.type.template)(obj,this.type,mark)+this.type.templateEnd(obj, this.type,mark);\n\t},\n\t//convert item to HTML object (templating)\n\t_toHTMLObject:function(obj){\n\t\tthis._html.innerHTML = this._toHTML(obj);\n\t\treturn this._html.firstChild;\n\t},\n\t_render_change_id:function(old, newid){\n\t\tvar obj = this.getItemNode(old);\n\t\tif (obj) {\n\t\t\tobj.setAttribute(this._id, newid);\n\t\t\tthis._htmlmap[newid] = this._htmlmap[old];\n\t\t\tdelete this._htmlmap[old];\n\t\t}\n\t},\n\t//calls function that is set in onclick property\n\t_call_onclick:function(){\n\t\tif (this._settings.click){\n\t\t\tvar code = webix.toFunctor(this._settings.click, this.$scope);\n\t\t\tif (code && code.call) code.apply(this,arguments);\n\t\t}\n\t},\n\t//return html container by its ID\n\t//can return undefined if container doesn't exists\n\tgetItemNode:function(search_id){\n\t\tif (this._htmlmap)\n\t\t\treturn this._htmlmap[search_id];\n\t\t\t\n\t\t//fill map if it doesn't created yet\n\t\tthis._htmlmap={};\n\t\t\n\t\tvar t = this._dataobj.childNodes;\n\t\tfor (var i=0; i < t.length; i++){\n\t\t\tvar id = t[i].getAttribute(this._id); //get item's\n\t\t\tif (id)\n\t\t\t\tthis._htmlmap[id]=t[i];\n\t\t}\n\t\t//call locator again, when map is filled\n\t\treturn this.getItemNode(search_id);\n\t},\n\t//return id of item from html event\n\tlocate:function(e){ return webix.html.locate(e,this._id); },\n\t/*change scrolling state of top level container, so related item will be in visible part*/\n\tshowItem:function(id){\n\n\t\tvar html = this.getItemNode(id);\n\t\tif (html&&this.scrollTo){\n\t\t\tvar txmin = Math.abs(this._contentobj.offsetLeft-html.offsetLeft);\n\t\t\tvar txmax = txmin + html.offsetWidth;\n\t\t\tvar tymin = Math.abs(this._contentobj.offsetTop-html.offsetTop);\n\t\t\tvar tymax = tymin + html.offsetHeight;\n\t\t\tvar state = this.getScrollState();\n\n\t\t\tvar x = state.x;\n\t\t\tif (x > txmin || x + this._content_width < txmax )\n\t\t\t\tx = txmin;\n\t\t\tvar y = state.y;\n\t\t\tif (y > tymin || y + this._content_height < tymax )\n\t\t\t\ty = tymin - 5;\n\n\t\t\tthis.scrollTo(x,y);\n\t\t\tif(this._setItemActive)\n\t\t\t\tthis._setItemActive(id);\n\t\t}\n\t},\n\t//update view after data update\n\t//method calls low-level rendering for related items\n\t//when called without parameters - all view refreshed\n\trender:function(id,data,type){\n\t\tif (!this.isVisible(this._settings.id) || this.$blockRender)\n\t\t\treturn;\n\t\t\n\t\tif (webix.debug_render)\n\t\t\twebix.log(\"Render: \"+this.name+\"@\"+this._settings.id+\", mode:\"+(type||\"#\")+\", item:\"+(id||\"#\"));\n\t\t\t\n\t\tif (id){\n\t\t\tvar cont = this.getItemNode(id); //get html element of updated item\n\t\t\tswitch(type){\n\t\t\t\tcase \"paint\":\n\t\t\t\tcase \"update\":\n\t\t\t\t\t//in case of update - replace existing html with updated one\n\t\t\t\t\tif (!cont) return;\n\t\t\t\t\tvar t = this._htmlmap[id] = this._toHTMLObject(data);\n\t\t\t\t\twebix.html.insertBefore(t, cont); \n\t\t\t\t\twebix.html.remove(cont);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"delete\":\n\t\t\t\t\t//in case of delete - remove related html\n\t\t\t\t\tif (!cont) return;\n\t\t\t\t\twebix.html.remove(cont);\n\t\t\t\t\tdelete this._htmlmap[id];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"add\":\n\t\t\t\t\t//in case of add - put new html at necessary position\n\t\t\t\t\tvar t = this._htmlmap[id] = this._toHTMLObject(data);\n\t\t\t\t\twebix.html.insertBefore(t, this.getItemNode(this.data.getNextId(id)), this._dataobj);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"move\":\n\t\t\t\t\t//moving without repainting the item\n\t\t\t\t\twebix.html.insertBefore(this.getItemNode(id), this.getItemNode(this.data.getNextId(id)), this._dataobj);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\twebix.assert_error(\"Unknown render command: \"+type);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t} else {\n\t\t\t//full reset\n\t\t\tif (this.callEvent(\"onBeforeRender\",[this.data])){\n\t\t\t\t/*if (this.getScrollState)\n\t\t\t\t\tvar scroll = this.getScrollState();*/\n\t\t\t\t\t\n\t\t\t\t//getRange - returns all elements\n\t\t\t\t(this._renderobj||this._dataobj).innerHTML = this.data.getRange().map(this._toHTML,this).join(\"\");\n\t\t\t\tthis._htmlmap = null; //clear map, it will be filled at first getItemNode\n\t\t\t\tthis.callEvent(\"onAfterRender\",[]);\n                var t = this._dataobj.offsetHeight;\n                \n\t\t\t\t/*if (this.getScrollState)\n\t\t\t\t\tthis.scrollTo(scroll.x, scroll.y);*/\n\t\t\t}\n\t\t}\n\t}\n};\n\n\n\n\n\n\n\nwebix.ValidateData = {\n\t$init:function(){\n\t\tif(this._events)\n\t\t\tthis.attachEvent(\"onChange\",this.clearValidation);\n\t},\n\tclearValidation:function(){\n\t\tif(this.elements){\n\t\t\tfor(var id in this.elements){\n\t\t\t\tthis._clear_invalid(id);\n\t\t\t}\n\t\t}\n\t},\n\tvalidate:function(mode, obj) {\n\t\twebix.assert(this.callEvent, \"using validate for eventless object\");\n\t\t\n\t\tthis.callEvent(\"onBeforeValidate\", []);\n\t\tvar failed = this._validate_details = {};\n\n\t\t//optimistic by default :) \n\t\tvar result =true;\n\t\tvar rules = this._settings.rules;\n\t\t\n\t\tvar isHidden = this.isVisible && !this.isVisible();\n\t\tvar validateHidden = mode && mode.hidden;\n\t\tvar validateDisabled = mode && mode.disabled;\n\n        //prevent validation of hidden elements\n\t\tvar elements = {}, hidden = {};\n        for(var i in this.elements){\n            var name = this.elements[i].config.name;\n            //we are ignoring hidden and disabled fields during validation\n            //if mode doesn not instruct us otherwise\n            //if form itself is hidden, we can't separate hidden fiels,\n            //so we will vaidate all fields\n            if((isHidden || this.elements[i].isVisible() || validateHidden) && (this.elements[i].isEnabled() || validateDisabled))\n\t\t\t\telements[name] = this.elements[i];\n            else{\n\t\t\t\thidden[name]=true;\n            }\n        }\n\t\tif (rules || elements)\n\t\t\tif(!obj && this.getValues)\n\t\t\t\tobj = this.getValues();\n\n\t\tif (rules){\n\t\t\t//complex rule, which may chcek all properties of object\n\t\t\tif (rules.$obj)\n\t\t\t\tresult = this._validate(rules.$obj, obj, obj, \"\") && result;\n\t\t\t\n\t\t\t//all - applied to all fields\n\t\t\tvar all = rules.$all;\n\t\t\tvar data = obj;\n\n\t\t\tif (this._settings.complexData)\n\t\t\t\tdata = webix.CodeParser.collapseNames(obj);\n\n\t\t\tif (all)\n\t\t\t\tfor (var key in obj){\n                    if(hidden[key]) continue;\n                    var subresult = this._validate(all, data[key], obj, key);\n\t\t\t\t\tif (!subresult)\n\t\t\t\t\t\tfailed[key] = true;\n\t\t\t\t\tresult =  subresult && result;\n\t\t\t\t}\n\n\n\t\t\t//per-field rules\n\t\t\tfor (var key in rules){\n                if(hidden[key]) continue;\n\t\t\t\tif (key.indexOf(\"$\")!==0 && !failed[key]){\n\t\t\t\t\twebix.assert(rules[key], \"Invalid rule for:\"+key);\n\t\t\t\t\tvar subresult = this._validate(rules[key], data[key], obj, key);\n\t\t\t\t\tif (!subresult)\n\t\t\t\t\t\tfailed[key] = true;\n\t\t\t\t\tresult = subresult && result;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//check personal validation rules\n\t\tif (elements){\n\t\t\tfor (var key in elements){\n\t\t\t\tif (failed[key]) continue;\n\n\t\t\t\tvar subview = elements[key];\n\t\t\t\tif (subview.validate){\n\t\t\t\t\tvar subresult = subview.validate();\n\t\t\t\t\tresult = subresult && result;\n\t\t\t\t\tif (!subresult)\n\t\t\t\t\t\tfailed[key] = true;\n\t\t\t\t} else {\n\t\t\t\t\tvar input = subview._settings;\n\t\t\t\t\tif (input){\t//ignore non webix inputs\n\t\t\t\t\t\tvar validator = input.validate;\n\t\t\t\t\t\tif (!validator && input.required)\n\t\t\t\t\t\t\tvalidator = webix.rules.isNotEmpty;\n\n\t\t\t\t\t\tif (validator){\n\t\t\t\t\t\t\tvar subresult = this._validate(validator, obj[key], obj, key);\n\t\t\t\t\t\t\tif (!subresult)\n\t\t\t\t\t\t\t\tfailed[key] = true;\n\t\t\t\t\t\t\tresult = subresult && result;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\tthis.callEvent(\"onAfterValidation\", [result, this._validate_details]);\n\t\treturn result;\n\t},\n\t_validate:function(rule, data, obj, key){\n\t\tif (typeof rule == \"string\")\n\t\t\trule = webix.rules[rule];\n\t\tif (rule.call(this, data, obj, key)){\n\t\t\tif(this.callEvent(\"onValidationSuccess\",[key, obj]) && this._clear_invalid)\n\t\t\t\tthis._clear_invalid(key);\n\t\t\treturn true;\n\t\t}\n\t\telse {\n\t\t\tif(this.callEvent(\"onValidationError\",[key, obj]) && this._mark_invalid)\n\t\t\t\tthis._mark_invalid(key);\n\t\t}\n\t\treturn false;\n\t}\n};\n\n\nwebix.ValidateCollection = {\n\t_validate_init_once:function(){\n\t\tthis.data.attachEvent(\"onStoreUpdated\",webix.bind(function(id, data, mode){\n\t\t\tif (id && (mode == \"add\" || mode == \"update\"))\n\t\t\t\tthis.validate(id);\n\t\t}, this));\n\t\tthis.data.attachEvent(\"onClearAll\",webix.bind(this.clearValidation, this));\n\n\t\tthis._validate_init_once = function(){};\n\t},\n\trules_setter:function(value){\n\t\tif (value){\n\t\t\tthis._validate_init_once();\n\t\t}\n\t\treturn value;\n\t},\n\tclearValidation:function(){\n\t\tthis.data.clearMark(\"webix_invalid\", true);\n\t},\n\tvalidate:function(id){\n\t\tvar result = true;\n\t\tif (!id)\n\t\t\tfor (var key in this.data.pull)\n\t\t\t\tvar result = this.validate(key) && result;\n\t\telse {\n\t\t\tthis._validate_details = {};\n\t\t\tvar obj = this.getItem(id);\n\t\t\tresult = webix.ValidateData.validate.call(this, null, obj);\n\t\t\tif (result){\n\t\t\t\tif (this.callEvent(\"onValidationSuccess\",[id, obj]))\n\t\t\t\t\tthis._clear_invalid(id);\n\t\t\t} else {\n\t\t\t\tif (this.callEvent(\"onValidationError\",[id, obj, this._validate_details]))\n\t\t\t\t\tthis._mark_invalid(id, this._validate_details);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t},\n\t_validate:function(rule, data, obj, key){\n\t\tif (typeof rule == \"string\")\n\t\t\trule = webix.rules[rule];\n\n\t\tvar res = rule.call(this, data, obj, key);\n\t\tif (!res){\n\t\t\tthis._validate_details[key] = true;\n\t\t}\n\t\treturn res;\n\t},\n\t_clear_invalid:function(id){\n\t\tthis.data.removeMark(id, \"webix_invalid\", true);\n\t},\n\t_mark_invalid:function(id, details){\n\t\tthis.data.addMark(id, \"webix_invalid\", true);\n\t}\n};\n\n\nwebix.rules = {\n\tisEmail: function(value){\n\t\treturn (/\\S+@[^@\\s]+\\.[^@\\s]+$/).test((value || \"\").toString());\n\t},\n\tisNumber: function(value){\n\t\treturn (parseFloat(value) == value);\n\t},\n\tisChecked: function(value){\n\t\treturn (!!value) || value === \"0\";\n\t},\n\tisNotEmpty: function(value){\n\t\treturn (value === 0 || value);\n\t}\n};\n/*Data collection mapping logic */\n\nwebix.MapCollection = {\n    $init:function(){\n        this.$ready.push(this._create_scheme_init);\n        this.attachEvent(\"onStructureUpdate\", this._create_scheme_init);\n        this.attachEvent(\"onStructureLoad\", function(){\n            if(!this._scheme_init_order.length)\n                this._create_scheme_init();\n        });\n    },\n    _create_scheme_init:function(order){\n        var order = this._scheme_init_order = [];\n        var config = this._settings;\n\n        if (config.columns)\n            this._build_data_map(config.columns);\n        if (this._settings.map)\n            this._process_field_map(config.map);\n\n        if (this._scheme_init_order.length){\n             try {\n            this.data._scheme_init = Function(\"obj\",order.join(\"\\n\"));\n            } catch(e){\n                webix.assert_error(\"Invalid data map:\"+order.join(\"\\n\"));\n            }\n        }\n    },\n    _process_field_map:function(map){\n        for (var key in map)\n            this._scheme_init_order.push(this._process_single_map(key, map[key]));\n    },\n    _process_single_map:function(id, map, extra){\n        var start = \"\";\n        var end = \"\";\n\n        if (map.indexOf(\"(date)\")===0){\n            start = \"webix.i18n.parseFormatDate(\"; end=\")\";\n            if (extra && !extra.format) extra.format = webix.i18n.dateFormatStr;\n            map = map.replace(\"(date)\",\"\");\n        } else if (map.indexOf(\"(number)\")===0){\n            start = \"(\"; end=\")*1\";\n            map = map.replace(\"(number)\",\"\");\n        }\n\n        if (map !== \"\"){\n            map=map.replace(/\\{obj\\.([^}]*)\\}/g,\"\\\"+(obj.$1||'')+\\\"\");\n            map=map.replace(/#([^#'\";, ]+)#/gi,\"\\\"+(obj.$1||'')+\\\"\");\n        } else\n            map = \"\\\"+(obj.\"+id+\"||'')+\\\"\";\n\n\n        return \"obj.\"+id+\" = \"+start+'\"'+map+'\"'+end+\";\";\n    },\n    _build_data_map:function(columns){ //for datatable\n        for (var i=0; i<columns.length; i++){\n            var map = columns[i].map;\n            var id = columns[i].id;\n            if (!id) {\n                id = columns[i].id = \"i\"+webix.uid();\n                if (!columns[i].header)\n                    columns[i].header = \"\";\n            }\n            if (map)\n                this._scheme_init_order.push(this._process_single_map(id, map, columns[i]));\n\n            this._map_options(columns[i]);\n        }\n    },\n    _map_options:function(element){\n        var options = element.options||element.collection;\n        if(options){\n            if (typeof options === \"string\"){\n                //id of some other view\n                var options_view = webix.$$(options);\n                //or url\n                if (!options_view){\n                    options_view = new webix.DataCollection({ url: options });\n                    this._destroy_with_me.push(options_view);\n                }\n                //if it was a view, special check for suggests\n                if (options_view.getBody) options_view = options_view.getBody();\n                this._bind_collection(options_view, element);\n            } else if (!options.loadNext){\n                if (options[0] && typeof options[0] == \"object\"){\n                    //[{ id:1, value:\"one\"}, ...]\n                    options = new webix.DataCollection({ data:options });\n                    this._bind_collection(options, element);\n                    this._destroy_with_me.push(options);\n                } else {\n                    //[\"one\", \"two\"]\n                    //or\n                    //{ 1: \"one\", 2: \"two\"}\n                    if (webix.isArray(options)){\n                        var data = {};\n                        for (var ij=0; ij<options.length; ij++) data[options[ij]] = options[ij];\n                        element.options = options = data;\n                    }\n                    element.template = element.template || this._collection_accesser(options, element.id, element.optionslist);\n                }\n            } else {\n                //data collection or view\n                this._bind_collection(options, element);\n            }\n        }\n    },\n    _bind_collection:function(options, element){\n        if (element){\n            delete element.options;\n            element.collection = options;\n            element.template = element.template || this._bind_accesser(options, element.id, element.optionslist);\n\t        var id = options.data.attachEvent(\"onStoreUpdated\", webix.bind(function(){\n\t\t        this.refresh();\n                if(this.refreshFilter)\n                    this.refreshFilter(element.id);\n\t        }, this));\n            this.attachEvent(\"onDestruct\", function(){\n            \tif (!options.$destructed) options.data.detachEvent(id);\n            });\n        }\n    },\n    _collection_accesser:function(options, id, multi){\n        if (multi){\n            var separator = typeof multi==\"string\"?multi:\",\";\n            return function(obj, common){\n                var value = obj[id] || obj.value;\n                if (!value) return \"\";\n                var ids = value.split(separator);\n                for (var i = 0; i < ids.length; i++)\n                    ids[i] = options[ids[i]] || \"\";\n                \n                return ids.join(\", \");\n            };\n        } else {\n            return function(obj, common){\n                return options[obj[id]]||obj.value||\"\";\n            };\n        }\n    },\n    _bind_accesser:function(col, id, multi){\n        if (multi) {\n            var separator = typeof multi==\"string\"?multi:\",\";\n            return function(obj, common){\n                var value = obj[id] || obj.value;\n                if (!value) return \"\";\n\n                var ids = value.split(separator);\n                for (var i = 0; i < ids.length; i++){\n                    var data = col.data.pull[ids[i]];\n                    ids[i] = data ? (data.value  || \"\") : \"\";\n                }\n                \n                return ids.join(\", \");\n            };\n        } else {\n            return function(obj, common){\n                var prop = obj[id]||obj.value,\n                    data = col.data.pull[prop];\n                if (data && (data.value || data.value ===0))\n                    return data.value;\n                return \"\";\n            };\n        }\n    }\n};\nwebix.Undo= {\n\t$init:function(){\n\t\tthis._undoHistory = webix.extend([],webix.PowerArray,true);\n\t\tthis._undoCursor = -1;\n\t},\n\tundo_setter: function(value){\n\t\tif(value){\n\t\t\tthis._init_undo();\n\t\t\tthis._init_undo = function(){};\n\t\t}\n\t\treturn value;\n\t},\n\t_init_undo: function(){\n\t\tvar view = this;\n\n\t\t// drag-n-drop\n\t\tthis.attachEvent(\"onBeforeDrop\", function(context){\n\t\t\tif(context.from == context.to){\n\t\t\t\tvar item = view._draggedItem = webix.copy(this.getItem(context.start));\n\t\t\t\tif(this.data.branch){\n\t\t\t\t\titem.$index = this.getBranchIndex(item.id);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\titem.$index = this.getIndexById(item.id);\n\t\t\t}\n\t\t});\n\t\tthis.data.attachEvent(\"onDataMove\", function( sid ){\n\t\t\tif(view._draggedItem && view._draggedItem.id == sid){\n\t\t\t\tvar data = view._draggedItem;\n\t\t\t\tview._draggedItem = null;\n\t\t\t\tview._addToHistory(sid, data, \"move\");\n\t\t\t}\n\t\t});\n\n\t\t// add, remove\n\t\tthis.data.attachEvent(\"onBeforeDelete\", function(id){\n\t\t\tif(this.getItem(id)){\n\t\t\t\tvar item = view._deletedItem = webix.copy(this.getItem(id));\n\t\t\t\tif(this.branch){\n\t\t\t\t\titem.$index = this.getBranchIndex(id);\n\t\t\t\t\tif(this.branch[id])\n\t\t\t\t\t\titem.$branch = webix.copy(this.serialize(id));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\titem.$index = this.getIndexById(id);\n\t\t\t}\n\t\t});\n\t\tthis.data.attachEvent(\"onDataUpdate\", function(id, data, old){\n\t\t\tview._addToHistory(id+\"\", old, \"update\");\n\t\t});\n\t\tthis.data.attachEvent(\"onStoreUpdated\", function(id, item, mode){\n\t\t\tvar data = null;\n\t\t\tif(id){\n\t\t\t\tif(mode == \"add\"){\n\t\t\t\t\tdata = webix.copy(item);\n\t\t\t\t}\n\t\t\t\telse if( mode == \"delete\") {\n\t\t\t\t\tdata = view._deletedItem;\n\t\t\t\t}\n\n\t\t\t\tif(data)\n\t\t\t\t\tview._addToHistory(id, data, mode);\n\t\t\t}\n\t\t});\n\n\t\t// id change\n\t\tthis.data.attachEvent(\"onIdChange\", function(oldId,newId){\n\t\t\tif(typeof oldId == \"object\")\n\t\t\t\toldId = oldId.row;\n\t\t\tfor(var i =0; i < view._undoHistory.length; i++){\n\t\t\t\tif(view._undoHistory[i].id == oldId){\n\t\t\t\t\tview._undoHistory[i].id = newId;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\t_addToHistory: function(id, data, action){\n\t\tif(!this._skipHistory && this._settings.undo){\n\t\t\tthis._undoHistory.push({id: id, action: action, data: data});\n\t\t\tif(this._undoHistory.length==20)\n\t\t\t\tthis._undoHistory.splice(0,1);\n\t\t\tif(!this._skipCursorInc)\n\t\t\t\tthis._undoCursor = this._undoHistory.length - 1;\n\t\t}\n\t},\n\tignoreUndo: function(func, master){\n\t\t this._skipHistory = true;\n\t\t func.call(master||this);\n\t\t this._skipHistory = false;\n\t},\n\tremoveUndo: function(id){\n\t\tfor( var i = this._undoHistory.length-1; i >=0; i--){\n\t\t\tif(this._undoHistory[i].id == id){\n\t\t\t\tif(this._undoHistory[i].action == \"id\"){\n\t\t\t\t\tid = this._undoHistory[i].data;\n\t\t\t\t}\n\t\t\t\tthis._undoHistory.removeAt(i);\n\t\t\t}\n\t\t}\n\t\tthis._undoCursor = this._undoHistory.length - 1;\n\t},\n\tundo: function(id){\n\t\tif(id){\n\t\t\tthis.ignoreUndo(function(){\n\t\t\t\tvar data, i;\n\t\t\t\tfor( i = this._undoHistory.length-1; !data && i >=0; i--){\n\t\t\t\t\tif(this._undoHistory[i].id == id)\n\t\t\t\t\t\tdata = this._undoHistory[i];\n\t\t\t\t}\n\n\t\t\t\tif(data){\n\t\t\t\t\t/*if(data.action == \"id\")\n\t\t\t\t\t\tid = data.data;*/\n\t\t\t\t\tthis._undoAction(data);\n\t\t\t\t\tthis._undoHistory.removeAt(i+1);\n\t\t\t\t\tthis._undoCursor = this._undoHistory.length - 1;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse{\n\t\t\tvar data = this._undoHistory[this._undoCursor];\n\t\t\tif(data){\n\t\t\t\tthis.ignoreUndo(function(){\n\t\t\t\t\tthis._undoAction(data);\n\t\t\t\t\tthis._undoHistory.removeAt(this._undoCursor);\n\t\t\t\t});\n\t\t\t\tthis._undoCursor--;\n\t\t\t\t/*if(data.action == \"id\")\n\t\t\t\t\tthis.undo();*/\n\t\t\t}\n\t\t}\n\t},\n\t_undoAction: function(obj){\n\t\tif(obj.action == \"delete\"){\n\t\t\tvar branch = null,\n\t\t\t\tparentId = obj.data.$parent;\n\n\t\t\tif(obj.data.$branch){\n\t\t\t\tbranch = {\n\t\t\t\t\tparent: obj.id,\n\t\t\t\t\tdata: webix.copy(obj.data.$branch)\n\t\t\t\t};\n\t\t\t\tdelete obj.data.$branch;\n\t\t\t\tif(parentId && !this.data.branch[parentId])\n\t\t\t\t\tparentId = 0;\n\t\t\t}\n\n\t\t\tthis.add(obj.data, obj.data.$index, parentId);\n\t\t\tif(branch){\n\t\t\t\tthis.parse(branch);\n\t\t\t}\n\t\t}\n\t\telse if(obj.action == \"add\"){\n\t\t\tthis.remove(obj.id);\n\t\t}\n\t\telse if(obj.action == \"update\"){\n\t\t\tthis.updateItem(obj.id, obj.data);\n\t\t}\n\t\telse if(obj.action == \"move\"){\n\t\t\tif(obj.data.$parent){\n\t\t\t\tif(this.getItem(obj.data.$parent))\n\t\t\t\t\tthis.move(obj.id, obj.data.$index, null, {parent: obj.data.$parent});\n\t\t\t}\n\t\t\telse\n\t\t\t\tthis.move(obj.id, obj.data.$index);\n\t\t}\n\t\t/*else if(obj.action == \"id\"){\n\t\t\tthis.data.changeId(obj.id, obj.data);\n\t\t}*/\n\t}\n};\n\n/*\n\tBehavior:DataLoader - load data in the component\n\t\n\t@export\n\t\tload\n\t\tparse\n*/\nwebix.DataLoader=webix.proto({\n\t$init:function(config){\n\t\t//prepare data store\n\t\tconfig = config || \"\";\n\t\t\n\t\t//list of all active ajax requests\n\t\tthis._ajax_queue = webix.toArray();\n\t\tthis._feed_last = {};\n\n\t\tthis.data = new webix.DataStore();\n\n\t\tthis.data.attachEvent(\"onClearAll\",webix.bind(this._call_onclearall,this));\n\t\tthis.data.attachEvent(\"onServerConfig\", webix.bind(this._call_on_config, this));\n\t\tthis.attachEvent(\"onDestruct\", this._call_onclearall);\n\n\t\tthis.data.feed = this._feed;\n\t\tthis.data.owner = config.id;\n\t},\n\t_feed:function(from,count,callback){\n\t\t//allow only single request at same time\n\t\tif (this._load_count)\n\t\t\treturn (this._load_count=[from,count,callback]);\t//save last ignored request\n\t\telse\n\t\t\tthis._load_count=true;\n\t\tthis._feed_last.from = from;\n\t\tthis._feed_last.count = count;\n\t\tthis._feed_common.call(this, from, count, callback);\n\t},\n\t_feed_common:function(from, count, callback, url, details){\n\t\tvar state = null,\n\t\t\turl = url || this.data.url;\n\n\t\tvar final_callback = [\n\t\t\t{ success: this._feed_callback, error: this._feed_callback },\n\t\t\tcallback\n\t\t];\n\n\t\tif (from<0) from = 0;\n\n\t\tif(!details)\n\t\t\tdetails = { start: from, count:count };\n\n\t\tif(this.count())\n\t\t\tdetails[\"continue\"] = \"true\";\n\n\t\tif (this.getState)\n\t\t\tstate = this.getState();\n\n\t\t// proxy\n\t\tif (url && typeof url != \"string\"){\n\t\t\tif (state){\n\t\t\t\tif (state.sort)\n\t\t\t\t\tdetails.sort = state.sort;\n\t\t\t\tif (state.filter)\n\t\t\t\t\tdetails.filter = state.filter;\n\t\t\t}\n\t\t\tthis.load(url, final_callback, details);\n\t\t} else { // GET\n\t\t\turl = url+((url.indexOf(\"?\")==-1)?\"?\":\"&\");\n\n\t\t\tvar params = [];\n\t\t\tfor(var d in details){\n\t\t\t\tparams.push(d+\"=\"+details[d]);\n\t\t\t}\n\t\t\tif (state){\n\t\t\t\tif (state.sort)\n\t\t\t\t\tparams.push(\"sort[\"+state.sort.id+\"]=\"+encodeURIComponent(state.sort.dir));\n\t\t\t\tif (state.filter)\n\t\t\t\t\tfor (var key in state.filter){\n\t\t\t\t\t\tvar filterValue = state.filter[key];\n\t\t\t\t\t\tif(typeof filterValue == \"object\")\n\t\t\t\t\t\t\tfilterValue = webix.ajax().stringify(filterValue); //server daterangefilter\n\t\t\t\t\t\tparams.push(\"filter[\"+key+\"]=\"+encodeURIComponent(filterValue));\n\t\t\t\t\t}\n\t\t\t}\n\n\t\t\turl += params.join(\"&\");\n\t\t\tif (this._feed_last.url !== url){\n\t\t\t\tthis._feed_last.url = url;\n\t\t\t\tthis.load(url, final_callback);\n\t\t\t} else {\n\t\t\t\tthis._load_count = false;\n\t\t\t}\n\t\t}\n\t},\n\t_feed_callback:function(){\n\t\t//after loading check if we have some ignored requests\n\t\tvar temp = this._load_count;\n\t\tthis._load_count = false;\n\t\tif (typeof temp ==\"object\")\n\t\t\tthis.data.feed.apply(this, temp);\t//load last ignored request\n\t},\n\t//loads data from external URL\n\tload:function(url,call){\n\t\tvar url = webix.proxy.$parse(url);\n\t\tvar ajax = webix.AtomDataLoader.load.apply(this, arguments);\n\n\t\t//prepare data feed for dyn. loading\n\t\tif (!this.data.url)\n\t\t\tthis.data.url = url;\n\n\t\treturn ajax;\n\t},\n\t//load next set of data rows\n\tloadNext:function(count, start, callback, url, now){\n\t\tvar config = this._settings;\n\t\tif (config.datathrottle && !now){\n\t\t\tif (this._throttle_request)\n\t\t\t\twindow.clearTimeout(this._throttle_request);\n\t\t\tthis._throttle_request = webix.delay(function(){\n\t\t\t\tthis.loadNext(count, start, callback, url, true);\n\t\t\t},this, 0, config.datathrottle);\n\t\t\treturn;\n\t\t}\n\n\t\tif (!start && start !== 0) start = this.count();\n\t\tif (!count)\n\t\t\tcount = config.datafetch || this.count();\n\n\t\tthis.data.url = this.data.url || url;\n\t\tif (this.callEvent(\"onDataRequest\", [start,count,callback,url]) && this.data.url)\n\t\t\tthis.data.feed.call(this, start, count, callback);\n\t},\n\t_maybe_loading_already:function(count, from){\n\t\tvar last = this._feed_last;\n\t\tif(this._load_count && last.url){\n\t\t\tif (last.from<=from && (last.count+last.from >= count + from )) return true;\n\t\t}\n\t\treturn false;\n\t},\n\tremoveMissed_setter:function(value){\n\t\treturn (this.data._removeMissed = value);\n\t},\n\t//init of dataprocessor delayed after all settings processing\n\t//because it need to be the last in the event processing chain\n\t//to get valid validation state\n\t_init_dataprocessor:function(){\n\t\tvar url = this._settings.save;\n\n\t\tif (url === true)\n\t\t\turl = this._settings.save = this._settings.url;\n\n\t\tvar obj = { master: this };\n\t\t\n\t\tif (url && url.url)\n\t\t\twebix.extend(obj, url);\n\t\telse\n\t\t\tobj.url = url;\n\n\t\twebix.dp(obj);\n\t},\n\tsave_setter:function(value){\n\t\tif (value)\n\t\t\tthis.$ready.push(this._init_dataprocessor);\n\n\t\treturn value;\n\t},\n\tscheme_setter:function(value){\n\t\tthis.data.scheme(value);\n\t},\n\tdataFeed_setter:function(value){\n\t\tvalue = webix.proxy.$parse(value);\n\n\t\tthis.data.attachEvent(\"onBeforeFilter\", webix.bind(function(text, filtervalue){\n\t\t\t//complex filtering, can't be routed to dataFeed\n\t\t\tif (typeof text == \"function\") return true;\n\n\t\t\t//we have dataFeed and some text\n\t\t\tif (this._settings.dataFeed && (text || filtervalue)){\n\t\t\t\ttext = text || \"id\";\n\t\t\t\tif (filtervalue && typeof filtervalue == \"object\")\n\t\t\t\t\t\tfiltervalue = filtervalue.id;\n\n\t\t\t\tthis.clearAll();\n\t\t\t\tvar url = this._settings.dataFeed;\n\n\t\t\t\t//js data feed\n\t\t\t\tif (typeof url == \"function\"){\n\t\t\t\t\tvar filter = {};\n\t\t\t\t\tfilter[text] = filtervalue;\n\t\t\t\t\turl.call(this, filtervalue, filter);\n\t\t\t\t} else if (url.$proxy) {\n\t\t\t\t\tif (url.load){\n\t\t\t\t\t\tvar filterobj = {}; filterobj[text] = filtervalue;\n\t\t\t\t\t\turl.load(this, {\n\t\t\t\t\t\t\tsuccess: this._onLoad,\n\t\t\t\t\t\t\terror: this._onLoadError\n\t\t\t\t\t\t}, { filter: filterobj });\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t//url data feed\n\t\t\t\t\tvar urldata = \"filter[\"+text+\"]=\"+encodeURIComponent(filtervalue);\n\t\t\t\t\tthis.load(url+(url.indexOf(\"?\")<0?\"?\":\"&\")+urldata, this._settings.datatype);\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},this));\n\t\treturn value;\n\t},\n\t_call_onready:function(){\n\t\tif (this._settings.ready && !this._ready_was_used){\n\t\t\tvar code = webix.toFunctor(this._settings.ready, this.$scope);\n\t\t\tif (code)\n\t\t\t\twebix.delay(code, this, arguments);\n\t\t\tif (this.callEvent)\n\t\t\t\twebix.delay(this.callEvent, this, [\"onReady\", []]);\n\t\t\tthis._ready_was_used = true;\n\t\t}\n\t},\n\t_call_onclearall:function(soft){\n\t\tfor (var i = 0; i < this._ajax_queue.length; i++){\n\t\t\tvar xhr = this._ajax_queue[i];\n\n\t\t\t//IE9 and IE8 deny extending of ActiveX wrappers\n\t\t\ttry { xhr.aborted = true; } catch(e){ \n\t\t\t\twebix._xhr_aborted.push(xhr);\n\t\t\t}\n\t\t\txhr.abort();\n\t\t}\n\t\tif (!soft){\n\t\t\tthis._load_count = false;\n\t\t\tthis._feed_last = {};\n\t\t\tthis._ajax_queue = webix.toArray();\n\t\t\tthis.waitData = webix.promise.defer();\n\t\t}\n\t},\n\t_call_on_config:function(config){\n\t\tthis._parseSeetingColl(config);\n\t}\n},webix.AtomDataLoader);\n\n//ie8 compatibility\nwebix._xhr_aborted = webix.toArray();\n\nwebix.DataMarks = {\n\taddCss:function(id, css, silent){\n\t\tif (!this.addRowCss && !silent){\n\t\t\tif (!this.hasCss(id, css)){\n\t\t\t\tvar node = this.getItemNode(id);\n\t\t\t\tif (node){\n\t\t\t\t\tnode.className += \" \"+css;\n\t\t\t\t\tsilent = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this.data.addMark(id, css, 1, 1, silent);\n\t},\n\tremoveCss:function(id, css, silent){\n\t\tif (!this.addRowCss && !silent){\n\t\t\tif (this.hasCss(id, css)){\n\t\t\t\tvar node = this.getItemNode(id);\n\t\t\t\tif (node){\n\t\t\t\t\tnode.className = node.className.replace(css,\"\").replace(\"  \",\" \");\n\t\t\t\t\tsilent = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this.data.removeMark(id, css, 1, silent);\n\t},\n\thasCss:function(id, mark){\n\t\treturn this.data.getMark(id, mark);\n\t},\n\tclearCss:function(css, silent){\n\t\treturn this.data.clearMark(css, 1, silent);\n\t}\n};\n\n/*\n\tDataStore is not a behavior, it standalone object, which represents collection of data.\n\tCall provideAPI to map data API\n\n\t@export\n\t\texists\n\t\tgetIdByIndex\n\t\tgetIndexById\n\t\tget\n\t\tset\n\t\trefresh\n\t\tcount\n\t\tsort\n\t\tfilter\n\t\tnext\n\t\tprevious\n\t\tclearAll\n\t\tfirst\n\t\tlast\n*/\nwebix.DataStore = function(){\n\tthis.name = \"DataStore\";\n\t\n\twebix.extend(this, webix.EventSystem);\n\n\tthis.setDriver(\"json\");\t//default data source is an\n\tthis.pull = {};\t\t\t\t\t\t//hash of IDs\n\tthis.order = webix.toArray();\t\t//order of IDs\n\tthis._marks = {};\n};\n\nwebix.DataStore.prototype={\n\t//defines type of used data driver\n\t//data driver is an abstraction other different data formats - xml, json, csv, etc.\n\tsetDriver:function(type){\n\t\twebix.assert(webix.DataDriver[type],\"incorrect DataDriver\");\n\t\tthis.driver = webix.DataDriver[type];\n\t},\n\t//process incoming raw data\n\t_parse:function(data,master){\n\t\tthis.callEvent(\"onParse\", [this.driver, data]);\n\n\t\tif (this._filter_order)\n\t\t\tthis.filter();\n\t\n\t\t//get size and position of data\n\t\tvar info = this.driver.getInfo(data);\n\n\t\t//generated by connectors only\n\t\tif (info.key)\n\t\t\twebix.securityKey = info.key;\n\n\t\tif (info.config)\n\t\t\tthis.callEvent(\"onServerConfig\",[info.config]);\n\n\t\tvar options = this.driver.getOptions(data);\n\t\tif (options)\n\t\t\tthis.callEvent(\"onServerOptions\", [options]);\n\n\t\t//get array of records\n\t\tvar recs = this.driver.getRecords(data);\n\n\t\tthis._inner_parse(info, recs);\n\n\t\t//in case of tree store we may want to group data\n\t\tif (this._scheme_group && this._group_processing && !this._not_grouped_order)\n\t\t\tthis._group_processing(this._scheme_group);\n\n\t\t//optional data sorting\n\t\tif (this._scheme_sort){\n\t\t\tthis.blockEvent();\n\t\t\tthis.sort(this._scheme_sort);\n\t\t\tthis.unblockEvent();\n\t\t}\n\n\t\tthis.callEvent(\"onStoreLoad\",[this.driver, data]);\n\t\t//repaint self after data loading\n\t\tthis.refresh();\n\t},\n\t_inner_parse:function(info, recs){\n\t\tvar from = (info.from||0)*1;\n\t\tvar subload = true;\n\t\tvar marks = false;\n\n\t\tif (from === 0 && this.order[0] && this.order[this.order.length-1]){ //update mode\n\t\t\tif (this._removeMissed){\n\t\t\t\t//update mode, create kill list\n\t\t\t\tmarks = {};\n\t\t\t\tfor (var i=0; i<this.order.length; i++)\n\t\t\t\t\tmarks[this.order[i]]=true;\n\t\t\t}\n\t\t\t\n\t\t\tsubload = false;\n\t\t\tfrom = this.order.length;\n\t\t}\n\n\t\tvar j=0;\n\t\tfor (var i=0; i<recs.length; i++){\n\t\t\t//get hash of details for each record\n\t\t\tvar temp = this.driver.getDetails(recs[i]);\n\t\t\tvar id = this.id(temp); \t//generate ID for the record\n\t\t\tif (!this.pull[id]){\t\t//if such ID already exists - update instead of insert\n\t\t\t\tthis.order[j+from]=id;\t\n\t\t\t\tj++;\n\t\t\t} else if (subload && this.order[j+from])\n\t\t\t\tj++;\n\n\t\t\tif(this.pull[id]){\n\t\t\t\twebix.extend(this.pull[id],temp,true);//add only new properties\n\t\t\t\tif (this._scheme_update)\n\t\t\t\t\tthis._scheme_update(this.pull[id]);\n\t\t\t\t//update mode, remove item from kill list\n\t\t\t\tif (marks)\n\t\t\t\t\tdelete marks[id];\n\t\t\t} else{\n\t\t\t\tthis.pull[id] = temp;\n\t\t\t\tif (this._scheme_init)\n\t\t\t\t\tthis._scheme_init(temp);\n\t\t\t}\n\t\t\t\n\t\t}\n\n\t\t//update mode, delete items which are not existing in the new xml\n\t\tif (marks){\n\t\t\tthis.blockEvent();\n\t\t\tfor (var delid in marks)\n\t\t\t\tthis.remove(delid);\n\t\t\tthis.unblockEvent();\n\t\t}\n\n\t\tif (!this.order[info.size-1])\n\t\t\tthis.order[info.size-1] = webix.undefined;\n\t},\n\t//generate id for data object\n\tid:function(data){\n\t\treturn data.id||(data.id=webix.uid());\n\t},\n\tchangeId:function(old, newid){\n\t\t//webix.assert(this.pull[old],\"Can't change id, for non existing item: \"+old);\n\t\tif(this.pull[old])\n\t\t\tthis.pull[newid] = this.pull[old];\n\t\t\n\t\tthis.pull[newid].id = newid;\n\t\tthis.order[this.order.find(old)]=newid;\n\t\tif (this._filter_order)\n\t\t\tthis._filter_order[this._filter_order.find(old)]=newid;\n\t\tif (this._marks[old]){\n\t\t\tthis._marks[newid] = this._marks[old];\n\t\t\tdelete this._marks[old];\n\t\t}\n\n\n\t\tthis.callEvent(\"onIdChange\", [old, newid]);\n\t\tif (this._render_change_id)\n\t\t\tthis._render_change_id(old, newid);\n\t\tdelete this.pull[old];\n\t},\n\t//get data from hash by id\n\tgetItem:function(id){\n\t\treturn this.pull[id];\n\t},\n\t//assigns data by id\n\tupdateItem:function(id, update, mode){\n\t\tvar data = this.getItem(id);\n\t\tvar old = null;\n\n\t\t//check is change tracking active\n\t\tvar changeTrack = this.hasEvent(\"onDataUpdate\");\n\t\n\t\twebix.assert(data, \"Ivalid ID for updateItem\");\n\t\twebix.assert(!update || !update.id || update.id == id, \"Attempt to change ID in updateItem\");\n\t\tif (!webix.isUndefined(update) && data !== update){\n\t\t\t//preserve original object\n\t\t\tif (changeTrack)\n\t\t\t\told = webix.copy(data);\n\n\t\t\tid = data.id;\t//preserve id\n\t\t\twebix.extend(data, update, true);\n\t\t\tdata.id = id;\n\t\t}\n\n\t\tif (this._scheme_update)\n\t\t\tthis._scheme_update(data);\n\n\t\tthis.callEvent(\"onStoreUpdated\",[id.toString(), data, (mode||\"update\")]);\n\n\t\tif (changeTrack)\n\t\t\tthis.callEvent(\"onDataUpdate\", [id, data, old]);\n\t},\n\t//sends repainting signal\n\trefresh:function(id){\n\t\tif (this._skip_refresh) return; \n\t\t\n\t\tif (id){\n\t\t\tif (this.exists(id))\n\t\t\t\tthis.callEvent(\"onStoreUpdated\",[id, this.pull[id], \"paint\"]);\n\t\t}else\n\t\t\tthis.callEvent(\"onStoreUpdated\",[null,null,null]);\n\t},\n\tsilent:function(code, master){\n\t\tthis._skip_refresh = true;\n\t\tcode.call(master||this);\n\t\tthis._skip_refresh = false;\n\t},\n\t//converts range IDs to array of all IDs between them\n\tgetRange:function(from,to){\t\t\n\t\t//if some point is not defined - use first or last id\n\t\t//BEWARE - do not use empty or null ID\n\t\tif (from)\n\t\t\tfrom = this.getIndexById(from);\n\t\telse \n\t\t\tfrom = (this.$min||this.startOffset)||0;\n\t\tif (to)\n\t\t\tto = this.getIndexById(to);\n\t\telse {\n\t\t\tto = this.$max === 0 ? 0 : Math.min((this.$max?this.$max-1:(this.endOffset||Infinity)),(this.count()-1));\n\t\t\tif (to<0) to = 0; //we have not data in the store\n\t\t}\n\n\t\tif (from>to){ //can be in case of backward shift-selection\n\t\t\tvar a=to; to=from; from=a;\n\t\t}\n\n\t\treturn this.getIndexRange(from,to);\n\t},\n\t//converts range of indexes to array of all IDs between them\n\tgetIndexRange:function(from,to){\n\t\tto=Math.min((to === 0 ? 0 :(to||Infinity)),this.count()-1);\n\t\t\n\t\tvar ret=webix.toArray(); //result of method is rich-array\n\t\tfor (var i=(from||0); i <= to; i++)\n\t\t\tret.push(this.getItem(this.order[i]));\n\t\treturn ret;\n\t},\n\t//returns total count of elements\n\tcount:function(){\n\t\treturn this.order.length;\n\t},\n\t//returns truy if item with such ID exists\n\texists:function(id){\n\t\treturn !!(this.pull[id]);\n\t},\n\t//nextmethod is not visible on component level, check DataMove.move\n\t//moves item from source index to the target index\n\tmove:function(sindex,tindex){\n\t\twebix.assert(sindex>=0 && tindex>=0, \"DataStore::move\",\"Incorrect indexes\");\n\t\tif (sindex == tindex) return;\n\n\t\tvar id = this.getIdByIndex(sindex);\n\t\tvar obj = this.getItem(id);\n\n\t\tif (this._filter_order)\n\t\t\tthis._move_inner(this._filter_order, 0, 0, this.getIdByIndex(sindex), this.getIdByIndex(tindex));\n\n\t\tthis._move_inner(this.order, sindex, tindex);\n\t\t\n\t\t\n\t\t//repaint signal\n\t\tthis.callEvent(\"onStoreUpdated\",[id,obj,\"move\"]);\n\t},\n\t_move_inner:function(col, sindex, tindex, sid, tid){\n\t\tif (sid||tid){\n\t\t\tsindex = tindex = -1;\n\t\t\tfor (var i=0; i<col.length; i++){\n\t\t\t\tif (col[i] == sid && sindex<0)\n\t\t\t\t\tsindex = i;\n\t\t\t\tif (col[i] == tid && tindex<0)\n\t\t\t\t\ttindex = i;\n\t\t\t}\n\t\t}\n\t\tvar id = col[sindex];\n\t\tcol.removeAt(sindex);\t//remove at old position\n\t\tcol.insertAt(id,Math.min(col.length, tindex));\t//insert at new position\n\t},\n\tscheme:function(config){\n\t\tthis._scheme = {};\n\t\tthis._scheme_save = config.$save;\n\t\tthis._scheme_init = config.$init||config.$change;\n\t\tthis._scheme_update = config.$update||config.$change;\n\t\tthis._scheme_serialize = config.$serialize;\n\t\tthis._scheme_group = config.$group;\n\t\tthis._scheme_sort = config.$sort;\n\n\t\t//ignore $-starting properties, as they have special meaning\n\t\tfor (var key in config)\n\t\t\tif (key.substr(0,1) != \"$\")\n\t\t\t\tthis._scheme[key] = config[key];\n\t},\n\timportData:function(target, silent){\n\t\tvar data = target ? (target.data || target) : [];\n\t\tthis._filter_order = null;\n\n\t\tif (typeof data.serialize == \"function\"){\n\t\t\tthis.order = webix.toArray([].concat(data.order));\n\n\t\t\t//make full copy, to preserve object properties\n\t\t\t//[WE-CAN-DO-BETTER]\n\t\t\tif (this._make_full_copy){\n\t\t\t\tthis._make_full_copy = false;\n\t\t\t\tthis.pull = {};\n\t\t\t\tfor (var key in data.pull)\n\t\t\t\t\tthis.pull[key] = webix.copy(data.pull[key]);\n\t\t\t}\n\t\t\telse\n\t\t\t\tthis.pull = data.pull;\n\n\t\t\tif (data.branch && this.branch){\n\t\t\t\tthis.branch = webix.copy(data.branch);\n\t\t\t\tthis._filter_branch = null;\n\t\t\t}\n\n\t\t} else {\n\t\t\tthis.order = webix.toArray();\n\t\t\tthis.pull = {};\n\t\t\tvar id, obj;\n\n\t\t\tif (webix.isArray(target))\n\t\t\t\tfor (var key=0; key<target.length; key++){\n\t\t\t\t\tobj = id = target[key];\n\t\t\t\t\tif (typeof obj == \"object\")\n\t\t\t\t\t\tobj.id  = obj.id || webix.uid();\n\t\t\t\t\telse\n\t\t\t\t\t\tobj = { id:id, value:id };\n\n\t\t\t\t\tthis.order.push(obj.id);\n\t\t\t\t\tif (this._scheme_init)\n\t\t\t\t\t\tthis._scheme_init(obj);\n\t\t\t\t\tthis.pull[obj.id] = obj;\n\t\t\t\t}\n\t\t\telse\n\t\t\t\tfor (var key in data){\n\t\t\t\t\tthis.order.push(key);\n\t\t\t\t\tthis.pull[key] = { id:key, value: data[key] };\n\t\t\t\t}\n\t\t}\n\t\tif (this._extraParser && !data.branch){\n\t\t\tthis.branch = { 0:[]};\n\t\t\tif (!this._datadriver_child)\n\t\t\t\tthis._set_child_scheme(\"data\");\n\n\t\t\tfor (var i = 0; i<this.order.length; i++){\n\t\t\t\tvar key = this.order[i];\n\t\t\t\tthis._extraParser(this.pull[key], 0, 0, false);\n\t\t\t}\n\t\t}\n\n\t\tthis.callEvent(\"onStoreLoad\",[]);\n\t\tif (!silent)\n\t\t\tthis.callEvent(\"onStoreUpdated\",[]);\n\t},\n\tsync:function(source, filter, silent){\n\t\tthis.unsync();\n\n\t\tvar type = typeof source;\n\t\tif (type == \"string\")\n\t\t\tsource = webix.$$(\"source\");\n\n\t\tif (type != \"function\" && type != \"object\"){\n\t\t\tsilent = filter;\n\t\t\tfilter = null;\n\t\t}\n\t\t\n\t\tif (webix.debug_bind){\n\t\t\tthis.debug_sync_master = source; \n\t\t\twebix.log(\"[sync] \"+this.debug_bind_master.name+\"@\"+this.debug_bind_master._settings.id+\" <= \"+this.debug_sync_master.name+\"@\"+this.debug_sync_master._settings.id);\n\t\t}\n\n\t\tif (source.name != \"DataStore\"){\n\t\t\tif (source.data && (source.data.name === \"DataStore\" || source.data.name === \"TreeStore\"))\n\t\t\t\tsource = source.data;\n\t\t\telse {\n\t\t\t\tthis._sync_source = source;\n\t\t\t\treturn webix.callEvent(\"onSyncUnknown\", [this, source, filter]);\n\t\t\t}\n\t\t}\n\n\t\tvar\tsync_logic = webix.bind(function(mode, record, data){\n\t\t\tif (this._skip_next_sync) return;\n\n\t\t\t//sync of tree-structure with after-filtering\n\t\t\t//we need to make a full copy, to preserve $count\n\t\t\t//[WE-CAN-DO-BETTER]\n\t\t\tif (filter && this.branch) this._make_full_copy = true;\n\t\t\tthis.importData(source, true);\n\t\t\t\n\t\t\tif (filter)\n\t\t\t\tthis.silent(filter);\n\t\t\tif (this._on_sync)\n\t\t\t\tthis._on_sync();\n\t\t\tif (this._make_full_copy){\n\n\t\t\t}\n\n\t\t\tif (webix.debug_bind)\n\t\t\t\twebix.log(\"[sync:request] \"+this.debug_sync_master.name+\"@\"+this.debug_sync_master._settings.id + \" <= \"+this.debug_bind_master.name+\"@\"+this.debug_bind_master._settings.id);\n\n\t\t\tthis.callEvent(\"onSyncApply\",[]);\n\n\t\t\tif (!silent) \n\t\t\t\tthis.refresh();\n\t\t\telse\n\t\t\t\tsilent = false;\n\t\t}, this);\n\n\n\n\t\tthis._sync_events = [\n\t\t\tsource.attachEvent(\"onStoreUpdated\", sync_logic),\n\t\t\tsource.attachEvent(\"onIdChange\", webix.bind(function(old, nid){ this.changeId(old, nid); this.refresh(nid); }, this))\n\t\t];\n\t\tthis._sync_source = source;\n\n\t\t//backward data saving\n\t\tthis._back_sync_handler = this.attachEvent(\"onStoreUpdated\", function(id, data, mode){\n\t\t\tif (mode == \"update\" || mode == \"save\"){\n\t\t\t\tthis._skip_next_sync = 1;\n\t\t\t\tsource.updateItem(id, data);\n\t\t\t\tthis._skip_next_sync = 0;\n\t\t\t}\n\t\t});\n\n\t\tsync_logic();\n\t},\n\tunsync:function(){\n\t\tif (this._sync_source){\n\t\t\tvar source = this._sync_source;\n\n\t\t\tif (source.name != \"DataStore\" &&\n\t\t\t\t\t(!source.data || source.data.name != \"DataStore\")){\n\t\t\t\t//data sync with external component\n\t\t\t\twebix.callEvent(\"onUnSyncUnknown\", [this, source]);\n\t\t\t} else {\n\t\t\t\t//data sync with webix component\n\t\t\t\tfor (var i = 0; i < this._sync_events.length; i++)\n\t\t\t\t\tsource.detachEvent(this._sync_events[i]);\n\t\t\t\tthis.detachEvent(this._back_sync_handler);\n\t\t\t}\n\n\t\t\tthis._sync_source = null;\n\t\t}\n\t},\n\tdestructor:function(){\n\t\tthis.unsync();\n\n\t\tthis.pull = this.order = this._marks = null;\n\t\tthis._evs_events = this._evs_handlers = {};\n\t},\n\t//adds item to the store\n\tadd:function(obj,index){\n\t\t//default values\t\t\n\t\tif (this._scheme)\n\t\t\tfor (var key in this._scheme)\n\t\t\t\tif (webix.isUndefined(obj[key]))\n\t\t\t\t\tobj[key] = this._scheme[key];\n\t\t\n\t\tif (this._scheme_init)\n\t\t\tthis._scheme_init(obj);\n\t\t\n\t\t//generate id for the item\n\t\tvar id = this.id(obj);\n\n\t\t//in case of treetable order is sent as 3rd parameter\n\t\tvar order = arguments[2]||this.order;\n\t\t\n\t\t//by default item is added to the end of the list\n\t\tvar data_size = order.length;\n\t\t\n\t\tif (webix.isUndefined(index) || index < 0)\n\t\t\tindex = data_size; \n\t\t//check to prevent too big indexes\t\t\t\n\t\tif (index > data_size){\n\t\t\twebix.log(\"Warning\",\"DataStore:add\",\"Index of out of bounds\");\n\t\t\tindex = Math.min(order.length,index);\n\t\t}\n\t\tif (this.callEvent(\"onBeforeAdd\", [id, obj, index]) === false) return false;\n\n\t\twebix.assert(!this.exists(id), \"Not unique ID\");\n\t\t\n\t\tthis.pull[id]=obj;\n\t\torder.insertAt(id,index);\n\t\tif (this._filter_order){\t//adding during filtering\n\t\t\t//we can't know the location of new item in full dataset, making suggestion\n\t\t\t//put at end of original dataset by default\n\t\t\tvar original_index = this._filter_order.length;\n\t\t\t//if some data exists, put at the same position in original and filtered lists\n\t\t\tif (this.order.length)\n\t\t\t\toriginal_index = Math.min((index || 0), original_index);\n\n\t\t\tthis._filter_order.insertAt(id,original_index);\n\t\t}\n\t\t\n\t\t//repaint signal\n\t\tthis.callEvent(\"onStoreUpdated\",[id,obj,\"add\"]);\n\t\tthis.callEvent(\"onAfterAdd\",[id,index]);\n\n\t\treturn obj.id;\n\t},\n\t\n\t//removes element from datastore\n\tremove:function(id){\n\t\t//id can be an array of IDs - result of getSelect, for example\n\t\tif (webix.isArray(id)){\n\t\t\tfor (var i=0; i < id.length; i++)\n\t\t\t\tthis.remove(id[i]);\n\t\t\treturn;\n\t\t}\n\t\tif (this.callEvent(\"onBeforeDelete\",[id]) === false) return false;\n\t\t\n\t\twebix.assert(this.exists(id), \"Not existing ID in remove command\"+id);\n\n\t\tvar obj = this.getItem(id);\t//save for later event\n\t\t//clear from collections\n\t\tthis.order.remove(id);\n\t\tif (this._filter_order) \n\t\t\tthis._filter_order.remove(id);\n\t\t\t\n\t\tdelete this.pull[id];\n\t\tif (this._marks[id])\n\t\t\tdelete this._marks[id];\n\n\t\t//repaint signal\n\t\tthis.callEvent(\"onStoreUpdated\",[id,obj,\"delete\"]);\n\t\tthis.callEvent(\"onAfterDelete\",[id]);\n\t},\n\t//deletes all records in datastore\n\tclearAll:function(soft){\n\t\t//instead of deleting one by one - just reset inner collections\n\t\tthis.pull = {};\n\t\tthis._marks = {};\n\t\tthis.order = webix.toArray();\n\t\t//this.feed = null;\n\t\tthis._filter_order = null;\n\t\tif (!soft)\n\t\t\tthis.url = null;\n\t\tthis.callEvent(\"onClearAll\",[soft]);\n\t\tthis.refresh();\n\t},\n\t//converts id to index\n\tgetIdByIndex:function(index){\n\t\twebix.assert(index >= 0,\"DataStore::getIdByIndex Incorrect index\");\n\t\treturn this.order[index];\n\t},\n\t//converts index to id\n\tgetIndexById:function(id){\n\t\tvar res = this.order.find(id);\t//slower than getIdByIndex\n\t\tif (!this.pull[id])\n\t\t\treturn -1;\n\t\t\t\n\t\treturn res;\n\t},\n\t//returns ID of next element\n\tgetNextId:function(id,step){\n\t\treturn this.order[this.getIndexById(id)+(step||1)];\n\t},\n\t//returns ID of first element\n\tgetFirstId:function(){\n\t\treturn this.order[0];\n\t},\n\t//returns ID of last element\n\tgetLastId:function(){\n\t\treturn this.order[this.order.length-1];\n\t},\n\t//returns ID of previous element\n\tgetPrevId:function(id,step){\n\t\treturn this.order[this.getIndexById(id)-(step||1)];\n\t},\n\t/*\n\t\tsort data in collection\n\t\t\tby - settings of sorting\n\t\t\n\t\tor\n\t\t\n\t\t\tby - sorting function\n\t\t\tdir - \"asc\" or \"desc\"\n\t\t\t\n\t\tor\n\t\t\n\t\t\tby - property\n\t\t\tdir - \"asc\" or \"desc\"\n\t\t\tas - type of sortings\n\t\t\n\t\tSorting function will accept 2 parameters and must return 1,0,-1, based on desired order\n\t*/\n\tsort:function(by, dir, as){\n\t\tvar sort = by;\t\n\t\tif (typeof by == \"function\")\n\t\t\tsort = {as:by, dir:dir};\n\t\telse if (typeof by == \"string\")\n\t\t\tsort = {by:by.replace(/#/g,\"\"), dir:dir, as:as};\n\n\t\t\n\t\tvar parameters = [sort.by, sort.dir, sort.as, sort];\n\t\tif (!this.callEvent(\"onBeforeSort\",parameters)) return;\t\n\t\t\n\t\tthis.order = this._sort_core(sort, this.order);\n\t\tif (this._filter_order && this._filter_order.length != this.order.length)\n\t\t\tthis._filter_order = this._sort_core(sort, this._filter_order);\n\t\t\n\t\t//repaint self\n\t\tthis.refresh();\n\t\t\n\t\tthis.callEvent(\"onAfterSort\",parameters);\n\t},\n\t_sort_core:function(sort, order){\n\t\tvar sorter = this.sorting.create(sort);\n\t\tif (this.order.length){\n\t\t\tvar pre = order.splice(0, this.$freeze);\n\t\t\t//get array of IDs\n\t\t\tvar neworder = webix.toArray();\n\t\t\tfor (var i=order.length-1; i>=0; i--)\n\t\t\t\tneworder[i] = this.pull[order[i]];\n\t\t\t\n\t\t\tneworder.sort(sorter);\n\t\t\treturn webix.toArray(pre.concat(neworder.map(function(obj){ \n\t\t\t\twebix.assert(obj, \"Client sorting can't be used with dynamic loading\");\n\t\t\t\treturn this.id(obj);\n\t\t\t},this)));\n\t\t}\n\t\treturn order;\n\t},\n\t/*\n\t\tFilter datasource\n\t\t\n\t\ttext - property, by which filter\n\t\tvalue - filter mask\n\t\t\n\t\tor\n\t\t\n\t\ttext  - filter method\n\t\t\n\t\tFilter method will receive data object and must return true or false\n\t*/\n\t_filter_reset:function(preserve){\n\t\t//remove previous filtering , if any\n\t\tif (this._filter_order && !preserve){\n\t\t\tthis.order = this._filter_order;\n\t\t\tdelete this._filter_order;\n\t\t}\n\t},\n\t_filter_core:function(filter, value, preserve){\n\t\tvar neworder = webix.toArray();\n\t\tvar freeze = this.$freeze || 0;\n\t\t\n\t\tfor (var i=0; i < this.order.length; i++){\n\t\t\tvar id = this.order[i];\n\t\t\tif (i < freeze || filter(this.getItem(id),value))\n\t\t\t\tneworder.push(id);\n\t\t}\n\t\t//set new order of items, store original\n\t\tif (!preserve ||  !this._filter_order)\n\t\t\tthis._filter_order = this.order;\n\t\tthis.order = neworder;\n\t},\n\tfind:function(config, first){\n\t\tvar result = [];\n\n\t\tfor(var i in this.pull){\n\t\t\tvar data = this.pull[i];\n\n\t\t\tvar match = true;\n\t\t\tif (typeof config == \"object\"){\n\t\t\t\tfor (var key in config)\n\t\t\t\t\tif (data[key] != config[key]){\n\t\t\t\t\t\tmatch = false;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t} else if (!config(data))\n\t\t\t\tmatch = false;\n\n\t\t\tif (match)\n\t\t\t\tresult.push(data);\n\t\t\t\n\t\t\tif (first && result.length)\n\t\t\t\treturn result[0];\n\t\t}\n\n\t\treturn result;\n\t},\n\tfilter:function(text,value,preserve){\n\t\t//unfilter call but we already in not-filtered state\n\t\tif (!text && !this._filter_order && !this._filter_branch) return;\n\t\tif (!this.callEvent(\"onBeforeFilter\", [text, value])) return;\n\t\t\n\t\tthis._filter_reset(preserve);\n\t\tif (!this.order.length) return;\n\t\t\n\t\t//if text not define -just unfilter previous state and exit\n\t\tif (text){\n\t\t\tvar filter = text;\n\t\t\tvalue = value||\"\";\n\t\t\tif (typeof text == \"string\"){\n\t\t\t\ttext = text.replace(/#/g,\"\");\n\t\t\t\tif (typeof value == \"function\")\n\t\t\t\t\tfilter = function(obj){\n\t\t\t\t\t\treturn value(obj[text]);\n\t\t\t\t\t};\n\t\t\t\telse{\n\t\t\t\t\tvalue = value.toString().toLowerCase();\n\t\t\t\t\tfilter = function(obj,value){\t//default filter - string start from, case in-sensitive\n\t\t\t\t\t\twebix.assert(obj, \"Client side filtering can't be used with dynamic loading\");\n\t\t\t\t\t\treturn (obj[text]||\"\").toString().toLowerCase().indexOf(value)!=-1;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis._filter_core(filter, value, preserve, this._filterMode);\n\t\t}\n\t\t//repaint self\n\t\tthis.refresh();\n\t\t\n\t\tthis.callEvent(\"onAfterFilter\", []);\n\t},\n\t/*\n\t\tIterate through collection\n\t*/\n\t_obj_array:function(){\n\t\tvar data = [];\n\t\tfor (var i = this.order.length - 1; i >= 0; i--)\n\t\t\tdata[i]=this.pull[this.order[i]];\n\n\t\treturn data;\n\t},\n\teach:function(method, master, all){\n\t\tvar order = this.order;\n\t\tif (all)\n\t\t\torder = this._filter_order || order;\n\n\t\tfor (var i=0; i<order.length; i++)\n\t\t\tmethod.call((master||this), this.getItem(order[i]), i);\n\t},\n\t_methodPush:function(object,method){\n\t\treturn function(){ return object[method].apply(object,arguments); };\n\t},\n\t/*\n\t\tmap inner methods to some distant object\n\t*/\n\tprovideApi:function(target,eventable){\n\t\tthis.debug_bind_master = target;\n\t\t\t\n\t\tif (eventable){\n\t\t\tthis.mapEvent({\n\t\t\t\tonbeforesort:\ttarget,\n\t\t\t\tonaftersort:\ttarget,\n\t\t\t\tonbeforeadd:\ttarget,\n\t\t\t\tonafteradd:\t\ttarget,\n\t\t\t\tonbeforedelete:\ttarget,\n\t\t\t\tonafterdelete:\ttarget,\n\t\t\t\tondataupdate:\ttarget/*,\n\t\t\t\tonafterfilter:\ttarget,\n\t\t\t\tonbeforefilter:\ttarget*/\n\t\t\t});\n\t\t}\n\t\t\t\n\t\tvar list = [\"sort\",\"add\",\"remove\",\"exists\",\"getIdByIndex\",\"getIndexById\",\"getItem\",\"updateItem\",\"refresh\",\"count\",\"filter\",\"find\",\"getNextId\",\"getPrevId\",\"clearAll\",\"getFirstId\",\"getLastId\",\"serialize\",\"sync\"];\n\t\tfor (var i=0; i < list.length; i++)\n\t\t\ttarget[list[i]] = this._methodPush(this,list[i]);\n\t},\n\taddMark:function(id, mark, css, value, silent){\n\t\tvar obj = this._marks[id]||{};\n\t\tthis._marks[id] = obj;\n\t\tif (!obj[mark]){\n\t\t\tobj[mark] = value||true;\t\n\t\t\tif (css){\n\t\t\t\tvar old_css = obj.$css||\"\";\n\t\t\t\tobj.$css = old_css+\" \"+mark;\n\t\t\t}\n\t\t\tif (!silent)\n\t\t\t\tthis.refresh(id);\n\t\t}\n\t\treturn obj[mark];\n\t},\n\tremoveMark:function(id, mark, css, silent){\n\t\tvar obj = this._marks[id];\n\t\tif (obj){\n\t\t\tif (obj[mark])\n\t\t\t\tdelete obj[mark];\n\t\t\tif (css){\n\t\t\t\tvar current_css = obj.$css;\n\t\t\t\tif (current_css){\n\t\t\t\t\tobj.$css = current_css.replace(mark, \"\").replace(\"  \",\" \");\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!silent) \n\t\t\t\tthis.refresh(id);\n\t\t}\n\t},\n\tgetMark:function(id, mark){\n\t\tvar obj = this._marks[id];\n\t\treturn (obj?obj[mark]:false);\n\t},\n\tclearMark:function(name, css, silent){\n\t\tfor (var id in this._marks){\n\t\t\tvar obj = this._marks[id];\n\t\t\tif (obj[name]){\n\t\t\t\tdelete obj[name];\n\t\t\t\tif (css && obj.$css)\n\t\t\t\t\tobj.$css = obj.$css.replace(name, \"\").replace(\"  \",\" \");\n\t\t\t\tif (!silent)\n\t\t\t\t\tthis.refresh(id);\n\t\t\t}\n\t\t}\n\t},\t\n\t/*\n\t\tserializes data to a json object\n\t*/\n\tserialize: function(all){\n\t\tvar ids = this.order;\n\t\tif (all && this._filter_order)\n\t\t\tids = this._filter_order;\n\n\t\tvar result = [];\n\t\tfor(var i=0; i< ids.length;i++) {\n\t\t\tvar el = this.pull[ids[i]];\n\t\t\tif (this._scheme_serialize){\n\t\t\t\tel = this._scheme_serialize(el);\n\t\t\t\tif (el===false) continue;\n\t\t\t}\n\t\t\tresult.push(el);\n\t\t}\n\t\treturn result;\n\t},\n\tsorting:{\n\t\tcreate:function(config){\n\t\t\treturn this._dir(config.dir, this._by(config.by, config.as));\n\t\t},\n\t\tas:{\n\t\t\t//handled by dataFeed\n\t\t\t\"server\":function(){\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\t\"date\":function(a,b){\n\t\t\t\ta=a-0; b=b-0;\n\t\t\t\treturn a>b?1:(a<b?-1:0);\n\t\t\t},\n\t\t\t\"int\":function(a,b){\n\t\t\t\ta = a*1; b=b*1;\n\t\t\t\treturn a>b?1:(a<b?-1:0);\n\t\t\t},\n\t\t\t\"string_strict\":function(a,b){\n\t\t\t\ta = a.toString(); b=b.toString();\n\t\t\t\treturn a>b?1:(a<b?-1:0);\n\t\t\t},\n\t\t\t\"string\":function(a,b){\n\t\t\t\tif (!b) return 1;\n\t\t\t\tif (!a) return -1;\n\t\t\t\t\n\t\t\t\ta = a.toString().toLowerCase(); b=b.toString().toLowerCase();\n\t\t\t\treturn a>b?1:(a<b?-1:0);\n\t\t\t},\n\t\t\t\"raw\":function(a,b){\n\t\t\t\treturn a>b?1:(a<b?-1:0);\n\t\t\t}\n\t\t},\n\t\t_by:function(prop, method){\n\t\t\tif (!prop)\n\t\t\t\treturn method;\n\t\t\tif (typeof method != \"function\")\n\t\t\t\tmethod = this.as[method||\"string\"];\n\n\t\t\twebix.assert(method, \"Invalid sorting method\");\n\t\t\treturn function(a,b){\n\t\t\t\treturn method(a[prop],b[prop]);\n\t\t\t};\n\t\t},\n\t\t_dir:function(prop, method){\n\t\t\tif (prop == \"asc\" || !prop)\n\t\t\t\treturn method;\n\t\t\treturn function(a,b){\n\t\t\t\treturn method(a,b)*-1;\n\t\t\t};\n\t\t}\n\t}\n};\n\n\nwebix.DataCollection = webix.proto({\n\tname:\"DataCollection\",\n\tisVisible:function(){ \n\t\tif (!this.data.order.length && !this.data._filter_order && !this._settings.dataFeed) return false;\n\t\treturn true; \n\t},\n\t$init:function(config){\n\t\tthis.data.provideApi(this, true);\n\t\tvar id = (config&&config.id)?config.id:webix.uid();\n\t\tthis._settings.id =id;\n\t\twebix.ui.views[id] = this;\n\t\tthis.data.attachEvent(\"onStoreLoad\", webix.bind(function(){\n\t\t\tthis.callEvent(\"onBindRequest\",[]);\n\t\t}, this));\n\t},\n\trefresh:function(){ this.callEvent(\"onBindRequest\",[]); }\n}, webix.DataMove, webix.CollectionBind, webix.BindSource, webix.ValidateCollection, webix.DataLoader, webix.MapCollection, webix.EventSystem, webix.BaseBind, webix.Destruction, webix.Settings);\n\n\n\n\n\n\nwebix.Scrollable = {\n\t$init:function(config){\n\t\t//do not spam unwanted scroll containers for templates \n\t\tif (config && !config.scroll && this._one_time_scroll) \n\t\t\treturn (this._dataobj = (this._dataobj||this._contentobj));\n\t\t\n\t\t(this._dataobj||this._contentobj).appendChild(webix.html.create(\"DIV\",{ \"class\" : \"webix_scroll_cont\" },\"\"));\n\t\tthis._dataobj=(this._dataobj||this._contentobj).firstChild;\n\n\t\tif(!webix.env.touch)\n\t\t\twebix._event(this._viewobj,\"scroll\", webix.bind(function(e){\n\t\t\t\tif(this.callEvent)\n\t\t\t\t\twebix.delay(function(){\n\t\t\t\t\t\tthis.callEvent(\"onAfterScroll\", []);\n\t\t\t\t\t}, this);\n\t\t\t},this));\n\t},\n\t/*defaults:{\n\t\tscroll:true\n\t},*/\n\tscroll_setter:function(value){\n\t\tif (!value) return false;\n\t\tvar marker =  (value==\"x\"?\"x\":(value==\"xy\"?\"xy\":(value==\"a\"?\"xy\":\"y\")));\n\t\tif (webix.Touch && webix.Touch.$active){\n\t\t\tthis._dataobj.setAttribute(\"touch_scroll\",marker);\n\t\t\tif (this.attachEvent)\n\t\t\t\tthis.attachEvent(\"onAfterRender\", webix.bind(this._refresh_scroll,this));\n\t\t\tthis._touch_scroll = true;\n\t\t} else {\n\t\t\tif (webix.env.$customScroll){\n\t\t\t\twebix.CustomScroll.enable(this, marker);\n\t\t\t} else {\n\t\t\t\tvar node = this._dataobj.parentNode.style;\n\t\t\t\tif (value.toString().indexOf(\"a\")!=-1){\n\t\t\t\t\tnode.overflowX = node.overflowY = \"auto\";\n\t\t\t\t} else {\n\t\t\t\t\tif (marker.indexOf(\"x\")!=-1){\n\t\t\t\t\t\tthis._scroll_x = true;\n\t\t\t\t\t\tnode.overflowX = \"scroll\";\n\t\t\t\t\t}\n\t\t\t\t\tif (marker.indexOf(\"y\")!=-1){\n\t\t\t\t\t\tthis._scroll_y = true;\n\t\t\t\t\t\tnode.overflowY = \"scroll\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn marker;\n\t},\n\t_onoff_scroll:function(mode){\n\t\tif (!!this._settings.scroll == !!mode) return;\n\n\t\tif (!webix.env.$customScroll){\n\t\t\tvar style = this._dataobj.parentNode.style;\n\t\t\tstyle.overflowX = style.overflowY = mode?\"auto\":\"hidden\";\n\t\t}\n\n\t\tthis._scroll_x = this._scroll_y = !!mode;\n\t\tthis._settings.scroll = !!mode;\n\t},\n\tgetScrollState:function(){\n\t\tif (webix.Touch && webix.Touch.$active){\n\t\t\tvar temp = webix.Touch._get_matrix(this._dataobj);\n\t\t\treturn { x : -temp.e, y : -temp.f };\n\t\t} else\n\t\t\treturn { x : this._dataobj.parentNode.scrollLeft, y : this._dataobj.parentNode.scrollTop };\n\t},\n\tscrollTo:function(x,y){\n\t\tif (webix.Touch && webix.Touch.$active){\n\t\t\ty = Math.max(0, Math.min(y, this._dataobj.offsetHeight - this._content_height));\n\t\t\tx = Math.max(0, Math.min(x, this._dataobj.offsetWidth - this._content_width));\n\t\t\twebix.Touch._set_matrix(this._dataobj, -x, -y, this._settings.scrollSpeed||\"100ms\");\n\t\t} else {\n\t\t\tthis._dataobj.parentNode.scrollLeft=x;\n\t\t\tthis._dataobj.parentNode.scrollTop=y;\n\t\t}\n\t},\n\t_refresh_scroll:function(){\n\t\tif (this._settings.scroll.toString().indexOf(\"x\")!=-1){\n\t\t\tvar x =  this._dataobj.scrollWidth;\n\t\t\tif (x){ //in hidden state we will have a Zero scrollWidth\n\t\t\t\tthis._dataobj.style.width = \"100%\";\n\t\t\t\tthis._dataobj.style.width = this._dataobj.scrollWidth + \"px\";\n\t\t\t}\n\t\t}\n\t\t\t\n\t\tif(webix.Touch && webix.Touch.$active && this._touch_scroll){\n\t\t\twebix.Touch._clear_artefacts();\n\t\t\twebix.Touch._scroll_end();\n\t\t\tvar s = this.getScrollState();\n\t\t\tvar dx = this._dataobj.offsetWidth - this.$width - s.x;\n\t\t\tvar dy = this._dataobj.offsetHeight - this.$height - s.y;\n\n\t\t\t//if current scroll is outside of data area\n\t\t\tif(dx<0 || dy < 0){\n\t\t\t\t//scroll to the end of data area\n\t\t\t\tvar x = (dx<0?Math.min(-dx - s.x,0):- s.x);\n\t\t\t\tvar y = (dy<0?Math.min(-dy - s.y,0):- s.y);\n\t\t\t\twebix.Touch._set_matrix(this._dataobj, x, y, 0);\n\t\t\t}\n\t\t}\n\t}\n};\n\n/*\n\tUI:paging control\n*/\n\n\n\nwebix.protoUI({\n\tdefaults:{\n\t\tsize:10,\t//items on page\n\t\tpage: 0,\t//current page\n\t\tgroup:5,\n\t\ttemplate:\"{common.pages()}\",\n\t\tmaxWidth:100000,\n\t\theight:30,\n\t\tborderless:true\n\t},\n\tname:\"pager\",\n\ton_click:{\n\t\t//on paging button click\n\t\t\"webix_pager_item\":function(e,id){\n\t\t\tthis.select(id);\n\t\t}\n\t},\n\t$init:function(config){\n\t\tthis.data = this._settings;\n\t\tthis._dataobj = this._viewobj;\n\t\tthis._viewobj.className += \" webix_pager\";\n\n        if(config.master===false||config.master === 0)\n             this.$ready.push(this._remove_master);\n\t},\n    _remove_master:function(){\n        this.refresh();\n        this.$master = { refresh:function(){}, select:function(){} };\n    },\n\tselect:function(id){\n\t\tif (this.$master && this.$master.name == \"pager\")\n\t\t\treturn this.$master.select(id);\n\n\t\t//id - id of button, number for page buttons\n\t\tswitch(id){\n\t\t\tcase \"next\":\n\t\t\t\tid = this._settings.page+1;\n\t\t\t\tbreak;\n\t\t\tcase \"prev\":\n\t\t\t\tid = this._settings.page-1;\n\t\t\t\tbreak;\n\t\t\tcase \"first\":\n\t\t\t\tid = 0;\n\t\t\t\tbreak;\n\t\t\tcase \"last\":\n\t\t\t\tid = this._settings.limit-1;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\t//use incoming id\n\t\t\t\tbreak;\n\t\t}\n\t\tif (id<0) id=0;\n\t\tif (id>=this.data.limit) id=this.data.limit-1;\n\n\t\tvar old = this.data.page;\n\t\tif (this.callEvent(\"onBeforePageChange\",[id, old])){\n\t\t\tthis.data.page = id*1; //must be int\n\t\t\tif (this.refresh()){\n\t\t\t\tif (!this._settings.animate || !this._animate(old, id*1, this._settings.animate))\n\t\t\t\t\tthis.$master.refresh();\n\t\t\t}\n\t\t\tthis.callEvent(\"onAfterPageChange\",[id]);\t\n\t\t}\n\t},\n\t_id:\"webix_p_id\",\n\ttemplate_setter:webix.template,\n\ttype:{\n\t\ttemplate:function(a,b){ return a.template.call(this, a,b); },\n\t\t//list of page numbers\n\t\tpages:function(obj){\n\t\t\tvar html=\"\";\n\t\t\t//skip rendering if paging is not fully initialized\n\t\t\tif (obj.page == -1) return \"\";\n\t\t\t//current page taken as center of view, calculate bounds of group\n\t\t\tobj.$min = obj.page-Math.round((obj.group-1)/2);\n\t\t\tobj.$max = obj.$min + obj.group*1 - 1;\n\t\t\tif (obj.$min<0){\n\t\t\t\tobj.$max+=obj.$min*(-1);\n\t\t\t\tobj.$min=0;\n\t\t\t}\n\t\t\tif (obj.$max>=obj.limit){\n\t\t\t\tobj.$min -= Math.min(obj.$min,obj.$max-obj.limit+1);\n\t\t\t\tobj.$max = obj.limit-1;\n\t\t\t}\n\t\t\t//generate HTML code of buttons\n\t\t\tfor (var i=(obj.$min||0); i<=obj.$max; i++)\n\t\t\t\thtml+=this.button({id:i, index:(i+1), selected:(i == obj.page ?\"_selected\":\"\"), label:webix.i18n.aria.page+\" \"+(i+1)});\n\t\t\treturn html;\n\t\t},\n\t\tpage:function(obj){\n\t\t\treturn obj.page+1;\n\t\t},\n\t\t//go-to-first page button\n\t\tfirst:function(){\n\t\t\treturn this.button({ id:\"first\", index:webix.locale.pager.first, selected:\"\", label:webix.i18n.aria.pages[0]});\n\t\t},\n\t\t//go-to-last page button\n\t\tlast:function(){\n\t\t\treturn this.button({ id:\"last\", index:webix.locale.pager.last, selected:\"\", label:webix.i18n.aria.pages[3]});\n\t\t},\n\t\t//go-to-prev page button\n\t\tprev:function(){\n\t\t\treturn this.button({ id:\"prev\", index:webix.locale.pager.prev, selected:\"\", label:webix.i18n.aria.pages[1]});\n\t\t},\n\t\t//go-to-next page button\n\t\tnext:function(){\n\t\t\treturn this.button({ id:\"next\", index:webix.locale.pager.next, selected:\"\", label:webix.i18n.aria.pages[2]});\n\t\t},\n\t\tbutton:webix.template(\"<button type='button' webix_p_id='{obj.id}' class='webix_pager_item{obj.selected}' aria-label='{obj.label}'>{obj.index}</button>\")\n\t},\n\tclone:function(pager){\n\t\tif (!pager.$view){\n\t\t\tpager.view = \"pager\";\n\t\t\tpager = webix.ui(pager);\n\t\t}\n\n\t\tthis._clone = pager;\n\t\tpager.$master = this;\n\t\tthis._refresh_clone();\n\t},\n\trefresh:function(){\n\t\tvar s = this._settings;\n\t\tif (!s.count) return;\n\n\t\t//max page number\n\t\ts.limit = Math.ceil(s.count/s.size);\n\n\t\tvar newPage = Math.min(s.limit-1, s.page);\n\n\t\tif (newPage != s.page)\n\t\t\treturn this.$master.setPage(newPage);\n\n\t\ts.page = newPage;\n\t\tif (newPage>=0 && (newPage!=s.old_page) || (s.limit != s.old_limit) || (s.old_count != s.count)){\n\t\t\t//refresh self only if current page or total limit was changed\n\t\t\tthis.render();\n\t\t\tthis._refresh_clone();\n\t\t\ts.old_limit = s.limit;\t//save for onchange check in next iteration\n\t\t\ts.old_page = s.page;\n\t\t\ts.old_count = s.count;\n\t\t\treturn true;\n\t\t}\n\t},\n\tapiOnly_setter:function(value){\n\t\treturn (this.$apiOnly=value);\n\t},\n\t_refresh_clone:function(){\n\t\tif (this._clone){\n\t\t\tthis._clone._settings.count = this._settings.count;\n\t\t\tthis._clone._settings.page = this._settings.page;\n\t\t\tthis._clone.refresh();\n\t\t}\n\t},\n\t_animate:function(old, id, config){\n\t\tif (old == id) return false;\n\t\tif (this._pgInAnimation){\n\t\t\tif(this._pgAnimateTimeout){\n\t\t\t\twindow.clearTimeout(this._pgAnimateTimeout);\n\t\t\t}\n\t\t\treturn (this._pgAnimateTimeout = webix.delay(this._animate, this,[old, id, config],100));\n\t\t}\n\t\tvar direction = id > old ? \"left\" : \"right\";\n\t\tif (config.direction == \"top\" || config.direction == \"bottom\")\n\t\t\tdirection = id > old ? \"top\" : \"bottom\";\n\t\tif (config.flip)\n\t\t\tdirection = \"\";\n\n\t\t\n\n\t\t//make copy of existing view\n\t\tvar top = 0;\n\t\tvar snode = this.$master._dataobj;\n\t\tif (this.$master._body){\t//datatable\n\t\t\tsnode = this.$master._body;\n\t\t\ttop = snode.offsetTop;\n\t\t\twebix.html.addCss(this.$master.$view, \"webix_animation\");\n\t\t}\n\n\t\tvar onode = snode.cloneNode(true);\n\t\tonode.style.width = snode.style.width = \"100%\";\n\t\t\n\t\t//redraw page\n\t\tthis.$master.refresh();\n\t\t//append copy next to original\n\t\twebix.html.insertBefore(onode, snode.nextSibling, snode.parentNode);\n\n\t\t//animation config\n\t\tvar line;\n\t\tvar base = config !== true ? config : {};\n\t\tvar aniset = webix.extend({\n\t\t\tdirection:direction,\n\t\t\tcallback:webix.bind(function(){\n\t\t\t\taniset.callback = null;\n\t\t\t\twebix.animate.breakLine(line);\n\t\t\t\tthis._pgInAnimation = false;\n\t\t\t\tif (this.$master._body)\n\t\t\t\t\twebix.html.removeCss(this.$master.$view, \"webix_animation\");\n\t\t\t},this),\n\t\t\ttop:top\n\t\t}, base);\n\n\t\t//run animation\n\t\tline = webix.animate.formLine(snode, onode, aniset);\n\t\twebix.animate([ snode, onode ], aniset );\n\t\tthis._pgInAnimation = true;\n\t}\n}, webix.MouseEvents, webix.SingleRender, webix.ui.view, webix.EventSystem);\n\nwebix.locale.pager = {\n\tfirst: \" &lt;&lt; \",\n\tlast: \" &gt;&gt; \",\n\tnext: \" &gt; \",\n\tprev: \" &lt; \"\n};\n\n\nwebix.PagingAbility = {\n\tpager_setter:function(pager){\n\t\tif (typeof pager == \"string\"){\n\t\t\tvar ui_pager = webix.$$(pager);\n\t\t\tif (!ui_pager){\n\t\t\t\tthis.$blockRender = true;\n\t\t\t\twebix.delay(function(){\n\t\t\t\t\tvar obj = webix.$$(pager);\n\n\t\t\t\t\tthis._settings.pager = this.pager_setter(obj);\n\t\t\t\t\tvar s = obj._settings;\n\t\t\t\t\ts.count = this.data._count_pager_total(s.level);\n\t\t\t\t\tobj.refresh();\n\n\t\t\t\t\tthis.$blockRender = false;\n\t\t\t\t\tthis.render();\n\t\t\t\t}, this);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tpager = ui_pager;\n\t\t}\n\n\t\tfunction check_pager_sizes(repeat){\n\t\t\tif (pager.config.autosize && this.getVisibleCount){\n\t\t\t\tvar count = this.getVisibleCount();\n\t\t\t\tif (isNaN(count)){\n\t\t\t\t\tpager.config.size = 1;\n\t\t\t\t\twebix.delay(check_pager_sizes, this, [true]);\n\t\t\t\t} else if (count != pager.config.size){\n\t\t\t\t\tpager.config.size = count;\n\t\t\t\t\tpager.refresh();\n\t\t\t\t\tif (repeat === true)\n\t\t\t\t\t\tthis.refresh();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvar s = this._settings.pager;\n\t\t\t//initial value of pager = -1, waiting for real value\n\t\t\tif (s.page == -1) return false;\t\n\t\t\t\n\t\t\tthis.data.$min = this._count_pager_index(0, s.page*s.size);\t//affect data.getRange\n\t\t\tthis.data.$max = this._count_pager_index(this.data.$min, s.size);\n\t\t\tthis.data.$pagesize = this.data.$max - this.data.$min;\n\n\t\t\treturn true;\n\t\t}\n\n\t\tthis.attachEvent(\"onBeforeRender\",check_pager_sizes);\n\n\t\tif (!pager.$view){\n\t\t\tpager.view = \"pager\";\n\t\t\tpager = webix.ui(pager);\n\t\t}\n\t\tthis._pager = pager;\n\t\tpager.$master = this;\n\n\t\tthis.data.attachEvent(\"onStoreUpdated\", function(){\n\t\t\tvar s = pager._settings;\n\t\t\ts.count = this._count_pager_total(s.level);\n\t\t\tpager.refresh();\n\t\t});\n\t\tthis.data._count_pager_total = this._count_pager_total;\n\n\t\treturn pager._settings;\n\t},\n\t_count_pager_total:function(level){\n\t\tif (level && level !== 0){\n\t\t\tvar count = 0; \n\t\t\tthis.each(function(obj){\n\t\t\t\tif (obj.$level == level) count++;\n\t\t\t});\n\t\t\treturn count;\n\t\t} else\n\t\t\treturn this.count();\n\t},\n\t_count_pager_index:function(start, count){\n\t\tvar s = this._settings.pager;\n\n\t\tif (s.level && s.level !== 0){\n\t\t\tvar end = start;\n\t\t\tvar max = this.data.order.length;\n\n\t\t\tif (count)\n\t\t\t\twhile (end < max){\n\t\t\t\t\tif (this.data.getItem(this.data.order[end]).$level == s.level){\n\t\t\t\t\t\tif (count === 0)\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tcount--;\n\t\t\t\t\t}\n\t\t\t\t\tend++;\n\t\t\t\t}\n\n\t\t\treturn end;\n\t\t} else\n\t\t\treturn start+count;\n\t},\n\tsetPage:function(value){\n\t\tif (this._pager)\n\t\t\tthis._pager.select(value);\n\t},\n\tgetPage:function(){\n\t\treturn this._pager._settings.page;\n\t},\n\tgetPager:function(){\n\t\treturn this._pager;\n\t}\n};\n/*\n\tBehavior: AutoTooltip - links tooltip to data driven item\n*/\n\n/*\n\tUI: Tooltip\n\t\n\t@export\n\t\tshow\n\t\thide\n*/\n\n\n\n\nwebix.protoUI({\n\tname:\"tooltip\",\n\tdefaults:{\n\t\tdy:0,\n\t\tdx:20\n\t},\n\t$init:function(container){\n\t\tif (typeof container == \"string\"){\n\t\t\tcontainer = { template:container };\n\t\t}\n\n\t\tthis.type = webix.extend({}, this.type);\n\n\t\t//create  container for future tooltip\n\t\tthis.$view = this._viewobj = this._contentobj = this._dataobj = webix.html.create(\"DIV\", {role:\"alert\", \"aria-atomic\":\"true\"});\n\t\tthis._contentobj.className = \"webix_tooltip\";\n\t\twebix.html.insertBefore(this._contentobj,document.body.firstChild,document.body);\n\t\tthis._hideHandler = webix.attachEvent(\"onClick\", webix.bind(function(e){\n\t\t\tif (this._visible && webix.$$(e) != this)\n\t\t\t\tthis.hide();\n\t\t}, this));\n\t\t\n\t\t//detach global event handler on destruction\n\t\tthis.attachEvent(\"onDestruct\", function(){\n\t\t\twebix.detachEvent(this._hideHandler);\n\t\t});\n\t},\n\tadjust:function(){  },\n\t//show tooptip\n\t//pos - object, pos.x - left, pox.y - top\n    isVisible:function(){\n        return true;\n    },\n\tshow:function(data,pos){\n\t\tif (this._disabled) return;\n\t\t//render sefl only if new data was provided\n\t\tif (this.data!=data){\n\t\t\tthis.data=webix.extend({},data);\n\t\t\tthis.render(data);\n\t\t}\n\n\t\tif (this._dataobj.firstChild){\n\t\t\t//show at specified position\n\t\t\tvar w = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n\t\t\tvar h = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n\t\t\tvar positionX = w - pos.x;\n\t\t\tvar positionY = h - pos.y;\n\n\t\t\tthis._contentobj.style.display=\"block\";\n\t\t\t\n\t\t\tif(positionX - this._settings.dx > this._contentobj.offsetWidth)\n\t\t\t\tpositionX = pos.x;\n\t\t\telse {\n\t\t\t\tpositionX = (pos.x - (this._settings.dx * 2)) - this._contentobj.offsetWidth;\n\t\t\t\tif(positionX <= 0) positionX = 0;\n\t\t\t}\n\n\t\t\tif(positionY - this._settings.dy > this._contentobj.offsetHeight)\n\t\t\t\tpositionY = pos.y;\n\t\t\telse \n\t\t\t\tpositionY = (pos.y - this._settings.dy) - this._contentobj.offsetHeight;\n\t\t\tthis._contentobj.style.left = positionX+this._settings.dx+\"px\";\n\t\t\tthis._contentobj.style.top = positionY+this._settings.dy+\"px\";\n\t\t}\n\t\tthis._visible = true;\n\t},\n\t//hide tooltip\n\thide:function(){\n\t\tthis.data=null; //nulify, to be sure that on next show it will be fresh-rendered\n\t\tthis._contentobj.style.display=\"none\";\n\t\tthis._visible = false;\n\t},\n\tdisable:function(){\n\t\tthis._disabled = true;\n\t},\n\tenable:function(){\n\t\tthis._disabled = false;\n\t},\n\ttype:{\n\t\ttemplate:webix.template(\"{obj.id}\"),\n        templateStart:webix.template.empty,\n\t    templateEnd:webix.template.empty\n\t}\n\n}, webix.SingleRender, webix.Settings, webix.EventSystem, webix.ui.view);\n\t\t\n\n\nwebix.AutoTooltip = {\n\ttooltip_setter:function(value){\n\t\tif (value){\n\t\t\tif (typeof value == \"function\")\n\t\t\t\tvalue = { template:value };\n\n\t\t\tvar col_mode = !value.template;\n\t\t\tvar t = new webix.ui.tooltip(value);\n\t\t\tthis._enable_mouse_move();\n\t\t\tvar showEvent = this.attachEvent(\"onMouseMove\",function(id,e){\t//show tooltip on mousemove\n\t\t\t\tthis._mouseEventX = e.clientX;\n\t\t\t\tthis._mouseEventY = e.clientY;\n\t\t\t\tif (this.getColumnConfig){\n\t\t\t\t\tvar config = t.type.column = this.getColumnConfig(id.column);\n\t\t\t\t\tif (col_mode){\n\t\t\t\t\t\t//empty tooltip - ignoring\n\t\t\t\t\t\tif (!config.tooltip && config.tooltip != webix.undefined)\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\tvar trg = e.target || e.srcElements;\n\n\t\t\t\t\t\tif(trg.getAttribute(\"webix_area\") && config.tooltip){\n\t\t\t\t\t\t\tvar area = trg.getAttribute(\"webix_area\");\n\t\t\t\t\t\t\tt.type.template = function(obj,common){\n\t\t\t\t\t\t\t\tvar values = obj[common.column.id];\n\t\t\t\t\t\t\t\treturn webix.template(config.tooltip).call(this,obj,common,values[area],area);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tif (config.tooltip)\n\t\t\t\t\t\t\t\tt.type.template = config.tooltip = webix.template(config.tooltip);\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tvar text = this.getText(id.row, id.column);\n\t\t\t\t\t\t\t\tt.type.template = function(){ return text; };\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!webix.DragControl.active)\n\t\t\t\t\tt.show(this.getItem(id),webix.html.pos(e));\n\t\t\t});\n\t\t\t// [[IMPROVE]]  As we can can have only one instance of tooltip per page \n\t\t\t//\t\t\t\tthis handler can be attached once per page, not once per component\n\t\t\tvar hideEvent = webix.event(document.body, \"mousemove\", webix.bind(function(e){\n\t\t\t\te = e||event;\n\t\t\t\tif(this._mouseEventX != e.clientX || this._mouseEventY != e.clientY)\n\t\t\t\t\tt.hide();\n\t\t\t},this));\n\t\t\tthis.attachEvent(\"onDestruct\",function(){\n\t\t\t\tif(this.config.tooltip)\n\t\t\t\t\tthis.config.tooltip.destructor();\n\t\t\t});\n\t\t\tthis.attachEvent(\"onAfterScroll\", function(){\n\t\t\t\tt.hide();\n\t\t\t});\n\t\t\tt.attachEvent(\"onDestruct\",webix.bind(function(){\n\t\t\t\tthis.detachEvent(showEvent);\n\t\t\t\twebix.eventRemove(hideEvent);\n\t\t\t},this));\n\t\t\treturn t;\n\t\t}\n\t}\n};\n\nwebix.protoUI({\n\tname:\"proto\",\n\t$init:function(){\n\t\tthis.data.provideApi(this, true);\n\t\tthis._dataobj = this._dataobj || this._contentobj;\n\t\t\n\t\t//render self , each time when data is updated\n\t\tthis.data.attachEvent(\"onStoreUpdated\",webix.bind(function(){\n\t\t\tthis.render.apply(this,arguments);\n\t\t},this));\n\t},\n\t$setSize:function(){\n\t\tif (webix.ui.view.prototype.$setSize.apply(this, arguments))\n\t\t\tthis.render();\n\t},\n\t_id:\"webix_item\",\n\ton_mouse_move:{\n\t},\n\ttype:{}\n}, webix.PagingAbility, webix.DataMarks, webix.AutoTooltip,webix.ValidateCollection,webix.RenderStack, webix.DataLoader, webix.ui.view, webix.EventSystem, webix.Settings);\n\nwebix.CodeParser = {\n\t//converts a complex object into an object with primitives properties\n\tcollapseNames:function(base, prefix, data){\n\t\tdata = data || {};\n\t\tprefix = prefix || \"\";\n\n\t\tif(!base || typeof base != \"object\")\n\t\t\treturn null;\n\n\t\tfor(var prop in base){\n\t\t\tif(base[prop] && typeof base[prop] == \"object\" && !webix.isDate(base[prop]) && !webix.isArray(base[prop])){\n\t\t\t\twebix.CodeParser.collapseNames(base[prop], prefix+prop+\".\", data);\n\t\t\t} else {\n\t\t\t\tdata[prefix+prop] = base[prop];\n\t\t\t}\n\t\t}\n\t\treturn data;\n\t},\n\t//converts an object with primitive properties into an object with complex properties\n\texpandNames:function(base){\n\t\tvar data = {},\n\t\t\ti, lastIndex, name, obj, prop;\n\n\t\tfor(prop in base){\n\t\t\tname = prop.split(\".\");\n\t\t\tlastIndex = name.length-1;\n\t\t\tobj = data;\n\t\t\tfor( i =0; i < lastIndex; i++ ){\n\t\t\t\tif(!obj[name[i]])\n\t\t\t\t\tobj[name[i]]  = {};\n\t\t\t\tobj = obj[name[i]];\n\t\t\t}\n\t\t\tobj[name[lastIndex]] = base[prop];\n\t\t}\n\n\t\treturn data;\n\t}\n};\n\nwebix.Values = {\n\t$init:function(){\n\t\tthis.elements = {};\n\t},\n\tfocus:function(name){\n\t\tif (name){\n\t\t\twebix.assert(this.elements[name],\"unknown input name: \"+name);\n\t\t\tthis._focus(this.elements[name]);\n\t\t} else{\n\t\t\tfor(var n in this.elements){\n\t\t\t\tif(this._focus(this.elements[n]))\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t},\n\t_focus: function(target){\n\t\tif (target && target.focus){\n\t\t\ttarget.focus();\n\t\t\treturn true;\n\t\t}\n\t},\n\tsetValues:function(data, update){\n\t\tif (this._settings.complexData)\n\t\t\tdata = webix.CodeParser.collapseNames(data);\n\n\t\tthis._inner_setValues(data, update);\n\t},\n\t_inner_setValues:function(data, update){\n\t\tthis._is_form_dirty = update;\n\t\t//prevent onChange calls from separate controls\n\t\tthis.blockEvent();\n\n\t\tif (!update || !this._values)\n\t\t\tthis._values = {};\n\n\t\tif (webix.debug_render)\n\t\t\twebix.log(\"Render: \"+this.name+\"@\"+this._settings.id);\n\n\t\tfor (var name in data)\n\t\t\tif (!this.elements[name])\n\t\t\t\tthis._values[name] = data[name];\n\n\t\tfor (var name in this.elements){\n\t\t\tvar input = this.elements[name];\n\t\t\tif (input){\n\t\t\t\tif (!webix.isUndefined(data[name]))\n\t\t\t\t\tinput.setValue(data[name]);\n\t\t\t\telse if (!update && input._allowsClear)\n\t\t\t\t\tinput.setValue(\"\");\n\t\t\t\tthis._values[name] = input.getValue();\n\t\t\t}\n\t\t}\n\n\t\tthis.unblockEvent();\n\t\tthis.callEvent(\"onValues\",[]);\n\t},\n\tisDirty:function(){\n\t\tif (this._is_form_dirty) return true;\n\t\tif (this.getDirtyValues(1) === 1)\n\t\t\treturn true;\n\n\t\treturn false;\n\t},\n\tsetDirty:function(flag){\n\t\tthis._is_form_dirty = flag;\n\t\tif (!flag)\n\t\t\tthis._values = this._inner_getValues();\n\t},\n\tgetDirtyValues:function(){\n\t\tvar result = {};\n\t\tif (this._values){\n\t\t\tfor (var name in this.elements){\n\t\t\t\tvar value = this.elements[name].getValue();\n\t\t\t\tif (this._values[name] != value){\n\t\t\t\t\tresult[name] = value;\n\t\t\t\t\t//FIXME - used by isDirty\n\t\t\t\t\tif (arguments[0])\n\t\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t},\n\tgetCleanValues:function(){\n\t\treturn this._values;\n\t},\n\tgetValues:function(filter){\n\t\tvar data = this._inner_getValues(filter);\n\t\tif (this._settings.complexData)\n\t\t\tdata = webix.CodeParser.expandNames(data);\n\n\t\treturn data;\n\t},\n\t_inner_getValues:function(filter){\n\t\t//get original data\t\t\n\t\tvar success,\n\t\t\telem = null,\n\t\t\tdata = (this._values?webix.copy(this._values):{});\n\n\t\t//update properties from linked controls\n\t\tfor (var name in this.elements){\n\t\t\telem = this.elements[name];\n\t\t\tsuccess = true;\n\t\t\tif(filter){\n\t\t\t\tif(typeof filter == \"object\"){\n\t\t\t\t\tif(filter.hidden === false)\n\t\t\t\t\t\tsuccess = elem.isVisible();\n\t\t\t\t\tif(success && filter.disabled === false)\n\t\t\t\t\t\tsuccess = elem.isEnabled();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tsuccess = filter.call(this,elem);\n\t\t\t}\n\t\t\tif(success)\n\t\t\t\tdata[name] = elem.getValue();\n\t\t\telse\n\t\t\t\tdelete data[name]; //in case of this._values[name]\n\t\t}\n\t\treturn data;\n\t},\n\tclear:function(){\n\t\tthis._is_form_dirty = false;\n\t\tvar data = {};\n\t\tfor (var name in this.elements)\n\t\t\tif (this.elements[name]._allowsClear)\n\t\t\t\tdata[name] = this.elements[name]._settings.defaultValue||\"\";\n\t\t\n\t\tthis._inner_setValues(data);\n\t},\n\tmarkInvalid: function(name, state){\n\t\t// remove 'invalid' mark\n\t\tif(state === false){\n\t\t\tthis._clear_invalid(name);\n\t\t}\n\t\t// add 'invalid' mark\n\t\telse{\n\t\t\t// set invalidMessage\n\t\t\tif(typeof state == \"string\"){\n\t\t\t\tvar input = this.elements[name];\n\t\t\t\tif(input)\n\t\t\t\t\tinput._settings.invalidMessage = state;\n\t\t\t}\n\t\t\tthis._mark_invalid(name);\n\t\t}\n\t},\n\t_mark_invalid:function(id){\n\t\tvar input = this.elements[id];\n\t\tif (id && input){\n\t\t\tthis._clear_invalid(id,true);\n\t\t\twebix.html.addCss(input._viewobj, \"webix_invalid\");\n\t\t\tinput._settings.invalid = true;\n\t\t\tvar message = input._settings.invalidMessage;\n\t\t\tif(typeof message === \"string\" && input.setBottomText)\n\t\t\t\tinput.setBottomText();\n\t\t}\n\t},\n\t_clear_invalid:function(id,silent){\n\t\tvar input = this.elements[id];\n        if(id && input && input.$view && input._settings.invalid){\n\t        webix.html.removeCss(input._viewobj, \"webix_invalid\");\n\t        input._settings.invalid = false;\n\t        var message = input._settings.invalidMessage;\n\t        if(typeof message === \"string\" && !silent && input.setBottomText)\n\t        \tinput.setBottomText();\n        }\n\t}\n};\n\n\nwebix.protoUI({\n\tname:\"toolbar\",\n\tdefaults:{\n\t\ttype:'toolbar'\n\t},\n\t_render_borders:true,\n\t_form_classname:\"webix_toolbar\",\n\t_form_vertical:false,\n\t$init:function(config){\n\t\tif (!config.borderless)\n\t\t\tthis._contentobj.style.borderWidth=\"1px\";\n\n\t\tthis._contentobj.className+=\" \"+this._form_classname;\n\t\tthis._viewobj.setAttribute(\"role\", \"toolbar\");\n\t},\n\t_recollect_elements:function(){\n\t\tvar form = this;\n\t\tform.elements = {};\n\t\twebix.ui.each(this, function(view){\n\t\t\tif (view._settings.name && view.getValue && view.setValue){\n\t\t\t\tform.elements[view._settings.name] = view;\n\t\t\t\tif (view.mapEvent)\n\t\t\t\t\tview.mapEvent({\n\t\t\t\t\t\tonbeforetabclick:form,\n\t\t\t\t\t\tonaftertabclick:form,\n\t\t\t\t\t\tonitemclick:form,\n\t\t\t\t\t\tonchange:form\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (view.setValues) return false;\n\t\t});\n\t\tthis.setDirty(false);\n\t},\n\t_parse_cells_ext_end:function(){\n\t\tthis._recollect_elements();\n\t},\n\t_parse_cells_ext:function(collection){\n\t\tvar config = this._settings;\n\t\tif (config.elements && !collection){\n\t\t\tthis._collection = collection = config.elements;\n\t\t\tthis._vertical_orientation = this._form_vertical;\n\t\t\tdelete config.elements;\n\t\t}\n\n\t\tif (this._settings.elementsConfig)\n\t\t\tthis._rec_apply_settings(this._collection, config.elementsConfig);\n\t\t\n\t\treturn collection;\n\t},\n\t_rec_apply_settings:function(col, settings){\n\t\tfor (var i=0; i<col.length; i++){\n\t\t\tvar element = col[i];\n\t\t\twebix.extend( element, settings );\n\t\t\tvar nextsettings = settings;\n\n\t\t\tif (element.elementsConfig)\n\t\t\t\tnextsettings = webix.extend(webix.extend({}, element.elementsConfig), settings);\n\n\t\t\tvar sub;\n\t\t\tif (element.body)\n\t\t\t\tsub = [element.body];\n\t\t\telse\n\t\t\t\tsub = element.rows || element.cols || element.cells || element.body;\n\n\t\t\tif (sub)\n\t\t\t\tthis._rec_apply_settings(sub, nextsettings);\n\t\t}\n\t},\n\t$getSize:function(dx, dy){\n\t\tvar sizes = webix.ui.layout.prototype.$getSize.call(this, dx, dy);\n\t\tvar parent = this.getParentView();\n\t\tvar index = this._vertical_orientation?3:1;\n\t\tif (parent && this._vertical_orientation != parent._vertical_orientation)\n\t\t\tsizes[index]+=100000;\n\t\t\n\t\twebix.debug_size_box(this, sizes, true);\n\t\treturn sizes;\n\t},\n\trender:function(){\n\t},\n\trefresh:function(){\n\t\tthis.render();\n\t}\n},  webix.Scrollable, webix.AtomDataLoader, webix.Values, webix.ui.layout, webix.ValidateData);\n\n\nwebix.protoUI({\n\tname:\"template\",\n\t$init:function(config){\n\t\tvar subtype = this._template_types[config.type];\n\t\tif (subtype){\n\t\t\twebix.extend(config, subtype);\n\t\t\t\n\t\t\t//will reset borders for \"section\"\n\t\t\tif (config.borderless){\n\t\t\t\tdelete config._inner;\n\t\t\t\tthis._set_inner(config);\n\t\t\t}\n\t\t}\n\n\t\tif (this._dataobj == this._viewobj){\n\t\t\tthis._dataobj = webix.html.create(\"DIV\");\n\t\t\tthis._dataobj.className = \" webix_template\";\n\t\t\tthis._viewobj.appendChild(this._dataobj);\n\t\t} else \n\t\t\tthis._dataobj.className += \" webix_template\";\n\n\t\tthis.attachEvent(\"onAfterRender\", this._correct_width_scroll);\n\t},\n\tsetValues:function(obj, update){\n\t\tthis.data = update?webix.extend(this.data, obj, true):obj;\n\t\tthis.render();\n\t},\n\tgetValues:function(){\n\t\treturn this.data;\n\t},\n\t$skin:function(){\n\t\tthis._template_types.header.height = this._template_types.section.height = webix.skin.$active.barHeight;\n\t},\n\t_template_types:{\n\t\t\"header\":{\n\t\t\tcss:\"webix_header\"\n\t\t},\n\t\t\"section\":{\n\t\t\tcss:\"webix_section\",\n\t\t\tborderless:true\n\t\t},\n\t\t\"clean\":{\n\t\t\tcss:\"webix_clean\",\n\t\t\tborderless:true\n\t\t}\n\t},\n\tonClick_setter:function(value){\n\t\tthis.on_click = webix.extend((this.on_click || {}), value, true);\n\n\t\tif (!this._onClick)\n\t\t\twebix.extend(this, webix.MouseEvents);\n\n\t\treturn value;\n\t},\n\tdefaults:{\n\t\ttemplate:webix.template.empty\n\t},\n\t_render_me:function(){\n\t\tthis._not_render_me = false;\n\t\tthis._probably_render_me();\n\t\tthis.resize();\n\t},\n\t_probably_render_me:function(){\n\t\tif (!this._not_render_me){\n\t\t\tthis._not_render_me = true;\n\t\t\tthis.render();\n\t\t}\n\t},\n\tsrc_setter:function(value){\n\t\tthis._not_render_me = true;\n\t\t\n\t\tif(!this.callEvent(\"onBeforeLoad\",[])) \n\t\t\treturn \"\";\n\t\twebix.ajax(value, webix.bind(function(text){\n\t\t\tthis._settings.template = webix.template(text);\n\t\t\tthis._render_me();\n\t\t\tthis.callEvent(\"onAfterLoad\",[]);\n\t\t}, this));\n\t\treturn value;\n\t},\n\t_correct_width_scroll:function(){\n\t\t//we need to force auto height calculation after content change\n\t\t//dropping the last_size flag will ensure that inner logic of $setSize will be processed\n\t\tif (this._settings.autoheight){\n\t\t\tthis._last_size = null;\n\t\t\tthis.resize();\n\t\t}\n\n\t\tif (this._settings.scroll && this._settings.scroll.indexOf(\"x\") != -1)\n\t\t\tthis._dataobj.style.width = this._dataobj.scrollWidth + \"px\";\n\t},\n\tcontent_setter:function(config){\n\t\tif (config){\n\t\t\tthis._not_render_me = true;\n\t\t\tthis.render = function(){};\n\t\t\tthis._dataobj.appendChild(webix.toNode(config));\n\t\t}\n\t},\n\trefresh:function(){\n\t\tthis.render();\n\t},\n\tsetHTML:function(html){\n\t\tthis._settings.template = function(){ return html; };\n\t\tthis.refresh();\n\t},\n\tsetContent:function(content){\n\t\tthis._dataobj.innerHTML = \"\";\n\t\tthis.content_setter(content);\n\t},\n\t$setSize:function(x,y){\n\t\tif (webix.ui.view.prototype.$setSize.call(this,x,y)){\n\t\t\tthis._probably_render_me();\n\t\t\tif (this._settings.autoheight){\n\t\t\t\tvar top =this.getTopParentView();\n\t\t\t\tclearTimeout(top._template_resize_timer);\n\t\t\t\ttop._template_resize_timer = webix.delay(this.resize, this);\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t},\n\t$getSize:function(x,y){\n\t\tif (this._settings.autoheight && !this._settings.type)\n\t\t\tthis._settings.height = this._get_auto_height();\n\n\t\treturn webix.ui.view.prototype.$getSize.call(this,x,y);\n\t},\n\t_get_auto_height:function(){\n\t\tvar size;\n\t\t\t\n\t\tthis._probably_render_me();\n\t\tvar padding = webix.skin.$active.layoutPadding.space;\n\t\tthis._dataobj.style.height = \"auto\";\n\t\tsize = this._dataobj.scrollHeight;\n\t\tthis._dataobj.style.height = \"\";\n\n\t\treturn size;\n\t},\n\t_one_time_scroll:true //scroll will appear only if set directly in config\n}, webix.Scrollable, webix.AtomDataLoader, webix.AtomRender, webix.EventSystem, webix.ui.view);\n\nwebix.protoUI({\n\tname:\"iframe\",\n\t$init:function(config){\n\t\tthis._dataobj = this._contentobj;\n\t\tthis._contentobj.innerHTML = \"<iframe style='width:100%; height:100%' frameborder='0' onload='var t = $$(this.parentNode.getAttribute(\\\"view_id\\\")); if (t) t.callEvent(\\\"onAfterLoad\\\",[]);' src='about:blank'></iframe>\";\n\t},\n\tload:function(value){\n\t\tthis.src_setter(value);\n\t},\n\tsrc_setter:function(value){\n\t\tif(!this.callEvent(\"onBeforeLoad\",[])) \n\t\t\treturn \"\";\n\t\tthis.getIframe().src = value;\n\t\treturn value;\n\t},\n\tgetIframe:function(){\n\t\treturn this._contentobj.getElementsByTagName(\"iframe\")[0];\n\t},\n\tgetWindow:function(){\n\t\treturn this.getIframe().contentWindow;\n\t}\n}, webix.ui.view, webix.EventSystem);\n\nwebix.OverlayBox = {\n\tshowOverlay:function(message){\n\t\tif (!this._overlay){\n\t\t\tthis._overlay = webix.html.create(\"DIV\",{ \"class\":\"webix_overlay\" },(message||\"\"));\n\t\t\twebix.html.insertBefore(this._overlay, this._viewobj.firstChild, this._viewobj);\n\t\t\tthis._viewobj.style.position = \"relative\";\n\t\t} else \n\t\t\tthis._overlay.innerHTML = message;\n\t},\n\thideOverlay:function(){\n\t\tif (this._overlay){\n\t\t\twebix.html.remove(this._overlay);\n\t\t\tthis._overlay = null;\n\t\t}\n\t}\n};\n\n/*scrollable view with another view insize*/\nwebix.protoUI({\n\tname:\"scrollview\",\n\tdefaults:{\n\t\tscroll:\"y\",\n\t\tscrollSpeed:\"0ms\"\n\t},\n\t$init:function(){\n\t\tthis._viewobj.className += \" webix_scrollview\";\n\t},\n\tbody_setter:function(config){\n\t\tconfig.borderless = true;\n\t\tthis._body_cell = webix.ui._view(config);\n\t\tthis._body_cell._parent_cell = this;\n\t\tthis._dataobj.appendChild(this._body_cell._viewobj);\n\t},\n\tgetChildViews:function(){\n\t\treturn [this._body_cell];\n\t},\n\tgetBody:function(){\n\t\treturn this._body_cell;\n\t},\n\tresizeChildren:function(){\n\t\tthis._desired_size = this._body_cell.$getSize(0, 0);\n\t\tthis._resizeChildren();\n\t\twebix.callEvent(\"onResize\",[]);\n\t},\n\t_resizeChildren:function(){\n\t\tvar scroll_size = this._native_scroll || webix.ui.scrollSize;\n\t\tvar cx = Math.max(this._content_width, this._desired_size[0]);\n\t\tvar cy = Math.max(this._content_height, this._desired_size[2]);\n\t\tthis._body_cell.$setSize(cx, cy);\t\t\t\n\t\tthis._dataobj.style.width = this._body_cell._content_width+\"px\";\n\t\tthis._dataobj.style.height = this._body_cell._content_height+\"px\";\n\t\tif (webix.env.touch){\n\t\t\tvar state = this.getScrollState();\n\t\t\tvar top = this._body_cell._content_height - this._content_height;\n\t\t\tif (top < state.y)\n\t\t\t\tthis.scrollTo(null, top);\n\t\t}\n\t\tif (webix._responsive_exception){\n\t\t\twebix._responsive_exception = false;\n\t\t\tthis._desired_size = this._body_cell.$getSize(0, 0);\n\t\t\tthis._resizeChildren();\n\t\t}\n\t},\n\t$getSize:function(dx, dy){\n\t\tvar desired_size = this._desired_size = this._body_cell.$getSize(0, 0);\n\t\tvar self_sizes   = webix.ui.view.prototype.$getSize.call(this, dx, dy);\n\t\tvar scroll_size = this._native_scroll || webix.ui.scrollSize;\n\n\t\tif(this._settings.scroll==\"x\"){\n\t\t\tself_sizes[2] = Math.max(self_sizes[2], desired_size[2]) + scroll_size;\n\t\t\tself_sizes[3] = Math.min(self_sizes[3], desired_size[3]) + scroll_size;\n\t\t} else if(this._settings.scroll==\"y\"){\n\t\t\tself_sizes[0] = Math.max(self_sizes[0], desired_size[0]) + scroll_size;\n\t\t\tself_sizes[1] = Math.min(self_sizes[1], desired_size[1]) + scroll_size;\n\t\t}\n\t\treturn self_sizes;\n\t},\n\t$setSize:function(x,y){\n\t\tvar temp = webix.ui.scrollSize;\n\t\twebix.ui.scrollSize = this._native_scroll || temp;\n\n\t\tif (webix.ui.view.prototype.$setSize.call(this,x,y))\n\t\t\tthis._resizeChildren();\n\t\t\n\t\twebix.ui.scrollSize = temp;\n\t},\n\tscroll_setter:function(value){\n\t\tvar custom = webix.env.$customScroll;\n\t\tif (typeof value == \"string\" && value.indexOf(\"native-\") === 0){\n\t\t\tthis._native_scroll = 17;\n\t\t\tvalue = value.replace(\"native-\");\n\t\t\twebix.env.$customScroll = false;\n\t\t}\n\n\t\tvalue =  webix.Scrollable.scroll_setter.call(this, value);\n\n\t\twebix.env.$customScroll = custom;\n\t\treturn value;\n\t},\n\t_replace:function(new_view){\n\t\tthis._body_cell.destructor();\n\t\tthis._body_cell = new_view;\n\t\tthis._body_cell._parent_cell = this;\n\t\t\n\t\tthis._bodyobj.appendChild(this._body_cell._viewobj);\n\t\tthis.resize();\n\t},\n\tshowView: function(id){\n\t\tvar topPos = webix.$$(id).$view.offsetTop-webix.$$(id).$view.parentNode.offsetTop;\n\t\tthis.scrollTo(0, topPos);\n\t}\n}, webix.Scrollable, webix.EventSystem, webix.ui.view);\n\n/*\n\tUI:TreeMenu\n*/\n\n\n\n \n\nwebix.TreeRenderStack={\n\t$init:function(){\n\t\twebix.assert(this.render,\"TreeRenderStack :: Object must use RenderStack first\");\n\t},\n\t_toHTMLItem:function(obj){\n\t\tvar mark = this.data._marks[obj.id];\n\t\tthis.callEvent(\"onItemRender\",[obj]);\n\t\treturn this.type.templateStart(obj,this.type,mark)+(obj.$template?this.type[\"template\"+obj.$template](obj,this.type,mark):this.type.template(obj,this.type,mark))+this.type.templateEnd();\n\t},\n\t_toHTMLItemObject:function(obj){\n\t\tthis._html.innerHTML = this._toHTMLItem(obj);\n\t\treturn this._html.firstChild;\n\t},\n\t//convert single item to HTML text (templating)\n\t_toHTML:function(obj){\n\t\t//check if related template exist\n\t\twebix.assert((!obj.$template || this.type[\"template\"+obj.$template]),\"RenderStack :: Unknown template: \"+obj.$template);\n\t\tvar html=\"<div role='presentation' class='webix_tree_branch_\"+obj.$level+\"'>\"+this._toHTMLItem(obj);\n\n\t\tif (obj.open)\n\t\t\thtml+=this._toHTMLLevel(obj.id);\n\n\t\thtml+=\"</div>\";\n\n\t\treturn html;\n\t},\n\t_toHTMLLevel:function(id){\n\t\tvar html = \"\";\n\t\tvar leaves = this.data.branch[id];\n\t\tif (leaves){\n\t\t\thtml+=\"<div role='presentation' class='webix_tree_leaves'>\";\n\t\t\tvar last = leaves.length-1;\n\t\t\tfor (var i=0; i <= last; i++){\n\t\t\t\tvar obj = this.getItem(leaves[i]);\n\t\t\t\tthis.type._tree_branch_render_state[obj.$level] = (i == last);\n\t\t\t\thtml+=this._toHTML(obj);\n\t\t\t}\n\t\t\thtml+=\"</div>\";\n\t\t}\n\t\treturn html;\n\t},\n\t//return true when some actual rendering done\n\trender:function(id,data,type){\n\t\twebix.TreeRenderStack._obj = this;\t//can be used from complex render\n\n\t\tif (!this.isVisible(this._settings.id) || this.$blockRender)\n\t\t\treturn;\n\n\t\tif (webix.debug_render)\n\t\t\twebix.log(\"Render: \"+this.name+\"@\"+this._settings.id);\n\t\t\t\n\t\tif (id){\n\t\t\tvar cont;\n\t\t\tvar item = this.getItem(id);\n\t\t\tif (type!=\"add\"){\n\t\t\t\tcont = this.getItemNode(id);\n\t\t\t\tif (!cont) return;\n\t\t\t}\n\t\t\t\n\t\t\tswitch(type){\n\t\t\t\tcase \"branch\":\n\t\t\t\t\tvar branch = cont.parentNode;\n\t\t\t\t\tvar node = this._toHTMLObject(item);\n\t\t\t\t\t\n\t\t\t\t\twebix.html.insertBefore(node, branch); \n\t\t\t\t\twebix.html.remove(branch);\n\t\t\t\t\tthis._htmlmap = null;\n\t\t\t\tbreak;\n\t\t\t\tcase \"paint\":\n\t\t\t\tcase \"update\":\n\t\t\t\t\tvar node = this._htmlmap[id] = this._toHTMLItemObject(item);\n\t\t\t\t\twebix.html.insertBefore(node, cont); \n\t\t\t\t\twebix.html.remove(cont);\n\t\t\t\tbreak;\n\t\t\t\tcase \"delete\":\n\t\t\t\t\t//deleting not item , but full branch\n                    webix.html.remove(cont.parentNode);\n\t\t\t\tbreak;\n\t\t\t\tcase \"add\":\n\t\t\t\t\tvar parent;\n\t\t\t\t\t//we want process both empty value and 0 as string\n\t\t\t\t\t//jshint -W041:true\n\t\t\t\t\tif (item.$parent == 0){\n\t\t\t\t\t\tparent = this._dataobj.firstChild;\n\t\t\t\t\t} else if(this.getItem(item.$parent).open){\n\t\t\t\t\t\tparent  = this.getItemNode(item.$parent);\n\t\t\t\t\t\tif (parent){\n\t\t\t\t\t\t\t//when item created by the script, it will miss the container for child notes\n\t\t\t\t\t\t\t//create it on demand\n\t\t\t\t\t\t\tif (!parent.nextSibling){\n\t\t\t\t\t\t\t\tvar leafs = webix.html.create(\"DIV\", { \"class\" : \"webix_tree_leaves\" },\"\");\n\t\t\t\t\t\t\t\tparent.parentNode.appendChild(leafs);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tparent = parent.nextSibling;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (parent){\n\t\t\t\t\t\tvar next = this.data.getNextSiblingId(id);\n\t\t\t\t\t\tnext = this.getItemNode(next);\n\t\t\t\t\t\tif (next)\n\t\t\t\t\t\t\tnext = next.parentNode;\n\n\t\t\t\t\t\tvar node = this._toHTMLObject(item);\n\t\t\t\t\t\tthis._htmlmap[id] = node.firstChild;\n\t\t\t\t\t\twebix.html.insertBefore(node, next, parent);\n\t\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.callEvent(\"onPartialRender\", [id,data,type]);\n\t\t} else \n\t\t\t//full reset\n\t\t\tif (this.callEvent(\"onBeforeRender\",[this.data])){\n\t\t\t\t//will be used for lines management\n\t\t\t\tthis.type._tree_branch_render_state = [];\n\t\t\t\t//getTopRange - returns all elements on top level\n\t\t\t\tthis._dataobj.innerHTML = this._toHTMLLevel(0);\n\t\t\t\t\n\t\t\t\tthis._htmlmap = null; //clear map, it will be filled at first getItemNode\n\t\t\t\tthis.callEvent(\"onAfterRender\",[]);\n\t\t\t}\n\n\t\t//clear after usage\n\t\tthis.type._tree_branch_render_state = 0;\n\t\twebix.TreeRenderStack._obj = null;\n\t\treturn true;\n\t},\n\tgetItemNode:function(search_id){\n\t\tif (this._htmlmap)\n\t\t\treturn this._htmlmap[search_id];\n\t\t\t\n\t\t//fill map if it doesn't created yet\n\t\tthis._htmlmap={};\n\t\t\n\t\tvar t = this._dataobj.getElementsByTagName(\"DIV\");\n\t\tfor (var i=0; i < t.length; i++){\n\t\t\tvar id = t[i].getAttribute(this._id); //get item's\n\t\t\tif (id) \n\t\t\t\tthis._htmlmap[id]=t[i];\n\t\t}\n\t\t//call locator again, when map is filled\n\t\treturn this.getItemNode(search_id);\n\t},\n\t_branch_render_supported:1\n};\n\n\n\n/*\n\tBehavior:SelectionModel - manage selection states\n\t@export\n\t\tselect\n\t\tunselect\n\t\tselectAll\n\t\tunselectAll\n\t\tisSelected\n\t\tgetSelectedId\n*/\nwebix.SelectionModel={\n\t$init:function(){\n\t\t//collection of selected IDs\n\t\tthis._selected = webix.toArray();\n\t\twebix.assert(this.data, \"SelectionModel :: Component doesn't have DataStore\");\n         \t\n\t\t//remove selection from deleted items\n\t\tthis.data.attachEvent(\"onStoreUpdated\",webix.bind(this._data_updated,this));\n\t\tthis.data.attachEvent(\"onStoreLoad\", webix.bind(this._data_loaded,this));\n\t\tthis.data.attachEvent(\"onAfterFilter\", webix.bind(this._data_filtered,this));\n\t\tthis.data.attachEvent(\"onSyncApply\", webix.bind(this._select_check,this));\n\t\tthis.data.attachEvent(\"onIdChange\", webix.bind(this._id_changed,this));\n\t\tthis.$ready.push(this._set_noselect);\n\t},\n\t_set_noselect: function(){\n\t\tif (this._settings.select==\"multiselect\" || this._settings.multiselect)\n\t\t\twebix._event(this.$view,\"mousedown\", function(e){\n\t\t\t\tvar shiftKey = (e||event).shiftKey;\n\t\t\t\tif(shiftKey){\n\t\t\t\t\twebix._noselect_element = this;\n\t\t\t\t\twebix.html.addCss(this,\"webix_noselect\",1);\n\t\t\t\t}\n\t\t\t});\n\t},\n\t_id_changed:function(oldid, newid){\n\t\tfor (var i = this._selected.length - 1; i >= 0; i--)\n\t\t\tif (this._selected[i]==oldid)\n\t\t\t\tthis._selected[i]=newid;\n\t},\n\t_data_filtered:function(){\n\t\tfor (var i = this._selected.length - 1; i >= 0; i--){\n\t\t\tif (this.data.getIndexById(this._selected[i]) < 0) {\n\t\t\t\tvar id = this._selected[i];\n\t\t\t\tthis.removeCss(id, \"webix_selected\", true);\n\t\t\t\tthis._selected.splice(i,1);\n\t\t\t\tthis.callEvent(\"onSelectChange\",[id]);\n\t\t\t}\n\t\t}\n\t},\n\t//helper - linked to onStoreUpdated\n\t_data_updated:function(id,obj,type){\n\t\tif (type == \"delete\"){\t\t\t\t//remove selection from deleted items\n\t\t\tif (this.loadBranch){\n\t\t\t\t//hierarchy, need to check all\n\t\t\t\tthis._select_check();\n\t\t\t} else\n\t\t\t\tthis._selected.remove(id);\n\t\t}\n\t\telse if (!id && !this.data.count() && !this.data._filter_order){\t//remove selection for clearAll\n\t\t\tthis._selected = webix.toArray();\n\t\t}\n\t},\n\t_data_loaded:function(){\n\t\tif (this._settings.select)\n\t\t\tthis.data.each(function(obj){\n\t\t\t\tif (obj && obj.$selected) this.select(obj.id);\n\t\t\t}, this);\n\t},\n\t_select_check:function(){\n\t\tfor (var i = this._selected.length - 1; i >= 0; i--)\n\t\t\tif (!this.exists(this._selected[i]))\n\t\t\t\tthis._selected.splice(i,1);\n\t},\n\t//helper - changes state of selection for some item\n\t_select_mark:function(id,state,refresh,need_unselect){\n\t\tvar name = state ? \"onBeforeSelect\" : \"onBeforeUnSelect\";\n\t\tif (!this.callEvent(name,[id,state])) return false;\n\n\t\tif (need_unselect){\n\t\t\tthis._silent_selection = true;\n\t\t\tthis.unselectAll();\n\t\t\tthis._silent_selection = false;\n\t\t}\n\t\t\n\t\tif (state)\n\t\t\tthis.addCss(id, \"webix_selected\", true);\n\t\telse\n\t\t\tthis.removeCss(id, \"webix_selected\", true);\n\n\t\tif (refresh)\n\t\t\trefresh.push(id);\t\t\t\t//if we in the mass-select mode - collect all changed IDs\n\t\telse{\n\t\t\tif (state)\n\t\t\t\tthis._selected.push(id);\t\t//then add to list of selected items\n\t\t\telse\n\t\t\t\tthis._selected.remove(id);\n\t\t\tthis._refresh_selection(id);\t//othervise trigger repainting\n\t\t}\n\n\t\tvar name = state ? \"onAfterSelect\" : \"onAfterUnSelect\";\n\t\tthis.callEvent(name,[id]);\n\n\t\treturn true;\n\t},\n\t//select some item\n\tselect:function(id,preserve){\n\t\tvar ctrlKey = arguments[2];\n\t\tvar shiftKey = arguments[3];\n\t\t//if id not provide - works as selectAll\n\t\tif (!id) return this.selectAll();\n\n\t\t//allow an array of ids as parameter\n\t\tif (webix.isArray(id)){\n\t\t\tfor (var i=0; i < id.length; i++)\n\t\t\t\tthis.select(id[i], (i?1:preserve), ctrlKey, shiftKey);\n\t\t\treturn;\n\t\t}\n\n\t\twebix.assert(this.data.exists(id), \"Incorrect id in select command: \"+id);\n\t\t\n\t\t//block selection mode\n\t\tif (shiftKey && this._selected.length)\n\t\t\treturn this.selectAll(this._selected[this._selected.length-1],id);\n\n\t\t//single selection mode\n\t\tvar need_unselect = false;\n\t\tif (!ctrlKey && !preserve && (this._selected.length!=1 || this._selected[0]!=id))\n\t\t\tneed_unselect = true;\n\n\t\tif (!need_unselect && this.isSelected(id)){\n\t\t\tif (ctrlKey) this.unselect(id);\t//ctrl-selection of already selected item\n\t\t\treturn;\n\t\t}\n\n\t\tthis._select_mark(id, true, null, need_unselect);\n\t},\n\t//unselect some item\n\tunselect:function(id){\n\t\t//if id is not provided  - unselect all items\n\t\tif (!id) return this.unselectAll();\n\t\tif (!this.isSelected(id)) return;\n\t\t\n\t\tthis._select_mark(id,false);\n\t},\n\t//select all items, or all in defined range\n\tselectAll:function(from,to){\n\t\tvar range;\n\t\tvar refresh=[];\n\t\t\n\t\tif (from||to)\n\t\t\trange = this.data.getRange(from||null,to||null);\t//get limited set if bounds defined\n\t\telse\n\t\t\trange = this.data.getRange();\t\t\t//get all items in other case\n\t\t\t\t\t\t\t\t\t\t\t\t//in case of paging - it will be current page only\n\t\trange.each(function(obj){ \n\t\t\tif (!this.data.getMark(obj.id, \"webix_selected\")){\n\t\t\t\tthis._selected.push(obj.id);\t\n\t\t\t\tthis._select_mark(obj.id,true,refresh);\n\t\t\t}\n\t\t},this);\n\t\t//repaint self\n\t\tthis._refresh_selection(refresh);\n\t},\n\t//remove selection from all items\n\tunselectAll:function(){\n\t\tvar refresh=[];\n\t\t\n\t\tthis._selected.each(function(id){\n\t\t\tthis._select_mark(id,false,refresh);\t//unmark selected only\n\t\t},this);\n\t\t\n\t\tthis._selected=webix.toArray();\n\t\tthis._refresh_selection(refresh);\t//repaint self\n\t},\n\t//returns true if item is selected\n\tisSelected:function(id){\n\t\treturn this._selected.find(id)!=-1;\n\t},\n\t/*\n\t\treturns ID of selected items or array of IDs\n\t\tto make result predictable - as_array can be used, \n\t\t\twith such flag command will always return an array \n\t\t\tempty array in case when no item was selected\n\t*/\n\tgetSelectedId:function(as_array){\t\n\t\tswitch(this._selected.length){\n\t\t\tcase 0: return as_array?[]:\"\";\n\t\t\tcase 1: return as_array?[this._selected[0]]:this._selected[0];\n\t\t\tdefault: return ([].concat(this._selected)); //isolation\n\t\t}\n\t},\n\tgetSelectedItem:function(as_array){\n\t\tvar sel = this.getSelectedId(true);\n\t\tif (sel.length > 1 || as_array){\n\t\t\tfor (var i = sel.length - 1; i >= 0; i--)\n\t\t\t\tsel[i] = this.getItem(sel[i]);\n\t\t\treturn sel;\n\t\t} else if (sel.length)\n\t\t\treturn this.getItem(sel[0]);\n\t},\n\t//detects which repainting mode need to be used\n\t_is_mass_selection:function(obj){\n\t\t // crappy heuristic, but will do the job\n\t\treturn obj.length>100 || obj.length > this.data.count/2;\n\t},\n\t_refresh_selection:function(refresh){\n\t\tif (typeof refresh != \"object\") refresh = [refresh];\n\t\tif (!refresh.length) return;\t//nothing to repaint\n\t\t\n\t\tif (this._is_mass_selection(refresh))\t\n\t\t\tthis.data.refresh();\t//many items was selected - repaint whole view\n\t\telse\n\t\t\tfor (var i=0; i < refresh.length; i++)\t//repaint only selected\n\t\t\t\tthis.render(refresh[i],this.data.getItem(refresh[i]),\"update\");\n\t\t\t\n\t\tif (!this._silent_selection)\t\n\t\tthis.callEvent(\"onSelectChange\",[refresh]);\n\t}\n};\n\nwebix.ready(function(){\n\twebix.event(document.body,\"mouseup\", function(e){\n\t\tif(webix._noselect_element){\n\t\t\twebix.html.removeCss(webix._noselect_element,\"webix_noselect\");\n\t\t\twebix._noselect_element = null;\n\t\t}\n\t});\n});\n/*\n\tBehavior:DataMove - allows to move and copy elements, heavily relays on DataStore.move\n\t@export\n\t\tcopy\n\t\tmove\n*/\nwebix.TreeDataMove={\n\t$init:function(){\n\t\twebix.assert(this.data, \"DataMove :: Component doesn't have DataStore\");\n\t},\n\t//creates a copy of the item\n\tcopy:function(sid,tindex,tobj,details){\n\t\tdetails = details || {};\n\t\tdetails.copy = true;\n\t\treturn this.move(sid, tindex, tobj, details);\n\t},\n\t_next_move_index:function(nid, next, source){\n\t\tif (next && nid){\n\t\t\tvar new_index = this.getBranchIndex(nid);\n\t\t\treturn new_index+(source == this && source.getBranchIndex(next)<new_index?0:1);\n\t\t}\n\t},\n\t_check_branch_child:function(parent, child){\n\t\tvar t = this.data.branch[parent];\n\t\tif (t && t.length){\n\t\t\tfor (var i=0; i < t.length; i++) {\n\t\t\t\tif (t[i] == child) return true;\n\t\t\t\tif (this._check_branch_child(t[i], child)) return true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\t//move item to the new position\n\tmove:function(sid,tindex,tobj, details){\n\t\tdetails = details || {};\n\t\ttindex = tindex || 0;\n\t\tvar new_id = details.newId || sid;\n\t\tvar target_parent = details.parent || 0;\n\t\t\n\t\ttobj = tobj||this;\n\t\twebix.assert(tobj.data, \"moving attempt to component without datastore\");\n\t\tif (!tobj.data) return;\n\n\t\tif (webix.isArray(sid)){\n\t\t\tfor (var i=0; i < sid.length; i++) {\n\t\t\t\t//increase index for each next item in the set, so order of insertion will be equal to order in the array\n\t\t\t\tvar nid = this.move(sid[i], tindex, tobj, details);\n\t\t\t\ttindex = tobj._next_move_index(nid, sid[i+1], this);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif (this != tobj || details.copy){\n\t\t\tnew_id = tobj.data.add(tobj._externalData(this.getItem(sid),new_id), tindex, (target_parent || 0));\n\t\t\tif (this.data.branch[sid] && tobj.getBranchIndex){\n\t\t\t\tvar temp = this.data._scheme_serialize;\n\t\t\t\tthis.data._scheme_serialize = function(obj){\n\t\t\t\t\tvar copy = webix.copy(obj);\n\t\t\t\t\tdelete copy.$parent; delete copy.$level; delete copy.$child;\n\t\t\t\t\tif (tobj.data.pull[copy.id])\n\t\t\t\t\t\tcopy.id = webix.uid();\n\t\t\t\t\treturn copy;\n\t\t\t\t};\n\t\t\t\tvar copy_data = { data:this.serialize(sid, true), parent:new_id };\n\t\t\t\tthis.data._scheme_serialize = temp;\n\t\t\t\ttobj.parse(copy_data);\n\t\t\t}\n\t\t\tif (!details.copy)\n\t\t\t\tthis.data.remove(sid);\n\t\t} else {\n\t\t\t//move in self\n\t\t\tif (sid == target_parent || this._check_branch_child(sid,target_parent)) return;\n\n\t\t\tvar source = this.getItem(sid);\n\t\t\tvar tbranch = this.data.branch[target_parent];\n\t\t\tif (!tbranch) \n\t\t\t\ttbranch = this.data.branch[target_parent] = [];\n\t\t\tvar sbranch = this.data.branch[source.$parent];\n\n\t\t\tvar sindex = webix.PowerArray.find.call(sbranch, sid);\n\t\t\tif (tindex < 0) tindex = Math.max(tbranch.length - 1, 0);\n\t\t\t//in the same branch\n\t\t\tif (sbranch === tbranch && tindex === sindex) return; //same position\n\n\t\t\twebix.PowerArray.removeAt.call(sbranch, sindex);\n\t\t\twebix.PowerArray.insertAt.call(tbranch, sid, Math.min(tbranch.length, tindex));\n\n\t\t\tif (!sbranch.length)\n\t\t\t\tdelete this.data.branch[source.$parent];\n\t\t\t\n\n\t\t\tif(source.$parent && source.$parent != \"0\")\n\t\t\t\tthis.getItem(source.$parent).$count--;\n\n\t\t\tif (target_parent && target_parent != \"0\"){\n\t\t\t\tvar target = tobj.getItem(target_parent);\n\t\t\t\ttarget.$count++;\n\t\t\t\tthis._set_level_rec(source, target.$level+1);\n\t\t\t} else \n\t\t\t\tthis._set_level_rec(source, 1);\n\n\t\t\tsource.$parent = target_parent;\n\t\t\ttobj.data.callEvent(\"onDataMove\", [sid, tindex, target_parent, tbranch[tindex+1]]);\n\t\t}\n\n\t\tthis.refresh();\n\t\treturn new_id;\t//return ID of item after moving\n\t},\n\t_set_level_rec:function(item, value){\n\t\titem.$level = value;\n\t\tvar branch = this.data.branch[item.id];\n\t\tif (branch)\n\t\t\tfor (var i=0; i<branch.length; i++)\n\t\t\t\tthis._set_level_rec(this.getItem(branch[i]), value+1);\n\t},\n\t//reaction on pause during dnd\n\t_drag_pause:function(id){\n\t\tif (id && !id.header) //ignore drag other header\n\t\t\tthis.open(id);\n\t},\n\t$dropAllow:function(context){\n\t\tif (context.from != context.to) return true;\n\t\tfor (var i=0; i<context.source.length; i++)\n\t\t\tif (context.source ==  context.target || this._check_branch_child(context.source, context.target)) return false;\n\n\t\treturn true;\n\t},\n\t/*\n\t\tthis is a stub for future functionality\n\t\tcurrently it just makes a copy of data object, which is enough for current situation\n\t*/\n\t_externalData:function(data,id){\n\t\tvar new_data = webix.DataMove._externalData.call(this, data, id);\n\t\tdelete new_data.open;\n\t\treturn new_data;\n\t}\n};\n\n\n\n\nwebix.TreeDataLoader = {\n\t$init:function(){\n\t\tthis.data.attachEvent(\"onStoreUpdated\", webix.bind(this._sync_hierarchy, this), null, true);\n\n\t\t// #FIXME:  constructor call chain\n\t\t//redefine methods\n\t\tthis._feed_common = this._feed_commonA;\n\t},\n\t_feed_commonA:function(id, count, callback, url){\n\t\t// branch loading\n\t\tvar details = (count === 0?{parent: encodeURIComponent(id)}:null);\n\n\t\twebix.DataLoader.prototype._feed_common.call(this,id, count, callback, url, details);\n\t},\n\t//load next set of data rows\n\tloadBranch:function(id, callback, url){\n\t\tid = id ||0;\n\t\tthis.data.url = url || this.data.url;\n\t\tif (this.callEvent(\"onDataRequest\", [id,callback,this.data.url]) && this.data.url)\n\t\t\tthis.data.feed.call(this, id, 0, callback, url);\n\t},\n\t_sync_hierarchy:function(id, data, mode){\n\t\tif (!mode || mode == \"add\" || mode == \"delete\" || mode == \"branch\"){\n\t\t\tthis.data._sync_to_order(this);\n\t\t}\n\t}\n};\n\nwebix.TreeStore = {\n\tname:\"TreeStore\",\n\t$init:function() {\n\t\tthis._filterMode={\n\t\t\t//level:1,\n\t\t\tshowSubItems:true\n\t\t};\n\t\tthis.branch = { 0:[] };\n\t\tthis.attachEvent(\"onParse\", function(driver, data){\n\t\t\tthis._set_child_scheme(driver.child);\n\t\t\tvar parent = driver.getInfo(data).parent;\n\t\t});\n\t\tthis.attachEvent(\"onClearAll\", webix.bind(function(){\n\t\t\tthis._filter_branch = null;\n\t\t},this));\n\t},\n\tfilterMode_setter:function(mode){\n\t\treturn webix.extend(this._filterMode, mode, true);\n\t},\n\t_filter_reset:function(preserve){\n\t\t//remove previous filtering , if any\n\t\tif (this._filter_branch && !preserve){\n\t\t\tthis.branch = this._filter_branch;\n\t\t\tthis.order = webix.toArray(webix.copy(this.branch[0]));\n\t\t\tfor (var key in this.branch)\n\t\t\t\tif (key != \"0\")\t//exclude 0 - virtual root\n\t\t\t\t\tthis.getItem(key).$count = this.branch[key].length;\n\t\t\tdelete this._filter_branch;\n\t\t}\n\t},\n\t_filter_core:function(filter, value, preserve, filterMode){\n\t\t//for tree we have few filtering options\n\t\t//- filter leafs only\n\t\t//- filter data on specific level\n\t\t//- filter data on all levels\n\t\t//- in all cases we can show or hide empty folder\n\t\t//- in all cases we can show or hide childs for matched item\n\t\t\n\t\t//set new order of items, store original\n\t\tif (!preserve ||  !this._filter_branch){\n\t\t\tthis._filter_branch = this.branch;\n\t\t\tthis.branch  = webix.clone(this.branch);\n\t\t}\n\n\t\tthis.branch[0] = this._filter_branch_rec(filter, value, this.branch[0], 1, (filterMode||{}));\n\t},\n\t_filter_branch_rec:function(filter, value, branch, level, config){\n\t\t//jshint -W041\n\t\tvar neworder = [];\n\t\t\n\t\tvar allow = (config.level && config.level != level);\n\n\t\tfor (var i=0; i < branch.length; i++){\n\t\t\tvar id = branch[i];\n\t\t\tvar item = this.getItem(id);\n\t\t\tvar child_run = false;\n\t\t\tvar sub = this.branch[id];\n\n\t\t\tif (allow){\n\t\t\t\tchild_run = true;\n\t\t\t} else if (filter(this.getItem(id),value)){\n\t\t\t\tneworder.push(id);\n\t\t\t\t// open all parents of the found item\n\t\t\t\tif (config.openParents !== false){\n\t\t\t\t\tvar parentId = this.getParentId(id);\n\t\t\t\t\twhile(parentId && parentId != \"0\"){\n\t\t\t\t\t\tthis.getItem(parentId).open = 1;\n\t\t\t\t\t\tparentId = this.getParentId(parentId);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t//in case of of fixed level filtering - do not change child-items\n\t\t\t\tif (config.level || config.showSubItems)\n\t\t\t\t\tcontinue;\n\t\t\t} else {\n\t\t\t\t//filtering level, not match\n\t\t\t\tchild_run = true;\n\t\t\t}\t\n\n\t\t\t//if \"filter by all levels\" - filter childs\n\t\t\tif (allow || !config.level){ \n\t\t\t\tif (sub){\n\t\t\t\t\tvar newsub = this.branch[id] = this._filter_branch_rec(filter, value, sub, level+1, config);\n\t\t\t\t\titem.$count = newsub.length;\n\t\t\t\t\tif (child_run && newsub.length)\n\t\t\t\t\t\tneworder.push(id);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn neworder;\n\t},\n\tcount:function(){\n\t\tif (this.order.length)\n\t\t\treturn this.order.length;\n\n\t\t//we must return some non-zero value, or logic of selection will think that we have not data at all\n\t\tvar count=0;\n\t\tthis.eachOpen(function(){ count++; });\n\t\treturn count;\n\t},\n\tchangeId:function(old, newid){\n\t\tif (this.branch[old]){\n\t\t\tvar branch = this.branch[newid] = this.branch[old];\n\t\t\tfor (var i = 0; i < branch.length; i++)\n\t\t\t\tthis.getItem(branch[i]).$parent = newid;\n\t\t\tdelete this.branch[old];\n\t\t}\n\t\tvar parent = this.getItem(old).$parent;\n\t\tif (parent != \"0\"){\n\t\t\tvar index = webix.PowerArray.find.call(this.branch[parent], old);\n\t\t\tthis.branch[parent][index] = newid;\n\t\t}\n\t\treturn webix.DataStore.prototype.changeId.call(this, old, newid);\n\t},\n\tclearAll:function(soft){\n\t\tthis.branch = { 0:[] };\n\t\twebix.DataStore.prototype.clearAll.call(this, soft);\t\n\t},\n\tgetPrevSiblingId:function(id){\n\t\tvar order = this.branch[this.getItem(id).$parent];\n\t\tvar pos = webix.PowerArray.find.call(order, id)-1;\n\t\tif (pos>=0)\n\t\t\treturn order[pos];\n\t\treturn null;\n\t},\n\tgetNextSiblingId:function(id){\n\t\tvar order = this.branch[this.getItem(id).$parent];\n\t\tvar pos = webix.PowerArray.find.call(order, id)+1;\n\t\tif (pos<order.length)\n\t\t\treturn order[pos];\n\t\treturn null;\n\t},\n\tgetParentId:function(id){\n\t\treturn this.getItem(id).$parent;\n\t},\n\tgetFirstChildId:function(id){\n\t\tvar order = this.branch[id];\n\t\tif (order && order.length)\n\t\t\treturn order[0];\n\t\treturn null;\n\t},\n\tisBranch:function(parent){\n\t\treturn !!this.branch[parent];\n\t},\n\tgetBranchIndex:function(child){\n\t\tvar t = this.branch[this.pull[child].$parent];\n\t\treturn webix.PowerArray.find.call(t, child);\n\t},\n\t_set_child_scheme:function(parse_name){\n\n\t\tif (typeof parse_name == \"string\")\n\t\t\tthis._datadriver_child = function(obj){\n\t\t\t\tvar t = obj[parse_name];\n\t\t\t\tif (t)\n\t\t\t\t\tdelete obj[parse_name];\n\t\t\t\treturn t;\n\t\t\t};\n\t\telse \n\t\t\tthis._datadriver_child = parse_name;\n\t},\n\t_inner_parse:function(info, recs){ \n\t\tvar parent  = info.parent || 0;\n\t\t\n\t\tfor (var i=0; i<recs.length; i++){\n\t\t\t//get hash of details for each record\n\t\t\tvar temp = this.driver.getDetails(recs[i]);\n\t\t\tvar id = this.id(temp); \t//generate ID for the record\n\t\t\tvar update = !!this.pull[id]; //update mode\n\n\t\t\tif (update){\n\t\t\t\ttemp = webix.extend(this.pull[id], temp, true);\n\t\t\t\tif (this._scheme_update)\n\t\t\t\t\tthis._scheme_update(temp);\n\t\t\t} else {\n\t\t\t\tif (this._scheme_init)\n\t\t\t\t\tthis._scheme_init(temp);\n\t\t\t\tthis.pull[id]=temp;\n\t\t\t}\n\n\t\t\tthis._extraParser(temp, parent, 0, update, info.from ? info.from*1+i : 0);\n\t\t}\n\n\t\t//fix state of top item after data loading\n\t\tvar pItem = this.pull[parent] || {};\n\t\tvar pBranch = this.branch[parent] || [];\n\t\tpItem.$count = pBranch.length;\n\t\tdelete pItem.webix_kids;\n\n\t\tif (info.size && info.size != pBranch.length)\n\t\t\tpBranch[info.size] = null;\n\t},\n    _extraParser:function(obj, parent, level, update, from){\n    \t//processing top item\n    \tobj.$count = 0;\n\t//using soft check, as parent can be a both 0 and \"0\" ( second one in case of loading from server side ) \n    \tobj.$parent = parent!=\"0\"?parent:0;\n\t\tobj.$level = level||(parent!=\"0\"?this.pull[parent].$level+1:1);\n\t\t\n\t\tvar parent_branch = this.branch[obj.$parent];\n\t\tif (!parent_branch)\n\t\t\tparent_branch = this.branch[obj.$parent] = [];\n\t\t\tif (this._filter_branch)\n\t\t\t\tthis._filter_branch[obj.$parent] = parent_branch;\n\n\t\tif (!update){\n\t\t\tvar pos = from || parent_branch.length;\n\t\t\tparent_branch[pos] = obj.id;\n\t\t}\n\n    \tvar child = this._datadriver_child(obj);\n\n    \tif (obj.webix_kids){\n    \t\treturn (obj.$count = -1);\n    \t}\n\n    \tif (!child) //ignore childless\n    \t\treturn (obj.$count = 0);\t\n\n    \t//when loading from xml we can have a single item instead of an array\n    \tif (!webix.isArray(child))\n    \t\tchild = [child];\n    \t\n\n\t\tfor (var i=0; i < child.length; i++) {\n\t\t\t//extra processing to convert strings to objects\n\t\t\tvar item = webix.DataDriver.json.getDetails(child[i]);\n\t\t\tvar itemid = this.id(item);\n\t\t\tupdate = !!this.pull[itemid];\n\t\t\t\n\t\t\tif (update){\n\t\t\t\titem = webix.extend(this.pull[itemid], item, true);\n\t\t\t\tif (this._scheme_update)\n\t\t\t\t\tthis._scheme_update(item);\n\t\t\t} else {\n\t\t\t\tif (this._scheme_init)\n\t\t\t\t\tthis._scheme_init(item);\n\t\t\t\tthis.pull[itemid]=item;\n\t\t\t}\n\t\t\tthis._extraParser(item, obj.id, obj.$level+1, update);\n\t\t}\n\n\t\t//processing childrens\n\t\tvar branch = this.branch[obj.id];\n\t\tif (branch)\n\t\t\tobj.$count = branch.length;\n\t}, \n\t_sync_to_order:function(master){\n\t\tthis.order = webix.toArray();\n\t\tthis._sync_each_child(0, master);\n\t},\n\t_sync_each_child:function(start, master){\n\t\tvar branch = this.branch[start];\n\t\tfor (var i=0; i<branch.length; i++){\n\t\t\tvar id = branch[i];\n\t\t\tthis.order.push(id);\n\t\t\tvar item = this.pull[id];\n\t\t\tif (item){\n\t\t\t\tif (item.open){\n\t\t\t\t\tif (item.$count == -1)\n\t\t\t\t\t\tmaster.loadBranch(id);\n\t\t\t\t\telse if (item.$count)\n\t\t\t\t\t\tthis._sync_each_child(id, master);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tprovideApi:function(target,eventable){\n\t\tvar list = [\"getPrevSiblingId\",\"getNextSiblingId\",\"getParentId\",\"getFirstChildId\",\"isBranch\",\"getBranchIndex\",\"filterMode_setter\"];\n\t\tfor (var i=0; i < list.length; i++)\n\t\t\ttarget[list[i]]=this._methodPush(this,list[i]);\n\n\t\tif (!target.getIndexById)\n\t\t\twebix.DataStore.prototype.provideApi.call(this, target, eventable);\n\t},\n\tgetTopRange:function(){\n\t\treturn webix.toArray([].concat(this.branch[0])).map(function(id){\n\t\t\treturn this.getItem(id);\n\t\t}, this);\n\t},\n\teachChild:function(id, functor, master, all){\n\t\tvar branch = this.branch;\n\t\tif (all && this._filter_branch)\n\t\t\tbranch = this._filter_branch;\n\n\t\tvar stack = branch[id];\n\t\tif (stack)\n\t\t\tfor (var i=0; i<stack.length; i++)\n\t\t\t\tfunctor.call((master||this), this.getItem(stack[i]));\n\t},\n\teach:function(method,master, all, id){\n\t\tthis.eachChild((id||0), function(item){\n\t\t\tvar branch = this.branch;\n\n\t\t\tmethod.call((master||this), item);\n\n\t\t\tif (all && this._filter_branch)\n\t\t\t\tbranch = this._filter_branch;\n\n\t\t\tif (item && branch[item.id])\n\t\t\t\tthis.each(method, master, all, item.id);\n\t\t}, this, all);\n\t},\t\n\teachOpen:function(method,master, id){\n\t\tthis.eachChild((id||0), function(item){\n\t\t\tmethod.call((master||this), item);\n\t\t\tif (this.branch[item.id] && item.open)\n\t\t\t\tthis.eachOpen(method, master, item.id);\n\t\t});\n\t},\n\teachSubItem:function(id, functor){\n\t\tvar top = this.branch[id||0];\n\t\tif (top)\n\t\t\tfor (var i=0; i<top.length; i++){\n\t\t\t\tvar key = top[i];\n\t\t\t\tif (this.branch[key]){\n\t\t\t\t\tfunctor.call(this, this.getItem(key),true);\n\t\t\t\t\tthis.eachSubItem(key, functor);\n\t\t\t\t} else\n\t\t\t\t\tfunctor.call(this, this.getItem(key), false);\n\t\t\t}\n\t},\n\teachLeaf:function(id, functor){\n\t\tvar top = this.branch[id||0];\n\t\tif (top)\n\t\t\tfor (var i=0; i<top.length; i++){\n\t\t\t\tvar key = top[i];\n\t\t\t\tif (this.branch[key]){\n\t\t\t\t\tthis.eachLeaf(key, functor);\n\t\t\t\t} else\n\t\t\t\t\tfunctor.call(this, this.getItem(key), false);\n\t\t\t}\n\t},\n\t_sort_core:function(sort, order){\n\t\tvar sorter = this.sorting.create(sort);\n\t\tfor (var key in this.branch){\n\t\t\tvar bset =  this.branch[key];\n\t\t\tvar data = [];\n\n\t\t\tfor (var i=0; i<bset.length; i++)\n\t\t\t\tdata.push(this.pull[bset[i]]);\n\n\t\t\tdata.sort(sorter);\n\n\t\t\tfor (var i=0; i<bset.length; i++)\n\t\t\t\tdata[i] = data[i].id;\n\n\t\t\tthis.branch[key] = data;\n\t\t}\n\t\treturn order;\n\t},\n\tadd:function(obj, index, pid){\n\t\tvar refresh_parent = false;\n\n\t\tvar parent = this.getItem(pid||0);\n\t\tif(parent){\n\t\t\t//when adding items to leaf item - it need to be repainted\n\t\t\tif (!this.branch[parent.id])\n\t\t\t\trefresh_parent = true;\n\n\t\t\tparent.$count++;\n\t\t\t//fix for the adding into dynamic loading branch\n\t\t\t//dynamic branch has $count as -1\n\t\t\tif (!parent.$count) parent.$count = 1;\n\t\t}\n\n\t\tthis.branch[pid||0] = this.order = webix.toArray(this.branch[pid||0]);\n\n\t\tobj.$count = 0; \n\t\tobj.$level= (parent?parent.$level+1:1); \n\t\tobj.$parent = (parent?parent.id:0);\n\n\t\tif (this._filter_branch){\t//adding during filtering\n\t\t\tvar origin = this._filter_branch[pid||0];\n\t\t\t//newly created branch\n\t\t\tif (!origin) origin = this._filter_branch[pid] = this.order;\n\n\t\t\t//branch can be shared bettwen collections, ignore such cases\n\t\t\tif (this.order !== origin){\n\t\t\t\t//we can't know the location of new item in full dataset, making suggestion\n\t\t\t\t//put at end by default\n\t\t\t\tvar original_index = origin.length;\n\t\t\t\t//put at start only if adding to the start and some data exists\n\t\t\t\tif (!index && this.branch[pid||0].length)\n\t\t\t\t\toriginal_index = 0;\n\n\t\t\t\torigin = webix.toArray(origin);\n\t\t\t\torigin.insertAt(obj.id,original_index);\n\t\t\t}\n\t\t}\n\n\t\t//call original adding logic\n\t\tvar result = webix.DataStore.prototype.add.call(this, obj, index);\n\n\n\t\tif (refresh_parent)\n\t\t\tthis.refresh(pid);\n\n\t\treturn result;\n\t},\n\t_rec_remove:function(id, inner){\n\t\tvar obj = this.pull[id];\n        if(this.branch[obj.id] && this.branch[obj.id].length > 0){\n        \tvar branch = this.branch[id];\n            for(var i=0;i<branch.length;i++)\n                this._rec_remove(branch[i], true);\n        }\n        delete this.branch[id];\n\t\tif(this._filter_branch)\n\t\t\tdelete this._filter_branch[id];\n        delete this.pull[id];\n\t\tif (this._marks[id])\n\t\t\tdelete this._marks[id];\n\t},\n\t_filter_removed:function(pull, parentId, id){\n\t\tvar branch = pull[parentId];\n\t\tif (branch.length == 1 && branch[0] == id && parentId){\n\t\t\tdelete pull[parentId];\n\t\t} else\n\t\t\twebix.toArray(branch).remove(id);\n\t},\n\tremove:function(id){\n\t\t//id can be an array of IDs - result of getSelect, for example\n\t\tif (webix.isArray(id)){\n\t\t\tfor (var i=0; i < id.length; i++)\n\t\t\t\tthis.remove(id[i]);\n\t\t\treturn;\n\t\t}\n\n\t\twebix.assert(this.exists(id), \"Not existing ID in remove command\"+id);\n\t\tvar obj = this.pull[id];\n\t\tvar parentId = (obj.$parent||0);\n\n\t\tif (this.callEvent(\"onBeforeDelete\",[id]) === false) return false;\n\t\tthis._rec_remove(id);\n\t\tthis.callEvent(\"onAfterDelete\",[id]);\n\n\t\tvar parent = this.pull[parentId];\n\t\tthis._filter_removed(this.branch, parentId, id);\n\t\tif (this._filter_branch)\n\t\t\tthis._filter_removed(this._filter_branch, parentId, id);\n\n\t\tvar refresh_parent = 0;\n\t\tif (parent){\n\t\t\tparent.$count--;\n\t\t\tif (parent.$count<=0){\n\t\t\t\tparent.$count=0;\n\t\t\t\tparent.open = 0;\n\t\t\t\trefresh_parent = 1;\n\t\t\t}\n\t\t}\n\n\t\t//repaint signal\n\t\tthis.callEvent(\"onStoreUpdated\",[id,obj,\"delete\"]);\n\t\tif (refresh_parent)\n\t\t\tthis.refresh(parent.id);\n\t},\n\t/*\n\t\tserializes data to a json object\n\t*/\n\tgetBranch:function(id){\n\t\tvar out = [];\n\t\tvar items = (this._filter_branch || this.branch)[id];\n\t\tif (items)\n\t\t\tfor (var i = 0; i < items.length; i++) out[i] = this.pull[items[i]];\n\n\t\treturn out;\n\t},\n\tserialize: function(id, all){\n\t\tvar coll = this.branch;\n\t\t//use original collection of branches\n\t\tif (all && this._filter_branch) coll = this._filter_branch;\n\n\t\tvar ids = this.branch[id||0];\n\t\tvar result = [];\n\t\tfor(var i=0; i< ids.length;i++) {\n\t\t\tvar obj = this.pull[ids[i]];\n\t\t\tvar rel;\n\n\t\t\tif (this._scheme_serialize){\n\t\t\t\trel = this._scheme_serialize(obj);\n\t\t\t\tif (rel===false) continue;\n\t\t\t} else \n\t\t\t\trel = webix.copy(obj);\n\t\t\t\t\n\t\t\tif (this.branch[obj.id])\n\t\t\t\trel.data = this.serialize(obj.id, all);\n\n\t\t\tresult.push(rel);\n\t\t}\n\t\treturn result;\n\t}\n};\n\n\nwebix.TreeType={\n\tspace:function(obj,common){\n\t\tvar html = \"\";\n\t\tfor (var i=1; i<obj.$level; i++)\n\t\t\thtml += \"<div class='webix_tree_none'></div>\";\n\t\treturn html;\n\t},\n\ticon:function(obj,common){\n\t\tif (obj.$count){\n\t\t\tif (obj.open)\n\t\t\t\treturn \"<div class='webix_tree_open'></div>\";\n\t\t\telse\n\t\t\t\treturn \"<div class='webix_tree_close'></div>\";\n\t\t} else\n\t\t\treturn \"<div class='webix_tree_none'></div>\";\n\t},\n\tcheckbox:function(obj, common){\n\t\tif(obj.nocheckbox)\n\t\t   return \"\";\n        return \"<input type='checkbox' class='webix_tree_checkbox' \"+(obj.checked?\"checked\":\"\")+(obj.disabled?\" disabled\":\"\")+\">\";\n\t},\t\n\tfolder:function(obj, common){\n\t\tif (obj.icon)\n\t\t\treturn \"<div class='webix_tree_file webix_tree_\"+obj.icon+\"'></div>\";\n\n\t\tif (obj.$count){\n\t\t\tif (obj.open)\n\t\t\t\treturn \"<div class='webix_tree_folder_open'></div>\";\n\t\t\telse\n\t\t\t\treturn \"<div class='webix_tree_folder'></div>\";\n\t\t}\n\t\treturn \"<div class='webix_tree_file'></div>\";\n\t}\n};\n\nwebix.TreeAPI = {\n\topen: function(id, show) {\n\t\tif (!id) return;\n\t\t//ignore open for leaf items\n\t\tvar item = this.getItem(id);\n\t\tif (!item.$count || item.open) return;\n\n\t\tif (this.callEvent(\"onBeforeOpen\",[id])){\n\t\t\titem.open=true;\n\t\t\tthis.data.callEvent(\"onStoreUpdated\",[id, 0, \"branch\"]);\n\t\t\tthis.callEvent(\"onAfterOpen\",[id]);\n\t\t}\n\n\t\tif (show && id != \"0\")\n\t\t\tthis.open(this.getParentId(id), show);\n\t},\n\tclose: function(id) {\n\t\tif (!id) return;\n\t\tvar item = this.getItem(id);\n\t\tif (!item.open) return;\n\n\t\tif (this.callEvent(\"onBeforeClose\",[id])){\n\t\t\titem.open=false;\n\t\t\tthis.data.callEvent(\"onStoreUpdated\",[id, 0, \"branch\"]);\n\t\t\tthis.callEvent(\"onAfterClose\",[id]);\n\t\t}\n\t},\n\topenAll: function(id){\n\t\tthis.data.eachSubItem((id||0), function(obj, branch){\n\t\t\tif (branch)\n\t\t\t\tobj.open = true;\n\t\t});\n\t\tthis.data.refresh();\n\t},\n\tcloseAll: function(id){\n\t\tthis.data.eachSubItem((id||0), function(obj, branch){\n\t\t\tif (branch)\n\t\t\t\tobj.open = false;\n\t\t});\n\t\tthis.data.refresh();\n\t},\n\t_tree_check_uncheck:function(id,mode,e){\n\t\tif(this._settings.threeState)\n\t\t\treturn this._tree_check_uncheck_3(id,(mode !== null?mode:\"\"));\n\n\t\tvar value,\n\t\t\titem = this.getItem(id),\n\t\t\ttrg = (e? (e.target|| e.srcElement):null);\n\n\t\t//read actual value from HTML tag when possible\n\t\t//as it can be affected by dbl-clicks\n\t\tif(trg && trg.type == \"checkbox\")\n\t\t\tvalue = trg.checked?true:false;\n\t\telse\n\t\t\tvalue = (mode !== null?mode:!item.checked);\n\n\t\titem.checked = value;\n\t\tthis.callEvent(\"onItemCheck\", [id, item.checked, e]);\n\t},\n\tisBranchOpen:function(search_id){\n\t\tif (search_id == \"0\") return true;\n\n\t\tvar item = this.getItem(search_id);\n\t\tif (item.open)\n\t\t\treturn this.isBranchOpen(item.$parent);\n\t\treturn false;\n\t},\n\tgetOpenItems: function() {\n\t\tvar open = [];\n\t\tfor (var id in this.data.branch) {\n\t\t\tif (this.exists(id) && this.getItem(id).open)\n\t\t\t\topen.push(id);\n\t\t}\n\t\treturn open;\n\t},\n\tgetState: function(){\n\t\treturn {\n\t\t\topen: this.getOpenItems(),\n\t\t\tselect: this.getSelectedId(true)\n\t\t};\n\t},\n\t_repeat_set_state:function(tree, open){\n\t\tvar event = this.data.attachEvent(\"onStoreLoad\", function(){\n\t\t\ttree.setState.call(tree,open);\n\t\t\ttree.data.detachEvent(event);\n\t\t\ttree = null;\n\t\t});\n\t},\n\tsetState: function(state){\n\t\tvar repeat = false;\n\t\tvar dyn = false;\n\n\t\tif (state.open){\n\t\t\tthis.closeAll();\t\n\t\t\tvar open = state.open;\n\t\t\tfor (var i = 0; i < open.length; i++){\n\t\t\t\tvar item = this.getItem(open[i]);\n\t\t\t\tif (item && item.$count){\n\t\t\t\t\titem.open=true;\n\t\t\t\t\t//dynamic loading\n\t\t\t\t\tif (item.$count == -1){\n\t\t\t\t\t\t//call the same method after data loading\n\t\t\t\t\t\tthis._repeat_set_state(this, state);\n\t\t\t\t\t\tthis.refresh();\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t//end processing\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.refresh();\n\t\t}\n\n\n\t\tif (state.select && this.select){\t\t\t\n\t\t\tvar select = state.select;\n\t\t\tthis.unselect();\n\t\t\tfor (var i = 0; i < select.length; i++)\n\t\t\t\tif (this.exists(select[i]))\n\t\t\t\t\tthis.select(select[i], true);\n\t\t}\n\n\t\treturn 1;\n\t}\n};\n\nwebix.TreeClick = {\n\twebix_tree_open:function(e, id){\n\t\tthis.close(id);\n\t\treturn false;\n\t},\n\twebix_tree_close:function(e, id){\n\t\tthis.open(id);\n\t\treturn false;\n\t},\n\twebix_tree_checkbox:function(e,id){\n\t\tthis._tree_check_uncheck(id, null, e);\n\t\treturn false;\n\t}\n};\n\nwebix.TreeCollection = webix.proto({\n\tname:\"TreeCollection\",\n\t$init:function(){\n\t\twebix.extend(this.data, webix.TreeStore, true);\n\t\tthis.data.provideApi(this,true);\n\t\twebix.extend(this, webix.TreeDataMove, true);\n\t}\n}, webix.TreeDataLoader, webix.DataCollection);\n\n/*\n\tBehavior:DragItem - adds ability to move items by dnd\n\t\n\tdnd context can have next properties\n\t\tfrom - source object\n\t\tto - target object\n\t\tsource - id of dragged item(s)\n\t\ttarget - id of drop target, null for drop on empty space\n\t\tstart - id from which DND was started\n*/\n\n\n\t\t\n\nwebix.AutoScroll = {\n\t_auto_scroll:function(pos, id){\n\t\tvar yscroll = 1;\n\t\tvar xscroll = 0;\n\n\t\tvar scroll = this._settings.dragscroll;\n\t\tif (typeof scroll == \"string\"){\n\t\t\txscroll = scroll.indexOf(\"x\") != -1;\n\t\t\tyscroll = scroll.indexOf(\"y\") != -1;\n\t\t}\n\n\t\tvar data = this._body || this.$view;\n\t\tvar box = webix.html.offset(data);\n\n\t\tvar top = box.y;\n\t\tvar bottom = top + data.offsetHeight;\n\t\tvar left = box.x;\n\t\tvar right = left + data.offsetWidth;\n\n\t\tvar scroll = this.getScrollState();\n\t\tvar reset = false;\n\t\tvar sense = Math.max(this.type&&!isNaN(parseFloat(this.type.height))?this.type.height+5:0,40); //dnd auto-scroll sensivity\n\n\t\tif (yscroll){\n\t\t\tvar config = this._settings;\n\t\t\tif(config.topSplit){\n\t\t\t\tvar topSplitPos = this._cellPosition(this.getIdByIndex(config.topSplit-1), this.columnId(0));\n\t\t\t\ttop += topSplitPos.top + topSplitPos.height;\n\t\t\t}\n\n\t\t\tif (pos.y < (top + sense)){\n\t\t\t\tthis._auto_scrollTo(scroll.x, scroll.y-sense*2, pos);\n\t\t\t\treset = true;\n\t\t\t} else if (pos.y > bottom - sense){\n\t\t\t\tthis._auto_scrollTo(scroll.x, scroll.y+sense*2, pos);\n\t\t\t\treset = true;\n\t\t\t}\n\t\t}\n\n\t\tif (xscroll){\n\t\t\tif (pos.x < (left + sense)){\n\t\t\t\tthis._auto_scrollTo(scroll.x-sense*2, scroll.y, pos);\n\t\t\t\treset = true;\n\t\t\t} else if (pos.x > right - sense){\n\t\t\t\tthis._auto_scrollTo(scroll.x+sense*2, scroll.y, pos);\n\t\t\t\treset = true;\n\t\t\t}\n\t\t}\n\n\t\tif (reset)\n\t\t\tthis._auto_scroll_delay = webix.delay(this._auto_scroll, this, [pos], 100);\n\n\t},\n\t_auto_scrollTo: function(x,y,pos){\n\t\tif(this.callEvent(\"onBeforeAutoScroll\",[pos]))\n\t\t\tthis.scrollTo(x,y);\n\t}\n};\n\nwebix.DragOrder={\n\t_do_not_drag_selection:true,\n\t$drag:function(s,e){\n\t\tvar html = webix.DragItem.$drag.call(this,s,e);\n\t\tif (html){\n\t\t\tvar context = webix.DragControl.getContext(); \n\t\t\tif (this.getBranchIndex)\n\t\t\t\tthis._drag_order_stored_left = this._drag_order_complex?((this.getItem(context.start).$level) * 16):0;\n\t\t\tif (!context.fragile)\n\t\t\t\tthis.addCss(context.start, \"webix_transparent\");\n\t\t}\n\t\treturn html;\n\t},\n\t_getDragItemPos: function(pos,e){\n\t\treturn webix.DragItem._getDragItemPos(pos,e);\n\t},\n\t$dragPos:function(pos,e, node){\n\t\tvar box = webix.html.offset(this.$view);\n\t\tvar left = box.x + (this._drag_order_complex?( 1+this._drag_order_stored_left):1);\n\t\tvar top = pos.y;\n\t\tvar config = this._settings;\n\t\tvar xdrag = (config.layout == \"x\");\n\n\t\tif (xdrag){\n\t\t\ttop = box.y + (this._drag_order_complex?( + box.height - webix.ui.scrollSize - 1):1);\n\t\t\tleft = pos.x;\n\t\t}\n\n\t\tnode.style.display = 'none';\n\n\t\tvar html = document.elementFromPoint(left, top);\n\n\t\tif (html != this._last_sort_dnd_node){\n\t\t\tvar view = webix.$$(html);\n\t\t\t//this type of dnd is limited to the self\n\t\t\tif (view && view == this){\n\t\t\t\tvar id = this.locate(html, true);\n\t\t\t\t// sometimes 'mousedown' on item is followed by 'mousemove' on empty area and item caanot be located\n\t\t\t\tif(!id && webix.DragControl._saved_event)\n\t\t\t\t\tid = this.locate(webix.DragControl._saved_event, true);\n\t\t\t\t\n\t\t\t\tvar start_id = webix.DragControl.getContext().start;\n\t\t\t\tthis._auto_scroll_force = true;\n\t\t\t\tif (id){\n\n\t\t\t\t\tif (id != this._last_sort_dnd_node){\n\t\t\t\t\t\tif (id != start_id){\n\t\t\t\t\t\t\tvar details, index;\n\n\t\t\t\t\t\t\tif (this.getBranchIndex){\n\t\t\t\t\t\t\t\tdetails = { parent:this.getParentId(id) }; \n\t\t\t\t\t\t\t\tindex = this.getBranchIndex(id);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdetails = {};\n\t\t\t\t\t\t\t\tindex = this.getIndexById(id);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (this.callEvent(\"onBeforeDropOrder\",[start_id, index, e, details])){\n\t\t\t\t\t\t\t\tthis.move(start_id, index, this, details);\n\t\t\t\t\t\t\t\tthis._last_sort_dnd_node = id;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\twebix.DragControl._last = this._contentobj;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tid = \"$webix-last\";\n\t\t\t\t\tif (this._last_sort_dnd_node != id){\n\t\t\t\t\t\tif (!this.callEvent(\"onBeforeDropOrder\",[start_id, -1, e, { parent: 0} ])) return;\n\t\t\t\t\t\tthis._last_sort_dnd_node  = id;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tnode.style.display = 'block';\n\n\t\t\n\t\tif (xdrag){\n\t\t\tpos.y = box.y;\n\t\t\tpos.x = pos.x-18;\n\n\t\t\tif (pos.x < box.x)\n\t\t\t\tpos.x = box.x; \n\t\t\telse {\n\t\t\t\tvar max = box.x + this.$view.offsetWidth - 60;\n\t\t\t\tif (pos.x > max)\n\t\t\t\t\tpos.x = max;\n\t\t\t}\n\t\t} else {\n\t\t\tbox.y += this._header_height;\n\t\t\tpos.x = this._drag_order_stored_left||box.x;\n\t\t\tpos.y = pos.y-18;\n\t\t\n\t\t\tif (pos.y < box.y)\n\t\t\t\tpos.y = box.y; \n\t\t\telse {\n\t\t\t\tvar max = box.y + this.$view.offsetHeight - 60;\n\t\t\t\tif (pos.y > max)\n\t\t\t\t\tpos.y = max;\n\t\t\t}\n\t\t}\n\n\t\tif (this._auto_scroll_delay)\n\t\t\tthis._auto_scroll_delay = window.clearTimeout(this._auto_scroll_delay);\n\n\t\tthis._auto_scroll_delay = webix.delay(this._auto_scroll, this, [webix.html.pos(e), this.locate(e) || null],250);\n\n\t\t//prevent normal dnd landing checking\n\t\twebix.DragControl._skip = true;\n\t},\n\t$dragIn:function(){\n\t\treturn false;\n\t},\n\t$drop:function(s,t,e){\n\t\tif (this._auto_scroll_delay){\n\t\t\tthis._auto_scroll_force = null;\n\t\t\tthis._auto_scroll_delay = window.clearTimeout(this._auto_scroll_delay);\n\t\t}\n\n\t\tvar context = webix.DragControl.getContext();\n\t\tvar id = context.start;\n\t\tthis.removeCss(id, \"webix_transparent\");\n\n\t\tvar index = this.getIndexById(id);\n\t\tthis.callEvent(\"onAfterDropOrder\",[id, index , e]);\n\t\tif (context.fragile)\n\t\t\tthis.refresh();\n\t}\n};\nwebix.DragItem={\n\t//helper - defines component's container as active zone for dragging and for dropping\n\t_initHandlers:function(obj, source, target){\n\t\tif (!source) webix.DragControl.addDrop(obj._contentobj,obj,true);\n\t\tif (!target) webix.DragControl.addDrag(obj._contentobj,obj);\n\t\tthis.attachEvent(\"onDragOut\",function(a,b){ this.$dragMark(a,b); });\n\t\tthis.attachEvent(\"onBeforeAutoScroll\",function(){\n\t\t\tvar context = webix.DragControl.getContext();\n\t\t\treturn !!(webix.DragControl._active && context && (context.to === this || this._auto_scroll_force));\n\t\t});\n\t},\n\tdrag_setter:function(value){\n\t\tif (value){\n\t\t\twebix.extend(this, webix.AutoScroll, true);\n\t\t\tif (value == \"order\")\n\t\t\t\twebix.extend(this, webix.DragOrder, true);\n\t\t\tif (value == \"inner\")\n\t\t\t\tthis._inner_drag_only = true;\n\n\t\t\tthis._initHandlers(this, value == \"source\", value == \"target\");\n\t\t\tdelete this.drag_setter;\t//prevent double initialization\n\t\t}\n\t\treturn value;\n\t},\n\t/*\n\t\ts - source html element\n\t\tt - target html element\n\t\td - drop-on html element ( can be not equal to the target )\n\t\te - native html event \n\t*/\n\t//called when drag moved over possible target\n\t$dragIn:function(s,t,e){\n\t\tvar id = this.locate(e) || null;\n\t\tvar context = webix.DragControl._drag_context;\n\n\t\t//in inner drag mode - ignore dnd from other components\n\t\tif ((this._inner_drag_only || context.from._inner_drag_only) && context.from !== this) return false;\n\n\t\tvar to = webix.DragControl.getMaster(t);\n\t\t//previous target\n\t\tvar html = (this.getItemNode(id, e)||this._dataobj);\n\t\t//prevent double processing of same target\n\t\tif (html == webix.DragControl._landing) return html;\n\t\tcontext.target = id;\n\t\tcontext.to = to;\n\n\t\tif (this._auto_scroll_delay)\n\t\t\tthis._auto_scroll_delay = window.clearTimeout(this._auto_scroll_delay);\n\n\t\tthis._auto_scroll_delay = webix.delay(function(pos,id){\n\t\t\tthis._drag_pause(id);\n\t\t\tthis._auto_scroll(pos,id);\n\t\t}, this, [webix.html.pos(e), id], 250);\n\n\t\tif (!this.$dropAllow(context, e)  || !this.callEvent(\"onBeforeDragIn\",[context, e])){\n\t\t\tcontext.to = context.target = null;\n\t\t\tif (this._auto_scroll_delay)\n\t\t\t\tthis._auto_scroll_delay = window.clearTimeout(this._auto_scroll_delay);\n\t\t\treturn null;\n\t\t}\n\t\t//mark target only when landing confirmed\n\t\tthis.$dragMark(context,e);\n\t\treturn html;\n\t},\n\t$dropAllow:function(){\n\t\treturn true;\n\t},\n\t_drag_pause:function(id){\n\t\t//may be reimplemented in some components\n\t\t// tree for example\n\t},\n\t_target_to_id:function(target){\n\t\treturn target && typeof target === \"object\" ? target.toString() : target;\n\t},\n\t//called when drag moved out from possible target\n\t$dragOut:function(s,t,n,e){ \n\t\tvar id = (this._viewobj.contains(n) ? this.locate(e): null) || null;\n\t\tvar context = webix.DragControl._drag_context;\n\n\t\t//still over previous target\n\t\tif ((context.target||\"\").toString() == (id||\"\").toString()) return null;\n\t\tif (this._auto_scroll_delay){\n\t\t\tthis._auto_scroll_force = null;\n\t\t\tthis._auto_scroll_delay = window.clearTimeout(this._auto_scroll_delay);\n\t\t}\n\n\t\t//unmark previous target\n\t\tcontext.target = context.to = null;\n\t\tthis.callEvent(\"onDragOut\",[context,e]);\n\t\treturn null;\n\t},\n\t//called when drag moved on target and button is released\n\t$drop:function(s,t,e){ \n\t\tif (this._auto_scroll_delay)\n\t\t\tthis._auto_scroll_delay = window.clearTimeout(this._auto_scroll_delay);\n\n\t\tvar context = webix.DragControl._drag_context;\n\t\t//finalize context details\n\t\tcontext.to = this;\n\t\tvar target = this._target_to_id(context.target);\n\n\t\tif (this.getBranchIndex){\n\t\t\tif (target){\n\t\t\t\tcontext.parent = this.getParentId(target);\n\t\t\t\tcontext.index = this.getBranchIndex(target);\n\t\t\t}\n\t\t} else\n\t\t\tcontext.index = target?this.getIndexById(target):this.count();\n\n\t\t//unmark last target\n\t\tthis.$dragMark({}, e);\n\n\t\tif( context.from && context.from != context.to && context.from.callEvent ){\n\t\t\tcontext.from.callEvent(\"onBeforeDropOut\", [context,e]);\n\t\t}\n\n\t\tif (!this.callEvent(\"onBeforeDrop\",[context,e])) return;\n\t\t//moving\n\t\tthis._context_to_move(context,e);\n\t\t\n\t\tthis.callEvent(\"onAfterDrop\",[context,e]);\n\t},\n\t_context_to_move:function(context,e){\n\t\twebix.assert(context.from, \"Unsopported d-n-d combination\");\n\t\tif (context.from){\t//from different component\n\t\t\tvar details = { parent: context.parent, mode: context.pos };\n\t\t\tcontext.from.move(context.source,context.index,context.to, details);\n\t\t}\n\t},\n\t_getDragItemPos: function(pos,e){\n\t\tif (this.getItemNode){\n\t\t\tvar id = this.locate(e, true);\n\t\t\t//in some case, node may be outiside of dom ( spans in datatable for example )\n\t\t\t//so getItemNode can return null\n\t\t\tvar node = id ? this.getItemNode(id) : null;\n\t\t\treturn node ? webix.html.offset(node) : node;\n\t\t}\n\t},\n\t//called when drag action started\n\t$drag:function(s,e){\n\t\tvar id = this.locate(e, true);\n\t\tif (id){\n\t\t\tvar list = [id];\n\n\t\t\tif (this.getSelectedId && !this._do_not_drag_selection){ //has selection model\n\t\t\t\t//if dragged item is one of selected - drag all selected\n\t\t\t\tvar selection = this.getSelectedId(true, true);\t\n\n\t\t\t\tif (selection && selection.length > 1 && webix.PowerArray.find.call(selection,id)!=-1){\n\t\t\t\t\tvar hash = {}; \n\t\t\t\t\tvar list = [];\n\t\t\t\t\tfor (var i=0;i<selection.length; i++)\n\t\t\t\t\t\thash[selection[i]]=true;\n\t\t\t\t\tfor (var i = 0; i<this.data.order.length; i++){\n\t\t\t\t\t\tvar hash_id = this.data.order[i];\n\t\t\t\t\t\tif (hash[hash_id])\n\t\t\t\t\t\t\tlist.push(hash_id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t//save initial dnd params\n\t\t\tvar context = webix.DragControl._drag_context= { source:list, start:id };\n\t\t\tcontext.fragile = (this.addRowCss && webix.env.touch && ( webix.env.isWebKit || webix.env.isFF ));\n\t\t\tcontext.from = this;\n\t\t\t\n\t\t\tif (this.callEvent(\"onBeforeDrag\",[context,e])){\n\t\t\t\tif (webix.Touch)\n\t\t\t\t\twebix.Touch._start_context = null;\n\n\t\t\t\t//set drag representation\n\t\t\t\treturn context.html||this.$dragHTML(this.getItem(id), e);\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t},\n\t$dragHTML:function(obj, e){\n\t\treturn this._toHTML(obj);\n\t},\n\t$dragMark:function(context, ev){\n\t\tvar target = null;\n\t\tif (context.target)\n\t\t\ttarget = this._target_to_id(context.target);\n\n\t\t//touch webkit will stop touchmove event if source node removed\n\t\t//datatable can't repaint rows without repainting\n\t\tif (this._marked && this._marked != target){\n\t\t\tif (!context.fragile) this.removeCss(this._marked, \"webix_drag_over\");\n\t\t\tthis._marked = null;\n\t\t}\n\n\t\tif (!this._marked && target){\n\t\t\tthis._marked = target;\n\t\t\tif (!context.fragile) this.addCss(target, \"webix_drag_over\");\n\t\t\treturn target;\n\t\t}\n\t\t\n\t\tif (context.to){\n\t\t\treturn true;\n\t\t}else\n\t\t\treturn false;\n\t}\n};\n\n\n\nwebix.Group = {\n\t$init:function(){\n\t\twebix.extend(this.data, webix.GroupStore);\n\t\t//in case of plain store we need to remove store original dataset\n\t\tthis.data.attachEvent(\"onClearAll\",webix.bind(function(){\n\t\t\tthis.data._not_grouped_order = this.data._not_grouped_pull = null;\n\t\t\tthis._group_level_count = 0;\n\t\t},this));\n\t},\n\tgroup:function(config){\n\t\tthis.data.ungroup(true);\n\t\tthis.data.group(config);\n\t},\n\tungroup:function(skipRender){\n\t\tthis.data.ungroup(skipRender);\n\t}\n};\n\nwebix.GroupMethods = {\n\tsum:function(property, data){\n\t\tdata = data || this;\n\t\tvar summ = 0;\n\t\tfor (var i = 0; i < data.length; i++)\n\t\t\tsumm+=property(data[i])*1;\n\n\t\treturn summ;\n\t},\n\tmin:function(property, data){\n\t\tdata = data || this;\n\t\tvar min = Infinity;\n\n\t\tfor (var i = 0; i < data.length; i++)\n\t\t\tif (property(data[i])*1 < min) min = property(data[i])*1;\n\n\t\treturn min*1;\n\t},\n\tmax:function(property, data){\n\t\tdata = data || this;\n\t\tvar max = -Infinity;\n\n\t\tfor (var i = 0; i < data.length; i++)\n\t\t\tif (property(data[i])*1 > max) max = property(data[i])*1;\n\n\t\treturn max*1;\n\t},\n\tcount:function(property, data){\n\t\tvar count = 0;\n\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\tvar some = property(data[i]);\n\t\t\tif (some !== null && typeof some !== \"undefined\")\n\t\t\t\tcount++;\n\t\t}\n\t\treturn count;\n\t},\n\tany:function(property, data){\n\t\treturn property(data[0]);\n\t},\n\tstring:function(property, data){\n\t\treturn property.$name;\n\t}\n};\n\nwebix.GroupStore = {\n\t$init:function(){\n\t\tthis.attachEvent(\"onClearAll\", this._reset_groups);\n\t},\n\t_reset_groups:function(){\n\t\tthis._not_grouped_order = this._not_grouped_pull = null;\n\t\tthis._group_level_count = 0;\n\t},\n\tungroup:function(skipRender){\n\t\tif (this.getBranchIndex)\n\t\t\treturn this._ungroup_tree.apply(this, arguments);\n\n\t\tif (this._not_grouped_order){\n\t\t\tthis.order = this._not_grouped_order;\n\t\t\tthis.pull = this._not_grouped_pull;\n\t\t\tthis._not_grouped_pull = this._not_grouped_order = null;\n\t\t\tif(!skipRender)\n\t\t\t\tthis.callEvent(\"onStoreUpdated\",[]);\n\t\t}\n\n\t},\n\t_group_processing:function(scheme){\n\t\tthis.blockEvent();\n\t\tthis.group(scheme);\n\t\tthis.unblockEvent();\n\t},\n\t_group_prop_accessor:function(val){\n\t\tif (typeof val == \"function\")\n\t\t\treturn val;\n\t\tvar acc = function(obj){ return obj[val]; };\n\t\tacc.$name = val;\n\t\treturn acc;\n\t},\t\n\tgroup:function(stats){ \n\t\tif (this.getBranchIndex)\n\t\t\treturn this._group_tree.apply(this, arguments);\n\n\t\tvar key = this._group_prop_accessor(stats.by);\n\t\tif (!stats.map[key])\n\t\t\tstats.map[key] = [key, this._any];\n\t\t\t\n\t\tvar groups = {};\n\t\tvar labels = [];\n\t\tthis.each(function(data){\n\t\t\tvar current = key(data);\n\t\t\tif (!groups[current]){\n\t\t\t\tlabels.push({ id:current, $group:true, $row:stats.row });\n\t\t\t\tgroups[current] = webix.toArray();\n\t\t\t}\n\t\t\tgroups[current].push(data);\n\t\t});\n\t\tfor (var prop in stats.map){\n\t\t\tvar functor = (stats.map[prop][1]||\"any\");\n\t\t\tvar property = this._group_prop_accessor(stats.map[prop][0]);\n\t\t\tif (typeof functor != \"function\"){\n\t\t\t\twebix.assert(webix.GroupMethods[functor], \"unknown grouping rule: \"+functor);\n\t\t\t\tfunctor = webix.GroupMethods[functor];\n\t\t\t}\n\n\t\t\tfor (var i=0; i < labels.length; i++) {\n\t\t\t\tlabels[i][prop]=functor.call(this, property, groups[labels[i].id]);\n\t\t\t}\n\t\t}\n\t\t\t\n\t\tthis._not_grouped_order = this.order;\n\t\tthis._not_grouped_pull = this.pull;\n\t\t\n\t\tthis.order = webix.toArray();\n\t\tthis.pull = {};\n\t\tfor (var i=0; i < labels.length; i++){\n\t\t\tvar id = this.id(labels[i]);\n\t\t\tthis.pull[id] = labels[i];\n\t\t\tthis.order.push(id);\n\t\t\tif (this._scheme_init)\n\t\t\t\tthis._scheme_init(labels[i]);\n\t\t}\n\t\t\n\t\tthis.callEvent(\"onStoreUpdated\",[]);\n\t},\n\t_group_tree:function(input, parent){\n\t\tthis._group_level_count = (this._group_level_count||0) + 1;\n\n\t\t//supports simplified group by syntax\n\t\tvar stats;\n\t\tif (typeof input == \"string\"){\n\t\t\tstats = { by:this._group_prop_accessor(input), map:{} };\n\t\t\tstats.map[input] = [input];\n\t\t} else if (typeof input == \"function\"){\n\t\t\tstats = { by:input, map:{} };\n\t\t} else\n\t\t\tstats = input;\n\t\t\n\t\t//prepare\n\t\tvar level;\n\t\tif (parent)\n\t\t\tlevel = this.getItem(parent).$level;\n\t\telse {\n\t\t\tparent  = 0;\n\t\t\tlevel = 0;\n\t\t}\n\t\t\n\t\tvar order = this.branch[parent];\n\t\tvar key = this._group_prop_accessor(stats.by);\n\t\t\n\t\t//run\n\t\tvar topbranch = [];\n\t\tvar labels = [];\n\t\tfor (var i=0; i<order.length; i++){\n\t\t\tvar data = this.getItem(order[i]);\n\t\t\tvar current = key(data);\n\t\t\tvar current_id = level+\"$\"+current;\n\t\t\tvar ancestor = this.branch[current_id];\n\n\t\t\tif (!ancestor){\n\t\t\t\tvar newitem = this.pull[current_id] = { id:current_id, value:current, $group:true, $row:stats.row};\n\t\t\t\tif (this._scheme_init)\n\t\t\t\t\tthis._scheme_init(newitem);\n\t\t\t\tlabels.push(newitem);\n\t\t\t\tancestor = this.branch[current_id] = [];\n\t\t\t\tancestor._formath = [];\n\t\t\t\ttopbranch.push(current_id);\n\t\t\t}\n\t\t\tancestor.push(data.id);\n\t\t\tancestor._formath.push(data);\n\t\t}\n\n\t\tthis.branch[parent] = topbranch;\n\t\tfor (var prop in stats.map){\n\t\t\tvar functor = (stats.map[prop][1]||\"any\");\n\t\t\tvar property = this._group_prop_accessor(stats.map[prop][0]);\n\t\t\tif (typeof functor != \"function\"){\n\t\t\t\twebix.assert(webix.GroupMethods[functor], \"unknown grouping rule: \"+functor);\n\t\t\t\tfunctor = webix.GroupMethods[functor];\n\t\t\t}\n\t\t\t\t\n\t\t\tfor (var i=0; i < labels.length; i++)\n\t\t\t\tlabels[i][prop]=functor.call(this, property, this.branch[labels[i].id]._formath);\n\t\t}\n\n\t\tfor (var i=0; i < labels.length; i++){\n\t\t\tvar group = labels[i];\n\n\t\t\tif (this.hasEvent(\"onGroupCreated\"))\n\t\t\t\tthis.callEvent(\"onGroupCreated\", [group.id, group.value, this.branch[group.id]._formath]);\n\n\t\t\tif (stats.footer){\n\t\t\t\tvar id = \"footer$\"+group.id;\n\t\t\t\tvar footer = this.pull[id] = { id:id, $footer:true, value: group.value, $level:level, $count:0, $parent:group.id, $row:stats.footer.row};\n\t\t\t\tfor (var prop in stats.footer){\n\t\t\t\t\tvar functor = (stats.footer[prop][1]||\"any\");\n\t\t\t\t\tvar property = this._group_prop_accessor(stats.footer[prop][0]);\n\t\t\t\t\tif (typeof functor != \"function\"){\n\t\t\t\t\t\twebix.assert(webix.GroupMethods[functor], \"unknown grouping rule: \"+functor);\n\t\t\t\t\t\tfunctor = webix.GroupMethods[functor];\n\t\t\t\t\t}\n\n\t\t\t\t\tfooter[prop]=functor.call(this, property, this.branch[labels[i].id]._formath);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.branch[group.id].push(footer.id);\n\t\t\t\tthis.callEvent(\"onGroupFooter\", [footer.id, footer.value, this.branch[group.id]._formath]);\n\t\t\t}\n\n\t\t\tdelete this.branch[group.id]._formath;\n\t\t}\n\t\t\t\n\n\t\tthis._fix_group_levels(topbranch, parent, level+1);\n\t\t\t\n\t\tthis.callEvent(\"onStoreUpdated\",[]);\n\t},\n\t_ungroup_tree:function(skipRender, parent, force){\n\t\t//not grouped\n\t\tif (!force && !this._group_level_count) return;\n\t\tthis._group_level_count = Math.max(0, this._group_level_count -1 );\n\n\t\tparent = parent || 0;\n\t\tvar order = [];\n\t\tvar toporder = this.branch[parent];\n\t\tfor (var i=0; i<toporder.length; i++){\n\t\t\tvar id = toporder[i];\n\t\t\tvar branch = this.branch[id];\n\t\t\tif (branch)\n\t\t\t\torder = order.concat(branch);\n\n\t\t\tdelete this.pull[id];\n\t\t\tdelete this.branch[id];\n\t\t}\n\n\t\tthis.branch[parent] = order;\n\t\tfor (var i = order.length - 1; i >= 0; i--) {\n\t\t\tif (this.pull[order[i]].$footer)\n\t\t\t\torder.splice(i,1);\n\t\t}\n\t\tthis._fix_group_levels(order, 0, 1);\n\n\t\tif (!skipRender)\n\t\t\tthis.callEvent(\"onStoreUpdated\",[]);\n\t},\n\t_fix_group_levels:function(branch, parent, level){\n\t\tif (parent)\n\t\t\tthis.getItem(parent).$count = branch.length;\n\n\t\tfor (var i = 0; i < branch.length; i++) {\n\t\t\tvar item = this.pull[branch[i]];\n\t\t\titem.$level = level;\n\t\t\titem.$parent = parent;\n\t\t\tvar next = this.branch[item.id];\n\t\t\tif (next)\n\t\t\t\tthis._fix_group_levels(next, item.id, level+1);\n\t\t}\n\t}\n};\nwebix.clipbuffer = {\n\n\t_area: null,\n\t_blur_id: null,\n\t_ctrl: 0,\n\n\t/*! create textarea or returns existing\n\t **/\n\tinit: function() {\n\t\t// returns existing textarea\n\t\tif (this._area !== null)\n\t\t\treturn this._area;\n\n\t\twebix.destructors.push({ obj: this });\n\t\t// creates new textarea\n\t\tthis._area = document.createElement('textarea');\n\t\tthis._area.className = \"webix_clipbuffer\";\n\t\tthis._area.setAttribute(\"webixignore\", 1);\n\t\tdocument.body.appendChild(this._area);\n\n\t\twebix.event(document.body, 'keydown', webix.bind(function(e){\n\t\t\tvar key = e.keyCode;\n\t\t\tvar ctrl = !!(e.ctrlKey || e.metaKey);\n\t\t\tif (key === 86 && ctrl)\n\t\t\t\twebix.delay(this._paste, this, [e], 100);\n\t\t}, this));\n\n\t\treturn this._area;\n\t},\n\tdestructor: function(){\n\t\tthis._area = null;\n\t},\n\t/*! set text into buffer\n\t **/\n\tset: function(text) {\n\t\tthis.init();\n\t\tthis._area.value = text;\n\t\tthis.focus();\n\t},\n\t/*! select text in textarea\n\t **/\n\tfocus: function() {\n\t\t// if there is native browser selection, skip focus\n\t\tif(!this._isSelectRange()){\n\t\t\tthis.init();\n\t\t\tthis._area.focus();\n\t\t\tthis._area.select();\n\t\t}\n\n\t},\n\t/*! checks document selection\n\t **/\n\t_isSelectRange: function() {\n\t\tvar text = \"\";\n\t\tif (typeof window.getSelection != \"undefined\") {\n\t\t\ttext = window.getSelection().toString();\n\t\t} else if (typeof document.selection != \"undefined\" && document.selection.type == \"Text\") {\n\t\t\ttext = document.selection.createRange().text;\n\t\t}\n\t\treturn !!text;\n\t},\n\t/*! process ctrl+V pressing\n\t **/\n\t_paste: function(e) {\n\t\tvar trg = e.target || e.srcElement;\n\t\tif (trg === this._area) {\n\t\t\tvar text = this._area.value;\n\t\t\tvar last_active = webix.UIManager.getFocus();\n\t\t\tif (last_active && (!last_active.getEditor || !last_active.getEditor())){\n\t\t\t\tlast_active.callEvent(\"onPaste\", [text]);\n\t\t\t\tthis._area.select();\n\t\t\t}\n\t\t}\n\t}\n};\n\n\nwebix.CopyPaste = {\n\tclipboard_setter: function(value) {\n\t\tif (value === true || value === 1) value = \"modify\";\n\t\tthis.attachEvent(\"onAfterSelect\", function(id) {\n\t\t\tif (!this.getEditor || !this.getEditor()){\n\t\t\t\tvar item = this.getItem(id);\n\t\t\t\tvar text = this.type.templateCopy(item);\n\t\t\t\twebix.clipbuffer.set(text, this);\n\t\t\t\twebix.clipbuffer.focus();\n\t\t\t\twebix.UIManager.setFocus(this);\n\t\t\t}\n\t\t});\n\t\tthis.attachEvent(\"onPaste\", function(text) {\n\t\t\tif (!webix.isUndefined(this._paste[this._settings.clipboard]))\n\t\t\t\tthis._paste[this._settings.clipboard].call(this, text);\n\t\t});\n\t\tthis.attachEvent(\"onFocus\", function() {\n\t\t\twebix.clipbuffer.focus();\n\t\t});\n\t\t// solution for clicks on selected items\n\t\tthis.attachEvent(\"onItemClick\",function(id){\n\t\t\tif(!this._selected || this._selected.find(id)!==-1){\n\t\t\t\twebix.clipbuffer.focus();\n\t\t\t\twebix.UIManager.setFocus(this);\n\t\t\t}\n\t\t});\n\t\treturn value;\n\t},\n\t_paste: {\n\t\t// insert new item with pasted value\n\t\tinsert: function(text) {\n\t\t\tthis.add({ value: text });\n\t\t},\n\t\t// change value of each selected item\n\t\tmodify: function(text) {\n\t\t\tvar sel = this.getSelectedId(true);\n\t\t\tfor (var i = 0; i < sel.length; i++) {\n\t\t\t\tthis.getItem(sel[i]).value = text;\n\t\t\t\tthis.refresh(sel[i]);\n\t\t\t}\n\t\t},\n\t\t// do nothing\n\t\tcustom: function(text) {}\n\t},\n\ttemplateCopy_setter: function(value) {\n\t\tthis.type.templateCopy = webix.template(value);\n\t},\n\ttype:{\n\t\ttemplateCopy: function(item) {\n\t\t\treturn this.template(item);\n\t\t}\n\t}\n};\n\n\nwebix.KeysNavigation = {\n    $init:function(){\n        if(this.getSelectedId){\n            this.attachEvent(\"onAfterRender\", this._set_focusable_item);\n            this.attachEvent(\"onAfterSelect\", webix.once(function(){\n                if(this.count()>1){\n                    var node =  this._dataobj.querySelector(\"[\"+this._id+\"]\");\n                    if(node) node.setAttribute(\"tabindex\", \"-1\");\n                }\n            }));\n        }\n    },\n    _set_focusable_item:function(){\n        var sel = this.getSelectedId(true);\n        if(!sel.length || !this.getItemNode(sel[0])){\n            var node =  this._dataobj.querySelector(\"[\"+this._id+\"]\");\n            if(node) node.setAttribute(\"tabindex\", \"0\");\n        }\n    },\n    _navigation_helper:function(mode){\n        return function(view, e){\n            var tag = (e.srcElement || e.target);\n\n            //ignore clipboard listener\n            if (!tag.getAttribute(\"webixignore\")){\n                //ignore hotkeys if focus in the common input\n                //to allow normal text edit operations\n                var name = tag.tagName;\n                if (name == \"INPUT\" || name == \"TEXTAREA\" || name == \"SELECT\") return true;\n            }\n\n            if (view && view.moveSelection && view.config.navigation && !view._in_edit_mode){\n                webix.html.preventEvent(e);\n                return view.moveSelection(mode, e.shiftKey);\n            }\n            return true;\n        };\n    },\n    moveSelection:function(mode, shift){\n        var config = this._settings;\n        if(config.disabled) return;\n        //get existing selection\n        var selected = this.getSelectedId(true);\n        var x_layout = (this.count && (config.layout ==\"x\" || config.xCount > 1));\n\n\n         if((mode == \"right\" || mode == \"left\") && this._parent_menu){\n            var parent = webix.$$(this._parent_menu);\n          \n            parent._hide_sub_menu(true);\n            if(parent.config.layout === \"x\")\n                parent.moveSelection(mode);\n            else\n                webix.UIManager.setFocus(parent);\n            return;\n        }\n\n        if (!selected.length && this.count()){\n            if (mode == \"down\" || (mode == \"right\" && x_layout)) mode = \"top\";\n            else if (mode == \"up\" || (mode == \"left\" && x_layout)) mode = \"bottom\";\n            else return;\n            selected = [this.getFirstId()];\n        }\n\n        if (selected.length == 1){  //if we have a selection\n            selected = selected[0];\n            var prev = selected;\n\n            if (mode == \"left\" && this.close)\n                return this.close(selected);\n            if (mode == \"right\" && this.open)\n                return this.open(selected);\n\n            else if (mode == \"top\") {\n                selected = this.getFirstId();\n            } else if (mode == \"bottom\") {\n                selected = this.getLastId();\n            } else if (mode == \"up\" || mode == \"left\" || mode == \"pgup\") {\n                var index = this.getIndexById(selected);\n                var step = mode == \"pgup\" ? 10 : 1;\n                selected = this.getIdByIndex(Math.max(0, index-step));\n            } else if (mode == \"down\" || mode == \"right\" || mode == \"pgdown\") {\n                var index = this.getIndexById(selected);\n                var step = mode == \"pgdown\" ? 10 : 1;\n                selected = this.getIdByIndex(Math.min(this.count()-1, index+step));\n            } else {\n                webix.assert(false, \"Not supported selection moving mode\");\n                return;\n            }\n\n            if(this._skip_item)\n                selected = this._skip_item(selected, prev, mode);\n\n            this.showItem(selected);\n            this.select(selected);\n\n            if(this.getSubMenu && this.getSubMenu(selected))\n                this._mouse_move_activation(selected, this.getItemNode(selected));\n\n            if(!this.config.clipboard){\n                var node = this.getItemNode(selected);\n                if(node) node.focus();\n            }\n        }\n        return false;\n    },\n    navigation_setter:function(value){\n        //using global flag to apply hotkey only once\n        if (value && !webix.UIManager._global_nav_grid_hotkeys){\n            webix.UIManager._global_nav_grid_hotkeys = true;\n            //hotkeys will react on any component but will not work in edit mode\n            //you can define moveSelection method to handle navigation keys\n            webix.UIManager.addHotKey(\"up\",         this._navigation_helper(\"up\"));\n            webix.UIManager.addHotKey(\"down\",       this._navigation_helper(\"down\"));\n            webix.UIManager.addHotKey(\"shift+up\",   this._navigation_helper(\"up\"));\n            webix.UIManager.addHotKey(\"shift+down\", this._navigation_helper(\"down\"));\n            webix.UIManager.addHotKey(\"shift+right\",   this._navigation_helper(\"right\"));\n            webix.UIManager.addHotKey(\"shift+left\", this._navigation_helper(\"left\"));\n            webix.UIManager.addHotKey(\"pageup\", \tthis._navigation_helper(\"pgup\"));\n            webix.UIManager.addHotKey(\"pagedown\",   this._navigation_helper(\"pgdown\"));\n            webix.UIManager.addHotKey(\"home\", \t    this._navigation_helper(\"top\"));\n            webix.UIManager.addHotKey(\"end\", \t\tthis._navigation_helper(\"bottom\"));\n            webix.UIManager.addHotKey(\"right\", \t    this._navigation_helper(\"right\"));\n            webix.UIManager.addHotKey(\"left\",\t\tthis._navigation_helper(\"left\"));\n\n        }\n\n        return value;\n    }\n};\n\n\n\nwebix.protoUI({\n\tname:\"tree\",\n\tdefaults:{\n\t\tscroll:\"a\",\n\t\tnavigation:true\n\t},\n\t$init:function(){\n\t\tthis._viewobj.className += \" webix_tree\";\n\n\t\t//map API of DataStore on self\n\t\twebix.extend(this.data, webix.TreeStore, true);\n\t\twebix.extend(this.on_click, webix.TreeClick);\n\t\tthis.attachEvent(\"onAfterRender\", this._refresh_scroll);\n\t\tthis.attachEvent(\"onPartialRender\", this._refresh_scroll);\n\t\tthis.data.provideApi(this,true);\n\t\tthis._viewobj.setAttribute(\"role\", \"tree\");\n\n\t},\n\t//attribute , which will be used for ID storing\n\t_id:\"webix_tm_id\",\n\t//supports custom context menu\n\ton_context:{},\n\ton_dblclick:{\n\t\twebix_tree_checkbox:function(){\n\t\t\tif(this.on_click.webix_tree_checkbox)\n\t\t\t\treturn this.on_click.webix_tree_checkbox.apply(this,arguments);\n\t\t}\n\t},\n\t$fixEditor: function(editor) {\n\t\tvar item = this.getItemNode(editor.id).querySelector(\"span\");\n\t\tif (item){\n\t\t\tif (item.innerHTML === \"\") item.innerHTML =\"&nbsp;\";\n\t\t\tvar padding = 10;\n\t\t\tvar pos = item.offsetLeft;\n\t\t\teditor.node.style.width = this.$view.scrollWidth - pos - padding + \"px\";\n\t\t\teditor.node.style.marginLeft = pos + \"px\";\n\t\t\teditor.node.style.left = \"0px\";\n\t\t}\n\t},\n\t//css class to action map, for onclick event\n\ton_click:{\n\t\twebix_tree_item:function(e, id, node){\n\t\t\tif(this._settings.activeTitle){\n\t\t\t\tvar item = this.getItem(id);\n\t\t\t\tif(item.open)\n\t\t\t\t\tthis.close(id);\n\t\t\t\telse\n\t\t\t\t\tthis.open(id);\n\t\t\t}\n\t\t\tif (this._settings.select){\n\t\t\t\tif (this._settings.select==\"multiselect\" || this._settings.multiselect){\n\t\t\t\t\tif (this._settings.multiselect == \"level\"){\n\t\t\t\t\t\t//allow only selection on the same level\n\t\t\t\t\t\tvar select = this.getSelectedId(true)[0];\n\t\t\t\t\t\tif (select && this.getParentId(id) != this.getParentId(select)) \n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis.select(id, false, (e.ctrlKey || e.metaKey || (this._settings.multiselect == \"touch\")), e.shiftKey); \t//multiselection\n\t\t\t\t} else\n\t\t\t\t\tthis.select(id);\n\t\t\t}\n\t\t}\n\t},\n\t_paste: {\n\t\t// insert new item with pasted value\n\t\tinsert: function(text) {\n\t\t\tvar parent = this.getSelectedId() ||'0' ;\n\t\t\tthis.add({ value: text }, null, parent);\n\t\t},\n\t\t// change value of each selected item\n\t\tmodify: function(text) {\n\t\t\tvar sel = this.getSelectedId(true);\n\t\t\tfor (var i = 0; i < sel.length; i++) {\n\t\t\t\tthis.getItem(sel[i]).value = text;\n\t\t\t\tthis.refresh(sel[i]);\n\t\t\t}\n\t\t},\n\t\t// do nothing\n\t\tcustom: function(text) {}\n\t},\n\t_drag_order_complex:true,\n\t$dragHTML:function(obj){\n\t\treturn \"<div class='borderless'>\"+this.type.template(obj, this.type)+\"</div>\";\n\t},\n\t\n\t//css class to action map, for dblclick event\n\ttype:webix.extend({\n\t\t//normal state of item\n\t\ttemplate:function(obj,common){\n\t\t\tvar template = common[\"template\"+obj.level]||common.templateCommon;\n\t\t\treturn template.apply(this, arguments);\n\t\t},\n\t\tclassname:function(obj, common, marks){\n\t\t\tvar css = \"webix_tree_item\";\n\n\t\t\tif (obj.$css){\n\t\t\t\tif (typeof obj.$css == \"object\")\n\t\t\t\t\tobj.$css = webix.html.createCss(obj.$css);\n\t\t\t\tcss += \" \"+obj.$css;\n\t\t\t}\n\t\t\tif (marks && marks.$css)\n\t\t\t\tcss += \" \"+marks.$css;\n\n\t\t\treturn css;\n\t\t},\n\t\taria:function(obj, common, marks){\n\t\t\treturn 'role=\"treeitem\"'+(marks && marks.webix_selected?' aria-selected=\"true\" tabindex=\"0\"':' tabindex=\"-1\"')+\n\t\t\t\t(obj.$count?('aria-expanded=\"'+(obj.open?\"true\":\"false\")+'\"'):'')+'aria-level=\"'+obj.$level+'\"';\n\t\t},\n\t\ttemplateCommon:webix.template(\"{common.icon()} {common.folder()} <span>#value#</span>\"),\n\t\ttemplateStart:webix.template('<div webix_tm_id=\"#id#\" class=\"{common.classname()}\" {common.aria()}>'),\n\t\ttemplateEnd:webix.template(\"</div>\"),\n\t\ttemplateCopy: webix.template(\"#value#\")\n\t}, webix.TreeType)\n}, webix.AutoTooltip, webix.Group, webix.TreeAPI, webix.DragItem, webix.TreeDataMove, webix.SelectionModel, webix.KeysNavigation, webix.MouseEvents, webix.Scrollable, webix.TreeDataLoader, webix.ui.proto, webix.TreeRenderStack, webix.CopyPaste, webix.EventSystem);\n\nwebix.TreeStateCheckbox = {\n\t_init_render_tree_state: function(){\n\t\tif (this._branch_render_supported){\n\t\t\tvar old_render = this.render;\n\t\t\tthis.render = function(id,data,mode){\n\t\t\t\tvar updated = old_render.apply(this,arguments);\n\n\t\t\t\tif(this._settings.threeState && updated && data != \"checkbox\")\n\t\t\t\t\tthis._setThirdState.apply(this,arguments);\n\t\t\t};\n\t\t\tthis._init_render_tree_state=function(){};\n\t\t}\n\t},\n\tthreeState_setter:function(value){\n\t\tif (value)\n\t\t\tthis._init_render_tree_state();\n\t\treturn value;\n\t},\n\t_setThirdState:function(id){\n\t\tvar i,leaves,parents,checkedParents,tree;\n\t\tparents = [];\n\t\ttree = this;\n\n\t\t/*if item was removed*/\n\t\tif(id&&!tree.data.pull[id]){\n\t\t\tid = 0;\n\t\t}\n\t\t/*sets checkbox states*/\n\t\t/*if branch or full reloading*/\n\t\tif(!id||tree.data.pull[id].$count){\n\t\t\tleaves = this._getAllLeaves(id);\n\t\t\tleaves.sort(function(a,b){\n\t\t\t\treturn tree.data.pull[b].$level - tree.data.pull[a].$level;\n\t\t\t});\n\t\t\tfor(i=0;i < leaves.length;i++){\n\t\t\t\tif(!i||tree.data.pull[leaves[i]].$parent!=tree.data.pull[leaves[i-1]].$parent)\n\t\t\t\t\tparents = parents.concat(tree._setParentThirdState(leaves[i]));\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\t/*an item is a leaf */\n\t\t\tparents = parents.concat(tree._setParentThirdState(id));\n\t\t}\n\n\t\tcheckedParents = {};\n\t\tfor(i=0;i<parents.length;i++){\n\t\t\tif(!checkedParents[parents[i]]){\n\t\t\t\tcheckedParents[parents[i]] = 1;\n\t\t\t\tthis._setCheckboxIndeterminate(parents[i]);\n\t\t\t}\n\t\t}\n\n\t\ttree = null;\n\t},\n\t_setCheckboxIndeterminate:function(id){\n\t\tvar chElem, elem;\n\t\telem = this.getItemNode(id);\n\t\tif(elem){\n\t\t\tthis.render(id,\"checkbox\",\"update\");\n\t\t\t/*needed to get the new input obj and to set indeterminate state*/\n\t\t\tif(this.getItem(id).indeterminate){\n\t\t\t\telem = this.getItemNode(id);\n\t\t\t\tchElem = elem.getElementsByTagName(\"input\")[0];\n\t\t\t\tif(chElem)\n\t\t\t\t\tchElem.indeterminate = this.getItem(id).indeterminate;\n\t\t\t}\n\t\t}\n\t},\n\t_setParentThirdState:function(itemId){\n\t\t//we need to use dynamic function creating\n\t\t//jshint -W083:true\n\n\t\tvar checked, checkedCount,indeterminate, parentId,result,tree,unsureCount,needrender;\n\t\tparentId = this.getParentId(itemId);\n\t\ttree = this;\n\t\tresult = [];\n\t\twhile(parentId && parentId != \"0\"){\n\t\t\tunsureCount = 0;\n\t\t\tcheckedCount = 0;\n\t\t\tthis.data.eachChild(parentId,function(obj){\n\t\t\t\tif(obj.indeterminate){\n\t\t\t\t\tunsureCount++;\n\t\t\t\t}\n\t\t\t\telse if(obj.checked){\n\t\t\t\t\tcheckedCount++;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tchecked = indeterminate = needrender = false;\n\t\t\t\n\t\t\tvar item = this.getItem(parentId);\n\t\t\tif(checkedCount==item.$count){\n\t\t\t\tchecked = true;\n\t\t\t}\n\t\t\telse if(checkedCount>0||unsureCount>0){\n\t\t\t\tindeterminate = true;\n\t\t\t}\n\t\t\t\n\t\t\t//we need to reset indeterminate in any case :(\n\t\t\tif (indeterminate || indeterminate != item.indeterminate)\n\t\t\t\tneedrender = true;\n\t\t\titem.indeterminate = indeterminate;\n\t\t\tif (checked || item.checked != checked)\n\t\t\t\tneedrender = true;\n\t\t\titem.checked = checked;\n\n\t\t\tif (needrender){\n\t\t\t\tresult.push(parentId);\n\t\t\t\tparentId = this.getParentId(parentId);\n\t\t\t} else\n\t\t\t\tparentId = 0;\n\t\t}\n\n\t\treturn result;\n\t},\n\t/*get all checked items in tree*/\n\tgetChecked:function(){\n\t\tvar result=[];\n\t\tvar tree = this;\n\t\tthis.data.eachSubItem(0,function(obj){\n\t\t\tif (tree.isChecked(obj.id))\n\t\t\t\tresult.push(obj.id);\n\t\t});\n\t\treturn result;\n\t},\n\t_tree_check_uncheck_3:function(id, mode){\n\t\tvar item = this.getItem(id);\n\t\tif(item){\n\t\t\tif (mode === \"\") \n\t\t\t\tmode = !item.checked;\n\t\t\tif(item.checked != mode || item.indeterminate){\n\t\t\t\titem.checked = mode;\n\t\t\t\tthis._correctThreeState(id);\n\t\t\t\tvar parents = this._setParentThirdState(id);\n\t\t\t\tif (this._branch_render_supported && parents.length < 5){\n\t\t\t\t\tfor (var i=0; i<parents.length; i++)\n\t\t\t\t\t\tthis._setCheckboxIndeterminate(parents[i]);\n\t\t\t\t} else\n\t\t\t\t\tthis.refresh();\n\t\t\t\tthis.callEvent(\"onItemCheck\", [id, mode]);\n\t\t\t}\n\t\t}\n\t},\n\t/*set checked state for item checkbox*/\n\tcheckItem:function(id){\n\t\tthis._tree_check_uncheck(id, true);\n\t\tthis.updateItem(id);\n\t},\n\t/*uncheckes an item checkbox*/\n\tuncheckItem:function(id){\n\t\tthis._tree_check_uncheck(id, false);\n\t\tthis.updateItem(id);\n\t},\n\t_checkUncheckAll: function(id,mode,all){\n\t\tvar method = mode?\"checkItem\":\"uncheckItem\";\n\t\tif(!id)\n\t\t\tid = 0;\n\t\telse\n\t\t\tthis[method](id);\n\t\tif(this._settings.threeState){\n\t\t\tif(!id)\n\t\t\t\tthis.data.eachChild(0,function(item){\n\t\t\t\t\tthis[method](item.id);\n\t\t\t\t},this,all);\n\t\t}\n\t\telse\n\t\t\tthis.data.each(function(item){\n\t\t\t\tthis[method](item.id);\n\t\t\t},this,all,id);\n\n\t},\n\t/*checkes checkboxes of all items in a branch/tree*/\n\tcheckAll: function(id, all){\n\t\tthis._checkUncheckAll(id,true,all);\n\n\t},\n\t/*uncheckes checkboxes of all items in a branch/tree*/\n\tuncheckAll: function(id, all){\n\t\tthis._checkUncheckAll(id,false,all);\n\t},\n\t_correctThreeState:function(id){\n\t\tvar i,leaves,state;\n\t\tvar item = this.getItem(id);\n\n\t\titem.indeterminate = false;\n\t\tstate = item.checked;\n\n\t\tthis.data.eachSubItem(id, function(child){\n\t\t\tchild.indeterminate = false;\n\t\t\tchild.checked = state;\n\t\t});\n\t\t\n\t\tif(this._branch_render_supported && this.isBranchOpen(item.$parent)){ //for tree-render only\n\t\t\tthis.render(id,0,\"branch\");\n\t\t}\n\t},\n\t/*returns checked state of item checkbox*/\n\tisChecked:function(id){\n\t\treturn this.getItem(id).checked;\n\t},\n\t/*gets all leaves in a certain branch (in the whole tree if id is not set)*/\n\t_getAllLeaves:function(parentId){\n\t\tvar result = [];\n\t\tthis.data.eachSubItem(parentId, function(obj, branch){\n\t\t\tif (!branch)\n\t\t\t\tresult.push(obj.id);\n\t\t});\n\t\treturn result;\n\t}\t\n};\n\nif (webix.ui.tree)\n\twebix.extend(webix.ui.tree, webix.TreeStateCheckbox, true);\nwebix.type(webix.ui.tree, {\n\tname:\"lineTree\",\n\tcss:\"webixLineTree\",\n\ticon:function(obj, common){\n\t\tvar html = \"\";\n\t\tvar open = \"\";\n\t\tfor (var i=1; i<=obj.$level; i++){\n\t\t\tif (i==obj.$level)\n\t\t\t\tvar open = (obj.$count?(obj.open?'webix_tree_open ':'webix_tree_close '):'webix_tree_none ');\n\n\t\t\tvar icon = this._icon_src(obj, common, i);\n\t\t\tif (icon)\n\t\t\t\thtml+=\"<div class='\"+open+\"webix_tree_img webix_tree_\"+icon+\"'></div>\";\n\t\t}\n\t\treturn html;\n\t},\n\t_icon_src:function(obj, common, level){\n\t\tvar lines = common._tree_branch_render_state; \n\t\tvar tree = webix.TreeRenderStack._obj;\n\n\t\tif (lines === 0 && tree){\n\t\t\t//we are in standalone rendering \n\t\t\t//need to reconstruct rendering state\n\t\t\tvar lines_level = obj.$level;\n\t\t\tvar branch_id = obj.id;\n\n\t\t\tlines = [];\n\t\t\twhile (lines_level){\n\t\t\t\tvar parent_id = tree.getParentId(branch_id);\n\t\t\t\tvar pbranch = tree.data.branch[parent_id];\n\t\t\t\tif (pbranch[pbranch.length-1] == branch_id)\n\t\t\t\t\tlines[lines_level] = true;\t\n\n\t\t\t\tbranch_id = parent_id;\n\t\t\t\tlines_level--;\n\t\t\t}\n\n\t\t\t//store for next round\n\t\t\tcommon._tree_branch_render_state = lines;\n\t\t}\n\t\tif (!lines)\n\t\t\treturn 0;\n\t\t//need to be replaced with image urls\n\t\tif (level == obj.$level){\n\t\t\tvar mode = 3; //3-way line\n\t\t\tif (!obj.$parent){ //top level\n\t\t\t\tif (obj.$index === 0)\n\t\t\t\t\tmode = 4; //firts top item\n\t\t\t}\n\n\t\t\tif (lines[obj.$level])\n\t\t\t\tmode = 2;\n\n\t\t\tif (obj.$count){\n\t\t\t\tif (obj.open)\n\t\t\t\t\treturn \"minus\"+mode;\n\t\t\t\telse\n\t\t\t\t\treturn \"plus\"+mode;\n\t\t\t} else\n\t\t\t\treturn \"line\"+mode;\n\t\t} else {\n\t\t\tif (!lines[level])\n\t\t\t\treturn \"line1\";\n\t\t\treturn \"blank\";\n\t\t}\n\t}\n});\n\n\n\n \t\n \n\n\n\n\n/*\n    UI: navigation control\n*/\nwebix.NavigationButtons = {\n\t$init:function(){\n\t\tthis.$ready.push(function(){\n\t\t\tthis.attachEvent(\"onKeyPress\", this._onKeyPress);\n\t\t});\n\t},\n\t_moveActive:function(code, e){\n\t\tif(code === 37  || code === 39){\n\t\t\twebix.html.preventEvent(e);\n\t\t\tthis._showNavItem(code===37?-1:1);\n\n\t\t\tvar node = this._navPanel.querySelector(\"[tabindex='0']\");\n\t\t\tif(node) node.focus();\n\t\t}\n\t},\n\t_renderPanel:function(){\n\t\twebix.html.remove(this._navPanel);\n\n\n\t\tthis._navPanel = webix.html.create(\"DIV\",{\n\t\t\t\"class\":\"webix_nav_panel \"+\"webix_nav_panel_\"+this._settings.navigation.type,\n\t\t\t\"role\":\"tablist\"\n\t\t},\"\");\n\n\t\tthis._viewobj.appendChild(this._navPanel);\n\n\n\t\tthis._renderNavItems();\n\t\tthis._renderNavButtons();\n\t\tthis._setLinkEventHandler();\n\t},\n\t_setLinkEventHandler: function(){\n\t\tvar h = [];\n\t\tif(this._navPanel)\n\t\t\th[0] = webix.event(this._navPanel,\"click\", webix.bind(function(e){\n\t\t\t\tvar elem = (e.srcElement || e.target);\n\t\t\t\tvar found = false;\n\t\t\t\twhile(elem != this._navPanel && !found){\n\t\t\t\t\tvar bindId = elem.getAttribute(this._linkAttr);\n\t\t\t\t\tif(bindId){\n\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\tthis._showPanelBind(bindId);\n\t\t\t\t\t}\n\t\t\t\t\telem = elem.parentNode;\n\t\t\t\t}\n\t\t\t},this));\n\t\tif(this._prevNavButton)\n\t\t\th[1] = webix.event(this._prevNavButton,\"click\", webix.bind(function(e){\n\t\t\t\tthis._showNavItem(-1);\n\t\t\t},this));\n\t\tif(this._nextNavButton)\n\t\t\th[1] = webix.event(this._nextNavButton,\"click\", webix.bind(function(e){\n\t\t\t\tthis._showNavItem(1);\n\t\t\t},this));\n\t\tthis.attachEvent(\"onDestruct\", function(){\n\t\t\tfor(var i=0;i< h.length; i++){\n\t\t\t\tthis.detachEvent(h[i]);\n\t\t\t}\n\t\t\th = null;\n\t\t});\n\t},\n\t_showNavItem: function(inc){\n\t\tif(this._cells){\n\t\t\tvar index = this._active_cell + inc;\n\t\t\tif(index >= this._cells.length || index < 0){\n\t\t\t\tindex = (index < 0?this._cells.length-1:0);\n\t\t\t}\n\t\t\tthis.setActiveIndex(index);\n\t\t}\n\t},\n\t_showPanelBind: function(id){\n\t\tif(this._cells)\n\t\t\twebix.$$(id).show();\n\t},\n\t_renderNavItems:function(){\n\t\tvar item, config;\n\t\tconfig = this._settings.navigation;\n\t\tif(config.items){\n\t\t\tthis._linkAttr = config.linkAttr || \"bind_id\";\n\n\t\t\tif(!this._navPanel)\n\t\t\t\tthis._renderPanel();\n\t\t\telse\n\t\t\t\tthis._clearPanel();\n\n\t\t\tvar data = (this._cells?this._cells:this.data.order);\n\t\t\tif(data.length>1){\n\t\t\t\tfor (var i=0; i < data.length; i++){\n\n\t\t\t\t\titem = webix.html.create(\"DIV\",{\n\t\t\t\t\t\t\"class\":\"webix_nav_item webix_nav_\"+(i==this._active_cell?\"active\":\"inactive\"),\n\t\t\t\t\t\t\"role\":\"tab\",\n\t\t\t\t\t\t\"tabindex\":(i==this._active_cell?\"0\":\"-1\")\n\t\t\t\t\t},\"<div></div>\");\n\t\t\t\t\tvar id = this._cells?this._cells[i]._settings.id:data[i];\n\t\t\t\t\tif(id)\n\t\t\t\t\t\titem.setAttribute(this._linkAttr, id);\n\t\t\t\t\tthis._navPanel.appendChild(item);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t_clearPanel:function(){\n\t\tif (this._navPanel){\n\t\t\tvar coll = this._navPanel.childNodes;\n\t\t\tfor (var i = coll.length - 1; i >= 0; i--)\n\t\t\t\twebix.html.remove(coll[i]);\n\t\t}\n\t},\n\t_renderNavButtons: function(){\n\t\tvar item, config;\n\t\tconfig = this._settings.navigation;\n\t\tif(config.buttons){\n\n\t\t\tif(this._prevNavButton)\n\t\t\t\twebix.html.remove(this._prevNavButton);\n\t\t\tif(this._prevNavButton)\n\t\t\t\twebix.html.remove(this._nextNavButton);\n\n\n\t\t\tthis._prevNavButton = webix.html.create(\n\t\t\t\t\"DIV\",\n\t\t\t\t{\n\t\t\t\t\t\"class\":\"webix_nav_button_\"+config.type+\" webix_nav_button_prev \",\n\t\t\t\t\t\"role\":\"button\",\n\t\t\t\t\t\"tabindex\":\"0\",\n\t\t\t\t\t\"aria-label\":webix.i18n.aria.prevTab\n\t\t\t\t},\n\t\t\t\t\"<div class=\\\"webix_nav_button_inner\\\"></div>\"\n\t\t\t);\n\t\t\tthis._viewobj.appendChild(this._prevNavButton);\n\n\t\t\tthis._nextNavButton = webix.html.create(\n\t\t\t\t\"DIV\",\n\t\t\t\t{\n\t\t\t\t\t\"class\":\"webix_nav_button_\"+config.type+\" webix_nav_button_next \",\n\t\t\t\t\t\"role\":\"button\",\n\t\t\t\t\t\"tabindex\":\"0\",\n\t\t\t\t\t\"aria-label\":webix.i18n.aria.nextTab\n\t\t\t\t},\n\t\t\t\t\"<div class=\\\"webix_nav_button_inner\\\"></div>\"\n\t\t\t);\n\t\t\tthis._viewobj.appendChild(this._nextNavButton);\n\t\t}\n\t}\n};\n\n\n\n\n(function(){\n\n\twebix.env.printPPI = 96;\n\twebix.env.printMargin = 0.75*webix.env.printPPI;\n\n\tvar ppi = webix.env.printPPI;\n\tvar margin = webix.env.printMargin;\n\tvar papers = { \"a4\":\"A4\", \"a3\":\"A3\", \"letter\":\"letter\"};\n\tvar fits = { page:true, data:true};\n\tvar modes = { portrait:true, landscape:true};\n\n\tvar sizes = {//inches, real size is value*ppi\n\t\t\"A3\": { width: 11.7, height: 16.5 },\n\t\t\"A4\": { width: 8.27, height:11.7 },\n\t\t\"letter\": { width: 8.5, height:11 }\n\t};\n\n\twebix.print = function(id, options){\n\n        var view = webix.$$(id);\n\t\tif (view && view.$printView)\n\t\t\tview = view.$printView();\n\n\t\twebix.assert(view, \"non-existing view for printing\");\n\t\tif(!view) return;\n\n\t\tview.callEvent(\"onBeforePrint\", [options]);\n\n\t\toptions = _checkOptions(options);\n\t\t_beforePrint(options);\n\n\t\t//try widget's custom logic first, sometimes it may deny \n\t\tif(!view.$customPrint || view.$customPrint(options) === true) \n\t\t\t_print(view, options);\n \n\t\t_afterPrint(options);\n\t};\n\n\t/*processing print options*/\n\tfunction _checkOptions(options){\n\t\t\n\t\toptions = options || {};\n        options.paper = papers[(options.paper || \"\").toLowerCase()] || \"A4\";\n        options.mode = modes[options.mode] ? options.mode : \"portrait\";\n        options.fit = fits[options.fit] ? options.fit: \"page\";\n\t\toptions.scroll = options.scroll || false;\n        options.size = sizes[options.paper];\n\n\t\toptions.margin = (options.margin || options.margin === 0) ? options.margin : {};\n        margin = isNaN(options.margin*1) ? margin : options.margin;\n        options.margin = {\n        \ttop:(options.margin.top || options.margin.top === 0) ? options.margin.top: margin, \n        \tbottom:(options.margin.bottom || options.margin.bottom === 0) ? options.margin.bottom: margin, \n        \tright:(options.margin.right || options.margin.right === 0) ? options.margin.right: margin, \n        \tleft:(options.margin.left || options.margin.left === 0) ? options.margin.left: margin\n        };\n\n        return options;\n\t}\n\n\t/*preparing printing environment*/\n\tfunction _beforePrint(options){\n\t\twebix.html.addCss(document.body,\"webix_print\");\n\n\t\tif(options.docHeader) _getHeaderFooter(\"Header\", options);\n\t\tif(options.docFooter) _getHeaderFooter(\"Footer\", options);\n\n\t\t/* static print styles are located at 'css/print.less'*/\n\t\tvar cssString = \"@media print { \"+\n\t\t\t\"@page{ size:\"+options.paper+\" \"+options.mode+\";\"+\n\t\t\t\t\"margin-top:\"+options.margin.top+\"px;margin-bottom:\"+options.margin.bottom+\n\t\t\t\t\"px;margin-right:\"+options.margin.right+\"px;margin-left:\"+options.margin.left+\n\t\t\t\"px;}\"+\n\t\t\"}\";\n\t\twebix.html.addStyle(cssString, \"print\");\n\t}\n\n\t/*cleaning environment*/\n\tfunction _afterPrint(options){\n\t\twebix.html.removeCss(document.body, \"webix_print\");\n\t\twebix.html.removeStyle(\"print\");\n\n\t\tif(options.docHeader) webix.html.remove(options.docHeader);\n\t\tif(options.docFooter) webix.html.remove(options.docFooter);\n\t}\n\n\t/*common print actions */\n\tfunction _print(view, options){\n\t\tvar doc = view.$view.cloneNode(true);\n\t\twebix.html.insertBefore(doc, options.docFooter, document.body);\n\n\t\twebix.html.addCss(doc,\"webix_ui_print\");\n\t\tif(!options.scroll && ((view.data && view.data.pull) || view.getBody))\n\t\t\twebix.html.addCss(doc, \"webix_print_noscroll\");\n\n\t\twindow.print();\n\n\t\twebix.html.remove(doc);\n\t}\n\t/*custom header nad footer*/\n\tfunction _getHeaderFooter(group, options){\n\t\tvar header =  webix.html.create(\"div\", { \n\t\t\t\"class\":\"webix_view webix_print_\"+group.toLowerCase(),\n\t\t\t\"style\":\"height:0px;visibility:hidden;\"\n\t\t}, options[\"doc\"+group]);\n\n\t\tif(group ===\"Header\")\n\t\t\twebix.html.insertBefore(header, document.body.firstChild);\n\t\telse\n\t\t\tdocument.body.appendChild(header);\n\n\t\toptions[\"doc\"+group] = header;\n\t}\n\n})();\n\nwebix.CustomPrint = {\n\t$customPrint:function(options, htmlOnly){\n\t\tif(this._prePrint(options, htmlOnly))\n\t\t\treturn true;\n\n\t\tvar tableData = this._getTableArray(options);\n\t\tvar table = this._getTableHTML(tableData, options);\n\n\t\tif(htmlOnly)\n\t\t\treturn table;\n\n\t\tvar doc = webix.html.create(\"div\", { \"class\":\"webix_ui_print\"});\n\t\tdoc.appendChild(table);\n\n\t\twebix.html.insertBefore(doc, options.docFooter, document.body);\n\t\twindow.print();\n\t\t\n\t\twebix.html.remove(doc);\n\t},\n\t_prePrint:function(options, htmlOnly){\n\t\tif(!htmlOnly && (this.config.layout ==\"y\" || options.scroll || this.config.prerender || this.config.autoheight)) return true;\n\t\t\n\t\tif(this.config.layout ==\"x\")\n\t\t\twebix.extend(options || {}, {xCount:this.count(), nobreaks:true}, true);\n\t},\n\t_getPageWidth:function(options){\n\t\tif(options.fit ==\"page\") return Infinity;\n\n\t\tvar size = options.size;\n\t\tvar width = size[options.mode == \"portrait\"?\"width\":\"height\"];\n\t\t\n\t\treturn Math.min(width*webix.env.printPPI-2*webix.env.printMargin);\n\t},\n\t_getTableArray:function(options, base, start){\n\t\tvar maxWidth = this._getPageWidth(options);\n\t\tvar xCount = options.xCount || this._getVisibleRange()._dx;\n\n\t\tvar tableArray = [];\n\t\tvar colrow = [];\n\t\tvar width = 0;\n\t\t\n\t\tvar newTableStart, rownum, colnum;\n\n\t\tstart = start || 0;\n\t\tbase = base || [];\n\n\t\tfor(var i = 0; i<this.data.order.length;){\n\t\t\tvar obj = this.data.pull[this.data.order[i]];\n\t\t\trownum = parseInt(i/xCount);\n\t\t\tcolnum = i-(rownum*xCount);\n\n\t\t\tif(obj && colnum>=start){\n\t\t\t\twidth += this.type.width;\n\t\t\t\t\n\t\t\t\t//start a new table, if cells do not fit page width\n\t\t\t\tif(width > maxWidth && colnum>start){ // 'colnum>start' ensures that a single long cell will have to fit the page\n\t\t\t\t\tnewTableStart = colrow.length+start;\n\t\t\t\t\ttableArray.push(colrow);\n\t\t\t\t\ti = i+(xCount-colrow.length);\n\t\t\t\t\tcolrow = [];\n\t\t\t\t\twidth = 0;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tvar cellValue = this.type.template(obj, this.type);\n\t\t\t\tvar className = this._itemClassName;\n\t\t\t\t\n\t\t\t\tvar style  = {\n\t\t\t\t\tdisplay:\"table-cell\",\n\t\t\t\t\theight:this.type.height + \"px\",\n\t\t\t\t\twidth:this.type.width + \"px\"\n\t\t\t\t};\n\t\t\t\t//push a cell to a row\n\t\t\t\tcolrow.push({\n\t\t\t\t\ttxt: cellValue,\n\t\t\t\t\tclassName: className+\" \"+(obj.$css || \"\"),\n\t\t\t\t\tstyle: style\n\t\t\t\t});\n\t\t\t\t//push a row to a table and start a new row\n\t\t\t\tif((i+1)%xCount === 0){\n\t\t\t\t\ttableArray.push(colrow);\n\t\t\t\t\tcolrow = [];\n\t\t\t\t\twidth = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\ti++;\n\t\t}\n\n\t\tbase.push(tableArray);\n\n\t\tif(newTableStart)\n\t\t\tthis._getTableArray(options, base, newTableStart);\t\n\n\t\treturn base;\n\t},\n\t_getTableHTML:function(tableData, options){\n\t\t\n\t\tvar container = webix.html.create(\"div\");\n\n\t\ttableData.forEach(webix.bind(function(table, i){\n\n\t\t\tvar tableHTML = webix.html.create(\"table\", {\n\t\t\t\t\"class\":\"webix_table_print \"+this.$view.className,\n\t\t\t\t\"style\":\"border-collapse:collapse\"\n\t\t\t});\n\n\t\t\ttable.forEach(function(row){\n\t\t\t\tvar tr = webix.html.create(\"tr\");\n\n\t\t\t\trow.forEach(function(column){\n\t\t\t\t\tvar td = webix.html.create(\"td\");\n\n\n\t\t\t\t\tif (column.txt) td.innerHTML = column.txt;\n\t\t\t\t\tif (column.className) td.className = column.className;\n\t\t\t\t\tif (column.style) {\n\t\t\t\t\t\tvar keys = Object.keys(column.style);\n\t\t\t\t\t\tkeys.forEach(function(key){\n\t\t\t\t\t\t\tif (column.style[key])\n\t\t\t\t\t\t\t\ttd.style[key] = column.style[key];\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif(column.span){\n\t\t\t\t\t\tif(column.span.colspan > 1)\n\t\t\t\t\t\t\ttd.colSpan = column.span.colspan;\n\t\t\t\t\t\tif(column.span.rowspan > 1)\n\t\t\t\t\t\t\ttd.rowSpan = column.span.rowspan;\n\t\t\t\t\t}\n\t\t\t\t\ttr.appendChild(td);\n\t\t\t\t});\n\t\t\t\ttableHTML.appendChild(tr);\n\t\t\t});\n\t\t\tcontainer.appendChild(tableHTML);\n\n\t\t\tif(!options.nobreaks && i+1 < tableData.length){\n\t\t\t\tvar br = webix.html.create(\"DIV\", {\"class\":\"webix_print_pagebreak\"});\n\t\t\t\tcontainer.appendChild(br);\n\t\t\t}\n\t\t\t\n\t\t}, this));\n\n\t\treturn container;\n\t}\n};\n\n\n\n\nwebix.protoUI({\n\tname:\"list\",\n\t_listClassName : \"webix_list\",\n\t_itemClassName:\"webix_list_item\",\n\t$init:function(config){\n\t\twebix.html.addCss(this._viewobj, this._listClassName + (((config.layout||this.defaults.layout) == \"x\")?\"-x\":\"\") );\n\t\tthis.data.provideApi(this,true);\n\n\t\tthis._auto_resize = webix.bind(this._auto_resize, this);\n\t\tthis.data.attachEvent(\"onStoreUpdated\", this._auto_resize);\n\t\tthis.data.attachEvent(\"onSyncApply\", this._auto_resize);\n\t\tthis.attachEvent(\"onAfterRender\", this._correct_width_scroll);\n\n\t\tthis._viewobj.setAttribute(\"role\", \"listbox\");\n\t},\n\t$dragHTML:function(obj, e){\n\t\tif (this._settings.layout == \"y\" && this.type.width == \"auto\"){\n\t\t\tthis.type.width = this._content_width;\n\t\t\tvar node = this._toHTML(obj);\n\t\t\tthis.type.width = \"auto\";\n\t\t\treturn node;\n\t\t}\n\t\treturn this._toHTML(obj);\n\t},\n\tdefaults:{\n\t\tselect:false,\n\t\tscroll:true,\n\t\tlayout:\"y\",\n\t\tnavigation:true\n\t},\n\t_id:\"webix_l_id\",\n\ton_click:{\n\t\twebix_list_item:function(e,id){\n\t\t\tif (this._settings.select){\n                this._no_animation = true;\n\t\t\t\tif (this._settings.select==\"multiselect\"  || this._settings.multiselect)\n\t\t\t\t\tthis.select(id, false, (e.ctrlKey || e.metaKey || (this._settings.multiselect == \"touch\")), e.shiftKey); \t//multiselection\n\t\t\t\telse\n\t\t\t\t\tthis.select(id);\n                this._no_animation = false;\n\t\t\t}\n\t\t}\n\t},\n\ton_dblclick:{\n\t},\n\tgetVisibleCount:function(){\n\t\treturn Math.floor(this._content_height / this._one_height());\n\t},\n\t_auto_resize:function(){\n\t\tif (this._settings.autoheight || this._settings.autowidth)\n\t\t\tthis.resize();\n\t},\n\t_auto_height_calc:function(count){\n\t\tvar value = this.data.$pagesize||this.count();\n\n\t\tthis._onoff_scroll(count && count < value);\n\t\tif (this._settings.autoheight && value < (count||Infinity) ) \n\t\t\tcount = value;\n\t\treturn Math.max(this._one_height() * count + (this.type.margin||0),this._settings.minHeight||0);\n\t},\n\t_one_height:function(){\n\t\treturn this.type.height + (this.type.margin||0);\n\t},\n\t_auto_width_calc:function(count){\n\t\tvar value = this.data.$pagesize||this.count();\n\n\t\tthis._onoff_scroll(count && count < value);\n\t\tif (this._settings.autowidth && value < (count||Infinity) ) \n\t\t\tcount = value;\n\n\t\treturn (this.type.width * count); \n\t},\n\t_correct_width_scroll:function(){\n\t\tif (this._settings.layout == \"x\")\n\t\t\tthis._dataobj.style.width = (this.type.width != \"auto\") ? (this.type.width * this.count() + \"px\") : \"auto\";\n\t},\n\t$getSize:function(dx,dy){\n\t\tif (this._settings.layout == \"y\"){\n\t\t\tif (this.type.width!=\"auto\")\n\t\t\t\tthis._settings.width = this.type.width + (this._scroll_y?webix.ui.scrollSize:0);\n\t\t\tif (this._settings.yCount || this._settings.autoheight)\n\t\t\t\tthis._settings.height = this._auto_height_calc(this._settings.yCount)||1;\n\t\t}\n\t\telse {\n\t\t\tif (this.type.height!=\"auto\")\n\t\t\t\tthis._settings.height = this._one_height() + (this._scroll_x?webix.ui.scrollSize:0);\n\t\t\tif (this._settings.xCount || this._settings.autowidth)\n\t\t\t\tthis._settings.width = this._auto_width_calc(this._settings.xCount)||1;\n\t\t}\n\t\treturn webix.ui.view.prototype.$getSize.call(this, dx, dy);\n\t},\n\t$setSize:function(){\n        webix.ui.view.prototype.$setSize.apply(this, arguments);\n\t},\n\ttype:{\n\t\tcss:\"\",\n\t\twidthSize:function(obj, common){\n\t\t\treturn common.width+(common.width>-1?\"px\":\"\");\n\t\t},\n\t\theightSize:function(obj, common){\n\t\t\treturn common.height+(common.height>-1?\"px\":\"\");\n\t\t},\n\t\tclassname:function(obj, common, marks){\n\t\t\tvar css = \"webix_list_item\";\n\t\t\tif (obj.$css){\n\t\t\t\tif (typeof obj.$css == \"object\")\n\t\t\t\t\tobj.$css = webix.html.createCss(obj.$css);\n\t\t\t\tcss += \" \"+obj.$css;\n\t\t\t}\n\t\t\tif (marks && marks.$css)\n\t\t\t\tcss += \" \"+marks.$css;\n\n\t\t\treturn css;\n\t\t},\n\t\taria:function(obj, common, marks){\n\t\t\treturn 'role=\"option\"'+(marks && marks.webix_selected?' aria-selected=\"true\" tabindex=\"0\"':' tabindex=\"-1\"')+(obj.$count && obj.$template?'aria-expanded=\"true\"':'');\n\t\t},\n\t\ttemplate:function(obj){\n\t\t\treturn (obj.icon?(\"<span class='webix_icon fa-\"+obj.icon+\"'></span> \"):\"\") + obj.value + (obj.badge?(\"<div class='webix_badge'>\"+obj.badge+\"</div>\"):\"\");\n\t\t},\n\t\twidth:\"auto\",\n\t\ttemplateStart:webix.template('<div webix_l_id=\"#id#\" class=\"{common.classname()}\" style=\"width:{common.widthSize()}; height:{common.heightSize()}; overflow:hidden;\" {common.aria()}>'),\n\t\ttemplateEnd:webix.template(\"</div>\")\n\t},\n\t$skin:function(){\n\t\tthis.type.height = webix.skin.$active.listItemHeight;\n\t}\n}, webix.CustomPrint, webix.KeysNavigation, webix.DataMove, webix.DragItem, webix.MouseEvents, webix.SelectionModel, webix.Scrollable, webix.ui.proto, webix.CopyPaste);\n\nwebix.protoUI({\n\tname:\"grouplist\",\n\tdefaults:{\n\t\tanimate:{\n\t\t}\n\t},\n\t_listClassName : \"webix_grouplist\",\n\t$init:function(){\n\t\twebix.extend(this.data, webix.TreeStore, true);\n\t\t//needed for getRange\n\t\tthis.data.count = function(){ return this.order.length; };\n\t\tthis.data.provideApi(this,true);\n\t\tthis.data.attachEvent(\"onClearAll\", webix.bind(this._onClear, this));\n\t\tthis._onClear();\n\t},\n\t_onClear:function(){\n\t\tthis._nested_cursor = [];\n\t\tthis._nested_chain = [];\n\t},\n\t$setSize:function(){\n        if (webix.ui.view.prototype.$setSize.apply(this, arguments)){\n\t        //critical for animations in group list\n\t        this._dataobj.style.width = this._content_width;\n\t    }\n\t},\t\n\ton_click:{\n\t\twebix_list_item:function(e,id){\n\t\t\tif (this._in_animation) {\n                return false;\n            }\n\n\t\t\tfor (var i=0; i < this._nested_chain.length; i++){\n\t\t\t\tif (this._nested_chain[i] == id){ //one level up\n\t\t\t\t\tfor (var j=i; j < this._nested_chain.length; j++) {\n\t\t\t\t\t\tthis.data.getItem(this._nested_chain[j]).$template=\"\";\n\t\t\t\t\t}\n\t\t\t\t\tif (!i){ //top level\n\t\t\t\t\t\tthis._nested_cursor = this.data.branch[0];\n\t\t\t\t\t\tthis._nested_chain = [];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._nested_cursor= this.data.branch[this._nested_chain[i-1]];\n\t\t\t\t\t\tthis._nested_chain.splice(i);\n\t\t\t\t\t}\n                    this._is_level_down = false;\n\t\t\t\t\treturn this.render();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar obj = this.getItem(id);\n\t\t\tif (obj.$count){\t//one level down\n                this._is_level_down = true;\n\t\t\t\tthis._nested_chain.push(id);\n\t\t\t\tobj.$template = \"Back\";\n\t\t\t\tthis._nested_cursor = this.data.branch[obj.id];\n\t\t\t\treturn this.render();\n\t\t\t} else {\n\t\t\t\tif (this._settings.select){\n                    this._no_animation = true;\n\t\t\t\t\tif (this._settings.select==\"multiselect\" || this._settings.multiselect)\n\t\t\t\t\t\tthis.select(id, false, ((this._settings.multiselect == \"touch\") || e.ctrlKey || e.metaKey), e.shiftKey); \t//multiselection\n\t\t\t\t\telse\n\t\t\t\t\t\tthis.select(id);\n                    this._no_animation = false;\n\t\t\t\t}\t\t\n\t\t\t}\n\t\t}\n\t},\n    getOpenState:function(){\n        return {parents:this._nested_chain,branch:this._nested_cursor};\n    },\n\trender:function(id,data,type,after){\n\t\tvar i, lastChain;\n\n\t\t//start filtering processing=>\n\t\tthis._nested_chain = webix.copy(this._nested_chain);\n\t\tthis._nested_cursor = webix.copy(this._nested_cursor);\n\n\t\tif(this._nested_chain.length){\n\t\t\tfor(i = 0;i<this._nested_chain.length;i++){\n\t\t\t\tif(!this.data.branch[this._nested_chain[i]]){\n\t\t\t\t\tthis._nested_chain.splice(i,1);\n\t\t\t\t\ti--;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tlastChain =  (this._nested_chain.length?this._nested_chain[this._nested_chain.length-1]:0);\n\t\tthis._nested_cursor = webix.copy(this.data.branch[lastChain]) ;\n\n\t\tif(!this._nested_cursor.length&&this._nested_chain.length){\n\t\t\tthis._nested_cursor =  [lastChain];\n\t\t\tthis._nested_chain.pop();\n\t\t}\n\t\t//<= end filtering processing\n\n\t\tif (this._in_animation) {\n            return webix.delay(this.render, this, arguments, 100);\n        }        \n        for (i=0; i < this._nested_cursor.length; i++)\n        \tthis.data.getItem(this._nested_cursor[i]).$template = \"\";\n\n\t\tif (!this._nested_cursor.length)\n            this._nested_cursor = this.data.branch[0];\n\n\t\tthis.data.order = webix.toArray([].concat(this._nested_chain).concat(this._nested_cursor));\n\t\t\t\n        if (this.callEvent(\"onBeforeRender\",[this.data])){\n            if(this._no_animation || !this._dataobj.innerHTML || !(webix.animate.isSupported() && this._settings.animate) || (this._prev_nested_chain_length == this._nested_chain.length)) { // if dataobj is empty or animation is not supported\n\t\t\t\twebix.RenderStack.render.apply(this, arguments);\n            }\n            else {\n                //getRange - returns all elements\n                if (this.callEvent(\"onBeforeRender\",[this.data])){\n\n                    if(!this._back_scroll_states)\n                        this._back_scroll_states = [];\n\n\t\t\t\t\tvar next_div = this._dataobj.cloneNode(false);\n\t\t\t\t\tnext_div.innerHTML = this.data.getRange().map(this._toHTML,this).join(\"\");\n\n\t\t\t\t\tvar aniset = webix.extend({}, this._settings.animate);\n\t\t\t\t\taniset.direction = (this._is_level_down)?'left':'right';\n\n\t\t\t\t\t/*scroll position restore*/\n\t\t\t\t\tvar animArr = [webix.clone(aniset),webix.clone(aniset)];\n\t\t\t\t\tif(this._is_level_down){\n\t\t\t\t\t\tthis._back_scroll_states.push(this.getScrollState());\n\t\t\t\t\t\tif(webix.Touch&&webix.Touch.$active){\n\t\t\t\t\t\t\tanimArr[0].y = 0;\n\t\t\t\t\t\t\tanimArr[1].y = - this.getScrollState().y;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tvar getScrollState = this._back_scroll_states.pop();\n\t\t\t\t\t\tif(webix.Touch&&webix.Touch.$active){\n\t\t\t\t\t\t\tanimArr[0].y = -getScrollState.y;\n\t\t\t\t\t\t\tanimArr[1].y = - this.getScrollState().y;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tvar line = webix.animate.formLine(\n\t\t\t\t\t\tnext_div,\n\t\t\t\t\t\tthis._dataobj,\n\t\t\t\t\t\taniset\n\t\t\t\t\t);\n\n\t\t\t\t\t/*keeping scroll position*/\n\t\t\t\t\tif(webix.Touch&&webix.Touch.$active)\n\t\t\t\t\t\twebix.Touch._set_matrix(next_div, 0,this._is_level_down?0:animArr[0].y, \"0ms\");\n\n\t\t\t\t\taniset.master = this;\n\t\t\t\t\taniset.callback = function(){\n\t\t\t\t\t\tthis._dataobj = next_div;\n\n\t\t\t\t\t\t/*scroll position restore*/\n\t\t\t\t\t\tif(!this._is_level_down){\n\t\t\t\t\t\t\tif(webix.Touch&&webix.Touch.$active){\n\t\t\t\t\t\t\t\twebix.delay(function(){\n\t\t\t\t\t\t\t\t\twebix.Touch._set_matrix(next_div, 0,animArr[0].y, \"0ms\");\n\t\t\t\t\t\t\t\t},this);\n\t\t\t\t\t\t\t} else if (getScrollState) \n\t\t\t\t\t\t\t\tthis.scrollTo(0,getScrollState.y);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(!(webix.Touch&&webix.Touch.$active)){\n\t\t\t\t\t\t\tthis.scrollTo(0,0);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\twebix.animate.breakLine(line);\n\t\t\t\t\t\taniset.master = aniset.callback = null;\n\t\t\t\t\t\tthis._htmlmap = null; //clear map, it will be filled at first getItemNode\n\t\t\t\t\t\tthis._in_animation = false;\n\t\t\t\t\t\tthis.callEvent(\"onAfterRender\",[]);\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\tthis._in_animation = true;\n\t\t\t\t\twebix.animate(line, animArr);\n                }\n            }\n            this._prev_nested_chain_length = this._nested_chain.length;\n        }\n\t},\n\ttemplateBack_setter:function(config){\n\t\tthis.type.templateBack = webix.template(config);\n\t},\n\ttemplateItem_setter:function(config){\n\t\tthis.type.templateItem = webix.template(config);\n\t},\n\ttemplateGroup_setter:function(config){\n\t\tthis.type.templateGroup = webix.template(config);\n\t},\n\ttype:{\n\t\ttemplate:function(obj, common){\n\t\t\tif (obj.$count)\n\t\t\t\treturn common.templateGroup(obj, common);\n\t\t\treturn common.templateItem(obj, common);\n\t\t},\n\t\tcss:\"group\",\n\t\tclassname:function(obj, common, marks){\n\t\t\treturn \"webix_list_item webix_\"+(obj.$count?\"group\":\"item\")+(obj.$template?\"_back\":\"\")+((marks&&marks.webix_selected)?\" webix_selected \":\"\")+ (obj.$css?obj.$css:\"\");\n\t\t},\n\t\ttemplateStart:webix.template('<div webix_l_id=\"#id#\" class=\"{common.classname()}\" style=\"width:{common.widthSize()}; height:{common.heightSize()};  overflow:hidden;\" {common.aria()}>'),\n\t\ttemplateBack:webix.template(\"#value#\"),\n\t\ttemplateItem:webix.template(\"#value#\"),\n\t\ttemplateGroup:webix.template(\"#value#\"),\n        templateEnd:function(obj, common){\n            var html = '';\n            if(obj.$count) html += \"<div class='webix_arrow_icon'></div>\";\n            html += \"</div>\";\n            return html;\n        }\n\t},\n\tshowItem:function(id){\n\t\tvar obj, parent;\n\t\tif(id){\n\t\t\tobj = this.getItem(id);\n\t\t\tparent = obj.$parent;\n\t\t\t\n\t\t\tif (obj.$count)\n\t\t\t\tparent = obj.id;\n\t\t}\n\t\tthis._nested_cursor = this.data.branch[parent||0];\n\t\tthis._nested_chain=[];\n\t\t\t\t\n\t\t//build _nested_chain\n\t\twhile(parent){\n\t\t\tthis.getItem(parent).$template = \"Back\";\n\t\t\tthis._nested_chain.unshift(parent);\n\t\t\tparent = this.getItem(parent).$parent;\n\t\t} \n\t\t\n\t\t//render\n\t\tthis._no_animation = true;\n\t\tthis.render();\n\t\tthis._no_animation = false;\n\t\t\n\t\t//scroll if necessary\n\t\twebix.RenderStack.showItem.call(this,id);\n\t}\n}, webix.Group, webix.ui.list );\nwebix.type(webix.ui.grouplist,{});\n\n\nwebix.protoUI({\n\tname:\"unitlist\",\n\t_id:\"webix_item_id\",\n\tuniteBy_setter: webix.template,\n   \trender:function(id,data,type,after){\n\t\tvar config = this._settings;\n\t\tif (!this.isVisible(config.id))\n\t\t\treturn;\n\t\tif (webix.debug_render)\n\t\t\twebix.log(\"Render: \"+this.name+\"@\"+config.id);\n\t\tif(!config.uniteBy){\n\t\t\tif (webix.debug_render){\n\t\t\t\twebix.log(\"uniteBy is undefined\");\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\tif (id){\n\t\t\tvar cont = this.getItemNode(id); //get html element of updated item\n            if(cont&&type==\"update\"&&(this._settings.uniteBy.call(this,data)==this.getItem(id).$unitValue)){\n                var t = this._htmlmap[id] = this._toHTMLObject(data);\n\t\t\t\twebix.html.insertBefore(t, cont);\n\t\t\t\twebix.html.remove(cont);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t//full reset\n\t\tif (this.callEvent(\"onBeforeRender\",[this.data])){\n\t\t\tthis.units = null;\n\t\t\tthis._setUnits();\n\t\t\tif(this.units){\n\t\t\t\tthis._dataobj.innerHTML = this._getUnitRange().map(this._toHTML, this).join(\"\");\n\t\t\t\tthis._htmlmap = null; \n\t\t\t}\n\t\t\tthis.callEvent(\"onAfterRender\",[]);\n\t\t}\n\t},\n\tgetUnits:function(){\n\t\tvar result = [];\n\t\tif(this.units){\n\t\t\tfor(var b in this.units){\n\t\t\t\tresult.push(b);\n\t\t\t}\n\t\t}\n\t\treturn result;\t\n\t},\n\tgetUnitList:function(id){\n\t\treturn (this.units?this.units[id]:null);\n\t},\n\t_toHTML:function(obj){\n\t\t//check if related template exist\n\t\tvar mark = this.data._marks[obj.id];\n\t\twebix.assert((!obj.$template || this.type[\"template\"+obj.$template]),\"RenderStack :: Unknown template: \"+obj.$template);\n\t\tthis.callEvent(\"onItemRender\",[obj]);\n\t\tif(obj.$unit){\n\t\t\treturn this.type.templateStartHeader(obj,this.type)+this.type.templateHeader.call(this,obj.$unit)+this.type.templateEnd(obj, this.type);\n\t\t}\n\t\treturn this.type.templateStart(obj,this.type,mark)+(obj.$template?this.type[\"template\"+obj.$template]:this.type.template)(obj,this.type)+this.type.templateEnd(obj, this.type);\n\t},\n\t_getUnitRange:function(){\n\t\tvar data,i,u,unit;\n\t\tdata = [];\n\t\tvar min = this.data.$min || 0;\n\t\tvar max = this.data.$max || Infinity;\n\t\tvar count = 0;\n\n\t\tfor(u in this.units){\n\t\t\tdata.push({$unit:u});\n\t\t\tunit = this.units[u];\n\t\t\tfor(i=0;i < unit.length;i++){\n\t\t\t\tif (count == min) data = [{$unit:u}];\n\t\t\t\tdata.push(this.getItem(unit[i]));\n\t\t\t\tif (count == max) return webix.toArray(data);\n\t\t\t\tcount++;\n\t\t\t}\n\t\t}\n\n\t\treturn webix.toArray(data);\n\t},\n\t_setUnits: function(){\n\t\tvar list = this;\n\t\tthis.units = {};\n\t\tthis.data.each(function(obj){\n\t\t\tvar result = list._settings.uniteBy.call(this,obj);\n            obj.$unitValue = result;\n            if(!list.units[result])\n\t\t\t\tlist.units[result] = [];\n\t\t\tlist.units[result].push(obj.id);\n\t\t});\n\t},\n\ttype:{\n\t\theaderHeight: 20,\n\t\ttemplateHeader: function(value){\n\t\t\treturn \"<span class='webix_unit_header_inner'>\"+value+\"</span>\";\n\t\t},\n\t\ttemplateStart:function(obj,type,marks){\n\t\t\tif(obj.$unit)\n\t\t\t\treturn type.templateStartHeader.apply(this,arguments);\n\t\t\tvar className = \"webix_list_item webix_list_\"+(type.css)+\"_item\"+((marks&&marks.webix_selected)?\" webix_selected\":\"\")+(obj.$css?obj.$css:\"\");\n\t\t\tvar style = \"width:\"+type.widthSize(obj,type,marks)+\"; height:\"+type.heightSize(obj,type,marks)+\"; overflow:hidden;\"+(type.layout&&type.layout==\"x\"?\"float:left;\":\"\");\n\t\t\treturn '<div webix_item_id=\"'+obj.id+'\" class=\"'+className+'\" style=\"'+style+'\" '+type.aria(obj, type, marks)+'>';\n\t\t},\n\t\ttemplateStartHeader:function(obj,type,marks){\n\t\t\tvar className = \"webix_unit_header webix_unit_\"+(type.css)+\"_header\"+(obj.$selected?\"_selected\":\"\");\n\t\t\tvar style = \"width:\"+type.widthSize(obj,type,marks)+\"; height:\"+type.headerHeight+\"px; overflow:hidden;\";\n\t\t\treturn '<div webix_unit_id=\"'+obj.$unit+'\" class=\"'+className+'\" style=\"'+style+'\">';\n\t\t}\n\t},\n\t$skin:function(){\n\t\tthis.type.headerHeight = webix.skin.$active.unitHeaderHeight||20;\n\t}\n}, webix.ui.list);\n\n/*\n\tUI:DataView\n*/\n\n\n \t\n/*\n\tBehavior:EditAbility - enables item operation for the items\n\t\n\t@export\n\t\tedit\n\t\tstopEdit\n*/\n\n\n\nwebix.EditAbility={\n\tdefaults:{\n\t\teditaction:\"click\"\n\t},\n\t$init:function(config){\n\t\tthis._editors = {};\n\t\tthis._in_edit_mode = 0;\n\t\tthis._edit_open_time = 0;\n\t\tthis._contentobj.style.position = \"relative\";\n\t\tif (config)\n\t\t\tconfig.onDblClick = config.onDblClick || {};\n\n\t\tthis.attachEvent(\"onAfterRender\", this._refocus_inline_editor);\n\n\t\t//when we call webix.extend the editable prop can be already set\n\t\tif (this._settings.editable)\n\t\t\tthis._init_edit_events_once();\n\n\t\twebix.extend(this,webix.Undo);\n\t},\n\t_refocus_try:function(newnode){\n\t\ttry{ //Chrome throws an error if selectionStart is not accessible\n\t\t\tif (typeof newnode.selectionStart == \"number\") {\n\t\t\t\tnewnode.selectionStart = newnode.selectionEnd = newnode.value.length;\n\t\t\t} else if (typeof newnode.createTextRange != \"undefined\") {\n\t\t\t\tvar range = newnode.createTextRange();\n\t\t\t\trange.collapse(false);\n\t\t\t\trange.select();\n\t\t\t}\n\t\t} catch(e){}\n\t},\n\t_refocus_inline_editor:function(){\n\t\tvar editor = this.getEditor();\n\t\tif (editor && editor.$inline && !editor.getPopup){\n\t\t\tvar newnode = this._locateInput(editor);\n\t\t\tif (newnode && newnode != editor.node){\n\t\t\t\tvar text = editor.node.value;\n\t\t\t\teditor.node = newnode;\n\t\t\t\tnewnode.value = text;\n\t\t\t\tnewnode.focus();\n\n\t\t\t\tthis._refocus_try(newnode);\n\t\t\t} else \n\t\t\t\tthis.editStop();\n\t\t}\n\t},\n\teditable_setter:function(value){\n\t\tif (value)\n\t\t\tthis._init_edit_events_once();\n\t\treturn value;\n\t},\n\t_init_edit_events_once:function(){\n\t\t//will close editor on any click outside\n\t\twebix.attachEvent(\"onEditEnd\", webix.bind(function(){\n\t\t\tif (this._in_edit_mode)\n\t\t\t\tthis.editStop();\n\t\t}, this));\n\t\twebix.attachEvent(\"onClick\", webix.bind(function(e){\n\t\t\t//but ignore click which opens editor\n\t\t\tif (this._in_edit_mode && (new Date())-this._edit_open_time > 200){\n\t\t\t\tif (!this._last_editor || this._last_editor.popupType || !e || ( !this._last_editor.node || !this._last_editor.node.contains(e.target || e.srcElement)))\n\t\t\t\t\tthis.editStop();\n\t\t\t}\n\t\t}, this));\n\t\t\n\t\t//property sheet has simple data object, without events\n\t\tif (this.data.attachEvent)\n\t\t\tthis.data.attachEvent(\"onIdChange\", webix.bind(function(oldid, newid){\n\t\t\t\tthis._changeEditorId(oldid, newid);\n\t\t\t}, this));\n\n\t\t//when clicking on row - will start editor\n\t\tthis.attachEvent(\"onItemClick\", function(id){\n\t\t\tif (this._settings.editable && this._settings.editaction == \"click\")\n\t\t\t\tthis.edit(id);\n\t\t});\n\t\tthis.attachEvent(\"onItemDblClick\", function(id){\n\t\t\tif (this._settings.editable && this._settings.editaction == \"dblclick\")\n\t\t\t\tthis.edit(id);\n\t\t});\n\t\t//each time when we clicking on input, reset timer to prevent self-closing\n\t\tthis._reset_active_editor = webix.bind(function(){\n\t\t\tthis._edit_open_time = new Date();\n\t\t},this);\n\n\t\tthis._init_edit_events_once = function(){};\n\n\t\tif (this._component_specific_edit_init)\n\t\t\tthis._component_specific_edit_init();\n\t},\n\t_handle_live_edits:function(){\n\t\twebix.delay(function(){\n\t\t\tvar editor = this.getEditor();\n\t\t\tif (editor && editor.config.liveEdit){\n\t\t\t\tvar state = { value:editor.getValue(), old: editor.value };\n\t\t\t\tif (state.value == state.old) return;\n\n\t\t\t\teditor.value = state.value;\n\t\t\t\tthis._set_new_value(editor, state.value, false);\n\t\t\t\tthis.callEvent(\"onLiveEdit\", [state, editor]);\n\t\t\t}\n\t\t}, this);\n\t},\n\t_show_editor_form:function(id){\n\t\tvar form = this._settings.form;\n\t\tif (typeof form != \"string\")\n\t\t\tthis._settings.form = form = webix.ui(form).config.id;\n\n\t\tvar form = webix.$$(form);\n\t\tvar realform = form.setValues?form:form.getChildViews()[0];\n\n\t\t\n\t\trealform.setValues(this.getItem(id.row || id));\n\t\tform.config.master = this.config.id;\n\t\tform.show( this.getItemNode(id) );\n\n\t\tvar first = realform.getChildViews()[0];\n\t\tif (first.focus)\n\t\t\tfirst.focus();\n\t},\n\tedit:function(id, preserve, show){\n\t\tif (!this.callEvent(\"onBeforeEditStart\", [id])) return;\n\t\tif (this._settings.form)\n\t\t\treturn this._show_editor_form(id);\n\n\t\tvar editor = this._get_editor_type(id);\n\t\tif (editor){\n\t\t\tif (this.getEditor(id)) return;\n\t\t\tif (!preserve) this.editStop();\n\n\t\t\t//render html input\n\t\t\twebix.assert(webix.editors[editor], \"Invalid editor type: \"+editor);\n\t\t\tvar type = webix.extend({}, webix.editors[editor]);\n\t\t\t\n\t\t\tvar node = this._init_editor(id, type, show);\n\t\t\tif (type.config.liveEdit)\n\t\t\t\tthis._live_edits_handler = this.attachEvent(\"onKeyPress\", this._handle_live_edits);\n\n\t\t\tvar area = type.getPopup?type.getPopup(node)._viewobj:node;\n\n\t\t\tif (area)\n\t\t\t\twebix._event(area, \"click\", this._reset_active_editor);\n\t\t\tif (node)\n\t\t\t\twebix._event(node, \"change\", this._on_editor_change, { bind:{ view:this, id:id }});\n\t\t\tif (show !== false)\n\t\t\t\ttype.focus();\n\n\t\t\tif (this.$fixEditor)\n\t\t\t\tthis.$fixEditor(type);\n\n\t\t\t//save time of creation to prevent instant closing from the same click\n\t\t\tthis._edit_open_time = webix.edit_open_time = new Date();\n\n\t\t\twebix.UIManager.setFocus(this, true);\n\t\t\tthis.callEvent(\"onAfterEditStart\", [id]);\n\t\t\treturn type;\n\t\t}\n\t\treturn null;\n\t},\n\tgetEditor:function(id){\n\t\tif (!id)\n\t\t\treturn this._last_editor;\n\n\t\treturn this._editors[id];\n\t},\n\t_changeEditorId:function(oldid, newid)\t{\n\t\tvar editor = this._editors[oldid];\n\t\tif (editor){\n\t\t\tthis._editors[newid] = editor;\n\t\t\teditor.id = newid;\n\t\t\tdelete this._editors[oldid];\n\t\t}\n\t},\n\t_on_editor_change:function(e){\n\t\tif (this.view.hasEvent(\"onEditorChange\"))\n\t\t\tthis.view.callEvent(\"onEditorChange\", [this.id, this.view.getEditorValue(this.id) ]);\n\t},\n\t_get_edit_config:function(id){\n\t\treturn this._settings;\n\t},\n\t_init_editor:function(id, type, show){\n\t\tvar config = type.config = this._get_edit_config(id);\n\t\tvar node = type.render();\n\n\t\tif (type.$inline)\n\t\t\tnode = this._locateInput(id);\n\t\ttype.node = node;\n\n\t\tvar item = this.getItem(id);\n\t\t//value can be configured by editValue option\n\t\tvar value = item[this._settings.editValue||\"value\"];\n\t\t//if property was not defined - use empty value\n\t\tif (webix.isUndefined(value))\n\t\t\tvalue = \"\";\n\n\t\ttype.setValue(value, item);\n\t\ttype.value = value;\n\n\t\tthis._addEditor(id, type);\n\n\t\t//show it over cell\n\t\tif (show !== false)\n\t\t\tthis.showItem(id);\n\t\tif (!type.$inline)\n\t\t\tthis._sizeToCell(id, node, true);\n\n\t\tif (type.afterRender)\n\t\t\ttype.afterRender();\n\n\t\treturn node;\n\t},\n\t_locate_cell:function(id){\n\t\treturn this.getItemNode(id);\n\t},\n\t_locateInput:function(id){\n\t\tvar cell = this._locate_cell(id);\n\t\tif (cell)\n\t\t\tcell = cell.getElementsByTagName(\"input\")[0] || cell;\n\n\t\treturn cell;\n\t},\n\t_get_editor_type:function(id){\n\t\treturn this._settings.editor;\n\t},\n\t_addEditor:function(id, type){\n\t\ttype.id = id;\n\t\tthis._editors[id]= this._last_editor = type;\n\t\tthis._in_edit_mode++;\n\t},\n\t_removeEditor:function(editor){\n\t\tif (this._last_editor == editor)\n\t\t\tthis._last_editor = 0;\n\t\t\n\t\tif (editor.destroy)\n\t\t\teditor.destroy();\n\n\t\tdelete editor.popup;\n\t\tdelete editor.node;\n\n\t\tdelete this._editors[editor.id];\n\t\tthis._in_edit_mode--;\n\t},\n\tfocusEditor:function(id){\n\t\tvar editor = this.getEditor.apply(this, arguments);\n\t\tif (editor && editor.focus)\n\t\t\teditor.focus();\n\t},\n\teditCancel:function(){\n\t\tthis.editStop(null, null, true);\n\t},\n\t_applyChanges: function(el){\n\t\tif (el){\n\t\t\tvar ed = this.getEditor();\n\t\t\tif (ed && ed.getPopup && ed.getPopup() == el.getTopParentView()) return;\n\t\t}\n\t\tthis.editStop();\n\t},\n\teditStop:function(id){\n\t\tif (this._edit_stop) return;\n\t\tthis._edit_stop = 1;\n\n\n\t\tvar cancel = arguments[2];\n\t\tvar result = 1;\n\t\tif (!id){\n\t\t\tthis._for_each_editor(function(editor){\n\t\t\t\tresult = result * this._editStop(editor, cancel);\n\t\t\t});\n\t\t} else \n\t\t\tresult = this._editStop(this._editors[id], cancel);\n\n\t\tthis._edit_stop = 0;\n\t\treturn result;\n\t},\n\t_cellPosition:function(id){\n\t\tvar html = this.getItemNode(id);\n\t\treturn {\n\t\t\tleft:html.offsetLeft, \n\t\t\ttop:html.offsetTop,\n\t\t\theight:html.offsetHeight,\n\t\t\twidth:html.offsetWidth,\n\t\t\tparent:this._contentobj\n\t\t};\n\t},\n\t_sizeToCell:function(id, node, inline){\n\t\t//fake inputs\n\t\tif (!node.style) return;\n\n\t\tvar pos = this._cellPosition(id);\n\n\t\tnode.style.top = pos.top + \"px\";\n\t\tnode.style.left = pos.left + \"px\";\n\n\t\tnode.style.width = pos.width-1+\"px\";\n\t\tnode.style.height = pos.height-1+\"px\";\n\n\t\tnode.top = pos.top; //later will be used during y-scrolling\n\n\t\tif (inline) pos.parent.appendChild(node);\n\t},\n\t_for_each_editor:function(handler){\n\t\tfor (var editor in this._editors)\n\t\t\thandler.call(this, this._editors[editor]);\n\t},\n\t_editStop:function(editor, ignore){\n\t\tif (!editor) return;\n\t\tvar state = { \n\t\t\tvalue : editor.getValue(), \n\t\t\told : editor.value\n\t\t};\n\t\tif (this.callEvent(\"onBeforeEditStop\", [state, editor, ignore])){\n\t\t\tif (!ignore){\n\t\t\t\t//special case, state.old = 0, state.value = \"\"\n\t\t\t\t//we need to state.old to string, to detect the change\n\t\t\t\tvar old = state.old;\n\t\t\t\tif (typeof state.value == \"string\") old += \"\";\n\n\t\t\t\tif (old != state.value || editor.config.liveEdit){\n\t\t\t\t\tvar item = this._set_new_value(editor, state.value, true);\n\t\t\t\t\tthis.updateItem(editor.row || editor.id, item);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (editor.$inline)\n\t\t\t\teditor.node = null;\n\t\t\telse\n\t\t\t\twebix.html.remove(editor.node);\n\n\t\t\tvar popup = editor.config.suggest;\n\t\t\tif (popup && typeof popup == \"string\")\n\t\t\t\twebix.$$(popup).hide();\n\n\t\t\tthis._removeEditor(editor);\n\t\t\tif (this._live_edits_handler)\n\t\t\t\tthis.detachEvent(this._live_edits_handler);\n\n\t\t\tthis.callEvent(\"onAfterEditStop\", [state, editor, ignore]);\n\t\t\treturn 1;\n\t\t}\n\t\treturn 0;\n\t},\n\tvalidateEditor:function(id){\n\t\tvar result = true;\n\t\tif (this._settings.rules){\n\t\t\tvar editor = this.getEditor(id);\n\t\t\tvar key = editor.column||this._settings.editValue||\"value\";\n\t\t\tvar rule = this._settings.rules[key];\n\t\t\tvar all = this._settings.rules.$all;\n\n\t\t\tif (rule || all){\n\t\t\t\tvar obj = this.data.getItem(editor.row||editor.id);\n\t\t\t\tvar value = editor.getValue();\n\t\t\t\tvar input = editor.getInputNode();\n\n\t\t\t\tif (rule)\n\t\t\t\t\tresult = rule.call(this, value, obj, key);\n\t\t\t\tif (all)\n\t\t\t\t\tresult = all.call(this, value, obj, key) && result;\n\t\t\t\n\t\t\t\tif (result)\n\t\t\t\t\twebix.html.removeCss(input, \"webix_invalid\");\n\t\t\t\telse\n\t\t\t\t\twebix.html.addCss(input, \"webix_invalid\");\n\n\t\t\t\twebix.callEvent(\"onLiveValidation\", [editor, result, obj, value]);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t},\n\tgetEditorValue:function(id){\n\t\tvar editor;\n\t\tif (arguments.length === 0)\n\t\t\teditor = this._last_editor;\n\t\telse\n\t\t\teditor = this.getEditor(id);\n\n\t\tif (editor)\n\t\t\treturn editor.getValue();\n\t},\n\tgetEditState:function(){\n\t\treturn this._last_editor || false;\n\t},\n\teditNext:function(next, from){ \n\t\tnext = next !== false; //true by default\n\t\tif (this._in_edit_mode == 1 || from){\n\t\t\t//only if one editor is active\n\t\t\tvar editor_next = this._find_cell_next((this._last_editor || from), function(id){\n\t\t\t\tif (this._get_editor_type(id))\n\t\t\t\t\treturn true;\n\t\t\t\treturn false;\n\t\t\t}, next);\n\n\t\t\tif (this.editStop()){\t//if we was able to close previous editor\n\t\t\t\tif (editor_next){\t//and there is a new target\n\t\t\t\t\tthis.edit(editor_next);\t//init new editor\n\t\t\t\t\tthis._after_edit_next(editor_next);\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\t//stab, used in datatable\n\t_after_edit_next:function(){},\n\t_find_cell_next:function(start, check, direction){\n\t\tvar row = this.getIndexById(start.id);\n\t\tvar order = this.data.order;\n\t\t\n\t\tif (direction){\n\t\t\tfor (var i=row+1; i<order.length; i++){\n\t\t\t\tif (check.call(this, order[i]))\n\t\t\t\t\treturn order[i];\n\t\t\t}\n\t\t} else {\n\t\t\tfor (var i=row-1; i>=0; i--){\n\t\t\t\tif (check.call(this, order[i]))\n\t\t\t\t\treturn order[i];\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\t_set_new_value:function(editor, new_value, copy){\n\t\tvar item = copy ? {} : this.getItem(editor.id);\n\t\titem[this._settings.editValue||\"value\"] = new_value;\n\t\treturn item;\n\t}\n};\n\n\n(function(){\n\nfunction init_suggest(editor, input){\n\tvar suggest = editor.config.suggest;\n\tif (suggest){\n\t\tvar box = editor.config.suggest = create_suggest(suggest);\n\t\tvar boxobj = webix.$$(box);\n\t\tif (boxobj && input)\n\t\t\tboxobj.linkInput(input);\n\t}\n}\n\nfunction create_suggest(config){\n\tif (typeof config == \"string\") return config;\n\tif (config.linkInput) return config._settings.id;\n\n\t\n\tif (typeof config == \"object\"){\n\t\tif (webix.isArray(config))\n\t\t\tconfig = { data: config };\n\t\tconfig.view = config.view || \"suggest\";\n\t} else if (config === true)\n\t\tconfig = { view:\"suggest\" };\n\n\tvar obj = webix.ui(config);\n\treturn obj.config.id;\n}\n\nfunction getLabel(config){\n\tvar text = config.header && config.header[0]?config.header[0].text:config.editValue || config.label;\n\treturn (text || \"\").toString().replace(/<[^>]*>/g, \"\");\n}\n\n/*\n\tthis.node - html node, available after render call\n\tthis.config - editor config\n\tthis.value - original value\n\tthis.popup - id of popup \n*/\nwebix.editors = {\n\t\"text\":{\n\t\tfocus:function(){\n\t\t\tthis.getInputNode(this.node).focus();\n\t\t\tthis.getInputNode(this.node).select();\n\t\t},\n\t\tgetValue:function(){\n\t\t\treturn this.getInputNode(this.node).value;\n\t\t},\n\t\tsetValue:function(value){\n\t\t\tvar input = this.getInputNode(this.node);\n\t\t\tinput.value = value;\n\n\t\t\tinit_suggest(this, input);\n\t\t},\n\t\tgetInputNode:function(){\n\t\t\treturn this.node.firstChild;\n\t\t},\n\t\trender:function(){\n\t\t\treturn webix.html.create(\"div\", {\n\t\t\t\t\"class\":\"webix_dt_editor\"\n\t\t\t}, \"<input type='text' aria-label='\"+getLabel(this.config)+\"'>\");\n\t\t}\n\t},\n\t\"inline-checkbox\":{\n\t\trender:function(){ return {}; },\n\t\tgetValue:function(){\n\t\t\treturn this.node.checked;\n\t\t},\n\t\tsetValue:function(){},\n\t\tfocus:function(){\n\t\t\tthis.node.focus();\n\t\t},\n\t\tgetInputNode:function(){},\n\t\t$inline:true\n\t},\n\t\"inline-text\":{\n\t\trender:function(){ return {}; },\n\t\tgetValue:function(){\n\t\t\treturn this.node.value;\n\t\t},\n\t\tsetValue:function(){},\n\t\tfocus:function(){\n\t\t\ttry{\t//IE9\n\t\t\t\tthis.node.select();\n\t\t\t\tthis.node.focus();\n\t\t\t} catch(e){}\n\t\t},\n\t\tgetInputNode:function(){},\n\t\t$inline:true\n\t},\n\t\"checkbox\":{\n\t\tfocus:function(){\n\t\t\tthis.getInputNode().focus();\n\t\t},\n\t\tgetValue:function(){\n\t\t\treturn this.getInputNode().checked;\n\t\t},\n\t\tsetValue:function(value){\n\t\t\tthis.getInputNode().checked = !!value;\n\t\t},\n\t\tgetInputNode:function(){\n\t\t\treturn this.node.firstChild.firstChild;\n\t\t},\n\t\trender:function(){\n\t\t\treturn webix.html.create(\"div\", {\n\t\t\t\t\"class\":\"webix_dt_editor\"\n\t\t\t}, \"<div><input type='checkbox' aria-label='\"+getLabel(this.config)+\"'></div>\");\n\t\t}\n\t},\n\t\"select\":{\n\t\tfocus:function(){\n\t\t\tthis.getInputNode().focus();\n\t\t},\n\t\tgetValue:function(){\n\t\t\treturn this.getInputNode().value;\n\t\t},\n\t\tsetValue:function(value){\n\t\t\tthis.getInputNode().value = value;\n\t\t},\n\t\tgetInputNode:function(){\n\t\t\treturn this.node.firstChild;\n\t\t},\n\t\trender:function(){\n\t\t\tvar html = \"\";\n\t\t\tvar options = this.config.options || this.config.collection;\n\t\t\twebix.assert(options,\"options not defined for select editor\");\n\n\t\t\tif (options.data && options.data.each)\n\t\t\t\toptions.data.each(function(obj){\n\t\t\t\t\thtml +=\"<option value='\"+obj.id+\"'>\"+obj.value+\"</option>\";\n\t\t\t\t});\n\t\t\telse {\n\t\t\t\tif (webix.isArray(options)){\n\t\t\t\t\tfor (var i=0; i<options.length; i++){\n\t\t\t\t\t\tvar rec = options[i];\n\t\t\t\t\t\tvar isplain = webix.isUndefined(rec.id);\n\t\t\t\t\t\tvar id = isplain ? rec : rec.id;\n\t\t\t\t\t\tvar label = isplain ? rec : rec.value;\n\n\t\t\t\t\t\thtml +=\"<option value='\"+id+\"'>\"+label+\"</option>\";\n\t\t\t\t\t}\n\t\t\t\t} else for (var key in options){\n\t\t\t\t\thtml +=\"<option value='\"+key+\"'>\"+options[key]+\"</option>\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn webix.html.create(\"div\", {\n\t\t\t\t\"class\":\"webix_dt_editor\"\n\t\t\t}, \"<select aria-label='\"+getLabel(this.config)+\"'>\"+html+\"</select>\");\n\t\t}\n\t},\n\tpopup:{\n\t\tfocus:function(){\n\t\t\tthis.getInputNode().focus();\n\t\t},\n\t\tdestroy:function(){\n\t\t\tthis.getPopup().hide();\n\t\t},\n\t\tgetValue:function(){\n\t\t\treturn this.getInputNode().getValue()||\"\";\n\t\t},\n\t\tsetValue:function(value){\n\t\t\tthis.getPopup().show(this.node);\n\t\t\tthis.getInputNode().setValue(value);\n\t\t},\n\t\tgetInputNode:function(){\n\t\t\treturn this.getPopup().getChildViews()[0];\n\t\t},\n\t\tgetPopup:function(){\n\t\t\tif (!this.config.popup)\n\t\t\t\tthis.config.popup = this.createPopup();\n\n\t\t\treturn webix.$$(this.config.popup);\n\t\t},\n\t\tcreatePopup:function(){\n\t\t\tvar popup = this.config.popup || this.config.suggest;\n\n\t\t\tif (popup){\n\t\t\t\tvar pobj;\n\t\t\t\tif (typeof popup == \"object\" && !popup.name){\n\t\t\t\t\tpopup.view = popup.view || \"suggest\";\n\t\t\t\t\tpobj = webix.ui(popup);\n\t\t\t\t} else\n\t\t\t\t\tpobj = webix.$$(popup);\n\n\t\t\t\tif (pobj.linkInput)\n\t\t\t\t\tpobj.linkInput(document.body);\n\t\t\t\telse if(this.linkInput)\n\t\t\t\t\tthis.linkInput(document.body);\n\n\t\t\t\treturn pobj;\n\t\t\t}\n\n\t\t\tvar type = webix.editors.$popup[this.popupType];\n\t\t\tif (typeof type != \"string\"){\n\t\t\t\ttype = webix.editors.$popup[this.popupType] = webix.ui(type);\n\t\t\t\tthis.popupInit(type);\n\n\t\t\t\tif(!type.linkInput)\n\t\t\t\t\tthis.linkInput(document.body);\n\t\t\t\t\n\t\t\t}\n\t\t\treturn type._settings.id;\n\t\t},\n\t\tlinkInput:function(node){\n\t\t\twebix._event(webix.toNode(node), \"keydown\", webix.bind(function(e){\n\t\t\t\tvar code = e.which || e.keyCode, list = this.getInputNode();\n\t\t\t\tif(!list.isVisible()) return;\n\n\t\t\t\tif(code === 40){\n\t\t\t\t\tif(list.moveSelection)\n\t\t\t\t\t\tlist.moveSelection(\"down\");\n\t\t\t\t\twebix.UIManager.setFocus(list);\n\t\t\t\t} \n\t\t\t\t// shift+enter support for 'popup' editor\n\t\t\t\telse if(code === 13 && ( e.target.nodeName !==\"TEXTAREA\" || !e.shiftKey))\n\t\t\t\t\twebix.callEvent(\"onEditEnd\", []);\n\t\t\t\t\n\t\t\t}, this));\n\t\t},\n\n\t\tpopupInit:function(popup){},\n\t\tpopupType:\"text\",\n\t\trender\t:function(){ return {}; },\n\t\t$inline:true\n\t}\n};\n\nwebix.editors.color = webix.extend({\n\tfocus\t:function(){},\n\tpopupType:\"color\",\n\tpopupInit:function(popup){\n\t\tpopup.getChildViews()[0].attachEvent(\"onSelect\", function(value){\n\t\t\twebix.callEvent(\"onEditEnd\",[value]);\n\t\t});\n\t}\n}, webix.editors.popup);\n\nwebix.editors.date = webix.extend({\n\tfocus\t:function(){},\n\tpopupType:\"date\",\n\tsetValue:function(value){\n\t\tthis._is_string = this.config.stringResult || (value && typeof value == \"string\");\n\t\twebix.editors.popup.setValue.call(this, value);\n\t},\n\tgetValue:function(){\n\t\treturn this.getInputNode().getValue(this._is_string?webix.i18n.parseFormatStr:\"\")||\"\";\n\t},\n\tpopupInit:function(popup){\n\t\tpopup.getChildViews()[0].attachEvent(\"onDateSelect\", function(value){\n\t\t\twebix.callEvent(\"onEditEnd\",[value]);\n\t\t});\n\t}\n}, webix.editors.popup);\n\nwebix.editors.combo = webix.extend({\n\t_create_suggest:function(config){\n        if(this.config.popup){\n            return this.config.popup.config.id;\n        }\n\t\telse if (config){\n\t\t\treturn create_suggest(config);\n\t\t} else\n\t\t\treturn this._shared_suggest(config);\n\t},\n\t_shared_suggest:function(){\n\t\tvar e = webix.editors.combo;\n\t\treturn (e._suggest = e._suggest || this._create_suggest(true));\n\t},\n\trender:function(){\n\t\tvar node = webix.html.create(\"div\", {\n\t\t\t\"class\":\"webix_dt_editor\"\n\t\t}, \"<input type='text' role='combobox' aria-label='\"+getLabel(this.config)+\"'>\");\n\n\t\t//save suggest id for future reference\t\t\n\t\tvar suggest = this.config.suggest = this._create_suggest(this.config.suggest);\n\n\t\tif (suggest){\n\t\t\twebix.$$(suggest).linkInput(node.firstChild, true);\n\t\t\twebix._event(node.firstChild, \"click\",webix.bind(this.showPopup, this));\n\t\t}\n\t\treturn node;\n\t},\n\tgetPopup:function(){\n\t\treturn webix.$$(this.config.suggest);\n\t},\n\tshowPopup:function(){\n\t\tvar popup = this.getPopup();\n        var list = popup.getList();\n\t\tvar input = this.getInputNode();\n        var value = this.getValue();\n\n\t\tpopup.show(input);\n\t\tinput.setAttribute(\"aria-expanded\", \"true\");\n        if(value ){\n           webix.assert(list.exists(value), \"Option with ID \"+value+\" doesn't exist\");\n            if(list.exists(value)){\n                list.select(value);\n                list.showItem(value);\n            }\n        }else{\n            list.unselect();\n            list.showItem(list.getFirstId());\n        }\n\t\tpopup._last_input_target = input;\n\t},\n\tafterRender:function(){\n\t\tthis.showPopup();\n\t},\n\tsetValue:function(value){\n\t\tthis._initial_value = value;\n\t\tif (this.config.suggest){\n\t\t\tvar sobj = webix.$$(this.config.suggest);\n\t\t\tvar data =  this.config.collection || this.config.options;\n\t\t\tif (data)\n\t\t\t\tsobj.getList().data.importData(data);\n\n\t\t\tthis._initial_text = this.getInputNode(this.node).value = sobj.getItemText(value);\n\t\t}\n\t},\n\tgetValue:function(){\n\t\tvar value = this.getInputNode().value;\n\t\t\n\t\tif (this.config.suggest){\n\t\t\tif (value == this._initial_text)\n\t\t\t\treturn this._initial_value;\n\t\t\treturn webix.$$(this.config.suggest).getSuggestion();\n\t\t} else \n\t\t\treturn value;\n\t}\n}, webix.editors.text);\n\n\nwebix.editors.richselect = webix.extend({\n\tfocus:function(){},\n\tgetValue:function(){\n\t\treturn this.getPopup().getValue();\n\t},\n\tsetValue:function(value){\n\t\tvar suggest =  this.config.collection || this.config.options;\n        var list = this.getInputNode();\n\t\tif (suggest)\n\t\t\tthis.getPopup().getList().data.importData(suggest);\n\n        this.getPopup().show(this.node);\n        this.getPopup().setValue(value);\n\t},\n\tgetInputNode:function(){\n\t\treturn this.getPopup().getList();\n\t},\n\tpopupInit:function(popup){\n\t\tpopup.linkInput(document.body);\n\t},\n\tpopupType:\"richselect\"\n}, webix.editors.popup);\n\nwebix.editors.password = webix.extend({\n\trender:function(){\n\t\treturn webix.html.create(\"div\", {\n\t\t\t\"class\":\"webix_dt_editor\"\n\t\t}, \"<input type='password' aria-label='\"+getLabel(this.config)+\"'>\");\n\t}\n}, webix.editors.text);\n\nwebix.editors.$popup = {\n\ttext:{\n\t\tview:\"popup\", width:250, height:150,\n\t\tbody:{ view:\"textarea\" }\n\t},\n\tcolor:{\n\t\tview:\"popup\",\n\t\tbody:{ view:\"colorboard\" }\n\t},\n\tdate:{\n\t\tview:\"popup\", width:250, height:250, padding:0,\n\t\tbody:{ view:\"calendar\", icons:true, borderless:true }\n\t},\n\trichselect:{\n\t\tview:\"suggest\",\n\t\tbody:{ view:\"list\", select:true }\n\t}\n};\n\n})();\n \n \n\n\n\n/*\n\tRenders collection of items\n\tAlways shows y-scroll\n\tCan be used with huge datasets\n\t\n\t@export\n\t\tshow\n\t\trender\n*/\n\n \n\nwebix.VirtualRenderStack={\n\t$init:function(){\n\t\twebix.assert(this.render,\"VirtualRenderStack :: Object must use RenderStack first\");\n\t\t\n\t\tthis._htmlmap={}; //init map of rendered elements\n        \n        //we need to repaint area each time when view resized or scrolling state is changed\n        webix._event(this._viewobj,\"scroll\",webix.bind(this._render_visible_rows,this));\n\t\tif(webix.env.touch){\n\t\t\tthis.attachEvent(\"onAfterScroll\", webix.bind(this._render_visible_rows,this));\n\t\t}\n\t\t//here we store IDs of elemenst which doesn't loadede yet, but need to be rendered\n\t\tthis._unrendered_area=[];\n\t},\n\t//return html object by item's ID. Can return null for not-rendering element\n\tgetItemNode:function(search_id){\n\t\t//collection was filled in _render_visible_rows\n\t\treturn this._htmlmap[search_id];\n\t},\n\t//adjust scrolls to make item visible\n\tshowItem:function(id){\n\t\tvar range = this._getVisibleRange();\n\t\tvar ind = this.data.getIndexById(id);\n\t\t//we can't use DOM method for not-rendered-yet items, so fallback to pure math\n\t\tvar dy = Math.floor(ind/range._dx)*range._y;\n\t\tvar state = this.getScrollState();\n\t\tif (dy<state.y || dy + this._settings.height >= state.y + this._content_height)\n\t\t\tthis.scrollTo(0, dy);\n\t},\t\n\t//repain self after changes in DOM\n\t//for add, delete, move operations - render is delayed, to minify performance impact\n\trender:function(id,data,type){\n\t\tif (!this.isVisible(this._settings.id) || this.$blockRender)\n\t\t\treturn;\n\t\t\n\t\tif (webix.debug_render)\n\t\t\twebix.log(\"Render: \"+this.name+\"@\"+this._settings.id);\n\t\t\t\n\t\tif (id){\n\t\t\tvar cont = this.getItemNode(id);\t//old html element\n\t\t\tswitch(type){\n\t\t\t\tcase \"update\":\n\t\t\t\t\tif (!cont) return;\n\t\t\t\t\t//replace old with new\n\t\t\t\t\tvar t = this._htmlmap[id] = this._toHTMLObject(data);\n\t\t\t\t\twebix.html.insertBefore(t, cont); \n\t\t\t\t\twebix.html.remove(cont);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault: // \"move\", \"add\", \"delete\"\n\t\t\t\t\t/*\n\t\t\t\t\t\tfor all above operations, full repainting is necessary\n\t\t\t\t\t\tbut from practical point of view, we need only one repainting per thread\n\t\t\t\t\t\tcode below initiates double-thread-rendering trick\n\t\t\t\t\t*/\n\t\t\t\t\tthis._render_delayed();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t} else {\n\t\t\t//full repainting\n\t\t\tif (this.callEvent(\"onBeforeRender\",[this.data])){\n\t\t\t\tthis._htmlmap = {}; \t\t\t\t\t//nulify links to already rendered elements\n\t\t\t\tthis._render_visible_rows(null, true);\t\n\t\t\t\t// clear delayed-rendering, because we already have repaint view\n\t\t\t\tthis._wait_for_render = false;\t\t\t\n\t\t\t\tthis.callEvent(\"onAfterRender\",[]);\n\t\t\t}\n\t\t}\n\t},\n\t//implement double-thread-rendering pattern\n\t_render_delayed:function(){\n\t\t//this flag can be reset from outside, to prevent actual rendering \n\t\tif (this._wait_for_render) return;\n\t\tthis._wait_for_render = true;\t\n\t\t\n\t\twindow.setTimeout(webix.bind(function(){\n\t\t\tthis.render();\n\t\t},this),1);\n\t},\n\t//create empty placeholders, which will take space before rendering\n\t_create_placeholder:function(height){\n\t\tif(webix.env.maxHTMLElementSize)\n\t\t\theight = Math.min(webix.env.maxHTMLElementSize, height);\n\t\tvar node = document.createElement(\"DIV\");\n\t\t\tnode.style.cssText = \"height:\"+height+\"px; width:100%; overflow:hidden;\";\n\t\treturn node;\n\t},\n\t/*\n\t\tMethods get coordinatest of visible area and checks that all related items are rendered\n\t\tIf, during rendering, some not-loaded items was detected - extra data loading is initiated.\n\t\treset - flag, which forces clearing of previously rendered elements\n\t*/\n\t_render_visible_rows:function(e,reset){\n\t\tthis._unrendered_area=[]; //clear results of previous calls\n\t\t\n\t\tvar viewport = this._getVisibleRange();\t//details of visible view\n\n\t\tif (!this._dataobj.firstChild || reset){\t//create initial placeholder - for all view space\n\t\t\tthis._dataobj.innerHTML=\"\";\n\t\t\tthis._dataobj.appendChild(this._create_placeholder(viewport._max));\n\t\t\t//register placeholder in collection\n\t\t\tthis._htmlrows = [this._dataobj.firstChild];\n\t\t}\n\t\t\n\t\t/*\n\t\t\tvirtual rendering breaks all view on rows, because we know widht of item\n\t\t\twe can calculate how much items can be placed on single row, and knowledge \n\t\t\tof that, allows to calculate count of such rows\n\t\t\t\n\t\t\teach time after scrolling, code iterate through visible rows and render items \n\t\t\tin them, if they are not rendered yet\n\t\t\t\n\t\t\tboth rendered rows and placeholders are registered in _htmlrows collection\n\t\t*/\n\n\t\t//position of first visible row\n\t\tvar t = viewport._from;\n\t\t\t\n\t\twhile(t<=viewport._height){\t//loop for all visible rows\n\t\t\t//skip already rendered rows\n\t\t\twhile(this._htmlrows[t] && this._htmlrows[t]._filled && t<=viewport._height){\n\t\t\t\tt++; \n\t\t\t}\n\t\t\t//go out if all is rendered\n\t\t\tif (t>viewport._height) break;\n\t\t\t\n\t\t\t//locate nearest placeholder\n\t\t\tvar holder = t;\n\t\t\twhile (!this._htmlrows[holder]) holder--;\n\t\t\tvar holder_row = this._htmlrows[holder];\n\t\t\t\n\t\t\t//render elements in the row\t\t\t\n\t\t\tvar base = t*viewport._dx+(this.data.$min||0);\t//index of rendered item\n\t\t\tif (base > (this.data.$max||Infinity)) break;\t//check that row is in virtual bounds, defined by paging\n\t\t\tvar nextpoint =  Math.min(base+viewport._dx-1,(this.data.$max?this.data.$max-1:Infinity));\n\t\t\tvar node = this._create_placeholder(viewport._y);\n\t\t\t//all items in rendered row\n\t\t\tvar range = this.data.getIndexRange(base, nextpoint);\n\t\t\tif (!range.length) break; \n\t\t\t\n\t\t\tvar loading = { $template:\"Loading\" };\n\t\t\tfor (var i=0; i<range.length; i++){\n\t\t\t\tif (!range[i])\n\t        \t\tthis._unrendered_area.push(base+i);\n\t\t\t\trange[i] = this._toHTML(range[i]||loading);\n\t\t\t}\n\n\t\t\tnode.innerHTML=range.join(\"\"); \t//actual rendering\n\t\t\tfor (var i=0; i < range.length; i++)\t\t\t\t\t//register all new elements for later usage in getItemNode\n\t\t\t\tthis._htmlmap[this.data.getIdByIndex(base+i)]=node.childNodes[i];\n\t\t\t\n\t\t\t//correct placeholders\n\t\t\tvar h = parseFloat(holder_row.style.height,10);\n\t\t\tvar delta = (t-holder)*viewport._y;\n\t\t\tvar delta2 = (h-delta-viewport._y);\n\t\t\t\n\t\t\t//add new row to the DOOM\n\t\t\twebix.html.insertBefore(node,delta?holder_row.nextSibling:holder_row,this._dataobj);\n\t\t\tthis._htmlrows[t]=node;\n\t\t\tnode._filled = true;\n\t\t\t\n\t\t\t/*\n\t\t\t\tif new row is at start of placeholder - decrease placeholder's height\n\t\t\t\telse if new row takes whole placeholder - remove placeholder from DOM\n\t\t\t\telse \n\t\t\t\t\twe are inserting row in the middle of existing placeholder\n\t\t\t\t\tdecrease height of existing one, and add one more, \n\t\t\t\t\tbefore the newly added row\n\t\t\t*/\n\t\t\tif (delta <= 0 && delta2>0){\n\t\t\t\tholder_row.style.height = delta2+\"px\";\n\t\t\t\tthis._htmlrows[t+1] = holder_row;\n\t\t\t} else {\n\t\t\t\tif (delta<0)\n\t\t\t\t\twebix.html.remove(holder_row);\n\t\t\t\telse\n\t\t\t\t\tholder_row.style.height = delta+\"px\";\n\t\t\t\tif (delta2>0){ \n\t\t\t\t\tvar new_space = this._htmlrows[t+1] = this._create_placeholder(delta2);\n\t\t\t\t\twebix.html.insertBefore(new_space,node.nextSibling,this._dataobj);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\tt++;\n\t\t}\n\t\t\n\t\t//when all done, check for non-loaded items\n\t\tif (this._unrendered_area.length){\n\t\t\t//we have some data to load\n\t\t\t//detect borders\n\t\t\tvar from = this._unrendered_area[0];\n\t\t\tvar to = this._unrendered_area.pop()+1;\n\t\t\tif (to>from){\n\t\t\t\t//initiate data loading\n\t\t\t\tvar count = to - from;\n\t\t\t\tif (this._maybe_loading_already(count, from)) return;\n\n\t\t\t\tcount = Math.max(count, (this._settings.datafetch||this._settings.loadahead||0));\n\t\t\t\tthis.loadNext(count, from);\n\t\t\t}\n\t\t}\n\t},\n\t//calculates visible view\n\t_getVisibleRange:function(){\n\t\tvar state = this.getScrollState();\n\t\tvar top = state.y;\n\t\tvar width = this._content_width; \n\t\tvar height = this._content_height;\n\n\t\t//size of single item\n\t\tvar t = this.type;\n\n\t\tvar dx = Math.floor(width/t.width)||1; //at least single item per row\n\t\t\n\t\tvar min = Math.floor(top/t.height);\t\t\t\t//index of first visible row\n\t\tvar dy = Math.ceil((height+top)/t.height)-1;\t\t//index of last visible row\n\t\t//total count of items, paging can affect this math\n\t\tvar count = this.data.$max?(this.data.$max-this.data.$min):this.data.count();\n\t\tvar max = Math.ceil(count/dx)*t.height;\t\t\t//size of view in rows\n\n\t\treturn { _from:min, _height:dy, _top:top, _max:max, _y:t.height, _dx:dx};\n\t},\n\t_cellPosition:function(id){\n\t\tvar html = this.getItemNode(id);\n\t\tif (!html){\n\t\t\tthis.showItem(id);\n\t\t\tthis._render_visible_rows();\n\t\t\thtml = this.getItemNode(id);\n\t\t}\n\t\treturn {\n\t\t\tleft:html.offsetLeft, \n\t\t\ttop:html.offsetTop,\n\t\t\theight:html.offsetHeight,\n\t\t\twidth:html.offsetWidth,\n\t\t\tparent:this._contentobj\n\t\t};\n\t}\n};\n\n\n\nwebix.protoUI({\n\tname:\"dataview\",\n\t$init:function(config){\n\t\tif (config.sizeToContent)\n\t\t\t//method need to be called before data-loaders\n\t\t\t//so we are using unshift to place it at start\n\t\t\tthis.$ready.unshift(this._after_init_call);\n\t\tvar prerender = config.prerender || this.defaults.prerender;\n\t\tif (prerender === false || (prerender !== true && config.height !== \"auto\" && !config.autoheight))\n\t\t\twebix.extend(this, webix.VirtualRenderStack, true);\n\t\tif (config.autoheight)\n\t\t\tconfig.scroll = false;\n\n\t\tthis._contentobj.className+=\" webix_dataview\";\n\n\t\tthis._viewobj.setAttribute(\"role\", \"listbox\");\n\t},\n\t_after_init_call:function(){\n\t\tvar test = webix.html.create(\"DIV\",0,this.type.template({}));\n\t\ttest.style.position=\"absolute\";\n\t\tdocument.body.appendChild(test);\n\t\tthis.type.width = test.offsetWidth;\n\t\tthis.type.height = test.offsetHeight;\n\t\t\n\t\twebix.html.remove(test);\n\t},\n\tdefaults:{\n\t\tscroll:true,\n\t\tdatafetch:50,\n\t\tnavigation:true\n\t},\n\t_id:\"webix_f_id\",\n\t_itemClassName:\"webix_dataview_item\",\n\ton_click:{\n\t\twebix_dataview_item:function(e,id){ \n\t\t\tif (this._settings.select){\n\t\t\t\tif (this._settings.select==\"multiselect\" || this._settings.multiselect)\n\t\t\t\t\tthis.select(id, false, ((this._settings.multiselect == \"touch\") || e.ctrlKey || e.metaKey), e.shiftKey); \t//multiselection\n\t\t\t\telse\n\t\t\t\t\tthis.select(id);\n\t\t\t}\n\t\t}\t\t\n\t},\n\ton_dblclick:{\n\t},\n\ton_mouse_move:{\n\t},\n\ttype:{\n\t\t//normal state of item\n\t\ttemplate:webix.template(\"#value#\"),\n\t\t//in case of dyn. loading - temporary spacer\n\t\ttemplateLoading:webix.template(\"Loading...\"),\n\t\twidth:160,\n\t\theight:50,\n\t\tclassname:function(obj, common, marks){\n\t\t\tvar css = \"webix_dataview_item \";\n\n\t\t\tif (common.css) css +=common.css+\" \";\n\t\t\tif (obj.$css){\n\t\t\t\tif (typeof obj.$css == \"object\")\n\t\t\t\t\tobj.$css = webix.html.createCss(obj.$css);\n\t\t\t\tcss +=obj.$css+\" \";\n\t\t\t}\n\t\t\tif (marks && marks.$css) css +=marks.$css+\" \";\n\t\t\t\n\t\t\treturn css;\n\t\t},\n\t\taria:function(obj, common, marks){\n\t\t\treturn 'role=\"option\"'+(marks && marks.webix_selected?' aria-selected=\"true\" tabindex=\"0\"':' tabindex=\"-1\"');\n\t\t},\n\t\ttemplateStart:webix.template('<div webix_f_id=\"#id#\" class=\"{common.classname()}\" {common.aria()} style=\"width:{common.width}px; height:{common.height}px; float:left; overflow:hidden;\">'),\n\t\ttemplateEnd:webix.template(\"</div>\")\n\t\t\n\t},\n\t_calck_autoheight:function(width){\n\t\treturn (this._settings.height = this.type.height * Math.ceil( this.data.count() / Math.floor(width / this.type.width)));\n\t},\n\tautoheight_setter:function(mode){\n\t\tif (mode){\n\t\t\tthis.data.attachEvent(\"onStoreLoad\", webix.bind(this.resize, this));\n\t\t\tthis._contentobj.style.overflowY = \"hidden\";\n\t\t}\n\t\treturn mode;\n\t},\n\t$getSize:function(dx, dy){\n\t\tif ((this._settings.xCount >0) && this.type.width != \"auto\" && !this._autowidth)\n\t\t\tthis._settings.width = this.type.width*this._settings.xCount + (this._scroll_y?webix.ui.scrollSize:0);\n\t\tif (this._settings.yCount && this.type.height != \"auto\")\n\t\t\tthis._settings.height = this.type.height*this._settings.yCount;\n\n\t\tvar width = this._settings.width || this._content_width;\n\t\tif (this._settings.autoheight && width){\n\t\t\tthis._calck_autoheight(width);\n\t\t\tthis.scroll_setter(false);\t\n\t\t}\n\t\treturn webix.ui.view.prototype.$getSize.call(this, dx, dy);\t\t\n\t},\n\t_recalk_counts:function(){\n\t\tvar render = false;\n\t\tif (this._settings.yCount && this.type.height == \"auto\"){\n\t\t\tthis.type.height = Math.floor(this._content_height/this._settings.yCount);\n\t\t\trender = true;\n\t\t}\n\t\tif (this._settings.xCount && (this.type.width == \"auto\"||this._autowidth)){\n\t\t\tthis._autowidth = true; //flag marks that width was set to \"auto\" initially\n\t\t\tthis.type.width = Math.floor(this._content_width/this._settings.xCount);\n\t\t\trender = true;\n\t\t} else \n\t\t\tthis._autowidth = false;\n\n\t\treturn render;\n\t},\n\t$setSize:function(x,y){\n\t\tif (webix.ui.view.prototype.$setSize.call(this, x, y)){\n\t\t\tif (this._settings.autoheight && this._calck_autoheight() != this._content_height)\n\t\t\t\treturn webix.delay(this.resize, this);\n\n\t\t\tif (this._recalk_counts() || this._render_visible_rows)\n\t\t\t\tthis.render();\n\t\t}\n\t}\n}, webix.DataMove, webix.DragItem, webix.MouseEvents, webix.KeysNavigation, webix.SelectionModel, webix.Scrollable, webix.CustomPrint, webix.ui.proto);\n\n\n\nwebix.DataDriver.htmltable={\n\n\t//convert json string to json object if necessary\n\ttoObject:function(data){\n\t\tdata = webix.toNode(data);\n\t\twebix.assert(data, \"table is not found\");\n\t\twebix.assert(data.tagName.toLowerCase() === 'table', \"Incorrect table object\");\n\n\t\tvar tr = data.rows;\n\t\twebix.html.remove(data);\n\t\treturn tr;\n\t},\n\t//get array of records\n\tgetRecords:function(data){\n\t\tvar new_data = [];\n\t\t//skip header rows if necessary\n\t\tvar i = (data[0] && data[0]._webix_skip)?1:0;\n\n\t\tfor (; i < data.length; i++)\n\t\t\tnew_data.push(data[i]);\n\t\treturn new_data;\n\t},\n\t//get hash of properties for single record\n\tgetDetails:function(data){\n\t\tvar td = data.getElementsByTagName('td');\n\t\tdata = {};\n\t\t//get hash of properties for single record, data named as \"data{index}\"\n\t\tfor (var i=0; i < td.length; i++) {\n\t\t\tdata['data' + i] = td[i].innerHTML;\n\t\t}\n\t\treturn data;\n\t},\n\t//get count of data and position at which new data need to be inserted\n\tgetInfo:function(data){\n\t\t// dyn loading is not supported for htmltable\n\t\treturn { \n\t\t\tsize:0,\n\t\t\tfrom:0\n\t\t};\n\t},\n\tgetOptions:function(){},\n\n\t/*! gets header from first table row\n\t **/\n\tgetConfig: function(data) {\n\t\tvar columns = [];\n\t\tvar td = data[0].getElementsByTagName('th');\n\t\tif (td.length) data[0]._webix_skip = true;\n\t\tfor (var i = 0; i < td.length; i++) {\n\t\t\tvar col = {\n\t\t\t\tid: 'data' + i,\n\t\t\t\theader: this._de_json(td[i].innerHTML)\n\t\t\t};\n\t\t\tvar attrs = this._get_attrs(td[i]);\n\t\t\tcol = webix.extend(col, attrs);\n\t\t\tcolumns.push(col);\n\t\t}\n\t\treturn columns;\n\t},\n\n\t_de_json:function(str){\n\t\tvar pos = str.indexOf(\"json://\");\n\t\t\n\t\tif (pos != -1)\n\t\t\tstr = JSON.parse(str.substr(pos+7));\n\t\treturn str;\n\t},\n\t\n\t/*! gets hash of html-element attributes\n\t **/\n\t_get_attrs: function(el) {\n\t\tvar attr = el.attributes;\n\t\tvar hash = {};\n\t\tfor (var i = 0; i < attr.length; i++) {\n\t\t\thash[attr[i].nodeName] = this._de_json(attr[i].nodeValue);\n\t\t}\n\t\thash.width = parseInt(hash.width, 10);\n\t\treturn hash;\n\t}\n};\nwebix.protoUI({\n\tname:\"vscroll\",\n\tdefaults:{\n\t\tscroll:\"x\",\n\t\tscrollStep:40,\n\t\tscrollPos:0,\n\t\tscrollSize:18,\n\t\tscrollVisible:1,\n\t\tzoom:1\n\t},\n\t$init:function(config){\n\t\tvar dir = config.scroll||\"x\";\n\t\tvar node = this._viewobj = webix.toNode(config.container);\n\t\tnode.className += \" webix_vscroll_\"+dir;\n\t\tnode.innerHTML=\"<div class='webix_vscroll_body'></div>\";\n\t\twebix._event(node,\"scroll\", this._onscroll,{bind:this});\n\n\t\tthis._last_set_size = 0;\n\t\tthis._last_scroll_pos = 0;\n\t},\n\t_check_quantum:function(value){\n\t\tif (value>1500000){\n\t\t\tthis._settings.zoom = Math.floor(value/1500000)+1;\n\t\t\tthis._zoom_limit = value-this._last_set_size;\n\t\t\tvalue = Math.floor(value/this._settings.zoom)+this._last_set_size;\n\t\t} else {\n\t\t\tthis._settings.zoom = 1;\n\t\t\tthis._zoom_limit = Infinity;\n\t\t}\n\t\treturn value;\n\t},\t\n\tscrollWidth_setter:function(value){\n\t\tvalue = this._check_quantum(value);\n\t\tthis._viewobj.firstChild.style.width = value+\"px\";\n\t\treturn value;\t\t\n\t},\n\tscrollHeight_setter:function(value){\n\t\tvalue = this._check_quantum(value);\n\t\tthis._viewobj.firstChild.style.height = value+\"px\";\n\t\treturn value;\n\t},\n\tsizeTo:function(value, top, bottom){\n\t\tvalue = value-(top||0)-(bottom||0);\n\n\t\tvar width = this._settings.scrollSize;\n\t\t//IEFix\n\t\t//IE doesn't react on scroll-click if it has not at least 1 px of visible content\n\t\tif (webix.env.isIE && width)\n\t\t\twidth += 1;\n\t\tif (!width && this._settings.scrollVisible && !webix.env.$customScroll){\n\t\t\tthis._viewobj.style.pointerEvents=\"none\";\n\t\t\twidth = 14;\n\t\t}\n\n\t\tif (!width){\n\t\t\tthis._viewobj.style.display = 'none';\n\t\t} else {\n\t\t\tthis._viewobj.style.display = 'block';\n\t\t\tif (top)\n\t\t\t\tthis._viewobj.style.marginTop = top+ \"px\";\n\t\t\tthis._viewobj.style[this._settings.scroll == \"x\"?\"width\":\"height\"] =  Math.max(0,value)+\"px\";\n\t\t\tthis._viewobj.style[this._settings.scroll == \"x\"?\"height\":\"width\"] = width+\"px\";\n\t\t}\n\n\t\tthis._last_set_size = value;\n\t},\n\tgetScroll:function(){\n\t\treturn this._settings.scrollPos*this._settings.zoom;\n\t},\n\tgetSize:function(){\n\t\treturn (this._settings.scrollWidth||this._settings.scrollHeight)*this._settings.zoom;\n\t},\n\tscrollTo:function(value){\n\t\tif (value<0)\n\t\t\tvalue = 0;\n\t\tvar config = this._settings;\n\n\t\tvalue = Math.min(((config.scrollWidth||config.scrollHeight)-this._last_set_size)*config.zoom, value);\n\n\t\tif (value < 0) value = 0;\n\t\tvar svalue = value/config.zoom;\n\n\t\tif (this._last_scroll_pos != svalue){\n\t\t\tthis._viewobj[config.scroll == \"x\"?\"scrollLeft\":\"scrollTop\"] = svalue;\n\t\t\tthis._onscroll_inner(svalue);\n\t\t\treturn true;\n\t\t}\n\t},\n\t_onscroll:function(){\t\n\t\tvar x = this._viewobj[this._settings.scroll == \"x\"?\"scrollLeft\":\"scrollTop\"];\n\t\tif (x != this._last_scroll_pos)\n\t\t\tthis._onscroll_inner(x);\n\t},\n\t_onscroll_inner:function(value){\n\t\tthis._last_scroll_pos = value;\n\t\tthis._settings.scrollPos = (Math.min(this._zoom_limit, value*this._settings.zoom) || 0);\n\n\t\tthis.callEvent(\"onScroll\",[this._settings.scrollPos]);\n\t},\n\tactiveArea:function(area, x_mode){\n\t\tthis._x_scroll_mode = x_mode;\n\t\twebix._event(area,(webix.env.isIE8 ? \"mousewheel\" : \"wheel\"),this._on_wheel,{bind:this});\n\t\tthis._add_touch_events(area);\n\t},\n\n\t_add_touch_events: function(area){\n\t\tif(!webix.env.touch && window.navigator.pointerEnabled){\n\t\t\twebix.html.addCss(area,\"webix_scroll_touch_ie\",true);\n\t\t\twebix._event(area, \"pointerdown\", function(e){\n\t\t\t\tif(e.pointerType == \"touch\" || e.pointerType == \"pen\"){\n\t\t\t\t\tthis._start_context = webix.Touch._get_context_m(e);\n\t\t\t\t\tthis._start_scroll_pos = this._settings.scrollPos;\n\t\t\t\t}\n\t\t\t},{bind:this});\n\n\t\t\twebix.event(document.body, \"pointermove\", function(e){\n\t\t\t\tvar scroll;\n\t\t\t\tif(this._start_context){\n\t\t\t\t\tthis._current_context = webix.Touch._get_context_m(e);\n\t\t\t\t\tif(this._settings.scroll == \"x\" ){\n\t\t\t\t\t\tscroll = this._current_context.x - this._start_context.x;\n\t\t\t\t\t}\n\t\t\t\t\telse if(this._settings.scroll == \"y\"){\n\t\t\t\t\t\tscroll = this._current_context.y - this._start_context.y;\n\t\t\t\t\t}\n\t\t\t\t\tif(scroll && Math.abs(scroll) > 5){\n\t\t\t\t\t\tthis.scrollTo(this._start_scroll_pos - scroll);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},{bind:this});\n\t\t\twebix.event(window, \"pointerup\", function(e){\n\t\t\t\tif(this._start_context){\n\t\t\t\t\tthis._start_context = this._current_context = null;\n\t\t\t\t}\n\t\t\t},{bind:this});\n\t\t}\n\n\t},\n\t_on_wheel:function(e){\n\t\tvar dir = 0;\n\t\tvar step = e.deltaMode === 0 ? 30 : 1;\n\n\t\tif (webix.env.isIE8)\n\t\t\tdir = e.detail = -e.wheelDelta / 30;\n\n\t\tif (e.deltaX && Math.abs(e.deltaX) > Math.abs(e.deltaY)){\n\t\t\t//x-scroll\n\t\t\tif (this._x_scroll_mode && this._settings.scrollVisible)\n\t\t\t\tdir = e.deltaX / step;\n\t\t} else {\n\t\t\t//y-scroll\n\t\t\tif (!this._x_scroll_mode && this._settings.scrollVisible){\n\t\t\t\tif (webix.isUndefined(e.deltaY))\n\t\t\t\t\tdir = e.detail;\n\t\t\t\telse\n\t\t\t\t\tdir = e.deltaY / step;\n\t\t\t}\n\t\t}\n\n\t\t// Safari requires target preserving\n\t\t// (used in _check_rendered_cols of DataTable)\n\t\tif(webix.env.isSafari)\n\t\t\tthis._scroll_trg = e.target|| e.srcElement;\n\n\t\tif (dir)\n\t\t\tif (this.scrollTo(this._settings.scrollPos + dir*this._settings.scrollStep))\n\t\t\t\treturn webix.html.preventEvent(e);\n\n\t}\n}, webix.EventSystem, webix.Settings);\n\n\nwebix.Number={\n\tformat: function(value, config){ \n\t\tif (value === \"\" || typeof value === \"undefined\") return value;\n\t\t\n\t\tconfig = config||webix.i18n;\n\t\tvalue = parseFloat(value);\n\n\t\tvar sign = value < 0 ? \"-\":\"\";\n\t\tvalue = Math.abs(value);\n\n\t\tvar str = value.toFixed(config.decimalSize).toString();\n\t\tstr = str.split(\".\");\n\n\t\tvar int_value = \"\";\n\t\tif (config.groupSize){\n\t\t\tvar step = config.groupSize;\n\t\t\tvar i=str[0].length;\n\t\t\tdo {\n\t\t\t\ti-=step;\n\t\t\t\tvar chunk = (i>0)?str[0].substr(i,step):str[0].substr(0,step+i);\n\t\t\t\tint_value = chunk+(int_value?config.groupDelimiter+int_value:\"\");\n\t\t\t} while(i>0);\n\t\t} else\n\t\t\tint_value = str[0];\n\n\t\tif (config.decimalSize)\n\t\t\treturn sign + int_value + config.decimalDelimiter + str[1];\n\t\telse\n\t\t\treturn sign + int_value;\n\t},\n\tnumToStr:function(config){\n\t\treturn function(value){\n\t\t\treturn webix.Number.format(value, config);\n\t\t};\n\t}\n};\n\nwebix.Date={\n\tstartOnMonday:false,\n\n\ttoFixed:function(num){\n\t\tif (num<10)\treturn \"0\"+num;\n\t\treturn num;\n\t},\n\tweekStart:function(date){\n\t\tdate = this.copy(date);\n\n\t\tvar shift=date.getDay();\n\t\tif (this.startOnMonday){\n\t\t\tif (shift===0) shift=6;\n\t\t\telse shift--;\n\t\t}\n\t\treturn this.datePart(this.add(date,-1*shift,\"day\"));\n\t},\n\tmonthStart:function(date){\n\t\tdate = this.copy(date);\n\n\t\tdate.setDate(1);\n\t\treturn this.datePart(date);\n\t},\n\tyearStart:function(date){\n\t\tdate = this.copy(date);\n\n\t\tdate.setMonth(0);\n\t\treturn this.monthStart(date);\n\t},\n\tdayStart:function(date){\n\t\treturn this.datePart(date, true);\n\t},\n\tdateToStr:function(format,utc){\n\t\tif (typeof format == \"function\") return format;\n\n\t\tif(webix.env.strict){\n\t\t\treturn function(date){\n\t\t\t\tvar str = \"\";\n\t\t\t\tvar lastPos = 0;\n\t\t\t\tformat.replace(/%[a-zA-Z]/g,function(s,pos){\n\t\t\t\t\tstr += format.slice(lastPos,pos);\n\t\t\t\t\tvar fn = function(date){\n\t\t\t\t\t\tif( s == \"%d\")  return webix.Date.toFixed(date.getDate());\n\t\t\t\t\t\tif( s == \"%m\")  return webix.Date.toFixed((date.getMonth()+1));\n\t\t\t\t\t\tif( s == \"%j\")  return date.getDate();\n\t\t\t\t\t\tif( s == \"%n\")  return (date.getMonth()+1);\n\t\t\t\t\t\tif( s == \"%y\")  return webix.Date.toFixed(date.getFullYear()%100);\n\t\t\t\t\t\tif( s == \"%Y\")  return date.getFullYear();\n\t\t\t\t\t\tif( s == \"%D\")  return webix.i18n.calendar.dayShort[date.getDay()];\n\t\t\t\t\t\tif( s == \"%l\")  return webix.i18n.calendar.dayFull[date.getDay()];\n\t\t\t\t\t\tif( s == \"%M\")  return webix.i18n.calendar.monthShort[date.getMonth()];\n\t\t\t\t\t\tif( s == \"%F\")  return webix.i18n.calendar.monthFull[date.getMonth()];\n\t\t\t\t\t\tif( s == \"%h\")  return webix.Date.toFixed((date.getHours()+11)%12+1);\n\t\t\t\t\t\tif( s == \"%g\")  return ((date.getHours()+11)%12+1);\n\t\t\t\t\t\tif( s == \"%G\")  return date.getHours();\n\t\t\t\t\t\tif( s == \"%H\")  return webix.Date.toFixed(date.getHours());\n\t\t\t\t\t\tif( s == \"%i\")  return webix.Date.toFixed(date.getMinutes());\n\t\t\t\t\t\tif( s == \"%a\")  return (date.getHours()>11?webix.i18n.pm[0]:webix.i18n.am[0]);\n\t\t\t\t\t\tif( s == \"%A\")  return (date.getHours()>11?webix.i18n.pm[1]:webix.i18n.am[1]);\n\t\t\t\t\t\tif( s == \"%s\")  return webix.Date.toFixed(date.getSeconds());\n\t\t\t\t\t\tif( s == \"%S\")\treturn webix.Date.toFixed(date.getMilliseconds());\n\t\t\t\t\t\tif( s == \"%W\")  return webix.Date.toFixed(webix.Date.getISOWeek(date));\n\t\t\t\t\t\tif( s == \"%c\"){\n\t\t\t\t\t\t\tvar str = date.getFullYear();\n\t\t\t\t\t\t\tstr += \"-\"+webix.Date.toFixed((date.getMonth()+1));\n\t\t\t\t\t\t\tstr += \"-\"+webix.Date.toFixed(date.getDate());\n\t\t\t\t\t\t\tstr += \"T\";\n\t\t\t\t\t\t\tstr += webix.Date.toFixed(date.getHours());\n\t\t\t\t\t\t\tstr += \":\"+webix.Date.toFixed(date.getMinutes());\n\t\t\t\t\t\t\tstr += \":\"+webix.Date.toFixed(date.getSeconds());\n\t\t\t\t\t\t\treturn str;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn s;\n\t\t\t\t\t};\n\t\t\t\t\tstr += fn(date);\n\t\t\t\t\tlastPos = pos + 2;\n\t\t\t\t});\n\t\t\t\tstr += format.slice(lastPos,format.length);\n\t\t\t\treturn str;\n\t\t\t};\n\n\t\t}\n\n\t\tformat=format.replace(/%[a-zA-Z]/g,function(a){\n\t\t\tswitch(a){\n\t\t\t\tcase \"%d\": return \"\\\"+webix.Date.toFixed(date.getDate())+\\\"\";\n\t\t\t\tcase \"%m\": return \"\\\"+webix.Date.toFixed((date.getMonth()+1))+\\\"\";\n\t\t\t\tcase \"%j\": return \"\\\"+date.getDate()+\\\"\";\n\t\t\t\tcase \"%n\": return \"\\\"+(date.getMonth()+1)+\\\"\";\n\t\t\t\tcase \"%y\": return \"\\\"+webix.Date.toFixed(date.getFullYear()%100)+\\\"\"; \n\t\t\t\tcase \"%Y\": return \"\\\"+date.getFullYear()+\\\"\";\n\t\t\t\tcase \"%D\": return \"\\\"+webix.i18n.calendar.dayShort[date.getDay()]+\\\"\";\n\t\t\t\tcase \"%l\": return \"\\\"+webix.i18n.calendar.dayFull[date.getDay()]+\\\"\";\n\t\t\t\tcase \"%M\": return \"\\\"+webix.i18n.calendar.monthShort[date.getMonth()]+\\\"\";\n\t\t\t\tcase \"%F\": return \"\\\"+webix.i18n.calendar.monthFull[date.getMonth()]+\\\"\";\n\t\t\t\tcase \"%h\": return \"\\\"+webix.Date.toFixed((date.getHours()+11)%12+1)+\\\"\";\n\t\t\t\tcase \"%g\": return \"\\\"+((date.getHours()+11)%12+1)+\\\"\";\n\t\t\t\tcase \"%G\": return \"\\\"+date.getHours()+\\\"\";\n\t\t\t\tcase \"%H\": return \"\\\"+webix.Date.toFixed(date.getHours())+\\\"\";\n\t\t\t\tcase \"%i\": return \"\\\"+webix.Date.toFixed(date.getMinutes())+\\\"\";\n\t\t\t\tcase \"%a\": return \"\\\"+(date.getHours()>11?webix.i18n.pm[0]:webix.i18n.am[0])+\\\"\";\n\t\t\t\tcase \"%A\": return \"\\\"+(date.getHours()>11?webix.i18n.pm[1]:webix.i18n.am[1])+\\\"\";\n\t\t\t\tcase \"%s\": return \"\\\"+webix.Date.toFixed(date.getSeconds())+\\\"\";\n\t\t\t\tcase \"%S\": return \"\\\"+webix.Date.toFixed(date.getMilliseconds())+\\\"\";\n\t\t\t\tcase \"%W\": return \"\\\"+webix.Date.toFixed(webix.Date.getISOWeek(date))+\\\"\";\n\t\t\t\tcase \"%c\":\n\t\t\t\t\tvar str = \"\\\"+date.getFullYear()+\\\"\";\n\t\t\t\t\tstr += \"-\\\"+webix.Date.toFixed((date.getMonth()+1))+\\\"\";\n\t\t\t\t\tstr += \"-\\\"+webix.Date.toFixed(date.getDate())+\\\"\";\n\t\t\t\t\tstr += \"T\";\n\t\t\t\t\tstr += \"\\\"+webix.Date.toFixed(date.getHours())+\\\"\";\n\t\t\t\t\tstr += \":\\\"+webix.Date.toFixed(date.getMinutes())+\\\"\";\n\t\t\t\t\tstr += \":\\\"+webix.Date.toFixed(date.getSeconds())+\\\"\";\n\t\t\t\t\tif(utc === true)\n\t\t\t\t\t\tstr += \"Z\";\n\t\t\t\t\treturn str;\n\n\t\t\t\tdefault: return a;\n\t\t\t}\n\t\t});\n\t\tif (utc===true) format=format.replace(/date\\.get/g,\"date.getUTC\");\n\t\treturn new Function(\"date\",\"if (!date) return ''; if (!date.getMonth) date=webix.i18n.parseFormatDate(date);  return \\\"\"+format+\"\\\";\");\n\t},\n\tstrToDate:function(format,utc){\n\t\tif (typeof format == \"function\") return format;\n\n\t\tvar mask=format.match(/%[a-zA-Z]/g);\n\t\tvar splt=\"var temp=date.split(/[^0-9a-zA-Z]+/g);\";\n\t\tvar i,t,s;\n\n\t\tif(!webix.i18n.calendar.monthShort_hash){\n\t\t\ts = webix.i18n.calendar.monthShort;\n\t\t\tt = webix.i18n.calendar.monthShort_hash = {};\n\t\t\tfor (i = 0; i < s.length; i++)\n\t\t\t\tt[s[i]]=i;\n\n\t\t\ts = webix.i18n.calendar.monthFull;\n\t\t\tt = webix.i18n.calendar.monthFull_hash = {};\n\t\t\tfor (i = 0; i < s.length; i++)\n\t\t\t\tt[s[i]]=i;\n\t\t}\n\n\t\tif(webix.env.strict){\n\t\t\treturn function(date){\n\t\t\t\tif (!date) return '';\n\t\t\t\tif (typeof date == 'object') return date;\n\t\t\t\tvar temp=date.split(/[^0-9a-zA-Z]+/g);\n\t\t\t\tvar set=[0,0,1,0,0,0,0];\n\t\t\t\tfor (i=0; i<mask.length; i++){\n\t\t\t\t\tvar a = mask[i];\n\t\t\t\t\tif( a ==  \"%y\")\n\t\t\t\t\t\tset[0]=temp[i]*1+(temp[i]>30?1900:2000);\n\t\t\t\t\telse if( a ==  \"%Y\"){\n\t\t\t\t\t\tset[0]=(temp[i]||0)*1; if (set[0]<30) set[0]+=2000;\n\t\t\t\t\t}\n\t\t\t\t\telse if( a == \"%n\" || a == \"%m\")\n\t\t\t\t\t\tset[1]=(temp[i]||1)-1;\n\t\t\t\t\telse if( a ==  \"%M\")\n\t\t\t\t\t\tset[1]=webix.i18n.calendar.monthShort_hash[temp[i]]||0;\n\t\t\t\t\telse if( a ==  \"%F\")\n\t\t\t\t\t\tset[1]=webix.i18n.calendar.monthFull_hash[temp[i]]||0;\n\t\t\t\t\telse if( a == \"%j\" || a == \"%d\")\n\t\t\t\t\t\tset[2]=temp[i]||1;\n\t\t\t\t\telse if( a == \"%g\" || a == \"%G\" || a == \"%h\" || a == \"%H\")\n\t\t\t\t\t\tset[3]=temp[i]||0;\n\t\t\t\t\telse if( a == \"%a\")\n\t\t\t\t\t\t\tset[3]=set[3]%12+((temp[i]||'')==webix.i18n.am[0]?0:12);\n\t\t\t\t\telse if( a == \"%A\")\n\t\t\t\t\t\tset[3]=set[3]%12+((temp[i]||'')==webix.i18n.am[1]?0:12);\n\t\t\t\t\telse if( a ==  \"%i\")\n\t\t\t\t\t\tset[4]=temp[i]||0;\n\t\t\t\t\telse if( a ==  \"%s\")\n\t\t\t\t\t\tset[5]=temp[i]||0;\n\t\t\t\t\telse if( a ==  \"%S\")\n\t\t\t\t\t\tset[6]=temp[i]||0;\n\t\t\t\t\telse if( a ==  \"%c\"){\n\t\t\t\t\t\tvar reg = /(\\d+)-(\\d+)-(\\d+)T(\\d+):(\\d+):(\\d+)(\\+.*|)/g;\n\t\t\t\t\t\tvar res = reg.exec(date);\n\t\t\t\t\t\tset[0]= (res[1]||0)*1; if (set[0]<30) set[0]+=2000;\n\t\t\t\t\t\tset[1]= (res[2]||1)-1;\n\t\t\t\t\t\tset[2]= res[3]||1;\n\t\t\t\t\t\tset[3]= res[4]||0;\n\t\t\t\t\t\tset[4]= res[5]||0;\n\t\t\t\t\t\tset[5]= res[6]||0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(utc)\n\t\t\t\t\treturn new Date(Date.UTC(set[0],set[1],set[2],set[3],set[4],set[5], set[6]));\n\t\t\t\treturn new Date(set[0],set[1],set[2],set[3],set[4],set[5], set[6]);\n\t\t\t};\n\t\t}\n\n\t\tfor (i=0; i<mask.length; i++){\n\t\t\tswitch(mask[i]){\n\t\t\t\tcase \"%j\":\n\t\t\t\tcase \"%d\": splt+=\"set[2]=temp[\"+i+\"]||1;\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"%n\":\n\t\t\t\tcase \"%m\": splt+=\"set[1]=(temp[\"+i+\"]||1)-1;\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"%y\": splt+=\"set[0]=temp[\"+i+\"]*1+(temp[\"+i+\"]>30?1900:2000);\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"%g\":\n\t\t\t\tcase \"%G\":\n\t\t\t\tcase \"%h\": \n\t\t\t\tcase \"%H\":\n\t\t\t\t\t\t\tsplt+=\"set[3]=temp[\"+i+\"]||0;\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"%i\":\n\t\t\t\t\t\t\tsplt+=\"set[4]=temp[\"+i+\"]||0;\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"%Y\":  splt+=\"set[0]=(temp[\"+i+\"]||0)*1; if (set[0]<30) set[0]+=2000;\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"%a\":\n\t\t\t\t\tsplt+= \"set[3]=set[3]%12+(temp[\"+i+\"]==webix.i18n.am[0]?0:12);\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"%A\":\n\t\t\t\t\tsplt+= \"set[3]=set[3]%12+(temp[\"+i+\"]==webix.i18n.am[1]?0:12);\";\n\t\t\t\t\tbreak;\t\t\t\t\t\n\t\t\t\tcase \"%s\":  splt+=\"set[5]=temp[\"+i+\"]||0;\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"%S\":  splt+=\"set[6]=temp[\"+i+\"]||0;\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"%M\":  splt+=\"set[1]=webix.i18n.calendar.monthShort_hash[temp[\"+i+\"]]||0;\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"%F\":  splt+=\"set[1]=webix.i18n.calendar.monthFull_hash[temp[\"+i+\"]]||0;\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"%c\":\n\t\t\t\t\tsplt+= \"var res = date.split('T');\";\n\t\t\t\t\tsplt+= \"if(res[0]){ var d = res[0].split('-');\";\n\t\t\t\t\tsplt+= \"set[0]= (d[0]||0)*1; if (set[0]<30) set[0]+=2000;\";\n\t\t\t\t\tsplt+= \"set[1]= (d[1]||1)-1;\";\n\t\t\t\t\tsplt+= \"set[2]= d[2]||1;}\";\n\t\t\t\t\tsplt+= \"if(res[1]){ var t = res[1].split(':');\";\n\t\t\t\t\tsplt+= \"set[3]= t[0]||0;\";\n\t\t\t\t\tsplt+= \"set[4]= t[1]||0;\";\n\t\t\t\t\tsplt+= \"set[5]= parseInt(t[2])||0;}\";\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tvar code =\"set[0],set[1],set[2],set[3],set[4],set[5], set[6]\";\n\t\tif (utc) code =\" Date.UTC(\"+code+\")\";\n\t\treturn new Function(\"date\",\"if (!date) return ''; if (typeof date == 'object') return date; var set=[0,0,1,0,0,0,0]; \"+splt+\" return new Date(\"+code+\");\");\n\t},\n\t\t\n\tgetISOWeek: function(ndate) {\n\t\tif(!ndate) return false;\n\t\tvar nday = ndate.getDay();\n\t\tif (nday === 0) {\n\t\t\tnday = 7;\n\t\t}\n\t\tvar first_thursday = new Date(ndate.valueOf());\n\t\tfirst_thursday.setDate(ndate.getDate() + (4 - nday));\n\t\tvar year_number = first_thursday.getFullYear(); // year of the first Thursday\n\t\tvar ordinal_date = Math.floor( (first_thursday.getTime() - new Date(year_number, 0, 1).getTime()) / 86400000); //ordinal date of the first Thursday - 1 (so not really ordinal date)\n\t\tvar weekNumber = 1 + Math.floor( ordinal_date / 7);\t\n\t\treturn weekNumber;\n\t},\n\t\n\tgetUTCISOWeek: function(ndate){\n\t\treturn this.getISOWeek(ndate);\n\t},\n\t_correctDate: function(d,d0,inc,checkFunc){\n\t\tif(!inc)\n\t\t\treturn;\n\t\tvar incorrect = checkFunc(d,d0);\n\t\tif(incorrect){\n\t\t\tvar i = (inc>0?1:-1);\n\n\t\t\twhile(incorrect){\n\t\t\t\td.setHours(d.getHours()+i);\n\t\t\t\tincorrect = checkFunc(d,d0);\n\t\t\t\ti += (inc>0?1:-1);\n\t\t\t}\n\t\t}\n\t},\n\tadd:function(date,inc,mode,copy){\n\t\tif (copy) date = this.copy(date);\n\t\tvar d = webix.Date.copy(date);\n\t\tswitch(mode){\n\t\t\tcase \"day\":\n\t\t\t\tdate.setDate(date.getDate()+inc);\n\t\t\t\tthis._correctDate(date,d,inc,function(d,d0){\n\t\t\t\t\treturn \twebix.Date.datePart(d0,true).valueOf()== webix.Date.datePart(d,true).valueOf();\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase \"week\":\n\t\t\t\tdate.setDate(date.getDate()+7*inc);\n\t\t\t\tthis._correctDate(date,d,7*inc,function(d,d0){\n\t\t\t\t\treturn \twebix.Date.datePart(d0,true).valueOf()== webix.Date.datePart(d,true).valueOf();\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase \"month\":\n\t\t\t\tdate.setMonth(date.getMonth()+inc);\n\t\t\t\tthis._correctDate(date,d,inc,function(d,d0){\n\t\t\t\t\treturn \td0.getMonth() == d.getMonth() && d0.getYear() == d.getYear();\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase \"year\":\n\t\t\t\tdate.setYear(date.getFullYear()+inc);\n\t\t\t\tthis._correctDate(date,d,inc,function(d,d0){\n\t\t\t\t\treturn \td0.getFullYear() == d.getFullYear();\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase \"hour\":\n\t\t\t\tdate.setHours(date.getHours()+inc);\n\t\t\t\tthis._correctDate(date,d,inc,function(d,d0){\n\t\t\t\t\treturn \td0.getHours() == d.getHours() && webix.Date.datePart(d0,true)== webix.Date.datePart(d,true);\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase \"minute\": \tdate.setMinutes(date.getMinutes()+inc); break;\n\t\t\tdefault:\n\t\t\t\twebix.Date.add[mode](date, inc, mode);\n\t\t\t\tbreak;\n\t\t}\n\t\treturn date;\n\t},\n\tdatePart:function(date, copy){\n\t\tif (copy) date = this.copy(date);\n\n\t\t// workaround for non-existent hours\n\t\tvar d = this.copy(date);\n\t\td.setHours(0);\n\t\tif(d.getDate()!=date.getDate()){\n\t\t\tdate.setHours(1);\n\t\t}\n\t\telse{\n\t\t\tdate.setHours(0);\n\t\t}\n\n\t\tdate.setMinutes(0);\n\t\tdate.setSeconds(0);\n\t\tdate.setMilliseconds(0);\n\t\treturn date;\n\t},\n\ttimePart:function(date, copy){\n\t\tif (copy) date = this.copy(date);\n\t\treturn (date.valueOf()/1000 - date.getTimezoneOffset()*60)%86400;\n\t},\n\tcopy:function(date){\n\t\treturn new Date(date.valueOf());\n\t},\n\tequal:function(a,b){\n\t\tif (!a || !b) return false;\n\t\treturn a.valueOf() === b.valueOf();\n\t},\n\tisHoliday:function(day){ \n\t\tday = day.getDay();\n\t\tif (day === 0 || day==6) return \"webix_cal_event\"; \n\t}\n};\n\n\nwebix.i18n = {\n\t_dateMethods:[\"fullDateFormat\", \"timeFormat\", \"dateFormat\", \"longDateFormat\", \"parseFormat\", \"parseTimeFormat\"],\n\tparseFormat:\"%Y-%m-%d %H:%i\",\n\tparseTimeFormat:\"%H:%i\",\n\tnumberFormat:webix.Number.format,\n\tpriceFormat:function(value){ return webix.i18n._price_format(webix.i18n.numberFormat(value, webix.i18n._price_settings)); },\n\n\tsetLocale:function(locale){\n\t\tvar extend = function(base,source){\n\t\t\tfor (var method in source){\n\t\t\t\tif(typeof(source[method]) == \"object\" && !webix.isArray(source[method])){\n\t\t\t\t\tif(!base[method]){\n\t\t\t\t\t\tbase[method] = {};\n\t\t\t\t\t}\n\t\t\t\t\textend(base[method],source[method]);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tbase[method] = source[method];\n\t\t\t}\n\t\t};\n\n\t\tif (typeof locale == \"string\")\n\t\t\tlocale = this.locales[locale];\n\t\tif (locale){\n\t\t\textend(this, locale);\n\t\t}\n\t\tvar helpers = webix.i18n._dateMethods;\n\t\tfor( var i=0; i<helpers.length; i++){\n\t\t\tvar key = helpers[i];\n\t\t\tvar utc = webix.i18n[key+\"UTC\"];\n\t\t\twebix.i18n[key+\"Str\"] = webix.Date.dateToStr(webix.i18n[key], utc);\n\t\t\twebix.i18n[key+\"Date\"] = webix.Date.strToDate(webix.i18n[key], utc);\n\t\t}\n\n\t\tthis._price_format = webix.template(this.price);\n\t\tthis._price_settings = this.priceSettings || this;\n\n\t\tthis.intFormat = webix.Number.numToStr({ groupSize:this.groupSize, groupDelimiter:this.groupDelimiter, decimalSize : 0});\n\t}\n};\n\n\nwebix.i18n.locales={};\nwebix.i18n.locales[\"en-US\"]={\n\tgroupDelimiter:\",\",\n\tgroupSize:3,\n\tdecimalDelimiter:\".\",\n\tdecimalSize:2,\n\n\tdateFormat:\"%m/%d/%Y\",\n\ttimeFormat:\"%h:%i %A\",\n\tlongDateFormat:\"%d %F %Y\",\n\tfullDateFormat:\"%m/%d/%Y %h:%i %A\",\n\tam:[\"am\",\"AM\"],\n\tpm:[\"pm\",\"PM\"],\n\n\tprice:\"${obj}\",\n\tpriceSettings:{\n        groupDelimiter:\",\",\n        groupSize:3,\n        decimalDelimiter:\".\",\n        decimalSize:2\n    },\n\tfileSize: [\"b\",\"Kb\",\"Mb\",\"Gb\",\"Tb\",\"Pb\",\"Eb\"],\n\t\n\tcalendar: {\n\t\tmonthFull:[\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n\t\tmonthShort:[\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\n\t\tdayFull:[\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n    \tdayShort:[\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n\t\thours: \"Hours\",\n\t\tminutes: \"Minutes\",\n\t\tdone:\"Done\",\n\t\tclear: \"Clear\",\n\t\ttoday: \"Today\"\n    },\n\n    controls:{\n    \tselect:\"Select\",\n    \tinvalidMessage: \"Invalid input value\"\n    },\n    dataExport:{\n\t\tpage:\"Page\",\n\t\tof:\"of\"\n    },\n    PDFviewer:{\n\t\tof:\"of\",\n\t\tautomaticZoom:\"Automatic Zoom\",\n\t\tactualSize:\"Actual Size\",\n\t\tpageFit:\"Page Fit\",\n\t\tpageWidth:\"Page Width\",\n\t\tpageHeight:\"Page Height\"\n    },\n    aria:{\n\t\tcalendar:\"Calendar\",\n\t\tincreaseValue:\"Increase value\",\n\t\tdecreaseValue:\"Decrease value\",\n\t\tnavMonth:[\"Previous month\", \"Next month\"],\n\t\tnavYear:[\"Previous year\", \"Next year\"],\n\t\tnavDecade:[\"Previous decade\", \"Next decade\"],\n\t\tdateFormat:\"%d %F %Y\",\n\t\tmonthFormat:\"%F %Y\",\n\t\tyearFormat:\"%Y\",\n\t\thourFormat:\"Hours: %h %A\",\n\t\tminuteFormat:\"Minutes: %i\",\n\t\tremoveItem:\"Remove item\",\n\t\tpages:[\"First page\", \"Previous page\", \"Next page\", \"Last page\"],\n\t\tpage:\"Page\",\n\t\theadermenu:\"Header menu\",\n\t\topenGroup:\"Open column group\",\n\t\tcloseGroup:\"Close column group\",\n\t\tcloseTab:\"Close tab\",\n\t\tshowTabs:\"Show more tabs\",\n\t\tresetTreeMap:\"Reset tree map\",\n\t\tnavTreeMap:\"Level up\",\n\t\tnextTab:\"Next tab\",\n\t\tprevTab:\"Previous tab\",\n\t\tmultitextSection:\"Add section\",\n\t\tmultitextextraSection:\"Remove section\",\n\t\tshowChart:\"Show chart\",\n\t\thideChart:\"Hide chart\",\n\t\tresizeChart:\"Resize chart\"\n    },\n    richtext:{\n        underline: \"Underline\",\n        bold: \"Bold\",\n        italic: \"Italic\"\n    }\n};\nwebix.i18n.setLocale(\"en-US\");\n\n\n\n\n\nwebix.protoUI({\n\tname:\"datatable\",\n\tdefaults:{\n\t\tleftSplit:0,\n\t\trightSplit:0,\n\t\ttopSplit:0,\n\t\tcolumnWidth:100,\n\t\tminColumnWidth:20,\n\t\tminColumnHeight:26,\n\t\tprerender:false,\n\t\tautoheight:false,\n\t\tautowidth:false,\n\t\theader:true,\n\t\tfixedRowHeight:true,\n\t\tscrollAlignY:true,\n\t\tscrollX:true,\n\t\tscrollY:true,\n\t\tdatafetch:50,\n\t\tnavigation:true\n\t},\n\t$skin:function(){\n\t\tvar height = webix.skin.$active.rowHeight;\n\t\tvar defaults = this.defaults;\n\t\tdefaults.rowHeight = height;\n\t\tdefaults.headerRowHeight = webix.skin.$active.barHeight;\n\t},\n\ton_click:{\n\t\twebix_richfilter:function(){\n\t\t\treturn false;\n\t\t},\n\t\twebix_table_checkbox:function(e, id){\n\t\t\tid = this.locate(e);\n\t\t\t\n\t\t\tvar item = this.getItem(id.row);\n\t\t\tvar col = this.getColumnConfig(id.column);\n\t\t\tvar trg = e.target|| e.srcElement;\n\n\t\t\t//read actual value from HTML tag when possible\n\t\t\t//as it can be affected by dbl-clicks\n\t\t\tvar check = (trg.type == \"checkbox\")?trg.checked:(item[id.column] != col.checkValue);\n\t\t\tvar value =  check ? col.checkValue : col.uncheckValue;\n\n\t\t\tvar update = {};\n\t\t\tupdate[id.column] = value;\n\t\t\tthis.updateItem(id.row, update, (this._settings.checkboxRefresh?\"update\":\"save\"));\n\n\t\t\tthis.callEvent(\"onCheck\", [id.row, id.column, value]);\n\t\t\treturn false;\n\t\t},\n\t\twebix_table_radio:function(e){\n\t\t\tvar id = this.locate(e);\n\t\t\t\n\t\t\tvar item = this.getItem(id.row);\n\t\t\tvar col = this.getColumnConfig(id.column);\n\n\t\t\tvar checked = 0;\n\t\t\tthis.eachRow(function(rowid){\n\t\t\t\tvar item = this.data.pull[rowid];\n\t\t\t\tif (item && item[id.column] == col.checkValue)\n\t\t\t\t\titem[id.column] = col.uncheckValue;\n\t\t\t});\n\n\t\t\titem[id.column] = col.checkValue;\n\n\t\t\tthis.callEvent(\"onCheck\", [id.row, id.column, true]);\n\t\t\tthis.refresh();\n\t\t\treturn false;\n\t\t}\n\t},\n\ton_dblclick:{\n\t\twebix_table_checkbox: function(){\n\t\t\treturn this.on_click.webix_table_checkbox.apply(this,arguments);\n\t\t}\n\t},\n\ton_context:{\n\t},\n\t$init:function(config){\n\t\tthis.on_click = webix.extend({}, this.on_click);\n\t\tvar html  = \"<div class='webix_ss_header'><div class='webix_hs_left'></div><div class='webix_hs_center'></div><div class='webix_hs_right'></div></div><div class='webix_ss_body'><div class='webix_ss_left'><div class='webix_ss_center_scroll'></div></div>\";\n\t\t    html += \"<div class='webix_ss_center'><div class='webix_ss_center_scroll' role='rowgroup'></div></div>\";\n\t\t    html += \"<div class='webix_ss_right'><div class='webix_ss_center_scroll'></div></div></div>\";\n\t\t    html += \"<div class='webix_ss_hscroll' role='scrollbar' aria-orientation='horizontal'></div><div class='webix_ss_footer'><div class='webix_hs_left'></div><div class='webix_hs_center'></div><div class='webix_hs_right'></div></div><div class='webix_ss_vscroll_header'></div><div class='webix_ss_vscroll' role='scrollbar' aria-orientation='vertical'></div><div class='webix_ss_vscroll_footer'></div>\";\n\n\t\tthis._contentobj.innerHTML = html;\n\t\tthis._top_id = this._contentobj.id = this.name+webix.uid();\n\t\tthis._contentobj.className +=\" webix_dtable\";\n\n\t\tthis._dataobj = this._contentobj;\n\n\t\tthis._header = this._contentobj.firstChild;\n\t\tthis._body = this._header.nextSibling;\n\t\tthis._footer = this._body.nextSibling.nextSibling;\n\n\t\tthis._viewobj.setAttribute(\"role\", \"grid\");\n\t\tif(!config.editable) \n\t\t\tthis._viewobj.setAttribute(\"aria-readonly\", \"true\");\n\n\t\tthis.data.provideApi(this, true);\n\t\tthis.data.attachEvent(\"onParse\", webix.bind(this._call_onparse, this));\n\n\t\tthis.$ready.push(this._first_render);\n\n\t\tthis._columns = [];\n\t\tthis._headers = [];\n\t\tthis._footers = [];\n\t\tthis._rows_cache = [];\n\t\tthis._active_headers = {};\n\t\tthis._filter_elements = {};\n\t\tthis._header_height = this._footer_height = 0;\n\n\t\t//component can create new view\n\t\tthis._destroy_with_me = [];\n\n\t\tthis.data.attachEvent(\"onServerConfig\", webix.bind(this._config_table_from_file, this));\n\t\tthis.data.attachEvent(\"onServerOptions\", webix.bind(this._config_options_from_file, this));\n\t\tthis.attachEvent(\"onViewShow\", function(){\n\t\t\tthis._restore_scroll_state();\n\t\t\tthis._refresh_any_header_content();\n\t\t});\n\t\tthis.attachEvent(\"onDestruct\", this._clean_config_struct);\n\t\tthis.attachEvent(\"onKeyPress\", this._onKeyPress);\n\t\tthis.attachEvent(\"onScrollY\", this._adjust_rows);\n\n\t\twebix.callEvent(\"onDataTable\", [this, config]);\n\t},\n\t_render_initial:function(){\n\t\tthis._scrollSizeX = this._scrollSizeY = webix.ui.scrollSize;\n\n\t\twebix.html.addStyle(\"#\"+this._top_id +\" .webix_cell { height:\"+this._settings.rowHeight+\"px; line-height:\"+(this._settings.rowLineHeight || this._settings.rowHeight)+\"px;\" +(this._settings.fixedRowHeight?\"\":\"white-space:normal;\")+\" }\");\n\t\twebix.html.addStyle(\"#\"+this._top_id +\" .webix_hcell { height:\"+this._settings.headerRowHeight+\"px; line-height:\"+this._settings.headerRowHeight+\"px;}\");\n\t\tthis._render_initial = function(){};\n\t},\n\t_first_render:function(){\n\t\tthis.data.attachEvent(\"onStoreLoad\", webix.bind(this._refresh_any_header_content, this));\n\t\tthis.data.attachEvent(\"onSyncApply\", webix.bind(this._refresh_any_header_content, this));\n\t\tthis.data.attachEvent(\"onStoreUpdated\", webix.bind(function(){ return this.render.apply(this, arguments); }, this));\n\t\tthis.data.attachEvent(\"onStoreUpdated\", webix.bind(this._refresh_tracking_header_content, this));\n\t\tthis.render();\n\t},\n\trefresh:function(){\n\t\tthis.render();\n\t},\n\trender:function(id, data, mode){\n\t\t//pure data saving call\n\t\tif (mode == \"save\") return;\n\t\t//during dnd we must not repaint anything in mobile webkit\n\t\tif (mode == \"move\"){\n\t\t\tvar context = webix.DragControl.getContext();\n\t\t\tif (context && context.fragile) return;\n\t\t}\n\n\t\tif (!this._columns.length){\n\t\t\tvar cols = this._settings.columns;\n\t\t\tif (!cols || !cols.length) {\n\t\t\t\tif (this._settings.autoConfig && this.data.order.length){\n\t\t\t\t\tthis._dtable_fully_ready = 0;\n\t\t\t\t\tthis._autoDetectConfig();\n\t\t\t\t} else\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._define_structure();\n\t\t}\n\n\t\tif (!this.isVisible(this._settings.id) || this.$blockRender)\n\t\t\treturn this._render_initial(); //Chrome 34, Custom Font loading bug\n\n\t\t//replace multiple atomic updates by single big repaint\n\t\tif (id && data != -1 && (mode == \"paint\" || mode == \"update\")){\n\t\t\tif (this._render_timer)\n\t\t\t\tclearTimeout(this._render_timer);\n\n\t\t\tif (!this._render_timer || this._render_timer_id == id){\n\t\t\t\tthis._render_timer_id = id;\n\t\t\t\tthis._render_timer = webix.delay(function(){\n\t\t\t\t\t//if only one call - repaint single item\n\t\t\t\t\tthis.render(id, -1, mode);\n\t\t\t\t}, this);\n\t\t\t} else {\n\t\t\t\tthis._render_timer_id = null;\n\t\t\t\tthis._render_timer = webix.delay(function(){\n\t\t\t\t\t//if ther was a serie of calls - replace them with single full repaint\n\t\t\t\t\tthis.render();\n\t\t\t\t}, this);\n\t\t\t}\n\t\t\treturn;\n\t\t} else if (this._render_timer){\n\t\t\tclearTimeout(this._render_timer);\n\t\t\tthis._render_timer = 0;\n\t\t}\n\n\t\tif (this.callEvent(\"onBeforeRender\",[this.data])){\n\n\t\t\tthis._render_initial();\n\t\t\tif (!this._dtable_fully_ready)\n\t\t\t\tthis._apply_headers();\n\n\t\t\tif (this._content_width){\n\t\t\t\tif (this[\"_settings\"].experimental && (mode == \"paint\" || mode == \"update\") && id)\n\t\t\t\t\tthis._repaint_single_row(id);\n\t\t\t\telse\n\t\t\t\t\tthis._check_rendered_cols(true, true);\n\t\t\t}\n\n\t\t\tif (!id || mode!=\"update\"){\n\t\t\t\tthis._dtable_height = this._get_total_height();\n\t\t\t\tthis._set_split_sizes_y();\n\t\t\t}\n\n\t\t\t//don't depend on hidden rows/rolumns\n\t\t\tthis._viewobj.setAttribute(\"aria-colcount\", Math.max(this._hidden_column_order.length, this._columns.length));\n\t\t\tthis._viewobj.setAttribute(\"aria-rowcount\", this.data.count());\n\n\t\t\tthis.callEvent(\"onAfterRender\",[this.data]);\n\t\t\treturn true;\n\t\t}\n\t},\n\tgetColumnConfig:function(id){\n\t\treturn this._columns_pull[id] || this._hidden_column_hash[id];\n\t},\n\t_config_options_from_file:function(colls){\n\t\tfor (var key in colls){\n\t\t\tvar column = this.getColumnConfig(key);\n\t\t\twebix.assert(column, \"Orphan collection: \"+key);\n\t\t\tvar temp = new webix.DataCollection({\n\t\t\t\tdata:colls[key]\n\t\t\t});\n\t\t\tthis._destroy_with_me.push(temp);\n\t\t\tthis._bind_collection(temp, column);\n\t\t}\n\t},\n\t//xml has different configuration structure, fixing\n\t_config_table_from_file:function(config){\n\t\tif (config.columns && this._dtable_fully_ready)\n\t\t\tthis.refreshColumns(null, true);\n\t},\n\t_define_structure:function(){\n\t\tif (this._settings.columns){\n\t\t\tthis._columns = this._settings.columns;\n\t\t\tthis._columns_pull = {};\n\n\t\t\tfor (var i = 0; i < this._columns.length; i++){\n\t\t\t\tvar col = this._columns[i];\n\t\t\t\tthis._columns_pull[col.id] = col;\n\n\t\t\t\tvar format = col.cssFormat;\n\t\t\t\tif (format)\n\t\t\t\t\tcol.cssFormat = webix.toFunctor(format, this.$scope);\n\n\t\t\t\tcol.width = col.width||this._settings.columnWidth;\n\t\t\t\tif (typeof col.format == \"string\") \n\t\t\t\t\tcol.format = webix.i18n[col.format]||window[col.format];\n\n\t\t\t\t//default settings for checkboxes and radios\n\t\t\t\tif (webix.isUndefined(col.checkValue)) col.checkValue = 1;\n\t\t\t\tif (webix.isUndefined(col.uncheckValue)) col.uncheckValue = 0;\n\t\t\t\t\n\t\t\t\tif (col.css && typeof col.css == \"object\")\n\t\t\t\t\tcol.css = webix.html.createCss(col.css);\n\n\t\t\t\tvar template = col.template;\n\t\t\t\tif (template){\n\t\t\t\t\tif (typeof template == \"string\")\n\t\t\t\t\t\ttemplate = template.replace(/#\\$value#/g,\"#\"+col.id+\"#\");\n\t\t\t\t\tcol.template = webix.template(template);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._normalize_headers(\"header\", this._headers);\n\t\t\tthis._normalize_headers(\"footer\", this._footers);\n\n\t\t\tthis.callEvent(\"onStructureLoad\",[]);\n\t\t}\n\t},\n\t_define_structure_and_render:function(){\n\t\tthis._apply_headers();\n\t},\n\t_clean_config_struct:function(){ \n\t\t//remove column technical info from the column\n\t\t//it allows to reuse the same config object for new grid\n\t\tfor (var i = 0; i < this._columns.length; i++){\n\t\t\tdelete this._columns[i].attached;\n\t\t\tdelete this._columns[i].node;\n\t\t}\n\t},\n\t_apply_headers:function(){\n\t\tthis._rightSplit = this._columns.length-this._settings.rightSplit;\n\t\tthis._dtable_width = 0;\n\n\t\tfor (var i = 0; i < this._columns.length; i++){\n\t\t\tif (!this._columns[i].node){\n\n\t\t\t\tvar temp = webix.html.create(\"DIV\");\n\t\t\t\ttemp.style.width = this._columns[i].width + \"px\";\n\t\t\t\tthis._columns[i].node = temp;\n\t\t\t}\n\t\t\tif (i>=this._settings.leftSplit && i<this._rightSplit)\n\t\t\t\tthis._dtable_width += this._columns[i].width;\n\t\t}\n\n\t\tvar marks = [];\n\t\t\n\t\tif (this._settings.rightSplit){\n\t\t\tvar nr = this._columns.length-this._settings.rightSplit;\n\t\t\tmarks[nr]  =\" webix_first\";\n\t\t\tmarks[nr-1]=\" webix_last\";\n\t\t}\n\t\tif (this._settings.leftSplit){\n\t\t\tvar nl = this._settings.leftSplit;\n\t\t\tmarks[nl]  =\" webix_first\";\n\t\t\tmarks[nl-1]=\" webix_last\";\n\t\t}\n\t\tmarks[0]  = (marks[0]||\"\")+\" webix_first\";\n\t\tvar last_index = this._columns.length-1;\n\t\tmarks[last_index] = (marks[last_index]||\"\")+\" webix_last\";\n\n\n\t\tfor (var i=0; i<this._columns.length; i++){\n\t\t\tvar node = this._columns[i].node;\n\t\t\tnode.setAttribute(\"column\", i);\n\t\t\tnode.className = \"webix_column \"+(this._columns[i].css||\"\")+(marks[i]||'');\n\t\t}\n\n\t\tthis._create_scrolls();\t\t\n\n\t\tthis._set_columns_positions();\n\t\tthis._set_split_sizes_x();\n\t\tthis._render_header_and_footer();\n\n\t\tthis._dtable_fully_ready = true;\n\t},\n\t_set_columns_positions:function(){\n\t\tvar left = 0;\n\t\tfor (var i = 0; i < this._columns.length; i++){\n\t\t\tvar column = this._columns[i];\n\t\t\tif (i == this._settings.leftSplit || i == this._rightSplit)\n\t\t\t\tleft = 0;\n\n\t\t\tif (column.node){\n\t\t\t\tcolumn.node.style.left = left+\"px\";\n\t\t\t\tif (this._settings.leftSplit || this._settings.rightSplit){\n\t\t\t\t\twebix.html.remove(column.node);\n\t\t\t\t\tcolumn.attached = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tleft += column.width;\n\t\t}\n\t},\n\t_render_header_and_footer:function(){\n\t\tif (!this._header_fix_width)\n\t\t\tthis._header_fix_width = 0;\n\n\t\tthis._header_height = this._footer_height = 0;\n\n\t\tif (this._settings.header) {\n\t\t\tthis._refreshHeaderContent(this._header, 0, 1);\n\t\t\tthis._normalize_headers(\"header\", this._headers);\n\t\t\tthis._header_height = this._headers._summ;\n\t\t\tthis._render_header_section(this._header, \"header\", this._headers);\n\t\t}\n\t\tif (this._settings.footer){\n\t\t\tthis._refreshHeaderContent(this._footer, 0, 1);\n\t\t\tthis._normalize_headers(\"footer\", this._footers);\n\t\t\tthis._footer_height = this._footers._summ;\n\t\t\tthis._render_header_section(this._footer, \"footer\", this._footers);\n\t\t}\t\n\n\t\tthis.refreshHeaderContent(false, false);\n\t\tthis._size_header_footer_fix();\n\n\t\tif (this._last_sorted)\n\t\t\tthis.markSorting(this._last_sorted, this._last_order);\n\t},\n\t_getHeaderHeight:function(header, column, ind){\n\t\tvar width = 0;\n\t\tvar colspan = header.colspan || 1;\n\t\tvar css = \"webix_hcell \"+(header.css||\"\");\n\n\t\tif(header.rotate)\n\t\t\tcss += \" webix_measure_rotate\";\n\t\telse\n\t\t\tfor(var i = 0; i<colspan; i++)\n\t\t\t\twidth += this._columns[ind+i] ? this._columns[ind+i].width : this.config.columnWidth;\n\t\t\n\t\tvar size = webix.html.getTextSize(\n\t\t\t[header.text],\n\t\t\tcss, \n\t\t\twidth\n\t\t);\n\n\t\t//+1 to compensate for scrollHeight rounding\n\t\treturn (header.rotate ? size.width : size.height ) + 1;\n\t},\n\t_normalize_headers:function(collection, heights){\n\t\tvar rows = 0;\n\t\t\n\t\tfor (var i=0; i<this._columns.length; i++){\n\t\t\tvar data = this._columns[i][collection];\n\t\t\tif (!data || typeof data != \"object\" || !data.length){\n\t\t\t\tif (webix.isUndefined(data)){\n\t\t\t\t\tif (collection == \"header\")\n\t\t\t\t\t\tdata = this._columns[i].id;\n\t\t\t\t\telse\n\t\t\t\t\t\tdata = \"\";\n\t\t\t\t}\n\t\t\t\tdata = [data];\n\t\t\t}\n\t\t\tfor (var j = 0; j < data.length; j++){\n\t\t\t\tif (typeof data[j] != \"object\")\n\t\t\t\t\tdata[j] = { text:data[j] };\n\t\t\t\t\n\t\t\t\tif (data[j] && data[j].height) heights[j] = data[j].height;\n\t\t\t\tif (data[j] && data[j].autoheight) heights[j] = this._getHeaderHeight(data[j], this._columns[i], i);\n\t\t\t}\n\t\t\trows = Math.max(rows, data.length);\n\t\t\tthis._columns[i][collection] = data;\n\t\t}\n\n\n\t\theights._summ = rows;\n\t\tfor (var i = rows-1; i >= 0; i--){\n\t\t\theights[i] = heights[i] || this._settings.headerRowHeight;\n\t\t\theights._summ += heights[i]*1;\n\t\t}\n\n\t\t//set null to cells included in col|row spans\n\t\tfor (var i=0; i<this._columns.length; i++){\n\t\t\tvar col = this._columns[i][collection];\n\t\t\tfor (var j=0; j<col.length; j++){\n\t\t\t\tif (col[j] && col[j].rowspan)\n\t\t\t\t\tfor (var z=1; z<col[j].rowspan; z++)\n\t\t\t\t\t\tcol[j+z] = null;\n\t\t\t\tif (col[j] && col[j].colspan)\n\t\t\t\t\tfor (var z=1; z<col[j].colspan; z++)\n\t\t\t\t\t\tthis._columns[i+z][collection][j] = null;\n\t\t\t}\n\t\t}\n\n\t\t//auto-rowspan cells, which has not enough header lines\n\t\tfor (var i=0; i<this._columns.length; i++){\n\t\t\tvar data = this._columns[i][collection];\n\t\t\tif (data.length < rows){\n\t\t\t\tvar end = data.length-1;\n\t\t\t\tdata[end].rowspan = rows - data.length + 1;\n\t\t\t\tfor (var j=end+1; j<rows; j++)\n\t\t\t\t\tdata[j]=null;\n\t\t\t}\n\t\t}\n\t\treturn rows;\n\t},\n\t_find_header_content:function(sec, id){\n\t\tvar alltd = sec.getElementsByTagName(\"TD\");\n\t\tfor (var i = 0; i < alltd.length; i++)\n\t\t\tif (alltd[i].getAttribute(\"active_id\") == id)\n\t\t\t\treturn alltd[i];\n\t},\n\tgetHeaderContent:function(id){\n\t\tvar obj = this._find_header_content(this._header, id);\n\t\tif (!obj)\n\t\t\tobj = this._find_header_content(this._footer, id);\n\n\t\tif (obj){\n\t\t\tvar config = this._active_headers[id];\n\t\t\tvar type = webix.ui.datafilter[config.content];\n\n\t\t\tif (type.getHelper) return type.getHelper(obj, config);\n\t\t\treturn {\n\t\t\t\ttype: type,\n\t\t\t\tgetValue:function(){ return type.getValue(obj); },\n\t\t\t\tsetValue:function(value){ return type.setValue(obj, value); }\n\t\t\t};\n\t\t}\n\t},\n\t_summ_next:function(heights, start, i){\n\t\tvar summ = i ? -1 : 0;\n\n\t\ti += start;\n\t\tfor (start; start<i; start++) \n\t\t\tsumm+=heights[start] + 1;\n\n\t\treturn summ;\n\t},\n\t_render_subheader:function(start, end, width, name, heights){\n\t\tif (start == end) return \"\";\n\n\t\tvar html = \"<table role='presentation' style='width:\"+width+\"px' cellspacing='0' cellpadding='0'>\";\n\t\tfor (var i = start; i < end; i++){\n\t\t\thtml += \"<tr>\";\n\t\t\tfor (var i = start; i < end; i++)\n\t\t\t\thtml += \"<th  style='width:\"+this._columns[i].width+\"px'></th>\";\n\t\t\thtml += \"</tr>\";\n\t\t}\n\n\t\tvar count = this._columns[0][name].length;\n\t\tvar block_evs = [];\n\n\t\tfor (var j = 0; j < count; j++){\n\t\t\thtml += \"<tr section='\"+name+\"' role='row'>\";\n\t\t\tfor (var i = start; i < end; i++){\n\t\t\t\tvar header = this._columns[i][name][j];\n\t\t\t\tif (header === null) continue;\n\n\t\t\t\tif (header.content){\n\t\t\t\t\theader.contentId = header.contentId||webix.uid();\n\t\t\t\t\theader.columnId = this._columns[i].id;\n\t\t\t\t\theader.format = this._columns[i].format;\n\n\t\t\t\t\twebix.assert(webix.ui.datafilter, \"Filtering extension was not included\");\n\t\t\t\t\twebix.assert(webix.ui.datafilter[header.content], \"Unknown content type: \"+header.content);\n\t\t\t\t\t\n\t\t\t\t\theader.text = webix.ui.datafilter[header.content].render(this, header);\n\t\t\t\t\tthis._active_headers[header.contentId] = header;\n\t\t\t\t\tthis._has_active_headers = true;\n\t\t\t\t}\n\n\t\t\t\thtml += \"<td  role='presentation' column='\"+(header.colspan?(header.colspan-1+i):i)+\"'\";\n\n\t\t\t\tvar hcss = '';\n\t\t\t\tif (i==start)\t\n\t\t\t\t\thcss+=\"webix_first\";\n\t\t\t\tvar column_pos = i + (header.colspan?header.colspan-1:0);\n\t\t\t\tif (column_pos>=end-1)\n\t\t\t\t\thcss+=\" webix_last\";\n\t\t\t\tif (hcss)\n\t\t\t\t\thtml+=' class=\"'+hcss+'\"';\n\t\t\t\t\n\t\t\t\tvar cell_height = heights[j];\n\t\t\t\tvar sheight=\"\";\n\t\t\t\tif (header.contentId)\n\t\t\t\t\thtml+=\" active_id='\"+header.contentId+\"'\";\n\t\t\t\tif (header.colspan)\n\t\t\t\t\thtml+=\" colspan='\"+header.colspan+\"'\";\n\t\t\t\tif (header.rowspan){\n\t\t\t\t\thtml+=\" rowspan='\"+header.rowspan+\"'\";\n\t\t\t\t\tcell_height = this._summ_next(this._headers, j, header.rowspan);\n\t\t\t\t}\n\n\t\t\t\tif (cell_height != this._settings.headerRowHeight)\n\t\t\t\t\tsheight =\" style='line-height:\"+cell_height+\"px; height:\"+cell_height+\"px;'\";\n\n\t\t\t\tvar css =\"webix_hcell\";\n\t\t\t\tvar header_css = header.css;\n\t\t\t\tif (header_css){\n\t\t\t\t\tif (typeof header_css == \"object\")\n\t\t\t\t\t\theader.css = header_css = webix.html.createCss(header_css);\n\t\t\t\t\tcss+=\" \"+header_css;\n\t\t\t\t}\n\t\t\t\tif (this._columns[i].$selected)\n\t\t\t\t\tcss += \" webix_sel_hcell\";\n\t\t\t\t\n\t\t\t\thtml+=\"><div role='columnheader' class='\"+css+\"'\"+sheight+\">\";\n\t\t\t\t\n\t\t\t\tvar text = (header.text===\"\"?\"&nbsp;\":header.text);\n\t\t\t\tif (header.rotate)\n\t\t\t\t\ttext = \"<div class='webix_rotate' style='width:\"+(cell_height-10)+\"px; transform-origin:center \"+(cell_height-15)/2+\"px;-webkit-transform-origin:center \"+(cell_height-15)/2+\"px;'>\"+text+\"</div>\";\n\n\t\t\t\thtml += text + \"</div></td>\";\n\t\t\t}\n\t\t\thtml += \"</tr>\";\n\t\t}\n\t\thtml+=\"</tr></table>\";\t\n\n\t\treturn html;\n\t},\n\tshowItemByIndex:function(row_ind, column_ind){\n\t\tvar pager = this._settings.pager;\n\t\tif (pager){\n\t\t\tvar target = Math.floor(row_ind/pager.size);\n\t\t\tif (target != pager.page)\n\t\t\t\twebix.$$(pager.id).select(target);\n\t\t}\n\n\t\t//parameter will be set to -1, to mark that scroll need not to be adjusted\n\t\tif (row_ind != -1){\n\t\t\tvar state = this._get_y_range();\n\t\t\tif (row_ind < state[0]+1 || row_ind >= state[1]-1 ){\n\t\t\t\t//not visible currently\n\t\t\t\tvar summ = this._getHeightByIndexSumm((pager?this.data.$min:0),row_ind);\n\t\t\t\tif (row_ind < state[0]+1){\n\t\t\t\t\t//scroll top - show row at top of screen\n\t\t\t\t\tsumm = Math.max(0, summ-1) - this._top_split_height;\n\t\t\t\t} else {\n\t\t\t\t\t//scroll bottom - show row at bottom of screen\n\t\t\t\t\tsumm += this._getHeightByIndex(row_ind) - this._dtable_offset_height;\n\t\t\t\t\t//because of row rounding we neet to scroll some extra\n\t\t\t\t\t//TODO: create a better heuristic\n\t\t\t\t\tif (row_ind>0)\n\t\t\t\t\t\tsumm += this._getHeightByIndex(row_ind-1)-1;\n\t\t\t\t}\n\n\t\t\t\tthis._y_scroll.scrollTo(summ);\n\t\t\t}\n\t\t}\n\t\tif (column_ind != -1){\n\t\t\t//ignore split columns - they are always visible\n\t\t\tif (column_ind < this._settings.leftSplit) return;\n\t\t\tif (column_ind >= this._rightSplit) return;\n\n\t\t\t//very similar to y-logic above\n\t\t\tvar state = this._get_x_range();\n\t\t\tif (column_ind < state[0]+1 || column_ind >= state[1]-1 ){\n\t\t\t\t//not visible currently\n\t\t\t\tvar summ = 0;\n\t\t\t\tfor (var i=this._settings.leftSplit; i<column_ind; i++)\n\t\t\t\t\tsumm += this._columns[i].width;\n\n\t\t\t\t/*jsl:ignore*/\n\t\t\t\tif (column_ind < state[0]+1){\n\t\t\t\t\t//scroll to left border\n\t\t\t\t} else {\n\t\t\t\t\t//scroll to right border\n\t\t\t\t\tsumm += this._columns[column_ind].width - this._center_width;\n\t\t\t\t}\t\n\t\t\t\t/*jsl:end*/\n\t\t\t\tthis._x_scroll.scrollTo(summ);\n\t\t\t}\n\t\t}\t\t\n\t},\n\tshowCell:function(row, column){\n\t\tif (!column || !row){ \n\t\t\t//if column or row not provided - take from current selection\n\t\t\tvar t=this.getSelectedId(true);\n\t\t\tif (t.length == 1){\n\t\t\t\tcolumn = column || t[0].column;\n\t\t\t\trow = row || t[0].row;\n\t\t\t}\n\t\t}\n\t\t//convert id to index\n\t\tcolumn = column?this.getColumnIndex(column):-1;\n\t\trow = row?this.getIndexById(row):-1;\n\t\tthis.showItemByIndex(row, column);\n\n\t},\n\tscrollTo:function(x,y){\n\t\tif (!this._x_scroll) return;\n\t\tif (this._scrollTo_touch)\n\t\t\treturn this._scrollTo_touch(x,y);\n\n\t\tif (x !== null)\n\t\t\tthis._x_scroll.scrollTo(x);\n\t\tif (y !== null)\n\t\t\tthis._y_scroll.scrollTo(y);\n\t},\n\tgetScrollState:function(){\n\t\tif (this._getScrollState_touch)\n\t\t\treturn this._getScrollState_touch();\n\n\t\tvar diff =  this._render_scroll_shift?0:(this._render_scroll_diff||0);\n\t\treturn {x:(this._scrollLeft||0), y:(this._scrollTop + diff)};\n\t},\n\tshowItem:function(id){\n\t\tthis.showItemByIndex(this.getIndexById(id), -1);\n\t},\n\t_render_header_section:function(sec, name, heights){\n\t\tsec.childNodes[0].innerHTML = this._render_subheader(0, this._settings.leftSplit, this._left_width, name, heights);\n\t\tsec.childNodes[1].innerHTML = this._render_subheader(this._settings.leftSplit, this._rightSplit, this._dtable_width, name, heights);\n\t\tsec.childNodes[1].onscroll = webix.bind(this._scroll_with_header, this);\n\t\tsec.childNodes[2].innerHTML = this._render_subheader(this._rightSplit, this._columns.length, this._right_width, name, heights);\n\t},\n\t_scroll_with_header:function(){\n\t\tvar active = this.getScrollState().x;\n\t\tvar header = this._header.childNodes[1].scrollLeft;\n\t\tif (header != active)\n\t\t\tthis.scrollTo(header, null);\n\t},\n\t_refresh_tracking_header_content:function(){\n\t\tthis.refreshHeaderContent(true, true);\n\t},\n\t_refresh_any_header_content:function(){\n\t\tthis.refreshHeaderContent(false, true);\n\t},\n\t//[DEPRECATE] - v3.0, move to private\n\trefreshHeaderContent:function(trackedOnly, preserve, id){\n\t\tif (this._settings.header){\n\t\t\tif (preserve) this._refreshHeaderContent(this._header, trackedOnly, 1, id);\n\t\t\tthis._refreshHeaderContent(this._header, trackedOnly, 0, id);\n\t\t}\n\t\tif (this._settings.footer){\n\t\t\tif (preserve) this._refreshHeaderContent(this._footer, trackedOnly, 1, id);\n\t\t\tthis._refreshHeaderContent(this._footer, trackedOnly, 0, id);\n\t\t}\n\t},\n\trefreshFilter:function(id){\n\t\tif (id && !this._active_headers[id]) return;\n\t\tthis.refreshHeaderContent(false, true, id);\n\t},\n\t_refreshHeaderContent:function(sec, cellTrackOnly, getOnly, byId){\n\t\tif (this._has_active_headers && sec){\n\t\t\tvar alltd = sec.getElementsByTagName(\"TD\");\n\n\t\t\tfor (var i = 0; i < alltd.length; i++){\n\t\t\t\tif (alltd[i].getAttribute(\"active_id\")){\n\t\t\t\t\tvar obj = this._active_headers[alltd[i].getAttribute(\"active_id\")];\n\t\t\t\t\tif (byId && byId != obj.columnId) continue;\n\n\t\t\t\t\t\n\t\t\t\t\tvar content = webix.ui.datafilter[obj.content];\n\n\t\t\t\t\tif (getOnly){\n\t\t\t\t\t\tif (content.getValue)\n\t\t\t\t\t\t\tobj.value = content.getValue(alltd[i]);\n\t\t\t\t\t} else if (!cellTrackOnly || content.trackCells){\n\t\t\t\t\t\tcontent.refresh(this, alltd[i], obj);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\theaderContent:[],\n\t_set_size_scroll_area:function(obj, height, hdx){\n\t\tif (this._scrollSizeY){\n\n\t\t\tobj.style.height = Math.max(height,1)-1+\"px\";\n\t\t\tobj.style.width = (this._rightSplit?0:hdx)+this._scrollSizeY-1+\"px\";\n\n\t\t\t// temp. fix: Chrome [DIRTY]\n\t\t\tif (webix.env.isWebKit)\n\t\t\t\tvar w = obj.offsetWidth;\n\t\t} else \n\t\t\tobj.style.display = \"none\";\n\t},\n\t_size_header_footer_fix:function(){\n\t\tif (this._settings.header)\n\t\t\tthis._set_size_scroll_area(this._header_scroll, this._header_height, this._header_fix_width);\n\t\tif (this._settings.footer)\n\t\t\tthis._set_size_scroll_area(this._footer_scroll, this._footer_height, this._header_fix_width);\n\t},\n\t_update_scroll:function(x,y){\n\t\tvar hasX = !(this._settings.autowidth || this._settings.scrollX === false);\n\t\tthis._scrollSizeX =  hasX ? webix.ui.scrollSize : 0;\n\t\tvar hasY = !(this._settings.autoheight || this._settings.scrollY === false);\n\t\tthis._scrollSizeY = hasY ? webix.ui.scrollSize : 0;\n\t\tif(webix.env.touch)\n\t\t\thasX = hasY = false;\n\t\tif (this._x_scroll){\n\t\t\tthis._x_scroll._settings.scrollSize = this._scrollSizeX;\n\t\t\tthis._x_scroll._settings.scrollVisible = hasX;\n\t\t}\n\t\tif (this._y_scroll){\n\t\t\tthis._y_scroll._settings.scrollSize = this._scrollSizeY;\n\t\t\tthis._y_scroll._settings.scrollVisible = hasY;\n\t\t}\n\t},\n\t_create_scrolls:function(){\n\n\t\tthis._scrollTop = 0;\n\t\tthis._scrollLeft = 0;\n\t\tvar scrx, scry; scrx = scry = 1;\n\n\t\tif (this._settings.autoheight || this._settings.scrollY === false)\n\t\t\tscry = this._scrollSizeY = 0;\n\t\tif (this._settings.autowidth || this._settings.scrollX === false)\n\t\t\tscrx = this._scrollSizeX = 0;\n\t\t\n\t\tif (webix.env.touch) scrx = scry = 0;\n\n\t\tif (!this._x_scroll){\n\t\t\tthis._x_scroll = new webix.ui.vscroll({\n\t\t\t\tcontainer:this._footer.previousSibling,\n\t\t\t\tscrollWidth:this._dtable_width,\n\t\t\t\tscrollSize:this._scrollSizeX,\n\t\t\t\tscrollVisible:scrx\n\t\t\t});\n\n\t\t\t//fix for scroll space on Mac\n\t\t\tif (scrx && !this._scrollSizeX && !webix.env.$customScroll)\n\t\t\t\tthis._x_scroll._viewobj.style.position=\"absolute\";\n\n\t\t\tthis._x_scroll.attachEvent(\"onScroll\", webix.bind(this._onscroll_x, this));\n\t\t}\n\n\t\tif (!this._y_scroll){\n\t\t\tthis._header_scroll = this._footer.nextSibling;\n\t\t\tvar vscroll_view = this._header_scroll.nextSibling;\n\t\t\tthis._footer_scroll = vscroll_view.nextSibling;\n\n\t\t\tthis._y_scroll = new webix.ui.vscroll({\n\t\t\t\tcontainer:vscroll_view,\n\t\t\t\tscrollHeight:100,\n\t\t\t\tscroll:\"y\",\n\t\t\t\tscrollSize:this._scrollSizeY,\n\t\t\t\tscrollVisible:scry\n\t\t\t});\n\n\t\t\tthis._y_scroll.activeArea(this._body);\n\t\t\tthis._x_scroll.activeArea(this._body, true);\n\t\t\tthis._y_scroll.attachEvent(\"onScroll\", webix.bind(this._onscroll_y, this));\n\t\t}\n\n\t\tif (this._content_width)\n\t\t\tthis.callEvent(\"onResize\",[this._content_width, this._content_height]);\n\n\t\tif (webix.env.$customScroll)\n\t\t\twebix.CustomScroll.enable(this);\n\n\t\tthis._create_scrolls = function(){};\n\t},\n\tcolumnId:function(index){\n\t\treturn this._columns[index].id;\n\t},\n\tgetColumnIndex:function(id){\n\t\tfor (var i = 0; i < this._columns.length; i++)\n\t\t\tif (this._columns[i].id == id) \n\t\t\t\treturn i;\n\t\treturn -1;\n\t},\n\t_getNodeBox:function(rid, cid){\n\t\tvar xs=0, xe=0, ye=0, ys=0;\n\t\tvar i; var zone = 0;\n\t\tfor (i = 0; i < this._columns.length; i++){\n\t\t\tif (this._rightSplit == i || this._settings.leftSplit == i){\n\t\t\t\txs=0; zone++;\n\t\t\t}\n\t\t\tif (this._columns[i].id == cid) \n\t\t\t\tbreak;\n\t\t\txs+=this._columns[i].width;\n\t\t}\n\t\txe+=this._columns[i].width;\n\n\t\tfor (i = 0; i < this.data.order.length; i++){\n\t\t\tif (this.data.order[i] ==rid) \n\t\t\t\tbreak;\n\t\t\tys+=this._getHeightByIndex(i);\n\t\t}\n\t\tye+=this._getHeightByIndex(i);\n\t\treturn [xs,xe,ys-this._scrollTop,ye, this._body.childNodes[zone]];\n\t},\n\t_id_to_string:function(){ return this.row; },\n\tlocate:function(node, idOnly){\n\t\tif (this._settings.subview && this != webix.$$(node)) return null;\n\n\t\tnode = node.target||node.srcElement||node;\n\t\twhile (node && node.getAttribute){\n\t\t\tif (node === this.$view)\n\t\t\t\tbreak;\n\t\t\tvar cs = webix.html._getClassName(node).toString();\n\n\t\t\tvar pos = null;\n\t\t\tif (cs.indexOf(\"webix_cell\")!=-1){\n\t\t\t\tpos = this._locate(node);\n\t\t\t\tif (pos) \n\t\t\t\t\tpos.row = this.data.order[pos.rind];\n\t\t\t}\n\t\t\tif (cs.indexOf(\"webix_hcell\")!=-1){\n\t\t\t\tpos = this._locate(node);\n\t\t\t\tif (pos)\n\t\t\t\t\tpos.header = true;\n\t\t\t}\n\n\t\t\tif (pos){\n\t\t\t\tif (idOnly) return pos.header ? null : pos.row;\n\t\t\t\tpos.column = this._columns[pos.cind].id;\n\t\t\t\tpos.toString = this._id_to_string;\n\t\t\t\treturn pos;\n\t\t\t}\n\n\t\t\tnode = node.parentNode;\n\t\t}\n\t\treturn null;\n\t},\n\t_locate:function(node){\n\t\tvar cdiv = node.parentNode;\n\t\tif (!cdiv) return null;\n\t\tvar column = (node.getAttribute(\"column\") || cdiv.getAttribute(\"column\"))*1;\n\t\tvar row = node.getAttribute(\"row\") || 0;\n\t\tif (!row)\n\t\t\tfor (var i = 0; i < cdiv.childNodes.length; i++)\n\t\t\t\tif (cdiv.childNodes[i] == node){\n\t\t\t\t\tif (i >= this._settings.topSplit)\n\t\t\t\t\t\trow = i+this._columns[column]._yr0 - this._settings.topSplit;\n\t\t\t\t\telse\n\t\t\t\t\t\trow = i;\n\t\t\t\t}\n\n\t\treturn { rind:row, cind:column };\n\t},\n\t_correctScrollSize:function(){\n\t\tvar center = -this._center_width;\n\t\tfor (var i=0; i<this._columns.length; i++)\n\t\t\tcenter += this._columns[i].width;\n\t\tthis._scrollLeft = Math.min(this._scrollLeft, Math.max(0, center));\n\t},\n\t_updateColsSizeSettings:function(silent){\n\t\tif (!this._dtable_fully_ready) return;\n\n\t\tthis._correctScrollSize();\n\t\tthis._set_columns_positions();\n\t\tthis._set_split_sizes_x();\n\t\tthis._render_header_and_footer();\n\n\t\tif (!silent)\n\t\t\tthis._check_rendered_cols(false, false);\n\t},\n\tsetColumnWidth:function(col, width, skip_update){\n\t\treturn this._setColumnWidth( this.getColumnIndex(col), width, skip_update);\n\t},\n\t_setColumnWidth:function(col, width, skip_update, by_user){\n\t\tif (isNaN(width) || col < 0) return;\n\t\tvar column = this._columns[col];\n\n\t\tif (column.minWidth && width < column.minWidth)\n\t\t\twidth = column.minWidth;\n\t\telse if (width<this._settings.minColumnWidth)\n\t\t\twidth = this._settings.minColumnWidth;\t\t\n\n\t\tvar old = column.width;\n\t\tif (old !=width){\n\t\t\tif (col>=this._settings.leftSplit && col<this._rightSplit)\n\t\t\t\tthis._dtable_width += width-old;\n\t\t\t\n\t\t\tcolumn.width = width;\n\t\t\tif (column.node) //method can be called from onStructLoad\n\t\t\t\tcolumn.node.style.width = width+\"px\";\n\t\t\telse \n\t\t\t\treturn false;\n\n\t\t\tif(!skip_update)\n\t\t\t\tthis._updateColsSizeSettings();\n\n\t\t\tthis.callEvent(\"onColumnResize\", [column.id, width, old, !!by_user]);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\t_getRowHeight:function(row){\n\t\treturn (row.$height || this._settings.rowHeight)+(row.$subopen?row.$subHeight:0);\n\t},\n\t_getHeightByIndex:function(index){\n\t\tvar id = this.data.order[index];\n\t\tif (!id) return this._settings.rowHeight;\n\t\treturn this._getRowHeight(this.data.pull[id]);\n\t},\n\t_getHeightByIndexSumm:function(index1, index2){\n\t\tif (this._settings.fixedRowHeight)\n\t\t\treturn (index2-index1)*this._settings.rowHeight;\n\t\telse {\n\t\t\tvar summ = 0;\n\t\t\tfor (; index1<index2; index1++)\n\t\t\t\tsumm += this._getHeightByIndex(index1);\n\t\t\treturn summ;\n\t\t}\n\t},\n\t_cellPosition:function(row, column){\n\t\tvar top;\n\t\tif (arguments.length == 1){\n\t\t\tcolumn = row.column; row = row.row;\n\t\t}\n\t\tvar item = this.getItem(row);\n\t\tvar config = this.getColumnConfig(column);\n\t\tvar left = 0;\n\t\tvar parent = 0;\n\n\t\tfor (var index=0; index < this._columns.length; index++){\n\t\t\tif (index == this._settings.leftSplit || index == this._rightSplit)\n\t\t\t\tleft = 0;\n\t\t\tvar leftcolumn = this._columns[index];\n\t\t\tif (leftcolumn.id == column){\n\t\t\t\tvar split_column = index<this._settings.leftSplit ? 0 :( index >= this._rightSplit ? 2 : 1);\n\t\t\t\tparent = this._body.childNodes[split_column].firstChild;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tleft += leftcolumn.width;\n\t\t}\n\n\n\t\tif(this.getIndexById(row) < this._settings.topSplit)\n\t\t\ttop = this._getHeightByIndexSumm(0,  this.getIndexById(row));\n\t\telse\n\t\t\ttop = this._getHeightByIndexSumm((this._render_scroll_top||0)-this._settings.topSplit,  this.getIndexById(row)) + (this._render_scroll_shift||0);\n\n\t\treturn {\n\t\t\tparent: parent,\n\t\t\ttop:\ttop,\n\t\t\tleft:\tleft,\n\t\t\twidth:\tconfig.width,\n\t\t\theight:\t(item.$height || this._settings.rowHeight)\n\t\t};\n\t},\n\t_get_total_height:function(){\n\t\tvar pager  = this._settings.pager;\n\t\tvar start = 0;\n\t\tvar max = this.data.order.length;\n\t\t\n\t\tif (pager){\n\t\t\tstart = pager.size * pager.page;\n\t\t\tmax = Math.min(max, start + pager.size);\n\t\t\tif (pager.level){\n\t\t\t\tstart = this.data.$min;\n\t\t\t\tmax = this.data.$max;\n\t\t\t}\n\t\t}\n\n\t\treturn this._getHeightByIndexSumm(start, max);\n\t},\n\tsetRowHeight:function(rowId, height){\n\t\tif (isNaN(height)) return;\n\t\tif (height<this._settings.minColumnHeight)\n\t\t\theight = this._settings.minColumnHeight;\n\n\t\tvar item = this.getItem(rowId);\n\t\tvar old_height = item.$height||this._settings.rowHeight;\n\n\t\tif (old_height != height){\n\t\t\titem.$height = height;\n\t\t\tthis.config.fixedRowHeight = false;\n\t\t\tthis.render();\n\t\t\tthis.callEvent(\"onRowResize\", [rowId, height, old_height]);\n\t\t}\n\t},\n\t_onscroll_y:function(value){\n\t\tvar scrollChange = (this._scrollTop !== value);\n\n\t\tthis._scrollTop = value;\n\t\tif (!this._settings.prerender){\n\t\t\tthis._check_rendered_cols();\n\t\t}\n\t\telse {\n\t\t\tvar conts = this._body.childNodes;\n\t\t\tfor (var i = 0; i < conts.length; i++){\n\t\t\t\tconts[i].scrollTop = value;\n\t\t\t}\n\t\t}\n\n\t\tif (webix.env.$customScroll) webix.CustomScroll._update_scroll(this._body);\n\t\tif(scrollChange){\n\t\t\tthis.callEvent(\"onScrollY\",[]);\n\t\t\tthis.callEvent(\"onAfterScroll\",[]);\n\t\t}\n\t},\n\t_onscroll_x:function(value){\n\t\tvar scrollChange = (this._scrollLeft !== value);\n\n\t\tthis._body.childNodes[1].scrollLeft = this._scrollLeft = value;\n\t\tif (this._settings.header)\n\t\t\tthis._header.childNodes[1].scrollLeft = value;\n\t\tif (this._settings.footer)\n\t\t\tthis._footer.childNodes[1].scrollLeft = value;\n\t\tif (this._settings.prerender===false)\n\t\t\tthis._check_rendered_cols(this._minimize_dom_changes?false:true);\n\n\t\tif (webix.env.$customScroll) webix.CustomScroll._update_scroll(this._body);\n\n\t\tif(scrollChange){\n\t\t\tthis.callEvent(\"onScrollX\",[]);\n\t\t\tthis.callEvent(\"onAfterScroll\",[]);\n\t\t}\n\t},\n\t_get_x_range:function(full){\n\t\tif (full) return [0,this._columns.length];\n\n\t\tvar t = this._scrollLeft;\n\t\t\n\t\tvar xind = this._settings.leftSplit;\n\t\twhile (t>0 && this._columns.length - 1 > xind){\n\t\t\tt-=this._columns[xind].width;\n\t\t\txind++;\n\t\t}\n\t\tvar xend = xind;\n\t\tif (t) xind--;\n\n\t\tt+=this._center_width;\n\t\twhile (t>0 && xend<this._rightSplit){\n\t\t\tt-=this._columns[xend].width;\n\t\t\txend++;\n\t\t}\n\n\t\treturn [xind, xend];\n\t},\n\tgetVisibleCount:function(){\n\t\treturn Math.floor((this._dtable_offset_height) / this.config.rowHeight);\n\t},\n\t//returns info about y-scroll position\n\t_get_y_range:function(full){\n\t\tvar t = this._scrollTop;\n\t\tvar start = 0; \n\t\tvar end = this.count();\n\n\t\t//apply pager, if defined\n\t\tvar pager = this._settings.pager;\n\t\tif (pager){\n\t\t\tvar start = pager.page*pager.size;\n\t\t\tvar end = Math.min(end, start+pager.size);\n\t\t\tif (pager.level){\n\t\t\t\tstart = this.data.$min;\n\t\t\t\tend = this.data.$max;\n\t\t\t}\n\t\t}\n\n\t\t//in case of autoheight - request full rendering\n\t\tif (this._settings.autoheight)\n\t\t\treturn [start, end, 0];\n\n\t\t\n\t\t\n\n\t\tif (full) return [start, end, 0];\n\t\tvar xind = start;\n\t\tvar rowHeight = this._settings.fixedRowHeight?this._settings.rowHeight:0;\n\t\tif (rowHeight){\n\t\t\tvar dep = Math.ceil(t/rowHeight);\n\t\t\tt -= dep*rowHeight;\n\t\t\txind += dep;\n\t\t} else\n\t\t\twhile (t>0){\n\t\t\t\tt-=this._getHeightByIndex(xind);\n\t\t\t\txind++;\n\t\t\t}\n\n\t\tvar topSplit = this._settings.topSplit;\n\t\tif (topSplit)\n\t\t\txind += topSplit;\n\n\t\t//how much of the first cell is scrolled out\n\t\tvar xdef = (xind>0 && t)?-(this._getHeightByIndex(xind-1)+t):0;\n\t\tvar xend = xind;\n\t\tif (t) xind--;\n\n\t\tt+=(this._dtable_offset_height||this._content_height) - (this._top_split_height||0);\n\n\n\n\t\tif (rowHeight){\n\t\t\tvar dep = Math.ceil(t/rowHeight);\n\t\t\tt-=dep*rowHeight;\n\t\t\txend+=dep;\n\t\t} else {\n\t\t\twhile (t>0 && xend<end){\n\t\t\t\tt-=this._getHeightByIndex(xend);\n\t\t\t\txend++;\n\t\t\t}\n\t\t}\n\n\t\tif (xend>end)\n\t\t\txend = end;\n\n\t\treturn [xind, xend, xdef];\n\t},\n\t_repaint_single_row:function(id){\n\t\tvar item = this.getItem(id);\n\t\tvar rowindex = this.getIndexById(id);\n\n\t\tvar state = this._get_y_range();\n\t\t//row not visible\n\t\tif (rowindex < state[0] || rowindex >= state[1]) return;\n\n\t\t//get visible column\n\t\tvar x_range = this._get_x_range();\n\t\tfor (var i=0; i<this._columns.length; i++){\n\t\t\tvar column = this._columns[i];\n\n\t\t\t//column not visible\n\t\t\tif (i < this._rightSplit && i >= this._settings.leftSplit && ( i<x_range[0] || i > x_range[1]))\n\t\t\t\tcolumn._yr0 = -999; //ensure that column will not be reused\n\n\t\t\tif (column.attached && column.node){\n\t\t\t\tvar node =  column.node.childNodes[rowindex-state[0]];\n\t\t\t\tvar value = this._getValue(item, this._columns[i], 0);\n\n\t\t\t\tnode.innerHTML = value;\n\t\t\t\tnode.className = this._getCss(this._columns[i], value, item, id);\n\t\t\t}\n\t\t}\n\t},\n\t_check_rendered_cols:function(x_scroll, force){\n\t\tif (!this._columns.length) return;\n\n\t\tif (force)\n\t\t\tthis._clearColumnCache();\n\n\t\tif (webix.debug_render)\n\t\t\twebix.log(\"Render: \"+this.name+\"@\"+this._settings.id);\n\n\n\t\tvar xr = this._get_x_range(this._settings.prerender);\n\t\tvar yr = this._get_y_range(this._settings.prerender === true);\n\n\t\tif (x_scroll){\n\t\t\tfor (var i=this._settings.leftSplit; i<xr[0]; i++)\n\t\t\t\tthis._hideColumn(i, force);\n\t\t\tfor (var i=xr[1]; i<this._rightSplit; i++)\n\t\t\t\tthis._hideColumn(i, force);\n\t\t}\n\n\t\tthis._render_full_rows = [];\n\t\tvar rendered = 0;\n\n\t\tfor (var i=0; i<this._settings.leftSplit; i++)\n\t\t\trendered += this._renderColumn(i,yr,force);\n\t\tfor (var i=xr[0]; i<xr[1]; i++)\n\t\t\trendered += this._renderColumn(i,yr,force, i == xr[0]);\n\t\tfor (var i=this._rightSplit; i<this._columns.length; i++)\n\t\t\trendered += this._renderColumn(i,yr,force);\n\n\t\tthis._check_and_render_full_rows(yr[0], yr[1], force);\n\t\tthis._check_load_next(yr);\n\t},\n\t_delete_full_rows:function(start, end){\n\t\tthis._rows_cache_start = start;\n\t\tthis._rows_cache_end = end;\n\n\t\twebix.html.remove(this._rows_cache);\n\t\tthis._rows_cache=[];\n\t},\n\t_adjust_rows:function(){\n\t\tif(this._settings.prerender && this._rows_body){\n\t\t\tvar state = this.getScrollState();\n\t\t\tthis._rows_body.style.top = \"-\"+(state.y||0) +\"px\";\n\t\t}\n\t},\n\t_check_and_render_full_rows:function(start, end, force){\n\t\tif (this._rows_body)\n\t\t\tthis._rows_body.style.top = this._render_scroll_shift+\"px\";\n\n\t\tif (!force && start == this._rows_cache_start && end == this._rows_cache_end)\n\t\t\treturn;\n\n\t\tthis._delete_full_rows(start, end);\n\n\t\tif (this._render_full_row_some)\n\t\t\tthis._render_full_row_some = false;\n\t\telse return;\n\n\t\tfor (var i=0; i<this._render_full_rows.length; i++){\n\t\t\tvar info = this._render_full_rows[i];\n\t\t\tvar item = this.getItem(info.id);\n\n\t\t\tvar value;\n\t\t\tif (typeof item.$row == \"function\"){\n\t\t\t\tvalue = item.$row.call(this, item, this.type);\n\t\t\t} else {\n\t\t\t\tvalue = this._getValue(item, this.getColumnConfig(item.$row), i);\n\t\t\t}\n\n\t\t\tvar row = this._rows_cache[i] = webix.html.create(\"DIV\", null , value);\n\t\t\trow.className = \"webix_cell \"+(item.$sub ? (\"webix_dtable_sub\"+(this._settings.subview?\"view\":\"row\")) : \"webix_dtable_colrow\");\n\t\t\trow.setAttribute(\"column\", 0);\n\t\t\trow.setAttribute(\"row\", info.index);\n\n\t\t\tvar height = (item.$height || this._settings.rowHeight);\n\t\t\tif (item.$subopen)\n\t\t\t\trow.style.height = item.$subHeight+\"px\";\n\t\t\telse \n\t\t\t\trow.style.height = height +\"px\";\n\n\t\t\trow.style.paddingRight = webix.ui.scrollSize+\"px\";\n\t\t\trow.style.top =  info.top + (item.$subopen ? height-1 : -1) + \"px\";\n\n\t\t\tif (!this._rows_body){\n\t\t\t\tthis._rows_body = webix.html.create(\"DIV\");\n\t\t\t\tthis._rows_body.style.position = \"relative\";\n\t\t\t\tthis._rows_body.style.top = this._render_scroll_shift+\"px\";\n\t\t\t\tthis._body.appendChild(this._rows_body);\n\t\t\t}\n\t\t\tthis._rows_body.appendChild(row);\n\t\t\tthis.attachEvent(\"onSyncScroll\", function(x,y,t){\n\t\t\t\twebix.Touch._set_matrix(this._rows_body,0,y,t);\n\t\t\t});\n\t\t\tif (this._settings.subview)\n\t\t\t\tthis.callEvent(\"onSubViewRender\", [item, row]);\n\t\t}\n\t},\n\t_check_load_next:function(yr){\n\t\tvar paging = this._settings.pager;\n\t\tvar fetch = this._settings.datafetch;\n\t\t\n\t\tvar direction = (!this._last_valid_render_pos || yr[0] >= this._last_valid_render_pos);\n\t\tthis._last_valid_render_pos = yr[0];\n\n\t\tif (this._data_request_flag){\n\t\t\tif (paging && (!fetch || fetch >= paging.size))\n\t\t\t\tif (this._check_rows([0,paging.size*paging.page], Math.max(fetch, paging.size), true)) \n\t\t\t\t\treturn (this._data_request_flag = null);\n\t\t\t\t\t\n\t\t\tthis._run_load_next(this._data_request_flag, direction);\n\t\t\tthis._data_request_flag = null;\n\t\t} else {\n\t\t\tif (this._settings.loadahead)\n\t\t\t\tvar check = this._check_rows(yr, this._settings.loadahead, direction);\n\t\t}\n\t},\n\t_check_rows:function(view, count, dir){\n\t\tvar start = view[1];\n\t\tvar end = start+count;\n\t\tif (!dir){\n\t\t\tstart = view[0]-count;\n\t\t\tend = view[0];\n\t\t}\n\n\t\tif (start<0) start = 0;\n\t\tend = Math.min(end, this.data.order.length-1);\n\n\t\tvar result = false;\t\t\t\n\t\tfor (var i=start; i<end; i++)\n\t\t\tif (!this.data.order[i]){\n\t\t\t\tif (!result)\n\t\t\t\t\tresult = { start:i, count:(end-start) };\n\t\t\t\telse {\n\t\t\t\t\tresult.last = i;\n\t\t\t\t\tresult.count = (i-start);\n\t\t\t\t}\n\t\t\t}\n\t\tif (result){\t\t\t\n\t\t\tthis._run_load_next(result, dir);\n\t\t\treturn true;\n\t\t}\n\t},\n\t_run_load_next:function(conf, direction){\n\t\tvar count = Math.max(conf.count, (this._settings.datafetch||this._settings.loadahead||0));\n\t\tvar start = direction?conf.start:(conf.last - count+1);\n\t\t\n\t\tif (this._maybe_loading_already(conf.count, conf.start)) return;\n\t\tthis.loadNext(count, start);\n\t},\n\t// necessary for safari only\n\t_preserveScrollTarget: function(columnNode){\n\t\tif (webix.env.isSafari){\n\t\t\tvar i, node, newNode, scroll,\n\t\t\t\tdir = [this._x_scroll, this._y_scroll];\n\n\t\t\tfor(i = 0; i < 2; i++){\n\t\t\t\tscroll = dir[i];\n\t\t\t\tif(scroll && scroll._scroll_trg && scroll._scroll_trg.parentNode == columnNode){\n\t\t\t\t\tnode = scroll._scroll_trg;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(node){\n\t\t\t\tif(this._scrollWheelTrg)\n\t\t\t\t\twebix.html.remove(this._scrollWheelTrg);\n\t\t\t\tthis._scrollWheelTrg = node;\n\t\t\t\tnewNode  = node.cloneNode(true); // required for _hideColumn\n\t\t\t\tnode.parentNode.insertBefore(newNode, node);\n\t\t\t\tthis._scrollWheelTrg.style.display = \"none\";\n\t\t\t\tthis._body.appendChild(this._scrollWheelTrg);\n\t\t\t}\n\t\t}\n\t},\n\t_hideColumn:function(index){\n\t\tvar col = this._columns[index];\n\n\t\t// preserve target node for Safari wheel event\n\t\tthis._preserveScrollTarget(col.node);\n\t\twebix.html.remove(col.node);\n\t\tcol.attached = false;\n\t},\n\t_clearColumnCache:function(){\n\t\tfor (var i = 0; i < this._columns.length; i++)\n\t\t\tthis._columns[i]._yr0 = -1;\n\n\t\tif (this._rows_cache.length){\n\t\t\twebix.html.remove(this._rows_cache);\n\t\t\tthis._rows_cache = [];\n\t\t}\n\t},\n\tgetText:function(row_id, column_id){\n\t\treturn this._getValue(this.getItem(row_id), this.getColumnConfig(column_id), 0);\n\t},\n\tgetCss:function(row_id, column_id){\n\t\tvar item = this.getItem(row_id);\n\t\treturn this._getCss(this.getColumnConfig(column_id), item[column_id], item, row_id);\n\t},\n\t_getCss:function(config, value, item, id){\n\t\tvar css = \"webix_cell\";\n\t\t\t\t\n\t\tif (config.cssFormat){\n\t\t\tvar per_css = config.cssFormat(value, item, id, config.id);\n\t\t\tif (per_css){\n\t\t\t\tif (typeof per_css == \"object\")\n\t\t\t\t\tcss+= \" \"+webix.html.createCss(per_css);\n\t\t\t\telse\n\t\t\t\t\tcss+=\" \"+per_css;\n\t\t\t}\n\t\t}\n\n\t\tvar row_css = item.$css;\n\t\tif (row_css){\n\t\t\tif (typeof row_css == \"object\")\n\t\t\t\titem.$css = row_css = webix.html.createCss(row_css);\n\t\t\tcss+=\" \"+row_css;\n\t\t}\n\n\t\tvar mark = this.data._marks[id];\n\t\tif (mark){\n\t\t\tif (mark.$css)\n\t\t\t\tcss+=\" \"+mark.$css;\n\t\t\tif (mark.$cellCss){\n\t\t\t\tvar mark_marker = mark.$cellCss[config.id];\n\t\t\t\tif (mark_marker)\n\t\t\t\t\tcss+=\" \"+mark_marker;\n\t\t\t}\n\t\t}\n\n\t\tif (item.$cellCss){\n\t\t\tvar css_marker = item.$cellCss[config.id];\n\t\t\tif (css_marker){\n\t\t\t\tif (typeof css_marker == \"object\")\n\t\t\t\t\tcss_marker = webix.html.createCss(css_marker);\n\t\t\t\tcss += \" \"+css_marker;\n\t\t\t}\n\t\t}\n\n\t\t//cell-selection\n\t\tvar selected = this.data.getMark(item.id,\"webix_selected\");\n\t\tif ((selected && (selected.$row || selected[config.id]))||config.$selected) css+=this._select_css;\n\n\t\treturn css;\n\t},\n\t_getValue:function(item, config, i){\n\t\tif (!item)\n\t\t\treturn \"\";\n\n\t\tvar value;\n\n\t\tvalue = item[config.id];\n\t\tif (value === webix.undefined || value === null)\n\t\t\tvalue = \"\";\n\t\telse if (config.format)\n\t\t\tvalue = config.format(value);\n\t\tif (config.template)\n\t\t\tvalue = config.template(item, this.type, value, config, i);\n\n\t\treturn value;\n\t},\n\t//we don't use render-stack, but still need a place for common helpers\n\t//so creating a simple \"type\" holder\n\ttype:{\n\t\tcheckbox:function(obj, common, value, config){\n\t\t\tvar checked = (value == config.checkValue) ? 'checked=\"true\"' : '';\n\t\t\treturn \"<input class='webix_table_checkbox' type='checkbox' \"+checked+\">\";\n\t\t},\n\t\tradio:function(obj, common, value, config){\n\t\t\tvar checked = (value == config.checkValue) ? 'checked=\"true\"' : '';\n\t\t\treturn \"<input class='webix_table_radio' type='radio' \"+checked+\">\";\n\t\t},\n\t\teditIcon:function(){\n\t\t\treturn \"<span class='webix_icon fa-pencil'></span>\";\n\t\t},\n\t\ttrashIcon:function(){\n\t\t\treturn \"<span class='webix_icon fa-trash'></span>\";\n\t\t}\n\t},\n\ttype_setter:function(value){\n\t\tif(!this.types || !this.types[value])\n\t\t\twebix.type(this, value);\n\t\telse {\n\t\t\tthis.type = webix.clone(this.types[value]);\n\t\t\tif (this.type.css) \n\t\t\t\tthis._contentobj.className+=\" \"+this.type.css;\n\t\t}\n\t\tif (this.type.on_click)\n\t\t\twebix.extend(this.on_click, this.type.on_click);\n\n\t\treturn value;\n\t},\n\t_renderColumn:function(index,yr,force, single){\n\t\tvar col = this._columns[index];\n\t\tif (!col.attached){\n\t\t\tvar split_column = index<this._settings.leftSplit ? 0 :( index >= this._rightSplit ? 2 : 1);\n\t\t\tthis._body.childNodes[split_column].firstChild.appendChild(col.node);\n\t\t\tcol.attached = true;\n\t\t\tcol.split = split_column;\n\t\t}\n\n\t\tthis._render_scroll_top = yr[0];\n\t\tthis._render_scroll_shift = 0;\n\t\tthis._render_scroll_diff = yr[2];\n\n\t\t//if columns not aligned during scroll - set correct scroll top value for each column\n\t\tif (this._settings.scrollAlignY){\n\t\t\tif ((yr[1] == this.data.order.length) || (this.data.$pagesize && yr[1] % this.data.$pagesize === 0 )){\n\t\t\t\tcol.node.style.top = (this._render_scroll_shift = yr[2])+\"px\";\n\t\t\t } else if (col._yr2)\n\t\t\t\tcol.node.style.top = \"0px\";\n\t\t} else {\n\t\t\tthis._render_scroll_shift = yr[2];\n\t\t\tcol.node.style.top = yr[2]+\"px\";\n\t\t}\n\n\t\tif (!force  && (col._yr0 == yr[0] && col._yr1 == yr[1]) && (!this._settings.topSplit || col._render_scroll_shift==this._render_scroll_shift)) return 0;\n\n\t\tvar html=\"\";\n\t\tvar config = this._settings.columns[index];\n\t\tvar state = { \n\t\t\trow: this._settings.rowHeight,\n\t\t\ttotal: 0,\n\t\t\tsingle: single\n\t\t};\n\n\t\tfor (var i=0; i<this._settings.topSplit; i++)\n\t\t\thtml += this._render_single_cell(i, config, yr, state, -this._render_scroll_shift);\n\n\t\tfor (var i = Math.max(yr[0], this._settings.topSplit); i < yr[1]; i++)\n\t\t\thtml += this._render_single_cell(i, config, yr, state, -1);\n\n\t\t// preserve target node for Safari wheel event\n\t\tthis._preserveScrollTarget(col.node);\n\n\t\tcol.node.innerHTML = html;\n\t\tcol._yr0=yr[0];\n\t\tcol._yr1=yr[1];\n\t\tcol._yr2=yr[2];\n\t\tcol._render_scroll_shift=this._render_scroll_shift;\n\t\treturn 1;\n\t},\n\t_render_single_cell:function(i, config, yr, state, top){\n\t\tvar id = this.data.order[i];\n\t\tvar item = this.data.getItem(id);\n\t\tvar html = \"\";\n\n\t\t\n\t\tvar value;\n\t\tif (item){\n\t\t\tvar aria = \" role='gridcell' aria-rowindex='\"+(i+1)+\"' aria-colindex='\"+(this.getColumnIndex(config.id)+1)+\"'\"+\n\t\t\t\t(item.$count || item.$sub?(\" aria-expanded='\"+(item.open || item.$subopen?\"true\":\"false\")+\"'\"):\"\")+\n\t\t\t\t(item.$level?\" aria-level='\"+item.$level+\"'\":\"\");\n\n\t\t\tif (state.single && item.$row){\n\t\t\t\tthis._render_full_row_some = true;\n\t\t\t\tthis._render_full_rows.push({ top:state.total, id:item.id, index:i});\n\t\t\t\tif (!item.$sub){\n\t\t\t\t\tstate.total += state.row;\n\t\t\t\t\treturn \"<div\"+aria+\" class='webix_cell'></div>\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar value = this._getValue(item, config, i);\n\t\t\tvar css = this._getCss(config, value, item, id);\n\t\t\t\n\t\t\tif(css.indexOf(\"select\") !==-1 ) aria += \" aria-selected='true' tabindex='0'\";\n\t\t\t\n\t\t\tvar margin = item.$subopen ? \"margin-bottom:\"+item.$subHeight+\"px;\" : \"\";\n\n\t\t\tif (top>=0){\n\t\t\t\tif (top>0) margin+=\"top:\"+top+\"px;'\";\n\t\t\t\tcss = \"webix_topcell \"+css;\n\t\t\t\tif(i == this._settings.topSplit-1)\n\t\t\t\t\tcss = \"webix_last_topcell \"+css;\n\t\t\t}\n\t\t\tif (item.$height){\n\t\t\t\thtml = \"<div\"+aria+\" class='\"+css+\"' style='height:\"+item.$height+\"px;\"+margin+\"'>\"+value+\"</div>\";\n\t\t\t\tstate.total += item.$height - state.row;\n\t\t\t} else {\n\t\t\t\thtml = \"<div\"+aria+\" class='\"+css+\"'\"+(margin?\" style='\"+margin+\"'\":\"\")+\">\"+value+\"</div>\";\n\t\t\t}\n\n\t\t\tif (margin)\n\t\t\t\tstate.total += item.$subHeight;\n\n\t\t} else {\n\t\t\thtml = \"<div role='gridcell' class='webix_cell'></div>\";\n\t\t\tif (!this._data_request_flag)\n\t\t\t\tthis._data_request_flag = {start:i, count:yr[1]-i};\n\t\t\telse\n\t\t\t\tthis._data_request_flag.last = i;\n\t\t}\n\t\tstate.total += state.row;\n\t\treturn html;\n\t},\n\t_set_split_sizes_y:function(){\n\t\tif (!this._columns.length || isNaN(this._content_height*1)) return;\n\t\twebix.debug_size_box(this, [\"y-sizing\"], true);\n\n\t\tvar wanted_height = this._dtable_height+(this._scrollSizeX?this._scrollSizeX:0);\n\t\tif ((this._settings.autoheight || this._settings.yCount) && this.resize())\n\t\t\treturn;\n\n\t\tthis._y_scroll.sizeTo(this._content_height, this._header_height, this._footer_height);\n\t\tthis._y_scroll.define(\"scrollHeight\", wanted_height);\n\n\t\tthis._top_split_height = this._settings.topSplit * this._settings.rowHeight;\n\t\tthis._dtable_offset_height =  Math.max(0,this._content_height-this._scrollSizeX-this._header_height-this._footer_height);\n\t\tfor (var i = 0; i < 3; i++){\n\n\t\t\tthis._body.childNodes[i].style.height = this._dtable_offset_height+\"px\";\n\t\t\tif (this._settings.prerender)\n\t\t\t\tthis._body.childNodes[i].firstChild.style.height = this._dtable_height+\"px\";\n\t\t\telse\n\t\t\t\tthis._body.childNodes[i].firstChild.style.height = this._dtable_offset_height+\"px\";\n\t\t}\n\t\t//prevent float overflow, when we have split and very small\n\t\tthis._header.style.height = this._header_height+\"px\";\n\t},\n\t_set_split_sizes_x:function(){\n\t\tif (!this._columns.length) return;\n\t\tif (webix.debug_size) webix.log(\"  - \"+this.name+\"@\"+this._settings.id+\" X sizing\");\n\n\t\tvar index = 0; \n\t\tthis._left_width = 0;\n\t\tthis._right_width = 0;\n\t\tthis._center_width = 0;\n\n\t\twhile (index<this._settings.leftSplit){\n\t\t\tthis._left_width += this._columns[index].width;\n\t\t\tindex++;\n\t\t}\n\n\t\tindex = this._columns.length-1;\n\t\t\n\t\twhile (index>=this._rightSplit){\n\t\t\tthis._right_width += this._columns[index].width;\n\t\t\tindex--;\n\t\t}\n\n\t\tif (!this._content_width) return; \n\n\t\tif (this._settings.autowidth && this.resize())\n\t\t\treturn;\n\n\t\tthis._center_width = this._content_width - this._right_width - this._left_width - this._scrollSizeY;\n\n\t\tthis._body.childNodes[1].firstChild.style.width = this._dtable_width+\"px\";\n\n\t\tthis._body.childNodes[0].style.width = this._left_width+\"px\";\n\t\tthis._body.childNodes[1].style.width = this._center_width+\"px\";\n\t\tthis._body.childNodes[2].style.width = this._right_width+\"px\";\n\t\tthis._header.childNodes[0].style.width = this._left_width+\"px\";\n\t\tthis._header.childNodes[1].style.width = this._center_width+\"px\";\n\t\tthis._header.childNodes[2].style.width = this._right_width+\"px\";\n\t\tthis._footer.childNodes[0].style.width = this._left_width+\"px\";\n\t\tthis._footer.childNodes[1].style.width = this._center_width+\"px\";\n\t\tthis._footer.childNodes[2].style.width = this._right_width+\"px\";\n\n\t\tvar delta = this._center_width - this._dtable_width;\n\t\tif (delta<0) delta=0; //negative header space has not sense\n\n\t\tif (delta != this._header_fix_width){\n\t\t\tthis._header_fix_width = delta;\n\t\t\tthis._size_header_footer_fix();\n\t\t}\n\n\t\t// temp. fix: Chrome [DIRTY]\n\t\tif (webix.env.isWebKit){\n\t\t\tvar w = this._body.childNodes[0].offsetWidth;\n\t\t\tw = this._body.childNodes[1].offsetWidth;\n\t\t\tw = this._body.childNodes[1].firstChild.offsetWidth;\n\t\t\tw = this._body.childNodes[2].offsetWidth;\n\t\t}\n\n\t\tthis._x_scroll.sizeTo(this._content_width-this._scrollSizeY);\n\t\tthis._x_scroll.define(\"scrollWidth\", this._dtable_width+this._left_width+this._right_width);\n\t},\n\t$getSize:function(dx, dy){\n\t\tif ((this._settings.autoheight || this._settings.yCount) && this._settings.columns){\n\t\t\t//if limit set - use it\n\t\t\tvar desired = ((this._settings.yCount || 0) * this._settings.rowHeight);\n\t\t\t//else try to use actual rendered size\n\t\t\t//if component invisible - this is not valid, so fallback to all rows\n\t\t\tif (!desired) desired =  this.isVisible() ? this._dtable_height : (this.count() * this._settings.rowHeight);\n\t\t\t//add scroll and check minHeight limit\n\t\t\tthis._settings.height = Math.max(desired+(this._scrollSizeX?this._scrollSizeX:0)-1, (this._settings.minHeight||0))+this._header_height+this._footer_height;\n\t\t}\n\t\tif (this._settings.autowidth && this._settings.columns)\n\t\t\tthis._settings.width = Math.max(this._dtable_width+this._left_width+this._right_width+this._scrollSizeY,(this._settings.minWidth||0));\n\n\t\t\n\t\tvar minwidth = this._left_width+this._right_width+this._scrollSizeY;\n\t\tvar sizes = webix.ui.view.prototype.$getSize.call(this, dx, dy);\n\n\n\t\tsizes[0] = Math.max(sizes[0]||minwidth);\n\t\treturn sizes;\n\t},\n\t_restore_scroll_state:function(){\n\t\tif (this._x_scroll && !webix.env.touch){\n\t\t\tvar state = this.getScrollState();\n\t\t\tthis._x_scroll._last_scroll_pos = this._y_scroll._last_scroll_pos = -1;\n\t\t\tthis.scrollTo(state.x, state.y);\n\t\t}\n\t},\n\t$setSize:function(x,y){\n\t\tvar oldw = this._content_width;\n\t\tvar oldh = this._content_height;\n\n\t\tif (webix.ui.view.prototype.$setSize.apply(this, arguments)){\n\t\t\tif (this._dtable_fully_ready){\n\t\t\t\tthis.callEvent(\"onResize\",[this._content_width, this._content_height, oldw, oldh]);\n\t\t\t\tthis._set_split_sizes_x();\n\t\t\t\tthis._set_split_sizes_y();\n\t\t\t}\n\t\t\tthis.render();\n\t\t}\n\t},\n\t_on_header_click:function(column){\n\t\tvar col = this.getColumnConfig(column);\n\t\tif (!col.sort) return;\n\n\t\tvar order = 'asc';\n\t\tif (col.id == this._last_sorted)\n\t\t\torder = this._last_order == \"asc\" ? \"desc\" : \"asc\";\n\t\t\n\t\tthis._sort(col.id, order, col.sort);\n\t},\n\tmarkSorting:function(column, order){\n\t\tif (!this._sort_sign)\n\t\t\tthis._sort_sign = webix.html.create(\"DIV\");\n\t\t\n\t\tvar parent = this._sort_sign.parentNode;\n\t\tif(parent){\n\t\t\tparent.removeAttribute(\"aria-sort\");\n\t\t\tparent.removeAttribute(\"tabindex\");\n\t\t}\n\t\twebix.html.remove(this._sort_sign);\n\n\t\tif (order){\n\t\t\tvar cell = this._get_header_cell(this.getColumnIndex(column));\n\t\t\tif (cell){\n\t\t\t\tthis._sort_sign.className = \"webix_ss_sort_\"+order;\n\t\t\t\tcell.style.position = \"relative\";\n\t\t\t\tcell.appendChild(this._sort_sign);\n\t\t\t\tcell.setAttribute(\"aria-sort\", order+\"ending\");\n\t\t\t\tcell.setAttribute(\"tabindex\", \"0\");\n\t\t\t}\n\n\t\t\tthis._last_sorted = column;\n\t\t\tthis._last_order = order;\n\t\t} else {\n\t\t\tthis._last_sorted = this._last_order = null;\n\t\t}\n\t},\n\tscroll_setter:function(mode){\n\t\tif (typeof mode == \"string\"){\n\t\t\tthis._settings.scrollX = (mode.indexOf(\"x\") != -1);\n\t\t\tthis._settings.scrollY = (mode.indexOf(\"y\") != -1);\n\t\t\treturn mode;\n\t\t} else \n\t\t\treturn (this._settings.scrollX = this._settings.scrollY = mode);\n\t},\n\t_get_header_cell:function(column){\n\t\tvar cells = this._header.getElementsByTagName(\"TD\");\n\t\tvar maybe = null;\n\t\tfor (var i = 0; i<cells.length; i++)\n\t\t\tif (cells[i].getAttribute(\"column\") == column && !cells[i].getAttribute(\"active_id\")){\n\t\t\t\tmaybe = cells[i].firstChild;\n\t\t\t\tif ((cells[i].colSpan||0) < 2) return maybe;\n\t\t\t}\n\t\treturn maybe;\n\t},\n\t_sort:function(col_id, direction, type){\n\t\tdirection = direction || \"asc\";\n\t\tthis.markSorting(col_id, direction);\n\n\t\tif (type == \"server\"){\n\t\t\tthis.callEvent(\"onBeforeSort\",[col_id, direction, type]);\n\t\t\tthis.loadNext(0, 0, {\n\t\t\t\tbefore:function(){\n\t\t\t\t\tthis.clearAll(true);\n\t\t\t\t},\n\t\t\t\tsuccess:function(){\n\t\t\t\t\tthis.callEvent(\"onAfterSort\",[col_id, direction, type]);\n\t\t\t\t}\n\t\t\t}, 0, 1);\n\t\t} else {\n\t\t\tif (type == \"text\"){\n\t\t\t\tthis.data.each(function(obj){ obj.$text = this.getText(obj.id, col_id); }, this);\n\t\t\t\ttype=\"string\"; col_id = \"$text\";\n\t\t\t}\n\n\t\t\tif (typeof type == \"function\")\n\t\t\t\tthis.data.sort(type, direction);\n\t\t\telse\n\t\t\t\tthis.data.sort(col_id, direction, type || \"string\");\n\t\t}\n\t},\n\t_mouseEventCall: function( css_call, e, id, trg ) {\n\t\tvar functor, i, res;\n\t\tif (css_call.length){\n\t\t\tfor ( i = 0; i < css_call.length; i++) {\n\t\t\t\tfunctor = webix.toFunctor(css_call[i], this.$scope);\n\t\t\t\tres = functor.call(this,e,id,trg);\n\t\t\t\tif (res===false) return false;\n\t\t\t}\n\t\t}\n\t},\n\t//because we using non-standard rendering model, custom logic for mouse detection need to be used\n\t_mouseEvent:function(e,hash,name,pair){\n\t\te=e||event;\n\t\tvar trg=e.target||e.srcElement;\n\t\tif (this._settings.subview && this != webix.$$(trg)) return;\n\n\t\t//define some vars, which will be used below\n\t\tvar css = '',\n\t\t\tcss_call = [],\n\t\t\tfound = false,\n\t\t\tid = null, \n\t\t\tres,\n\t\t\ttrg=e.target||e.srcElement;\n\n\t\t//loop through all parents\n\t\twhile (trg && trg.parentNode && trg != this._viewobj.parentNode){\n\t\t\tvar trgCss = webix.html._getClassName(trg);\n\t\t\tif ((css = trgCss)) {\n\t\t\t\tcss = css.toString().split(\" \");\n\n\t\t\t\tfor (var i = css.length - 1; i >= 0; i--)\n\t\t\t\t\tif (hash[css[i]])\n\t\t\t\t\t\tcss_call.push(hash[css[i]]);\n\t\t\t}\n\n\t\t\tif (trg.parentNode.getAttribute && !id){\n\t\t\t\tvar column = trg.parentNode.getAttribute(\"column\") || trg.getAttribute(\"column\");\n\t\t\t\tif (column){ //we need to ignore TD - which is header|footer\n\t\t\t\t\tvar  isBody = trg.parentNode.tagName == \"DIV\";\n\t\t\t\t\t\n\t\t\t\t\t//column already hidden or removed\n\t\t\t\t\tif(!this._columns[column]) return;\n\t\t\t\t\t\n\t\t\t\t\tfound = true;\n\t\t\t\t\tif (isBody){\n\t\t\t\t\t\tvar index = trg.parentNode.getAttribute(\"row\") || trg.getAttribute(\"row\");\n\t\t\t\t\t\tif (!index){\n\t\t\t\t\t\t\tindex = webix.html.index(trg);\n\t\t\t\t\t\t\tif (index >= this._settings.topSplit) \n\t\t\t\t\t\t\t\tindex += this._columns[column]._yr0 - this._settings.topSplit;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis._item_clicked = id = { row:this.data.order[index], column:this._columns[column].id};\n\t\t\t\t\t\tid.toString = this._id_to_string;\n\t\t\t\t\t} else \n\t\t\t\t\t\tthis._item_clicked = id = { column:this._columns[column].id };\n\t\t\t\t\t\t\n\t\t\t\t\t//some custom css handlers was found\n\t\t\t\t\tres = this._mouseEventCall(css_call, e, id, trg);\n\t\t\t\t\tif (res===false) return;\n\t\t\t\t\t\n\t\t\t\t\t//call inner handler\n\t\t\t\t\tif (isBody ){\n\t\t\t\t\t\tif(this.callEvent(\"on\"+name,[id,e,trg])&&pair){\n\t\t\t\t\t\t\tthis.callEvent(\"on\"+pair,[id,e,trg]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (name == \"ItemClick\"){\n\t\t\t\t\t\tvar isHeader = (trg.parentNode.parentNode.getAttribute(\"section\") == \"header\");\n\t\t\t\t\t\tif (isHeader && this.callEvent(\"onHeaderClick\", [id, e, trg]))\n\t\t\t\t\t \t\tthis._on_header_click(id.column);\n\t\t\t\t\t}\n\t\t\t\t\tcss_call = [];\n\t\t\t\t} \n\t\t\t}\n\t\t\t\n\t\t\ttrg=trg.parentNode;\n\t\t}\n\t\tthis._mouseEventCall(css_call, e, id, this.$view);\n\t\treturn found;\t//returns true if item was located and event was triggered\n\t},\n\t\n\n\n\n\tshowOverlay:function(message){\n\t\tif (!this._datatable_overlay){\n\t\t\tvar t = webix.html.create(\"DIV\", { \"class\":\"webix_overlay\" }, \"\");\n\t\t\tthis._body.appendChild(t);\n\t\t\tthis._datatable_overlay = t;\n\t\t}\n\t\tthis._datatable_overlay.innerHTML = message;\n\t},\n\thideOverlay:function(){\n\t\tif (this._datatable_overlay){\n\t\t\twebix.html.remove(this._datatable_overlay);\n\t\t\tthis._datatable_overlay = null;\n\t\t}\n\t},\n\tmapCells: function(startrow, startcol, numrows, numcols, callback, getOnly) {\n\t\tif (startrow === null && this.data.order.length > 0) startrow = this.data.order[0];\n\t\tif (startcol === null) startcol = this.columnId(0);\n\t\tif (numrows === null) numrows = this.data.order.length;\n\t\tif (numcols === null) numcols = this._settings.columns.length;\n\n\t\tif (!this.exists(startrow)) return;\n\t\tstartrow = this.getIndexById(startrow);\n\t\tstartcol = this.getColumnIndex(startcol);\n\t\tif (startcol === null) return;\n\n\t\tfor (var i = 0; i < numrows && (startrow + i) < this.data.order.length; i++) {\n\t\t\tvar row_ind = startrow + i;\n\t\t\tvar row_id = this.data.order[row_ind];\n\t\t\tvar item = this.getItem(row_id);\n\t\t\tfor (var j = 0; j < numcols && (startcol + j) < this._settings.columns.length; j++) {\n\t\t\t\tvar col_ind = startcol + j;\n\t\t\t\tvar col_id = this.columnId(col_ind);\n\t\t\t\tvar result = callback(item[col_id], row_id, col_id, i, j);\n\t\t\t\tif (!getOnly)\n\t\t\t\t\titem[col_id] = result;\n\t\t\t}\n\t\t}\n\t},\n\t_call_onparse: function(driver, data){\n\t\tif (!this._settings.columns && driver.getConfig)\n\t\t\tthis.define(\"columns\", driver.getConfig(data));\n\t},\n\t_autoDetectConfig:function(){\n\t\tvar test = this.getItem(this.getFirstId());\n\t\tvar res = this._settings.columns = [];\n\t\tfor (var key in test)\n\t\t\tif (key != \"id\")\n\t\t\t\tres.push({ id:key, header:key[0].toUpperCase()+key.substr(1), sort:\"string\", editor:\"text\" });\n\t\tif (res.length)\n\t\t\tres[0].fillspace = true;\n\t\tif (typeof this._settings.select == \"undefined\")\n\t\t\tthis.define(\"select\", \"row\");\n\t}\n},webix.AutoTooltip, webix.Group, webix.DataMarks, webix.DataLoader,  webix.MouseEvents, webix.MapCollection, webix.ui.view, webix.EventSystem, webix.Settings);\n\nwebix.ui.datafilter = {\n\ttextWaitDelay:500,\n\t\"summColumn\":{\n\t\tgetValue:function(node){ return node.firstChild.innerHTML; },\n\t\tsetValue: function(){},\n\t\trefresh:function(master, node, value){ \n\t\t\tvar result = 0;\n\t\t\tmaster.mapCells(null, value.columnId, null, 1, function(value){\n\t\t\t\tvalue = value*1;\n\t\t\t\tif (!isNaN(value))\n\t\t\t\t\tresult+=value;\n\t\t\t}, true);\n\n\t\t\tif (value.format)\n\t\t\t\tresult = value.format(result);\n\t\t\tif (value.template)\n\t\t\t\tresult = value.template({value:result});\n\n\t\t\tnode.firstChild.innerHTML = result;\n\t\t},\n\t\ttrackCells:true,\n\t\trender:function(master, config){ \n\t\t\tif (config.template)\n\t\t\t\tconfig.template = webix.template(config.template);\n\t\t\treturn \"\"; \n\t\t}\n\t},\n\t\"masterCheckbox\":{\n\t\tgetValue:function(){},\n\t\tsetValue:function(){},\n\t\tgetHelper:function(node, config){\n\t\t\treturn {\n\t\t\t\tcheck:function(){ config.checked = false; node.onclick(); },\n\t\t\t\tuncheck:function(){ config.checked = true; node.onclick(); },\n\t\t\t\tisChecked:function(){ return config.checked; }\n\t\t\t};\n\t\t},\n\t\trefresh:function(master, node, config){\n\t\t\tnode.onclick = function(){\n\t\t\t\tthis.getElementsByTagName(\"input\")[0].checked = config.checked = !config.checked;\n\t\t\t\tvar column = master.getColumnConfig(config.columnId);\n\t\t\t\tvar checked = config.checked ? column.checkValue : column.uncheckValue;\n\t\t\t\tmaster.data.each(function(obj){\n\t\t\t\t\tif(obj){ //dyn loading\n\t\t\t\t\t\tobj[config.columnId] = checked;\n\t\t\t\t\t\tmaster.callEvent(\"onCheck\", [obj.id, config.columnId, checked]);\n\t\t\t\t\t\tthis.callEvent(\"onStoreUpdated\", [obj.id, obj, \"save\"]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tmaster.refresh();\n\t\t\t};\n\t\t},\n\t\trender:function(master, config){ \n\t\t\treturn \"<input type='checkbox' \"+(config.checked?\"checked='1'\":\"\")+\">\"; \n\t\t}\n\t},\n\t\"textFilter\":{\n\t\tgetInputNode:function(node){ return node.firstChild?node.firstChild.firstChild:{ value: null }; },\n\t\tgetValue:function(node){ return this.getInputNode(node).value;  },\n\t\tsetValue:function(node, value){ this.getInputNode(node).value = value;  },\n\t\trefresh:function(master, node, value){\n\t\t\tnode.component = master._settings.id;\n\t\t\tmaster.registerFilter(node, value, this);\n\t\t\tnode._comp_id = master._settings.id;\n\t\t\tif (value.value && this.getValue(node) != value.value) this.setValue(node, value.value);\n\t\t\tnode.onclick = webix.html.preventEvent;\n\t\t\twebix._event(node, \"keydown\", this._on_key_down);\n\t\t},\n\t\trender:function(master, config){\n\t\t\tif (this.init) this.init(config);\n\t\t  \tconfig.css = \"webix_ss_filter\"; \n\t\t  \treturn \"<input \"+(config.placeholder?('placeholder=\"'+config.placeholder+'\" '):\"\")+\"type='text'>\"; \n\t\t},\n\t\t_on_key_down:function(e, node, value){\n\t\t\tvar id = this._comp_id;\n\n\t\t\t//tabbing through filters must not trigger filtering\n\t\t\t//we can improve this functionality by preserving initial filter value\n\t\t\t//and comparing new one with it\n\t\t\tif ((e.which || e.keyCode) == 9) return;\n\n\t\t\tif (this._filter_timer) window.clearTimeout(this._filter_timer);\n\t\t\tthis._filter_timer=window.setTimeout(function(){\n\t\t\t\tvar ui = webix.$$(id);\n\t\t\t\t//ensure that ui is not destroyed yet\n\t\t\t\tif (ui) ui.filterByAll();\n\t\t\t},webix.ui.datafilter.textWaitDelay);\n\t\t}\n\t},\n\t\"selectFilter\":{\n\t\tgetInputNode:function(node){ return node.firstChild?node.firstChild.firstChild:{ value: null}; },\n\t\tgetValue:function(node){ return this.getInputNode(node).value;  },\n\t\tsetValue:function(node, value){ this.getInputNode(node).value = value;  },\n\t\trefresh:function(master, node, value){\n\t\t\t//value - config from header { contet: }\n\t\t\tvalue.compare = value.compare || function(a,b){ return a == b; };\n\n\t\t\tnode.component = master._settings.id;\n\t\t\tmaster.registerFilter(node, value, this);\n\n\t\t\tvar data;\n\t\t\tvar options = value.options;\n\t\t\tif (options){\n\t\t\t\tif(typeof options ==\"string\"){\n\t\t\t\t\tdata = value.options = [];\n\t\t\t\t\twebix.ajax(options).then(webix.bind(function(data){\n\t\t\t\t\t\tvalue.options = data.json();\n\t\t\t\t\t\tthis.refresh(master, node, value);\n\t\t\t\t\t}, this));\n\t\t\t\t} else\n\t\t\t\t\tdata = options;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tdata = master.collectValues(value.columnId);\n\t\t\t\tdata.unshift({ id:\"\", value:\"\" });\n\t\t\t}\n\n\t\t\tvar optview = webix.$$(options);\n\t\t\tif(optview && optview.data && optview.data.getRange){\n\t\t\t\tdata = optview.data.getRange();\n\t\t\t}\n\t\t\t//slow in IE\n\t\t\t//http://jsperf.com/select-options-vs-innerhtml\n\n\t\t\tvar select = document.createElement(\"select\");\n\t\t\tfor (var i = 0; i < data.length; i++){\n\t\t\t\tvar option = document.createElement(\"option\");\n\t\t\t\toption.value = data[i].id;\n\t\t\t\toption.text = data[i].value;\n\t\t\t\tselect.add(option);\n\t\t\t}\n\n\t\t\tnode.firstChild.innerHTML = \"\";\n\t\t\tnode.firstChild.appendChild(select);\n\n\t\t\tif (value.value) this.setValue(node, value.value);\n\t\t\tnode.onclick = webix.html.preventEvent;\n\n\t\t\tselect._comp_id = master._settings.id;\n\t\t\twebix._event(select, \"change\", this._on_change);\n\t\t},\n\t\trender:function(master, config){  \n\t\t\tif (this.init) this.init(config);\n\t\t\tconfig.css = \"webix_ss_filter\"; return \"\"; },\n\t\t_on_change:function(e, node, value){ \n\t\t\twebix.$$(this._comp_id).filterByAll();\n\t\t}\n\t}\n};\n\nwebix.ui.datafilter.serverFilter = webix.extend({\n\t$server: true,\n\t_on_key_down:function(e, node, value){\n\t\tvar config, name,\n\t\t\tid = this._comp_id,\n\t\t\tcode = (e.which || e.keyCode);\n\n\t\tnode = e.target || e.srcElement;\n\t\t//ignore tab and navigation keys\n\t\tif (code == 9 || ( code >= 33 &&  code <= 40)) return;\n\t\tif (this._filter_timer) window.clearTimeout(this._filter_timer);\n\t\tthis._filter_timer=window.setTimeout(function(){\n\t\t\twebix.$$(id).filterByAll();\n\t\t},webix.ui.datafilter.textWaitDelay);\n\t}\n}, webix.ui.datafilter.textFilter);\n\nwebix.ui.datafilter.serverSelectFilter = webix.extend({\n\t$server: true,\n\t_on_change:function(e, node, value){\n\t\tvar id = this._comp_id;\n\t\twebix.$$(id).filterByAll();\n\t}\n}, webix.ui.datafilter.selectFilter);\n\nwebix.ui.datafilter.numberFilter = webix.extend({\n\tinit:function(config){\n\t\tconfig.prepare = function(value, filter){\n\t\t\tvar equality = (value.indexOf(\"=\") != -1)?1:0;\n\t\t\tvar intvalue = this.format(value);\n\t\t\tif (intvalue === \"\") return \"\";\n\n\t\t\tif (value.indexOf(\">\") != -1) \n\t\t\t\tconfig.compare = this._greater;\n\t\t\telse if (value.indexOf(\"<\") != -1){\n\t\t\t\tconfig.compare = this._lesser;\n\t\t\t\tequality *= -1;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconfig.compare = this._equal;\n\t\t\t\tequality = 0;\n\t\t\t}\n\n\t\t\treturn intvalue - equality;\n\t\t};\n\t},\n\tformat:function(value){\n\t\treturn value.replace(/[^\\-\\.0-9]/g,\"\");\n\t},\n\t_greater:function(a,b){ return a*1>b; },\n\t_lesser:function(a,b){ return a!==\"\" && a*1<b; },\n\t_equal:function(a,b){ return a*1==b; }\t\n}, webix.ui.datafilter.textFilter);\n\nwebix.ui.datafilter.dateFilter = webix.extend({\n\tformat:function(value){\n\t\tif (value === \"\") return \"\";\n\t\tvar date = new Date();\n\n\t\tif (value.indexOf(\"today\") != -1){\n\t\t\tdate = webix.Date.dayStart(date);\n\t\t} else if (value.indexOf(\"now\") == -1){\n\t\t\tvar parts = value.match(/[0-9]+/g);\n\t\t\tif (!parts||!parts.length) return \"\";\n\t\t\tif (parts.length < 3){\n\t\t\t\tparts.reverse();\n\t\t\t\tdate = new Date(parts[0], (parts[1]||1)-1, 1);\n\t\t\t} else\n\t\t\t\tdate = webix.i18n.dateFormatDate(value.replace(/^[>< =]+/,\"\"));\n\t\t}\n\t\treturn date.valueOf();\n\t}\n}, webix.ui.datafilter.numberFilter);\n\nwebix.extend(webix.ui.datatable,{\n\tfilterByAll:function(){\n\t\t//we need to use dynamic function creating\n\t\tvar server = false;\n\t\tthis.data.silent(function(){\n\t\t\tthis.filter();\n\t\t\tvar first = false;\n\t\t\tfor (var key in this._filter_elements){\n\t\t\t\twebix.assert(key, \"empty column id for column with filtering\");\n\t\t\t\tif(!this.isColumnVisible(key))\n\t\t\t\t\tcontinue;\n\t\t\t\tvar record = this._filter_elements[key];\n\t\t\t\tvar originvalue = record[2].getValue(record[0]);\n\n\t\t\t\t//saving last filter value, for usage in getState\n\t\t\t\tvar inputvalue = originvalue;\n\t\t\t\tif (record[1].prepare)\n\t\t\t\t\tinputvalue = record[1].prepare.call(record[2], inputvalue, record[1], this);\n\n\t\t\t\t//preserve original value\n\t\t\t\trecord[1].value = originvalue;\n\t\t\t\tvar compare = record[1].compare;\n\n\t\t\t\tif (!this.callEvent(\"onBeforeFilter\",[key, inputvalue, record[1]])) continue;\n\t\t\t\tif(record[2].$server || server){ //if one of filters is server side, do not run any client side filters\n\t\t\t\t\tserver = true;\n\t\t\t\t} else {\n\t\t\t\t\tif (inputvalue === \"\") continue;\n\n\t\t\t\t\tif (compare){\n\t\t\t\t\t\tcompare = this._multi_compare(key, compare);\n\t\t\t\t\t\tthis.filter(webix.bind(function(obj, value){\n\t\t\t\t\t\t\tif (!obj) return false;\n\t\t\t\t\t\t\treturn compare(obj[key], value, obj);\n\t\t\t\t\t\t},this), inputvalue, first);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tthis.filter(key, inputvalue, first);\n\n\t\t\t\t\tfirst = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (server)\n\t\t\t\tthis._runServerFilter();\n\n\t\t}, this);\n\n\t\tif (!server){\n\t\t\tthis.refresh();\n\t\t\tthis.callEvent(\"onAfterFilter\",[]);\n\t\t}\n\t},\n\t_multi_compare: function(key, compare){\n\t\tvar column = this.getColumnConfig(key);\n\t\tvar separator = column ? column.optionslist : null;\n\n\t\t//default mode\n\t\tif (!separator) \n\t\t\treturn compare;\n\n\t\tif(typeof separator != \"string\")\n\t\t\tseparator = \",\";\n\n\t\treturn function(itemValue, inputValue, obj){\n\t\t\tif(!itemValue)\n\t\t\t\treturn true;\n\t\t\tvar ids = itemValue.split(separator);\n\t\t\tfor (var i = 0; i < ids.length; i++) {\n\t\t\t\tif (compare(ids[i], inputValue, obj))\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t};\n\t},\n\tfilterMode_setter:function(mode){\n\t\treturn webix.extend(this.data._filterMode, mode, true);\n\t},\n\tgetFilter:function(columnId){\n\t\tvar filter = this._filter_elements[columnId];\n\t\twebix.assert(filter, \"Filter doesn't exists for column in question\");\n\n\t\tif (filter && filter[2].getInputNode)\n\t\t\treturn filter[2].getInputNode(filter[0]);\n\t\treturn null;\n\t},\n\tregisterFilter:function(node, config, obj){\n\t\tthis._filter_elements[config.columnId] = [node, config, obj];\n\t},\n\tcollectValues:function(id){\n\t\tvar values = [];\n\t\tvar checks = { \"\" : true };\n\n\t\tvar obj = this.getColumnConfig(id);\n\t\tvar options = obj.options||obj.collection;\n\n\t\tif (options){\n\t\t\tif (typeof options == \"object\" && !options.loadNext){\n\t\t\t\t//raw object\n\t\t\t\tif (webix.isArray(options))\n\t\t\t\t\tfor (var i=0; i<options.length; i++) \n\t\t\t\t\t\tvalues.push({ id:options[i], value:options[i] });\n\t\t\t\telse\n\t\t\t\t\tfor (var key in options) \n\t\t\t\t\t\tvalues.push({ id:key, value:options[key] });\n\t\t\t\treturn values;\n\t\t\t} else {\n\t\t\t\t//view\n\t\t\t\tif (typeof options === \"string\")\n\t\t\t\t\toptions = webix.$$(options);\n\t\t\t\tif (options.getBody)\n\t\t\t\t\toptions = options.getBody();\n\n\t\t\t\tthis._collectValues.call(options, \"id\", \"value\", values, checks);\n\t\t\t}\n\t\t} else\n\t\t\tthis._collectValues(obj.id, obj.id, values, checks);\n\n\t\tvar obj  = { values: values };\n\t\tthis.callEvent(\"onCollectValues\", [id, obj]);\n\t\treturn obj.values;\n\t},\n\t_collectValues:function(id, value,  values, checks){\n\t\tthis.data.each(function(obj){\n\t\t\tvar test = obj ? obj[id] : \"\";\n\t\t\tif (test !== webix.undefined && !checks[test]){\n\t\t\t\tchecks[test] = true;\n\t\t\t\tvalues.push({ id:obj[id], value:obj[value] });\n\t\t\t}\n\t\t}, this, true);\n\n\t\tif (values.length){\n\t\t\tvar type = typeof values[0].value === \"string\" ? \"string\" : \"raw\";\n\t\t\tvalues.sort( this.data.sorting.create({ as:type, by:\"value\", dir:\"asc\" }) );\n\t\t}\n\t},\n\t_runServerFilter: function(name){\n\t\tthis.loadNext(0,0,{\n\t\t\tbefore:function(){\n\t\t\t\tif (this.editStop) this.editStop();\n\t\t\t\tthis.clearAll(true);\n\t\t\t},\n\t\t\tsuccess:function(){\n\t\t\t\tthis.callEvent(\"onAfterFilter\",[]);\n\t\t\t}\n\t\t},0,1);\n\t}\n});\n\n\nwebix.extend(webix.ui.datatable, {\n\thover_setter:function(value){\n\t\tif (value && !this._hover_initialized){\n\t\t\tthis._enable_mouse_move();\n\t\t\tthis.config.experimental = true;\n\n\t\t\tthis.attachEvent(\"onMouseMoving\", function(e){\n\t\t\t\t\n\t\t\t\tvar row = this.locate(arguments[0]);\n\t\t\t\trow = row ? row.row : null;\n\n\t\t\t\tif (this._last_hover != row){\n\t\t\t\t\tif (this._last_hover)\n\t\t\t\t\t\tthis.removeRowCss(this._last_hover, this._settings.hover);\n\t\t\t\t\t\n\t\t\t\t\tthis._delayed_hover_set();\n\t\t\t\t\tthis._last_hover = row;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.attachEvent(\"onMouseOut\", function(){\n\t\t\t\tif (this._last_hover){\n\t\t\t\t\tthis.removeRowCss(this._last_hover, this._settings.hover);\n\t\t\t\t\tthis._last_hover = null;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis._hover_initialized = 1;\n\t\t}\n\t\treturn value;\n\t},\n\t_delayed_hover_set:function(){\n\t\twebix.delay(function(){ \n\t\t\tif (this._last_hover)\n\t\t\t\tthis.addRowCss( this._last_hover, this._settings.hover );\n\t\t}, this, [],  5);\n\t},\n\tselect_setter:function(value){\n\t\tif (!this.select && value){\n\t\t\twebix.extend(this, this._selections._commonselect, true);\n\t\t\tif (value === true)\n\t\t\t\tvalue = \"row\";\n\t\t\telse if (value == \"multiselect\"){\n\t\t\t\tvalue = \"row\";\n\t\t\t\tthis._settings.multiselect = true;\n\t\t\t}\n\t\t\twebix.assert(this._selections[value], \"Unknown selection mode: \"+value);\n\t\t\twebix.extend(this, this._selections[value], true);\n\t\t}\n\t\treturn value;\n\t},\n\tgetSelectedId:function(mode){\n\t\treturn  mode?[]:\"\"; //dummy placeholder\n\t},\n\tgetSelectedItem:function(mode){\n\t\treturn webix.SelectionModel.getSelectedItem.call(this, mode);\n\t},\n\t_selections:{\n\t\t//shared methods for all selection models\n\t\t_commonselect:{\n\t\t\t_select_css:' webix_cell_select',\n\t\t\t$init:function(){\n\t\t\t\tthis._reinit_selection();\n\n\t\t\t\tthis.on_click.webix_cell = webix.bind(this._click_before_select, this);\n\n\t\t\t\t//temporary stab, actual handlers need to be created\n\t\t\t\tthis._data_cleared = this._data_filtered = function(){\n\t\t\t\t\tthis.unselect();\n\t\t\t\t};\n\n\t\t\t\tthis.data.attachEvent(\"onStoreUpdated\",webix.bind(this._data_updated,this));\n\t\t\t\tthis.data.attachEvent(\"onSyncApply\", webix.bind(this._data_synced, this));\n\t\t\t\tthis.data.attachEvent(\"onClearAll\", webix.bind(this._data_cleared,this));\n\t\t\t\tthis.data.attachEvent(\"onAfterFilter\", webix.bind(this._data_filtered,this));\n\t\t\t\tthis.data.attachEvent(\"onIdChange\", webix.bind(this._id_changed,this));\n\n\t\t\t\tthis.$ready.push(webix.SelectionModel._set_noselect);\n\t\t\t},\n\t\t\t_id_changed:function(oldid, newid){\n\t\t\t\tfor (var i=0; i<this._selected_rows.length; i++)\n\t\t\t\t\tif (this._selected_rows[i] == oldid)\n\t\t\t\t\t\tthis._selected_rows[i] = newid;\n\n\t\t\t\tfor (var i=0; i<this._selected_areas.length; i++){\n\t\t\t\t\tvar item = this._selected_areas[i];\n\t\t\t\t\tif (item.row == oldid){\n\t\t\t\t\t\toldid = this._select_key(item);\n\t\t\t\t\t\titem.row = newid;\n\t\t\t\t\t\tnewid = this._select_key(item);\n\t\t\t\t\t\titem.id = newid;\n\n\t\t\t\t\t\tdelete this._selected_pull[oldid];\n\t\t\t\t\t\tthis._selected_pull[newid] = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t_data_updated:function(id, obj, type){\n\t\t\t\tif (type == \"delete\") \n\t\t\t\t\tthis.unselect(id);\n\t\t\t},\n\t\t\t_data_synced:function(){\n\t\t\t\tfor (var i = this._selected_areas.length-1; i >=0 ; i--){\n\t\t\t\t\tif (!this.exists(this._selected_areas[i].row))\n\t\t\t\t\t\tthis._selected_areas.splice(i,1);\n\t\t\t\t}\n\t\t\t},\n\t\t\t_reinit_selection:function(){\n\t\t\t\t//list of selected areas\n\t\t\t\tthis._selected_areas=[];\n\t\t\t\t//key-value hash of selected areas, for fast search\n\t\t\t\tthis._selected_pull={};\n\t\t\t\t//used to track selected cell objects\n\t\t\t\tthis._selected_rows = [];\n\t\t\t},\n\t\t\tisSelected:function(id, column){\n\t\t\t\tvar key;\n\t\t\t\tif (!webix.isUndefined(column))\n\t\t\t\t\tkey = this._select_key({ row:id, column: column});\n\t\t\t\telse \n\t\t\t\t\tkey = typeof id === \"object\"? this._select_key(id) : id;\n\n\t\t\t\treturn this._selected_pull[key];\n\t\t\t},\n\t\t\tgetSelectedId:function(asArray, plain){\n\t\t\t\tvar result;\n\n\t\t\t\t//if multiple selections was created - return array\n\t\t\t\t//in case of single selection, return value or array, when asArray parameter provided\n\t\t\t\tif (this._selected_areas.length > 1 || asArray){\n\t\t\t\t\tresult = [].concat(this._selected_areas);\n\t\t\t\t\tif (plain)\n\t\t\t\t\t\tfor (var i = 0; i < result.length; i++)\n\t\t\t\t\t\t\tresult[i]=result[i].id;\n\t\t\t\t} else {\n\t\t\t\t\tresult = this._selected_areas[0];\n\t\t\t\t\tif (plain && result)\n\t\t\t\t\t\treturn result.id;\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t},\n\t\t\t_id_to_string:function(){\n\t\t\t\treturn this.row;\n\t\t\t},\n\t\t\t_select:function(data, preserve){\n\t\t\t\tvar key = this._select_key(data);\n\t\t\t\t//don't allow selection on unnamed columns\n\t\t\t\tif (key === null) return;\n\n\t\t\t\tif (preserve === -1)\n\t\t\t\t\treturn this._unselect(data);\n\n\t\t\t\tdata.id = key;\n\t\t\t\tdata.toString = this._id_to_string;\n\n\t\t\t\tif (!this.callEvent(\"onBeforeSelect\",[data, preserve])) return false;\n\n\t\t\t\t//ignore area, if it was already selected and\n\t\t\t\t// - we are preserving existing selection\n\t\t\t\t// - this is the only selected area\n\t\t\t\t// otherwise we need to clear other selected areas\n\t\t\t\tif (this._selected_pull[key] && (preserve || this._selected_areas.length == 1)) return;\n\n\t\t\t\tif (!preserve)\n\t\t\t\t\tthis._clear_selection();\n\n\t\t\t\tthis._selected_areas.push(data);\n\t\t\t\tthis._selected_pull[key] = true;\n\n\t\t\t\tthis.callEvent(\"onAfterSelect\",[data, preserve]);\n\n\t\t\t\t\n\t\t\t\tthis._finalize_select(this._post_select(data));\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\t_clear_selection:function(){\n\t\t\t\tif (!this._selected_areas.length) return false;\n\n\t\t\t\tfor (var i=0; i<this._selected_areas.length; i++){\n\t\t\t\t\tif (!this.callEvent(\"onBeforeUnSelect\", [this._selected_areas[i]])) return false;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfor (var i=0; i<this._selected_rows.length; i++)\n\t\t\t\t\tthis.data.removeMark(this._selected_rows[i], \"webix_selected\");\n\t\t\t\t\n\t\t\t\tvar cols = this._settings.columns;\n\t\t\t\tif (cols)\n\t\t\t\t\tfor (var i = 0; i < cols.length; i++) {\n\t\t\t\t\t\tcols[i].$selected = null;\n\t\t\t\t\t}\n\n\t\t\t\tvar data = this._selected_areas;\n\t\t\t\tthis._reinit_selection();\n\t\t\t\tfor (var i=0; i<data.length; i++){\n\t\t\t\t\tthis.callEvent(\"onAfterUnSelect\", [data[i]]);\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tunselectAll:function(){\n\t\t\t\tthis.clearSelection();\n\t\t\t},\n\t\t\tselectAll:function(){\n\t\t\t\tthis.selectRange();\n\t\t\t},\n\t\t\tclearSelection:function(){\n\t\t\t\tif (this._clear_selection()){\n\t\t\t\t\tthis.callEvent(\"onSelectChange\",[]);\n\t\t\t\t\tthis.render();\n\t\t\t\t}\n\t\t\t},\n\t\t\t_unselect:function(data){\n\t\t\t\tvar key = this._select_key(data);\n\t\t\t\tif (!key && this._selected_areas.length){\n\t\t\t\t\tthis.clearSelection();\n\t\t\t\t\tthis.callEvent(\"onSelectChange\", []);\n\t\t\t\t}\n\n\t\t\t\t//ignore area, if it was already selected\n\t\t\t\tif (!this._selected_pull[key]) return;\n\n\t\t\t\tif (!this.callEvent(\"onBeforeUnSelect\",[data])) return false;\n\n\t\t\t\tfor (var i = 0; i < this._selected_areas.length; i++){\n\t\t\t\t\tif (this._selected_areas[i].id == key){\n\t\t\t\t\t\tthis._selected_areas.splice(i,1);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tdelete this._selected_pull[key];\n\n\t\t\t\tthis.callEvent(\"onAfterUnSelect\",[data]);\n\t\t\t\tthis._finalize_select(0, this._post_unselect(data));\n\t\t\t},\n\t\t\t_add_item_select:function(id){\n\t\t\t\tvar item = this.getItem(id);\n\t\t\t\treturn this.data.addMark(item.id, \"webix_selected\", 0, { $count : 0 }, true);\n\n\t\t\t},\n\t\t\t_finalize_select:function(id){\n\t\t\t\tif (id)\n\t\t\t\t\tthis._selected_rows.push(id);\n\t\t\t\tif (!this._silent_selection){\n\t\t\t\t\tthis.render();\n\t\t\t\t\tthis.callEvent(\"onSelectChange\",[]);\t\n\t\t\t\t}\n\t\t\t},\n\t\t\t_click_before_select:function(e, id){\n\t\t\t\tvar preserve = e.ctrlKey || e.metaKey || (this._settings.multiselect == \"touch\");\n\t\t\t\tvar range = e.shiftKey;\n\n\t\t\t\tif (!this._settings.multiselect && this._settings.select != \"multiselect\")\n\t\t\t\t\tpreserve = range = false;\n\n\t\t\t\tif (range && this._selected_areas.length){\n\t\t\t\t\tvar last = this._selected_areas[this._selected_areas.length-1];\n\t\t\t\t\tthis._selectRange(id, last);\n\t\t\t\t} else {\n\t\t\t\t\tif (preserve && this._selected_pull[this._select_key(id)])\n\t\t\t\t\t\tthis._unselect(id);\n\t\t\t\t\telse\n\t\t\t\t\t\tthis._select({ row: id.row, column:id.column }, preserve);\n\t\t\t\t}\n\t\t\t},\n\t\t\t_mapSelection:function(callback, column, row){\n\t\t\t\tvar cols = this._settings.columns;\n\t\t\t\t//selected columns only\n\t\t\t\tif (column){\n\t\t\t\t\tvar temp = [];\n\t\t\t\t\tfor (var i=0; i<cols.length; i++)\n\t\t\t\t\t\tif (cols[i].$selected)\n\t\t\t\t\t\t\ttemp.push(cols[i]);\n\t\t\t\t\tcols = temp;\n\t\t\t\t}\n\n\t\t\t\tvar rows = this.data.order;\n\t\t\t\tvar row_ind = 0;\n\n\t\t\t\tfor (var i=0; i<rows.length; i++){\n\t\t\t\t\tvar item = this.getItem(rows[i]);\n\t\t\t\t\tif (!item) continue; //dyn loading, row is not available\n\t\t\t\t\tvar selection = this.data.getMark(item.id, \"webix_selected\");\n\t\t\t\t\tif (selection || column){\n\t\t\t\t\t\tvar col_ind = 0;\n\t\t\t\t\t\tfor (var j = 0; j < cols.length; j++){\n\t\t\t\t\t\t\tvar id = cols[j].id;\n\t\t\t\t\t\t\tif (row || column || selection[id]){\n\t\t\t\t\t\t\t\tif (callback)\n\t\t\t\t\t\t\t\t\titem[id] = callback(item[id], rows[i], id, row_ind, col_ind);\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\treturn {row:rows[i], column:id};\n\t\t\t\t\t\t\t\tcol_ind++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//use separate row counter, to count only selected rows\n\t\t\t\t\t\trow_ind++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, \n\n\t\trow : {\n\t\t\t_select_css:' webix_row_select',\n\t\t\t_select_key:function(data){ return data.row; },\n\t\t\tselect:function(row_id, preserve){\n\t\t\t\t//when we are using id from mouse events\n\t\t\t\tif (row_id) row_id = row_id.toString();\n\n\t\t\t\twebix.assert(this.data.exists(row_id), \"Incorrect id in select command: \"+row_id);\n\t\t\t\tthis._select({ row:row_id }, preserve);\n\t\t\t},\n\t\t\t_post_select:function(data){\n\t\t\t\tthis._add_item_select(data.row).$row = true;\n\t\t\t\treturn data.row;\n\t\t\t},\n\t\t\tunselect:function(row_id){\n\t\t\t\tthis._unselect({row : row_id});\n\t\t\t},\n\t\t\t_post_unselect:function(data){\n\t\t\t\tthis.data.removeMark(data.row, \"webix_selected\", 0, 1);\n\t\t\t\treturn data.row;\n\t\t\t},\n\t\t\tmapSelection:function(callback){\n\t\t\t\treturn this._mapSelection(callback, false, true);\n\t\t\t},\n\t\t\t_selectRange:function(a,b){\n\t\t\t\treturn this.selectRange(a.row, b.row);\n\t\t\t},\n\t\t\tselectRange:function(row_id, end_row_id, preserve){\n\t\t\t\tif (webix.isUndefined(preserve)) preserve = true;\n\n\t\t\t\tvar row_start_ind = row_id ? this.getIndexById(row_id) : 0;\n\t\t\t\tvar row_end_ind = end_row_id ? this.getIndexById(end_row_id) : this.data.order.length-1;\n\n\t\t\t\tif (row_start_ind>row_end_ind){\n\t\t\t\t\tvar temp = row_start_ind;\n\t\t\t\t\trow_start_ind = row_end_ind;\n\t\t\t\t\trow_end_ind = temp;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis._silent_selection = true;\n\t\t\t\tfor (var i=row_start_ind; i<=row_end_ind; i++){\n\t\t\t\t\tvar id = this.getIdByIndex(i);\n\t\t\t\t\tif (!id){\n\t\t\t\t\t\tif (row_id)\n\t\t\t\t\t\t\tthis.select(row_id);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tthis.select(id, preserve);\n\t\t\t\t}\n\n\t\t\t\tthis._silent_selection = false;\n\t\t\t\tthis._finalize_select();\n\t\t\t}\n\t\t},\n\n\t\tcell:{\n\t\t\t_select_key:function(data){\n\t\t\t\tif (!data.column) return null;\n\t\t\t \treturn data.row+\"_\"+data.column; \n\t\t\t},\n\t\t\tselect:function(row_id, column_id, preserve){\n\t\t\t\twebix.assert(this.data.exists(row_id), \"Incorrect id in select command: \"+row_id);\n\t\t\t\tthis._select({row:row_id, column:column_id}, preserve);\n\t\t\t},\n\t\t\t_post_select:function(data){\n\t\t\t\t\tvar sel = this._add_item_select(data.row);\n\t\t\t\t\tsel.$count++;\n\t\t\t\t\tsel[data.column]=true;\n\t\t\t\t\treturn data.row;\n\t\t\t},\n\t\t\tunselect:function(row_id, column_id){\n\t\t\t\tthis._unselect({row:row_id, column:column_id});\n\t\t\t},\n\t\t\t_post_unselect:function(data){\n\t\t\t\tvar sel = this._add_item_select(data.row);\n\t\t\t\t\tsel.$count-- ;\n\t\t\t\t\tsel[data.column] = false;\n\t\t\t\t\tif (sel.$count<=0)\n\t\t\t\t\t\tthis.data.removeMark(data.row,\"webix_selected\");\n\t\t\t\t\treturn data.row;\n\t\t\t},\n\t\t\tmapSelection:function(callback){\n\t\t\t\treturn this._mapSelection(callback, false, false);\n\t\t\t},\n\t\t\t_selectRange:function(a,b){\n\t\t\t\treturn this.selectRange(a.row, a.column, b.row, b.column);\n\t\t\t},\n\n\t\t\tselectRange:function(row_id, column_id, end_row_id, end_column_id, preserve){\n\t\t\t\tif (webix.isUndefined(preserve)) preserve = true;\n\n\t\t\t\tvar row_start_ind = row_id ? this.getIndexById(row_id) : 0;\n\t\t\t\tvar row_end_ind = end_row_id ? this.getIndexById(end_row_id) : this.data.order.length-1;\n\n\t\t\t\tvar col_start_ind = column_id ? this.getColumnIndex(column_id) : 0;\n\t\t\t\tvar col_end_ind = end_column_id ? this.getColumnIndex(end_column_id) : this._columns.length-1;\n\n\t\t\t\tif (row_start_ind>row_end_ind){\n\t\t\t\t\tvar temp = row_start_ind;\n\t\t\t\t\trow_start_ind = row_end_ind;\n\t\t\t\t\trow_end_ind = temp;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (col_start_ind>col_end_ind){\n\t\t\t\t\tvar temp = col_start_ind;\n\t\t\t\t\tcol_start_ind = col_end_ind;\n\t\t\t\t\tcol_end_ind = temp;\n\t\t\t\t}\n\n\t\t\t\tthis._silent_selection = true;\n\t\t\t\tfor (var i=row_start_ind; i<=row_end_ind; i++)\n\t\t\t\t\tfor (var j=col_start_ind; j<=col_end_ind; j++)\n\t\t\t\t\t\tthis.select(this.getIdByIndex(i), this.columnId(j), preserve);\n\t\t\t\tthis._silent_selection = false;\n\t\t\t\tthis._finalize_select();\n\t\t\t}\n\t\t},\n\n\t\tcolumn:{\n\t\t\t_select_css:' webix_column_select',\n\t\t\t_select_key:function(data){ return data.column; },\n\t\t\t_id_to_string:function(){\n\t\t\t\treturn this.column;\n\t\t\t},\n\t\t\t//returns box-like area, with ordered selection cells\n\t\t\tselect:function(column_id, preserve){\n\t\t\t\tthis._select({ column:column_id }, preserve);\n\t\t\t},\n\t\t\t_post_select:function(data){\n\t\t\t\tthis._settings.columns[this.getColumnIndex(data.column)].$selected = true;\n\t\t\t\tif (!this._silent_selection)\n\t\t\t\t\tthis._render_header_and_footer();\n\t\t\t},\n\t\t\tunselect:function(column_id){\n\t\t\t\tthis._unselect({column : column_id});\n\t\t\t},\n\t\t\t_post_unselect:function(data){\n\t\t\t\tthis._settings.columns[this.getColumnIndex(data.column)].$selected = null;\n\t\t\t\tthis._render_header_and_footer();\n\t\t\t},\n\t\t\tmapSelection:function(callback){\n\t\t\t\treturn this._mapSelection(callback, true, false);\n\t\t\t},\n\t\t\t_selectRange:function(a,b){\n\t\t\t\treturn this.selectRange(a.column, b.column);\n\t\t\t},\n\t\t\tselectRange:function(column_id, end_column_id, preserve){\n\t\t\t\tif (webix.isUndefined(preserve)) preserve = true;\n\n\t\t\t\tvar column_start_ind = column_id ? this.getColumnIndex(column_id) : 0;\n\t\t\t\tvar column_end_ind = end_column_id ? this.getColumnIndex(end_column_id) : this._columns.length-1;\n\n\t\t\t\tif (column_start_ind>column_end_ind){\n\t\t\t\t\tvar temp = column_start_ind;\n\t\t\t\t\tcolumn_start_ind = column_end_ind;\n\t\t\t\t\tcolumn_end_ind = temp;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis._silent_selection = true;\n\t\t\t\tfor (var i=column_start_ind; i<=column_end_ind; i++)\n\t\t\t\t\tthis.select(this.columnId(i), preserve);\n\n\t\t\t\tthis._silent_selection = false;\n\n\t\t\t\tthis._render_header_and_footer();\n\t\t\t\tthis._finalize_select();\n\t\t\t},\n\t\t\t_data_synced:function(){\n\t\t\t\t//do nothing, as columns are not changed\n\t\t\t}\n\t\t},\n\t\tarea: {\n\t\t\t_select_key:function(data){\n\t\t\t\treturn data.row+\"_\"+data.column;\n\t\t\t},\n\t\t\tgetSelectedId: function(asArray){\n\t\t\t\tvar area = this.getSelectArea();\n\t\t\t\tvar result = [];\n\t\t\t\tif(area){\n\t\t\t\t\tif(asArray && ( area.start.row != area.end.row || area.start.column != area.end.column )){\n\t\t\t\t\t\tvar row_start_ind = this.getIndexById(area.start.row);\n\t\t\t\t\t\tvar row_end_ind = this.getIndexById(area.end.row);\n\t\t\t\t\t\t//filtering in process\n\t\t\t\t\t\tif(row_start_ind == -1 || row_end_ind == -1)\n\t\t\t\t\t\t\treturn result;\n\n\t\t\t\t\t\tvar col_start_ind = this.getColumnIndex(area.start.column);\n\t\t\t\t\t\tvar col_end_ind = this.getColumnIndex(area.end.column);\n\n\t\t\t\t\t\tfor (var i=row_start_ind; i<=row_end_ind; i++)\n\t\t\t\t\t\t\tfor (var j=col_start_ind; j<=col_end_ind; j++)\n\t\t\t\t\t\t\t\tresult.push({row:this.getIdByIndex(i), column:this.columnId(j)});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tresult.push(area.end);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn asArray?result:result[0];\n\t\t\t},\n\t\t\tunselect:function(row_id){\n\t\t\t\tthis._unselect();\n\t\t\t},\n\t\t\t_unselect: function() {\n\t\t\t\tthis.removeSelectArea();\n\t\t\t\tthis.callEvent(\"onSelectChange\", []);\n\t\t\t},\n\t\t\tmapSelection:function(callback){\n\t\t\t\tvar select  = this.getSelectArea();\n\t\t\t\tif (select){\n\t\t\t\t\tvar sind = this.getColumnIndex(select.start.column);\n\t\t\t\t\tvar eind = this.getColumnIndex(select.end.column);\n\t\t\t\t\tvar srow = this.getIndexById(select.start.row);\n\t\t\t\t\tvar erow = this.getIndexById(select.end.row);\n\n\t\t\t\t\tfor (var i = srow; i <= erow; i++) {\n\t\t\t\t\t\tvar rid = this.data.order[i];\n\t\t\t\t\t\tvar item = this.getItem(rid);\n\t\t\t\t\t\tfor (var j = sind; j <= eind; j++) {\n\t\t\t\t\t\t\tvar cid = this._columns[j].id;\n\t\t\t\t\t\t\tif (callback)\n\t\t\t\t\t\t\t\tcallback((item[cid] || \"\"), rid, cid, i-srow, j-sind);\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\treturn { row:rid, column:cid };\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tselect:function(row_id, column_id, preserve){\n\t\t\t\twebix.assert(this.data.exists(row_id), \"Incorrect id in select command: \"+row_id);\n\t\t\t\tthis._select({row:row_id, column:column_id}, preserve);\n\t\t\t},\n\t\t\t_selectRange:function(id,last){\n\t\t\t\tthis._extendAreaRange(id, last);\n\t\t\t},\n\t\t\t_select: function(cell, preserve){\n\t\t\t\t//ctrl-selection is not supported yet, so ignoring the preserve flag\n\t\t\t\tthis.addSelectArea(cell,cell,false);\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\t_data_synced:function(){\n\t\t\t\tif(this._selected_areas.length)\n\t\t\t\t\tthis.refreshSelectArea();\n\t\t\t}\n\t\t}\n\t}\n});\n\n\n\n\n\n\nwebix.extend(webix.ui.datatable, {\n\tblockselect_setter:function(value){\n\t\tif (value && this._block_sel_flag){\n\t\t\twebix._event(this._viewobj, webix.env.mouse.move, this._bs_move, {bind:this});\n\t\t\twebix._event(this._viewobj, webix.env.mouse.down, this._bs_down, {bind:this});\n\t\t\twebix.event(document.body, webix.env.mouse.up, this._bs_up, {bind:this});\n\t\t\tthis._block_sel_flag = this._bs_ready = this._bs_progress = false;\n\t\t\tthis.attachEvent(\"onAfterScroll\", function(){\n\t\t\t\tthis._update_block_selection();\n\t\t\t});\n\t\t\t// auto scroll\n\t\t\twebix.extend(this, webix.AutoScroll, true);\n\t\t\tthis.attachEvent(\"onBeforeAutoScroll\",function(){\n\t\t\t\treturn this._bs_progress;\n\t\t\t});\n\t\t}\n\t\treturn value;\n\t},\n\t_block_sel_flag:true,\n\t_childOf:function(e, tag){\n\t\tvar src = e.target||e.srcElement;\n\t\twhile (src){\n\t\t\tif (src.getAttribute && src.getAttribute(\"webixignore\")) return false;\n\t\t\tif (src == tag)\n\t\t\t\treturn true;\n\t\t\tsrc = src.parentNode;\n\t\t}\n\t\treturn false;\n\t},\n\t_bs_down:function(e){\n\t\t// do not listen to mousedown of subview on master\n\t\tif (this._settings.subview && this != webix.$$(e.target||e.srcElement)) return;\n\t\tif (this._childOf(e, this._body)){\n\t\t\t//disable block selection when we have an active editor\n\t\t\tif (e.target && e.target.tagName == \"INPUT\" || this._rs_process) return;\n\n\t\t\twebix.html.addCss(document.body,\"webix_noselect\");\n\t\t\tthis._bs_position = webix.html.offset(this._body);\n\t\t\tvar pos = webix.html.pos(e);\n\t\t\tthis._bs_ready = [pos.x - this._bs_position.x, pos.y - this._bs_position.y];\n\t\t}\n\t},\n\t_bs_up:function(e){\n\t\tif (this._block_panel){\n\t\t\tthis._bs_select(\"select\", true, e);\n\t\t\tthis._block_panel = webix.html.remove(this._block_panel);\n\t\t}\n\t\twebix.html.removeCss(document.body,\"webix_noselect\");\n\t\tthis._bs_ready = this._bs_progress = false;\n\t\tif (this._auto_scroll_delay)\n\t\t\tthis._auto_scroll_delay = window.clearTimeout(this._auto_scroll_delay);\n\t},\n\t_update_block_selection: function(){\n\t\tif (this._bs_progress)\n\t\t\tthis._bs_select(false, false);\n\t},\n\t_bs_select:function(mode, theend, e){\n\t\tvar start = null;\n\t\tif(!this._bs_ready[2])\n\t\t\tthis._bs_ready[2] = this._locate_cell_xy.apply(this, this._bs_ready);\n\t\tstart = this._bs_ready[2];\n\n\t\tvar end = this._locate_cell_xy.apply(this, this._bs_progress);\n\n\t\tif (!this.callEvent(\"onBeforeBlockSelect\", [start, end, theend, e]))\n\t\t\treturn;\n\n\t\tif ((!this._bs_do_select || this._bs_do_select(start, end, theend, e) !== false) && (start.row && end.row)){\n\t\t\tif (mode === \"select\"){\n\t\t\t\tthis._clear_selection();\n\t\t\t\tthis._selectRange(start, end);\n\t\t\t} else {\n\t\t\t\tvar startx, starty, endx, endy;\n\n\t\t\t\tif (mode === \"box\"){\n\t\t\t\t\tstartx = Math.min(this._bs_ready[0],this._bs_progress[0]);\n\t\t\t\t\tendx = Math.max(this._bs_ready[0],this._bs_progress[0]);\n\n\t\t\t\t\tstarty = Math.min(this._bs_ready[1],this._bs_progress[1]);\n\t\t\t\t\tendy = Math.max(this._bs_ready[1],this._bs_progress[1]);\n\t\t\t\t} else {\n\t\t\t\t\tvar startn = this._cellPosition(start.row, start.column);\n\t\t\t\t\tvar endn = this._cellPosition(end.row, end.column);\n\t\t\t\t\tvar scroll = this.getScrollState();\n\n\t\t\t\t\tvar startWidth = startn.width;\n\t\t\t\t\tvar endWidth = endn.width;\n\n\t\t\t\t\tif (this._right_width && this._bs_ready[0] > this._left_width+this._center_width){\n\t\t\t\t\t\tstartn.left += this._left_width+this._center_width;\n\t\t\t\t\t} else if (this._left_width){\n\n\t\t\t\t\t\tif (this._bs_ready[0] > this._left_width){\n\t\t\t\t\t\t\tif(startn.left < scroll.x){\n\t\t\t\t\t\t\t\tstartWidth -= scroll.x-startn.left;\n\t\t\t\t\t\t\t\tstartn.left = this._left_width;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tstartn.left+=this._left_width-scroll.x;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else startn.left -= scroll.x;\n\n\n\n\t\t\t\t\tif (this._right_width && this._bs_progress[0] > this._left_width+this._center_width){\n\t\t\t\t\t\tendn.left += this._left_width+this._center_width;\n\t\t\t\t\t} else if (this._left_width){\n\t\t\t\t\t\tif (this._bs_progress[0] > this._left_width){\n\t\t\t\t\t\t\tif(endn.left < scroll.x){\n\t\t\t\t\t\t\t\tendWidth -= scroll.x-endn.left;\n\t\t\t\t\t\t\t\tendn.left = this._left_width;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tendn.left+=this._left_width-scroll.x;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else endn.left -= scroll.x;\n\n\t\t\t\t\tif(this._settings.prerender){\n\t\t\t\t\t\tstartn.top -= this._scrollTop;\n\t\t\t\t\t\tendn.top -= this._scrollTop;\n\t\t\t\t\t}\n\n\n\t\t\t\t\tstartx = Math.min(startn.left, endn.left);\n\t\t\t\t\tendx = Math.max(startn.left+startWidth, endn.left+endWidth);\n\n\t\t\t\t\tstarty = Math.min(startn.top, endn.top);\n\t\t\t\t\tendy = Math.max(startn.top+startn.height, endn.top+endn.height);\n\n\t\t\t\t\tif(this._settings.topSplit)\n\t\t\t\t\t\tstarty += this._getTopSplitOffset(start);\n\n\t\t\t\t\tif (this._auto_scroll_delay)\n\t\t\t\t\t\tthis._auto_scroll_delay = window.clearTimeout(this._auto_scroll_delay);\n\t\t\t\t\tif(e)\n\t\t\t\t\t\tthis._auto_scroll_delay = webix.delay(this._auto_scroll, this, [webix.html.pos(e)], 250);\n\t\t\t\t}\n  \n\n\t\t\t\tvar style = this._block_panel.style;\n\t\t\t\tstyle.left = startx+\"px\";\n\t\t\t\tstyle.top = starty+\"px\";\n\t\t\t\tstyle.width = (endx-startx)+\"px\";\n\t\t\t\tstyle.height = (endy-starty)+\"px\";\n\n\t\t\t}\n\t\t}\n\n\t\tif (theend)\n\t\t\tthis.callEvent(\"onAfterBlockSelect\", [start, end]);\n\t},\n\t_bs_start:function(e){\n\t\tthis._block_panel = webix.html.create(\"div\", {\"class\":\"webix_block_selection\"},\"\");\n\n\t\tthis._body.appendChild(this._block_panel);\n\t},\n\t_bs_move:function(e){\n\t\tif (this._bs_ready !== false){\n\t\t\tvar pos = webix.html.pos(e);\n\t\t\tvar progress = [pos.x - this._bs_position.x, pos.y - this._bs_position.y];\n\n\t\t\t//prevent unnecessary block selection while dbl-clicking\n\t\t\tif (Math.abs(this._bs_ready[0] - progress[0]) < 5 && Math.abs(this._bs_ready[1] - progress[1]) < 5)\n\t\t\t\treturn;\n\n\t\t\tif (this._bs_progress === false)\n\t\t\t\tthis._bs_start(e);\n\n\t\t\tthis._bs_progress = progress;\n\t\t\tthis._bs_select(this.config.blockselect, false, e);\n\t\t}\n\t},\n\t_locate_cell_xy:function(x,y){\n\t\tvar inTopSplit = false,\n\t\t\trow = null,\n\t\t\tcolumn = null;\n\n\n\t\tif (this._right_width && x>this._left_width + this._center_width)\n\t\t\tx+= this._x_scroll.getSize()-this._center_width-this._left_width-this._right_width; \n\t\telse if (!this._left_width || x>this._left_width)\n\t\t\tx+= this._x_scroll.getScroll();\n\n\t\tif(this._settings.topSplit && this._render_scroll_top > this._settings.topSplit) {\n\t\t\tvar splitPos = this._cellPosition(this.getIdByIndex(this._settings.topSplit-1), this.columnId(0));\n\t\t\tif(splitPos.top + splitPos.height > y){\n\t\t\t\tinTopSplit = true;\n\t\t\t}\n\t\t}\n\t\tif(!inTopSplit)\n\t\t\ty += this.getScrollState().y;\n\n\t\tif (x<0) x=0;\n\t\tif (y<0) y=0;\n\n\t\tvar cols = this._settings.columns;\n\t\tvar rows = this.data.order;\n\n\t\tvar summ = 0; \n\t\tfor (var i=0; i<cols.length; i++){\n\t\t\tsumm+=cols[i].width;\n\t\t\tif (summ>=x){\n\t\t\t\tcolumn = cols[i].id;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (!column)\n\t\t\tcolumn = cols[cols.length-1].id;\n\n\t\tsumm = 0;\n\n\t\tvar start = this.data.$min || 0;\n\t\tif (this._settings.fixedRowHeight){\n\t\t\trow = rows[start + Math.floor(y/this._settings.rowHeight)];\n\t\t} else for (var i=start; i<rows.length; i++){\n\t\t\tsumm+=this._getHeightByIndex(i);\n\t\t\tif (summ>=y){\n\t\t\t\trow = rows[i];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (!row)\n\t\t\trow = rows[rows.length-1];\n\n\t\treturn {row:row, column:column};\n\t},\n\t_getTopSplitOffset: function(cell, area){\n\t\tvar y = 0,\n\t\t\tstartIndex = this.getIndexById(cell.row);\n\n\t\tif(startIndex >= this._settings.topSplit){\n\t\t\tvar startPos = this._cellPosition(this.getIdByIndex(startIndex), cell.column);\n\t\t\tvar splitPos = this._cellPosition(this.getIdByIndex(this._settings.topSplit-1), cell.column);\n\t\t\tif(splitPos.top + splitPos.height - startPos.top > 0){\n\t\t\t\ty = splitPos.top + splitPos.height - (startPos.top>0 ||!area?startPos.top:0);\n\t\t\t}\n\t\t}\n\n\t\treturn y;\n\t}\n});\nwebix.protoUI({\n\tname:\"resizearea\",\n\tdefaults:{\n\t\tdir:\"x\"\n\t},\n\t$init:function(config){\n\t\tvar dir = config.dir||\"x\";\n\t\tvar node = webix.toNode(config.container);\n        var size = (dir==\"x\"?\"width\":\"height\");\n\t\tvar margin = (config.margin? config.margin+\"px\":0);\n\n\t\tthis._key_property = (dir == \"x\"?\"left\":\"top\");\n\n\t\tthis._viewobj = webix.html.create(\"DIV\",{\n\t\t\t\"class\"\t: \"webix_resize_area webix_dir_\"+dir\n\t\t});\n\t\t//[[COMPAT]] FF12 can produce 2 move events\n\t\twebix._event(this._viewobj, webix.env.mouse.down, webix.html.stopEvent);\n\n\t\tif(margin){\n\t\t\tif(dir==\"x\")\n\t\t\t\tmargin = margin+\" 0 \"+margin;\n\t\t\telse\n\t\t\t\tmargin = \"0 \"+margin+\" 0 \"+margin;\n\t\t}\n\t\tthis._dragobj = webix.html.create(\"DIV\",{\n\t\t\t\"class\"\t: \"webix_resize_handle_\"+dir,\n\t\t\t \"style\" : (margin?\"padding:\"+margin:\"\")\n\t\t},\"<div class='webix_handle_content'></div>\");\n\n\t\tthis._originobj = webix.html.create(\"DIV\",{\n\t\t\t\"class\"\t: \"webix_resize_origin_\"+dir\n\t\t});\n\n        if(config[size]){\n            this._originobj.style[size] = config[size]+(config.border?1:0)+\"px\";\n            this._dragobj.style[size] = config[size]+\"px\";\n        }\n\t\tif (config.cursor)\n\t\t\tthis._dragobj.style.cursor = this._originobj.style.cursor = this._viewobj.style.cursor = config.cursor;\n\t\tthis._moveev =\twebix.event(node, webix.env.mouse.move, this._onmove, {bind:this});\n\t\tthis._upev =\twebix.event(document.body, webix.env.mouse.up, this._onup, {bind:this});\n\n\t\tthis._dragobj.style[this._key_property] = this._originobj.style[this._key_property] = config.start+\"px\";\n\n\t\tnode.appendChild(this._viewobj);\n\t\tnode.appendChild(this._dragobj);\n\t\tnode.appendChild(this._originobj);\n\t},\n\t_onup:function(){\n\n\t\tthis.callEvent(\"onResizeEnd\", [this._last_result]);\n\n\t\twebix.eventRemove(this._moveev);\n\t\twebix.eventRemove(this._upev);\n\n\t\twebix.html.remove(this._viewobj);\n\t\twebix.html.remove(this._dragobj);\n\t\twebix.html.remove(this._originobj);\n\t\tthis._viewobj = this._dragobj = this._originobj = null;\n\t},\n\t_onmove:function(e){\n\t\tvar pos = webix.html.pos(e);\n\t\tthis._last_result = (this._settings.dir == \"x\" ? pos.x : pos.y)+this._settings.start-this._settings.eventPos;\n\t\tthis._dragobj.style[this._key_property] = this._last_result+\"px\";\n\t\tthis.callEvent(\"onResize\", [this._last_result]);\n\t}\n}, webix.EventSystem, webix.Settings);\nwebix.extend(webix.ui.datatable, {\n\n\tresizeRow_setter:function(value){\n\t\tthis._settings.scrollAlignY = false;\n\t\tthis._settings.fixedRowHeight = false;\n\t\treturn this.resizeColumn_setter(value);\n\t},\n\tresizeColumn_setter:function(value){\n\t\tif (value && this._rs_init_flag){\n\t\t\twebix._event(this._viewobj, \"mousemove\", this._rs_move, {bind:this});\n\t\t\twebix._event(this._viewobj, \"mousedown\", this._rs_down, {bind:this});\n\t\t\twebix._event(this._viewobj, \"mouseup\", this._rs_up, {bind:this});\n\t\t\tthis._rs_init_flag = false;\n\t\t}\n\t\treturn value;\n\t},\n\t_rs_init_flag:true,\n\t_rs_down:function(e){\n\t\t// do not listen to mousedown of subview on master\n\t\tif (this._settings.subview && this != webix.$$(e.target||e.srcElement)) return;\n\t\t//if mouse was near border\n\t\tif (!this._rs_ready) return;\n\t\tthis._rs_process = [webix.html.pos(e),this._rs_ready[2]];\n\t\twebix.html.addCss(document.body,\"webix_noselect\");\n\t\twebix.html.denySelect();\n\t},\n\t_rs_up:function(){\n\t\tthis._rs_process = false;\n\t\twebix.html.removeCss(document.body,\"webix_noselect\");\n\t\twebix.html.allowSelect();\n\t},\n\t_rs_start:function(e){\n\t\te = e||event;\n\t\tif(this._rs_progress)\n\t\t\treturn;\n\t\tvar dir  = this._rs_ready[0];\n\t\tvar node = this._rs_process[1];\n\t\tvar obj  = this._locate(node);\n\t\tif (!obj) return;\n\n\t\tvar eventPos = this._rs_process[0];\n\t\tvar start;\n\n\t\tif (dir == \"x\"){\n\t\t\tstart = webix.html.offset(node).x+this._rs_ready[1] - webix.html.offset(this._body).x;\n\t\t\teventPos = eventPos.x;\n\t\t\tif (!this._rs_ready[1]) obj.cind-=(node.parentNode.colSpan||1);\n\t\t} else {\n\t\t\tstart = webix.html.offset(node).y+this._rs_ready[1] - webix.html.offset(this._body).y+this._header_height;\n\t\t\teventPos = eventPos.y;\n\t\t\tif (!this._rs_ready[1]) obj.rind--;\n\t\t}\n\t\tif (obj.cind>=0 && obj.rind>=0){\n\t\t\tthis._rs_progress = [dir, obj, start];\n\t\t\t\n\t\t\tvar resize = new webix.ui.resizearea({\n\t\t\t\tcontainer:this._viewobj,\n\t\t\t\tdir:dir,\n\t\t\t\teventPos:eventPos,\n\t\t\t\tstart:start,\n\t\t\t\tcursor:(dir == \"x\"?\"col\":\"row\")+\"-resize\"\n\t\t\t});\n\t\t\tresize.attachEvent(\"onResizeEnd\", webix.bind(this._rs_end, this));\n\t\t}\n\t\tthis._rs_down = this._rs_ready = false;\n\t},\n\t_rs_end:function(result){\n\t\tif (this._rs_progress){\n\t\t\tvar dir = this._rs_progress[0];\n\t\t\tvar obj = this._rs_progress[1];\n\t\t\tvar newsize = result-this._rs_progress[2];\n\t\t\tif (dir == \"x\"){\n\t\t\t\t\n\t\t\t\t//in case of right split - different sizing logic applied\n\t\t\t\tif (this._settings.rightSplit && obj.cind+1>=this._rightSplit &&\n\t\t\t\t\tobj.cind !== this._columns.length - 1)\n\t\t\t\t{\n\t\t\t\t\tobj.cind++;\n\t\t\t\t\tnewsize *= -1;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar column = this._columns[obj.cind];\n\t\t\t\tvar oldwidth = column.width;\n\t\t\t\tdelete column.fillspace;\n\t\t\t\tdelete column.adjust;\n\t\t\t\tthis._setColumnWidth(obj.cind, oldwidth + newsize, true, true);\n\t\t\t\tthis._updateColsSizeSettings();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar rid = this.getIdByIndex(obj.rind);\n\t\t\t\tvar oldheight = this._getRowHeight(this.getItem(rid));\n\t\t\t\tthis.setRowHeight(rid, oldheight + newsize);\n\t\t\t}\n\t\t\tthis._rs_up();\n\t\t}\n\t\tthis._rs_progress = null;\n\t},\n\t_rs_move:function(e){\n\t\tvar cell= null,\n\t\t\tconfig = this._settings;\n\t\tif (this._rs_ready && this._rs_process)\n\t\t\treturn this._rs_start(e);\n\n\t\te = e||event;\n\t\tvar node = e.target||e.srcElement;\n\t\tvar mode = false; //resize ready flag\n\n\t\tif (node.tagName == \"TD\" || node.tagName == \"TABLE\") return ;\n\t\tvar element_class = node.className||\"\";\n\t\tvar in_body = typeof element_class === \"string\" && element_class.indexOf(\"webix_cell\")!=-1;\n\t\t//ignore resize in case of drag-n-drop enabled\n\t\tif (in_body && config.drag) return;\n\t\tvar in_header = typeof element_class === \"string\" && element_class.indexOf(\"webix_hcell\")!=-1;\n\t\tthis._rs_ready = false;\n\t\t\n\t\tif (in_body || in_header){\n\t\t\tvar dx = node.offsetWidth;\n\t\t\tvar dy = node.offsetHeight;\n\t\t\tvar pos = webix.html.posRelative(e);\n\n\t\t\tvar resizeRow = config.resizeRow;\n\t\t\t// if resize is only within the first column\n\t\t\tif(typeof resizeRow == \"object\" && resizeRow.headerOnly){\n\t\t\t\tcell = this._locate(node);\n\t\t\t\tif(cell.cind >0)\n\t\t\t\t\tresizeRow = false;\n\t\t\t}\n\n\t\t\tif (in_body && resizeRow){\n\t\t\t\tresizeRow = (typeof resizeRow == \"object\" && resizeRow.size?resizeRow.size:3);\n\t\t\t\tif (pos.y<resizeRow){\n\t\t\t\t\tif(!cell)\n\t\t\t\t\t\tcell = this._locate(node);\n\t\t\t\t\t// avoid resize header border\n\t\t\t\t\tif(cell.rind){\n\t\t\t\t\t\tthis._rs_ready = [\"y\", 0, node];\n\t\t\t\t\t\tmode = \"row-resize\";\n\t\t\t\t\t}\n\t\t\t\t} else if (dy-pos.y<resizeRow+1){\n\t\t\t\t\tthis._rs_ready = [\"y\", dy, node];\n\t\t\t\t\tmode = \"row-resize\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar resizeColumn = config.resizeColumn;\n\t\t\t// if resize is only within the header\n\t\t\tif(typeof resizeColumn == \"object\" && resizeColumn.headerOnly && in_body)\n\t\t\t\tresizeColumn = false;\n\n\t\t\tif (resizeColumn){\n\t\t\t\tresizeColumn = (typeof resizeColumn == \"object\" && resizeColumn.size?resizeColumn.size:3);\n\n\t\t\t\tif (pos.x<resizeColumn){\n\t\t\t\t\tthis._rs_ready = [\"x\", 0, node];\n\t\t\t\t\tmode = \"col-resize\";\n\t\t\t\t} else if (dx-pos.x<resizeColumn+1){\n\t\t\t\t\tthis._rs_ready = [\"x\", dx, node];\n\t\t\t\t\tmode = \"col-resize\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t//mark or unmark resizing ready state\n\t\tif (this._cursor_timer) window.clearTimeout(this._cursor_timer);\n\t\tthis._cursor_timer = webix.delay(this._mark_resize_ready, this, [mode], mode?100:0);\n\t},\n\n\t_mark_resize_ready:function(mode){\n\t\tif (this._last_cursor_mode != mode){\n\t\t\tthis._last_cursor_mode = mode;\n\t\t\tthis._viewobj.style.cursor=mode||\"default\";\n\t\t}\n\t}\n});\n\n\nwebix.extend(webix.ui.datatable,webix.PagingAbility);\n\nwebix.csv = {\n\tescape:true,\n\tdelimiter:{\n\t\trows: \"\\n\",\n\t\tcols: \"\\t\"\n\t},\n\tparse:function(text, sep){\n\t\tsep = sep||this.delimiter;\n\t\tif (!this.escape)\n\t\t\treturn this._split_clip_data(text, sep);\n\n\t\tvar lines = text.replace(/\\n$/,\"\").split(sep.rows);\n\n\t\tvar i = 0;\n\t\twhile (i < lines.length - 1) {\n\t\t\tif (this._substr_count(lines[i], '\"') % 2 === 1) {\n\t\t\t\tlines[i] += sep.rows + lines[i + 1];\n\t\t\t\tdelete lines[i + 1];\n\t\t\t\ti++;\n\t\t\t}\n\t\t\ti++;\n\t\t}\n\t\tvar csv = [];\n\t\tfor (i = 0; i < lines.length; i++) {\n\t\t\tif (typeof(lines[i]) !== 'undefined') {\n\t\t\t\tvar line = lines[i].split(sep.cols);\n\t\t\t\tfor (var j = 0; j < line.length; j++) {\n\t\t\t\t\tif (line[j].indexOf('\"') === 0)\n\t\t\t\t\t\tline[j] = line[j].substr(1, line[j].length - 2);\n\t\t\t\t\tline[j] = line[j].replace('\"\"', '\"');\n\t\t\t\t}\n\t\t\t\tcsv.push(line);\n\t\t\t}\n\t\t}\n\t\treturn csv;\n\t},\n\t_split_clip_data: function(text, sep) {\n\t\tvar lines = text.split(sep.rows);\n\t\tfor (var i = 0; i < lines.length; i++) {\n\t\t\tlines[i] = lines[i].split(sep.cols);\n\t\t}\n\t\treturn lines;\n\t},\n\t/*! counts how many occurances substring in string **/\n\t_substr_count: function(string, substring) {\n\t\tvar arr = string.split(substring);\n\t\treturn arr.length - 1;\n\t},\n\tstringify:function(data, sep){\n\t\tsep = sep||this.delimiter;\n\n\t\tif (!this.escape){\n\t\t\tfor (var i = 0; i < data.length; i++)\n\t\t\t\tdata[i] = data[i].join(sep.cols);\n\t\t\treturn data.join(sep.rows);\n\t\t}\n\n\t\tvar reg = /\\n|\\\"|;|,/;\n\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\tfor (var j = 0; j < data[i].length; j++) {\n\t\t\t\tif (reg.test(data[i][j])) {\n\t\t\t\t\tdata[i][j] = data[i][j].replace(/\"/g, '\"\"');\n\t\t\t\t\tdata[i][j] = '\"' + data[i][j] + '\"';\n\t\t\t\t}\n\t\t\t}\n\t\t\tdata[i] = data[i].join(sep.cols);\n\t\t}\n\t\tdata = data.join(sep.rows);\n\t\treturn data;\n\t}\n};\n\nwebix.TablePaste = {\n\tclipboard_setter:function(value){\n\t\tif (value === true || value === 1) this._settings.clipboard = 'block';\n\t\twebix.clipbuffer.init();\n\t\tthis.attachEvent(\"onSelectChange\",this._sel_to_clip);\n\t\t// solution for clicks on selected items\n\t\tthis.attachEvent(\"onItemClick\",function(id,e,node){\n\t\t\tif(document.activeElement && this.$view.contains(document.activeElement)){\n\t\t\t\twebix.clipbuffer.focus();\n\t\t\t\twebix.UIManager.setFocus(this);\n\t\t\t}\n\t\t});\n\t\tthis.attachEvent(\"onPaste\", this._clip_to_sel);\n\n\t\treturn value;\n\t},\n\ttemplateCopy_setter: webix.template,\n\t_sel_to_clip: function() {\n\t\tif (!this.getEditor || !this.getEditor()){\n\t\t\tvar data = this._get_sel_text();\n\t\t\twebix.clipbuffer.set(data);\n\t\t\twebix.UIManager.setFocus(this);\n\t\t}\n\t},\n\n\t_get_sel_text: function() {\n\t\tvar data = [];\n\t\tvar filter = this._settings.templateCopy;\n\t\tthis.mapSelection(function(value, row, col, row_ind, col_ind) {\n\t\t\tif (!data[row_ind]) data[row_ind] = [];\n\t\t\tvar newvalue = filter ? filter(value, row, col) : value;\n\t\t\tdata[row_ind].push(newvalue);\n\t\t\treturn value;\n\t\t});\n\n\t\treturn webix.csv.stringify(data, this._settings.delimiter);\n\t},\n\n\t_clip_to_sel: function(text) {\n\t\tif (!webix.isUndefined(this._paste[this._settings.clipboard])) {\n\t\t\tvar data = webix.csv.parse(text, this._settings.delimiter);\n\t\t\tthis._paste[this._settings.clipboard].call(this, data);\n\t\t}\n\t},\n\n\t_paste: {\n\t\tblock: function(data) {\n\t\t\tvar leftTop = this.mapSelection(null);\n\t\t\tif (!leftTop) return;\n\n\t\t\t// filling cells with data\n\t\t\tthis.mapCells(leftTop.row, leftTop.column, data.length, null, function(value, row, col, row_ind, col_ind) {\n\t\t\t\tif (data[row_ind] && data[row_ind].length>col_ind) {\n\t\t\t\t\treturn data[row_ind][col_ind];\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t});\n\t\t\tthis.render();\n\t\t},\n\n\t\tselection: function(data) {\n\t\t\tthis.mapSelection(function(value, row, col, row_ind, col_ind) {\n\t\t\t\tif (data[row_ind] && data[row_ind].length>col_ind)\n\t\t\t\t\treturn data[row_ind][col_ind];\n\t\t\t\treturn value;\n\t\t\t});\n\t\t\tthis.render();\n\t\t},\n\n\t\trepeat: function(data) {\n\t\t\tthis.mapSelection(function(value, row, col, row_ind, col_ind) {\n\t\t\t\trow = data[row_ind%data.length];\n\t\t\t\tvalue = row[col_ind%row.length];\n\t\t\t\treturn value;\n\t\t\t});\n\t\t\tthis.render();\n\t\t},\n\n\t\tcustom: function(text) {}\n\t}\n};\n\nwebix.extend(webix.ui.datatable, webix.TablePaste);\nif(!webix.storage)\n\twebix.storage = {};\n\nwebix.storage.local = {\n\tput:function(name, data){\n\t\tif(name && window.JSON && window.localStorage){\n\t\t\twindow.localStorage.setItem(name, webix.stringify(data));\n\t\t}\n\t},\n\tget:function(name){\n\t\tif(name && window.JSON && window.localStorage){\n\t\t\tvar json = window.localStorage.getItem(name);\n\t\t\tif(!json)\n\t\t\t\treturn null;\n\t\t\treturn webix.DataDriver.json.toObject(json);\n\t\t}else\n\t\t\treturn null;\n\t},\n\tremove:function(name){\n\t\tif(name && window.JSON && window.localStorage){\n\t\t\twindow.localStorage.removeItem(name);\n\t\t}\n\t},\n\tclear:function(){\n\t\twindow.localStorage.clear();\n\t}\n};\n\nwebix.storage.session = {\n\tput:function(name, data){\n\t\tif(name && window.JSON && window.sessionStorage){\n\t\t\twindow.sessionStorage.setItem(name, webix.stringify(data));\n\t\t}\n\t},\n\tget:function(name){\n\t\tif(name && window.JSON && window.sessionStorage){\n\t\t\tvar json = window.sessionStorage.getItem(name);\n\t\t\tif(!json)\n\t\t\t\treturn null;\n\t\t\treturn webix.DataDriver.json.toObject(json);\n\t\t}else\n\t\t\treturn null;\n\t},\n\tremove:function(name){\n\t\tif(name && window.JSON && window.sessionStorage){\n\t\t\twindow.sessionStorage.removeItem(name);\n\t\t}\n\t},\n\tclear:function(){\n\t\twindow.sessionStorage.clear();\n\t}\n};\n\nwebix.storage.cookie = {\n\tput:function(name, data, domain, expires ){\n\t\tif(name && window.JSON){\n\t\t\tdocument.cookie = name + \"=\" + escape(webix.stringify(data)) +\n\t\t\t(( expires && (expires instanceof Date)) ? \";expires=\" + expires.toUTCString() : \"\" ) +\n\t\t\t(( domain ) ? \";domain=\" + domain : \"\" ) + \n\t\t\t(( webix.env.https ) ? \";secure\" : \"\");\n\t\t}\n\t},\n\tgetRaw:function(check_name){\n\t\t// first we'll split this cookie up into name/value pairs\n\t\t// note: document.cookie only returns name=value, not the other components\n\t\tvar a_all_cookies = document.cookie.split( ';' );\n\t\tvar a_temp_cookie = '';\n\t\tvar cookie_name = '';\n\t\tvar cookie_value = '';\n\t\tvar b_cookie_found = false; // set boolean t/f default f\n\n\t\tfor (var i = 0; i < a_all_cookies.length; i++ ){\n\t\t\t// now we'll split apart each name=value pair\n\t\t\ta_temp_cookie = a_all_cookies[i].split( '=' );\n\n\t\t\t// and trim left/right whitespace while we're at it\n\t\t\tcookie_name = a_temp_cookie[0].replace(/^\\s+|\\s+$/g, '');\n\n\t\t\t// if the extracted name matches passed check_name\n\t\t\tif (cookie_name == check_name ){\n\t\t\t\tb_cookie_found = true;\n\t\t\t\t// we need to handle case where cookie has no value but exists (no = sign, that is):\n\t\t\t\tif ( a_temp_cookie.length > 1 ){\n\t\t\t\t\tcookie_value = unescape( a_temp_cookie[1].replace(/^\\s+|\\s+$/g, '') );\n\t\t\t\t}\n\t\t\t\t// note that in cases where cookie is initialized but no value, null is returned\n\t\t\t\treturn cookie_value;\n\t\t\t}\n\t\t\ta_temp_cookie = null;\n\t\t\tcookie_name = '';\n\t\t}\n\t\tif ( !b_cookie_found ){\n\t\t\treturn null;\n\t\t}\n\t\treturn null;\n\t},\n\tget:function(name){\n\t\tif(name && window.JSON){\n\t\t\tvar json = this.getRaw(name);\n\t\t\tif(!json)\n\t\t\t\treturn null;\n\t\t\treturn webix.DataDriver.json.toObject(unescape(json));\n\t\t}else\n\t\t\treturn null;\n\t},\n\tremove:function(name, domain){\n\t\tif(name && this.getRaw(name)) \n\t\t\tdocument.cookie = name + \"=\" + (( domain ) ? \";domain=\" + domain : \"\") + \";expires=Thu, 01-Jan-1970 00:00:01 GMT\";\n\t},\n\tclear:function(domain){\n\t\tvar cookies = document.cookie.split(\";\");\n\t\tfor (var i = 0; i < cookies.length; i++)\n\t\t\tdocument.cookie = /^[^=]+/.exec(cookies[i])[0] + \"=\" + (( domain ) ? \";domain=\" + domain : \"\") + \";expires=Thu, 01-Jan-1970 00:00:01 GMT\";\t\t\n\t}\n};\n\nwebix.DataState = {\n\tgetState:function(){\n\t\tvar cols_n = this.config.columns.length;\n\t\tvar columns = this.config.columns;\n\t\tvar settings = { \n\t\t\tids:[],\n\t\t\tsize:[],\n\t\t\tselect:this.getSelectedId(true),\n\t\t\tscroll:this.getScrollState()\n\t\t};\n\t\tfor(var i = 0; i < cols_n; i++){\n\t\t\tvar col = columns[i];\n\t\t\tsettings.ids.push(col.id);\n\t\t\tsettings.size.push((col.fillspace || col.adjust) ? -1 : col.width);\n\t\t}\n\n\t\tsettings.order = [].concat(this._hidden_column_order.length ? this._hidden_column_order : settings.ids);\n\n\t\tif(this._last_sorted){\n\t\t\tsettings.sort={\n\t\t\t\tid:this._last_sorted,\n\t\t\t\tdir:this._last_order\n\t\t\t};\n\t\t}\n\n\t\t//this method will try to access the rendered values\n\t\t//just ignore it if grid is not rendered yet\n\t\tif (this._filter_elements && this._dtable_fully_ready) {\n\t\t\tvar filter = {};\n\t\t\tvar any_filter = 0;\n\t\t\tfor (var key in this._filter_elements) {\n\t\t\t\tif (this._hidden_column_hash[key]) continue;\n\n\t\t\t\tvar f = this._filter_elements[key];\n\t\t\t\tf[1].value = filter[key] = f[2].getValue(f[0]);\n\t\t\t\tany_filter = 1;\n\t\t\t}\n\t\t\tif (any_filter)\n\t\t\t\tsettings.filter=filter;\n\t\t}\n\n\t\tsettings.hidden = [];\n\t\tfor (var key in this._hidden_column_hash)\n\t\t\tsettings.hidden.push(key);\n\t\t\n\t\treturn settings;\n\t},\n\tsetState:function(obj){\n\t\tvar columns = this.config.columns;\n\t\tif(!obj) return;\n\n\t\tthis._last_sorted = null; \n\t\tthis.blockEvent();\n\n\t\tif (obj.hidden){\n\t\t\tvar hihash = {};\n\t\t\tfor (var i=0; i<obj.hidden.length; i++){\n\t\t\t\thihash[obj.hidden[i]] = true;\n\t\t\t\tif(!this._hidden_column_order.length)\n\t\t\t\t\tthis.hideColumn(obj.hidden[i]);\n\t\t\t}\n\n\t\t\tif(this._hidden_column_order.length){\n\t\t\t\tfor (var i=0; i<this._hidden_column_order.length; i++){\n\t\t\t\t\tvar hikey = this._hidden_column_order[i];\n\t\t\t\t\tif (!!hihash[hikey] == !this._hidden_column_hash[hikey])\n\t\t\t\t\t\tthis.hideColumn(hikey, !!hihash[hikey]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (obj.ids){\n\t\t\tvar reorder = false;\n\t\t\tvar cols = this.config.columns;\n\t\t\tfor (var i=0; i<cols.length; i++)\n\t\t\t\tif (cols[i].id != obj.ids[i])\n\t\t\t\t\treorder = true;\n\t\t\tif (reorder){\n\t\t\t\tfor (var i=0; i<obj.ids.length; i++)\n\t\t\t\t\tcols[i] = this.getColumnConfig(obj.ids[i]) || cols[i];\n\t\t\t\tthis.refreshColumns();\n\t\t\t}\n\t\t}\n\n\t\tif (obj.size){\n\t\t\tvar cols_n = Math.min(obj.size.length, columns.length);\n\t\t\tfor(var i = 0; i < cols_n; i++){\n\t\t\t\tvar col = columns[i];\n\t\t\t\tif(col && obj.size[i] > 0 && col.width != obj.size[i]){\n\t\t\t\t\tdelete col.fillspace;\n\t\t\t\t\tdelete col.adjust;\n\t\t\t\t\tthis._setColumnWidth( i, obj.size[i], true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.unblockEvent();\n\n\t\tvar silent = !(this._settings.leftSplit || this._settings.rightSplit);\n\t\tthis._updateColsSizeSettings(silent);\n\t\tthis.callEvent(\"onStructureUpdate\", []);\n\n\t\tif(obj.sort){\n\t\t\tvar column = columns[this.getColumnIndex(obj.sort.id)];\n\t\t\tif (column)\n\t\t\t\tthis._sort(obj.sort.id, obj.sort.dir, column.sort);\t\n\t\t}\n\t\t\t\t\n\t\tif (obj.filter){\n\t\t\t//temporary disable filtering \n\t\t\tvar temp = this.filterByAll;\n\t\t\tthis.filterByAll = function(){};\n\n\t\t\t//apply defined filters\n\t\t\tfor (var key in obj.filter) {\n\t\t\t\tvar value = obj.filter[key];\n\t\t\t\tif (!value) continue;\n\n\t\t\t\tif (!this._filter_elements[key]) continue;\n\t\t\t\tvar f = this._filter_elements[key];\n\t\t\t\tf[2].setValue(f[0], value);\n\t\t\t\tvar contentid = f[1].contentId;\n\t\t\t\tif (contentid)\n\t\t\t\t\tthis._active_headers[contentid].value = value;\n\t\t\t}\n\n\t\t\t//remove old filters\n\t\t\tfor (var key in this._filter_elements){\n\t\t\t\tif (!obj.filter[key]){\n\t\t\t\t\tvar f = this._filter_elements[key];\n\t\t\t\t\tf[2].setValue(f[0], \"\");\n\t\t\t\t}\n\t\t\t}\n\t\t\n\t\t\t//restore and apply filtering\n\t\t\tthis.filterByAll = temp;\n\t\t\tthis.filterByAll();\n\t\t}\n\n\t\tif (obj.select && this.select){\n\t\t\tvar select = obj.select;\n\t\t\tthis.unselect();\n\t\t\tfor (var i = 0; i < select.length; i++)\n\t\t\t\tif (!select[i].row || this.exists(select[i].row))\n\t\t\t\t\tthis._select(select[i], true);\n\t\t}\n\n\t\tif(obj.scroll)\n\t\t\tthis.scrollTo(obj.scroll.x, obj.scroll.y);\n\t}\n};\n\nwebix.extend(webix.ui.datatable, webix.DataState);\n\n\n(function(){\nvar t = webix.Touch = {\n\tconfig:{\n\t\tlongTouchDelay:1000,\n\t\tscrollDelay:150,\n\t\tgravity:500,\n\t\tdeltaStep:30,\n\t\tspeed:\"0ms\",\n\t\tfinish:1500,\n\t\tellastic:true\n\t},\n\tlimit:function(value){\n\t\tt._limited = value !== false;\t\n\t},\n\tdisable:function(){\n\t\tt._disabled = true;\n\t},\n\tenable:function(){\n\t\tt._disabled = false;\n\t},\n\t$init:function(){\n\t\tt.$init = function(){};\n\n\t\twebix.event(document.body, mouse.down,\tt._touchstart);\n\t\twebix.event(document.body, mouse.move, \tt._touchmove);\n\t\twebix.event(document.body, mouse.up, \tt._touchend);\n\n\t\twebix.event(document.body,\"dragstart\",function(e){\n\t\t\treturn webix.html.preventEvent(e);\n\t\t});\n\t\twebix.event(document.body,\"touchstart\",function(e){\n\t\t\tif (t._disabled || t._limited) return;\n\t\t\t//fast click mode for iOS\n\t\t\t//To have working form elements Android must not block event - so there are no fast clicks for Android\n\t\t\t//Selects still don't work with fast clicks\n\t\t\tif (webix.env.isSafari) {\n\t\t\t\tvar tag = e.srcElement.tagName.toLowerCase();\n\t\t\t\tif (tag == \"input\" || tag == \"textarea\" || tag == \"select\" || tag==\"label\")\n\t\t\t\t\treturn true;\n\n\t\t\t\tt._fire_fast_event = true;\n\t\t\t\treturn webix.html.preventEvent(e);\n\t\t\t}\n\t\t});\n\n\t\tt._clear_artefacts();\n\t\tt._scroll = [null, null];\n\t\tt.$active = true;\n\t},\n\t_clear_artefacts:function(){\n\t\tt._start_context = t._current_context = t._prev_context = t._scroll_context = null;\n\t\tt._scroll_mode = t._scroll_node = t._scroll_stat = this._long_touched = null;\n\t\t//webix.html.remove(t._scroll);\n\t\t//t._scroll = [null, null];\n\t\tt._delta = \t{ _x_moment:0, _y_moment:0, _time:0 };\n\n\t\tif (t._css_button_remove){\n\t\t\twebix.html.removeCss(t._css_button_remove,\"webix_touch\");\n\t\t\tt._css_button_remove = null;\n\t\t}\n\t\t\n\t\twindow.clearTimeout(t._long_touch_timer);\n\t\tt._was_not_moved = true;\n\t\tt._axis_x = true;\n\t\tt._axis_y = true;\n\t\tif (!t._active_transion)\n\t\t\tt._scroll_end();\n\t},\n\t_touchend:function(e){\n\t\tif (t._start_context) {\n\t\t\tif (!t._scroll_mode) {\n\t\t\t\tif (!this._long_touched) {\n\t\t\t\t\tif (t._axis_y && !t._axis_x) {\n\t\t\t\t\t\tt._translate_event(\"onSwipeX\");\n\t\t\t\t\t} else if (t._axis_x && !t._axis_y) {\n\t\t\t\t\t\tt._translate_event(\"onSwipeY\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (webix.env.isSafari && t._fire_fast_event) { //need to test for mobile ff and blackbery\n\t\t\t\t\t\t\tt._fire_fast_event = false;\n\t\t\t\t\t\t\tvar target = t._start_context.target;\n\n\t\t\t\t\t\t\t//dark iOS magic, without delay it can skip repainting\n\t\t\t\t\t\t\twebix.delay(function () {\n\t\t\t\t\t\t\t\tvar click_event = document.createEvent('MouseEvents');\n\t\t\t\t\t\t\t\tclick_event.initEvent('click', true, true);\n\t\t\t\t\t\t\t\ttarget.dispatchEvent(click_event);\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\n\n\t\t\t\tvar temp = t._get_matrix(t._scroll_node);\n\t\t\t\tvar x = temp.e;\n\t\t\t\tvar y = temp.f;\n\t\t\t\tvar finish = t.config.finish;\n\n\t\t\t\tvar delta = t._get_delta(e, true);\n\t\t\t\tvar view = webix.$$(t._scroll_node);\n\n\t\t\t\tvar gravity = (view && view.$scroll ? view.$scroll.gravity : t.config.gravity);\n\t\t\t\tif (delta._time) {\n\t\t\t\t\tvar nx = x + gravity * delta._x_moment / delta._time;\n\t\t\t\t\tvar ny = y + gravity * delta._y_moment / delta._time;\n\n\t\t\t\t\tvar cnx = t._scroll[0] ? t._correct_minmax(nx, false, false, t._scroll_stat.dx, t._scroll_stat.px) : x;\n\t\t\t\t\tvar cny = t._scroll[1] ? t._correct_minmax(ny, false, false, t._scroll_stat.dy, t._scroll_stat.py) : y;\n\n\n\t\t\t\t\tvar size = Math.max(Math.abs(cnx - x), Math.abs(cny - y));\n\t\t\t\t\tif (size < 150)\n\t\t\t\t\t\tfinish = finish * size / 150;\n\n\t\t\t\t\tif (cnx != x || cny != y)\n\t\t\t\t\t\tfinish = Math.round(finish * Math.max((cnx - x) / (nx - x), (cny - y) / (ny - y)));\n\n\t\t\t\t\tvar result = {e: cnx, f: cny};\n\n\n\t\t\t\t\tvar view = webix.$$(t._scroll_node);\n\t\t\t\t\tif (view && view.adjustScroll)\n\t\t\t\t\t\tview.adjustScroll(result);\n\n\n\t\t\t\t\t//finish = Math.max(100,(t._fast_correction?100:finish));\n\t\t\t\t\tfinish = Math.max(100, finish);\n\n\n\t\t\t\t\tif (x != result.e || y != result.f) {\n\t\t\t\t\t\tt._set_matrix(t._scroll_node, result.e, result.f, finish + \"ms\");\n\t\t\t\t\t\tif (t._scroll_master)\n\t\t\t\t\t\t\tt._scroll_master._sync_scroll(result.e, result.f, finish + \"ms\");\n\t\t\t\t\t\tt._set_scroll(result.e, result.f, finish + \"ms\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tt._scroll_end();\n\t\t\t\t\t}\n\t\t\t\t} else\n\t\t\t\t\tt._scroll_end();\n\t\t\t}\n\t\t\tt._translate_event(\"onTouchEnd\");\n\t\t\tt._clear_artefacts();\n\t\t}\n\t},\n\t_touchmove:function(e){\n\t\tif (!t._scroll_context || !t._start_context) return;\n\n\t\tvar\tdelta = t._get_delta(e);\n\t\tt._translate_event(\"onTouchMove\");\n\n\t\tif (t._scroll_mode){\n\t\t\tt._set_scroll_pos(delta);\n\t\t} else {\n\t\t\tt._axis_x = t._axis_check(delta._x, \"x\", t._axis_x);\n\t\t\tt._axis_y = t._axis_check(delta._y, \"y\", t._axis_y);\n\t\t\tif (t._scroll_mode){\n\t\t\t\tvar view = t._get_event_view(\"onBeforeScroll\", true);\n\t\t\t\tif (view){\n\t\t\t\t\tvar data = {};\n\t\t\t\t\tview.callEvent(\"onBeforeScroll\",[data]);\n\t\t\t\t\tif (data.update){\n\t\t\t\t\t\tt.config.speed = data.speed;\n\t\t\t\t\t\tt.config.scale = data.scale;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tt._init_scroller(delta); //apply scrolling\n\t\t\t}\n\t\t}\n\n\t\treturn webix.html.preventEvent(e);\n\t},\n\t_set_scroll_pos:function(){\n\t\tif (!t._scroll_node) return;\n\t\tvar temp = t._get_matrix(t._scroll_node);\n\t\tvar be = temp.e, bf = temp.f;\n\t\tvar prev = t._prev_context || t._start_context;\n\n\t\tvar view = webix.$$(t._scroll_node);\n\t\tvar ellastic = (view&&view.$scroll)?view.$scroll.ellastic: t.config.ellastic;\n\t\tif (t._scroll[0])\n\t\t\ttemp.e = t._correct_minmax( temp.e - prev.x + t._current_context.x , ellastic, temp.e, t._scroll_stat.dx, t._scroll_stat.px);\n\t\tif (t._scroll[1])\n\t\t\ttemp.f = t._correct_minmax( temp.f - prev.y + t._current_context.y , ellastic, temp.f, t._scroll_stat.dy, t._scroll_stat.py);\n\n\t\tt._set_matrix(t._scroll_node, temp.e, temp.f, \"0ms\");\n\t\tif (t._scroll_master)\n\t\t\tt._scroll_master._sync_scroll(temp.e, temp.f, \"0ms\");\n\t\tt._set_scroll(temp.e, temp.f, \"0ms\");\n\t},\n\t_set_scroll:function(dx, dy, speed){\n\t\t\n\t\tvar edx = t._scroll_stat.px/t._scroll_stat.dx * -dx;\n\t\tvar edy = t._scroll_stat.py/t._scroll_stat.dy * -dy;\n\t\tif (t._scroll[0])\n\t\t\tt._set_matrix(t._scroll[0], edx, 0 ,speed);\n\t\tif (t._scroll[1])\n\t\t\tt._set_matrix(t._scroll[1], 0, edy ,speed);\n\t},\n\tscrollTo:function(node, x, y, speed){\n\t\tt._set_matrix(node,x,y,speed);\n\t},\n\t_set_matrix:function(node, xv, yv, speed){\n\t\tif(!t._in_anim_frame && window.setAnimationFrame){\n\t\t\twindow.setAnimationFrame(function(){\n\t\t\t\tt._in_anim_frame = true;\n\t\t\t\treturn t._set_matrix(node, xv, yv, speed);\n\t\t\t});\n\t\t}\n\t\tt._in_anim_frame = null;\n\t\tt._active_transion = true;\n\t\tif (node){\n\t\t\tvar trans = t.config.translate || webix.env.translate;\n\t\t\tnode.style[webix.env.transform] = trans+\"(\"+Math.round(xv)+\"px, \"+Math.round(yv)+\"px\"+((trans==\"translate3d\")?\", 0\":\"\")+\")\";\n\t\t\tnode.style[webix.env.transitionDuration] = speed;\n\t\t}\n\t},\n\t_get_matrix:function(node){\n\t\tvar matrix = window.getComputedStyle(node)[webix.env.transform];\n\t\tvar tmatrix;\n\n\t\tif (matrix == \"none\")\n\t\t\ttmatrix = {e:0, f:0};\n\t\telse {\n            if(window.WebKitCSSMatrix)\n                tmatrix = new WebKitCSSMatrix(matrix);\n            else if (window.MSCSSMatrix)\n            \ttmatrix = new MSCSSMatrix(matrix);\n\t\t\telse {\n\t            // matrix(1, 0, 0, 1, 0, 0) --> 1, 0, 0, 1, 0, 0\n\t            var _tmatrix = matrix.replace(/(matrix\\()(.*)(\\))/gi, \"$2\");\n\t            // 1, 0, 0, 1, 0, 0 --> 1,0,0,1,0,0\n\t            _tmatrix = _tmatrix.replace(/\\s/gi, \"\");\n\t            _tmatrix = _tmatrix.split(',');\n\n\t            var tmatrix = {};\n\t            var tkey = ['a', 'b', 'c', 'd', 'e', 'f'];\n\t            for(var i=0; i<tkey.length; i++){\n\t                tmatrix[tkey[i]] = parseInt(_tmatrix[i], 10);\n\t            }\n\t        }\n        }\n\n        if (t._scroll_master)\n        \tt._scroll_master._sync_pos(tmatrix);\n\n        return tmatrix;\n\t},\t\n\t_correct_minmax:function(value, allow, current, dx, px){\n\t\tif (value === current) return value;\n\t\t\n\t\tvar delta = Math.abs(value-current);\n\t\tvar sign = delta/(value-current);\n\t//\tt._fast_correction = true;\n\t\t\n\t\t\n\t\tif (value>0) return allow?(current + sign*Math.sqrt(delta)):0;\n\t\t\n\t\tvar max = dx - px;\n\t\tif (max + value < 0)\t\n\t\t\treturn allow?(current - Math.sqrt(-(value-current))):-max;\n\t\t\t\n\t//\tt._fast_correction = false;\n\t\treturn value;\n\t},\t\n\t_init_scroll_node:function(node){\n\t\tif (!node.scroll_enabled){ \n\t\t\tnode.scroll_enabled = true;\t\n\t\t\tnode.parentNode.style.position=\"relative\";\n\t\t\tvar prefix = webix.env.cssPrefix;\n\t\t\tnode.style.cssText += prefix+\"transition: \"+prefix+\"transform; \"+prefix+\"user-select:none; \"+prefix+\"transform-style:flat;\";\n\t\t\tnode.addEventListener(webix.env.transitionEnd,t._scroll_end,false);\n\t\t}\n\t},\n\t_init_scroller:function(delta){\n\t\tif (t._scroll_mode.indexOf(\"x\") != -1)\n\t\t\tt._scroll[0] = t._create_scroll(\"x\", t._scroll_stat.dx, t._scroll_stat.px, \"width\");\n\t\tif (t._scroll_mode.indexOf(\"y\") != -1)\n\t\t\tt._scroll[1] = t._create_scroll(\"y\", t._scroll_stat.dy, t._scroll_stat.py, \"height\");\n\t\t\t\n\t\tt._init_scroll_node(t._scroll_node);\n\t\twindow.setTimeout(t._set_scroll_pos,1);\n\t},\n\t_create_scroll:function(mode, dy, py, dim){\n\t\tif (dy - py <2){\n\t\t\tvar matrix = t._get_matrix(t._scroll_node);\n\t\t\tvar e = (mode==\"y\"?matrix.e:0);\n\t\t\tvar f = (mode==\"y\"?0:matrix.f);\n\t\t\tif (!t._scroll_master)\n\t\t\t\tt._set_matrix(t._scroll_node, e, f, \"0ms\");\n\t\t\tt._scroll_mode = t._scroll_mode.replace(mode,\"\");\n\t\t\treturn \"\";\n\t\t}\n\n\t\tvar scroll = webix.html.create(\"DIV\", {\n\t\t\t\"class\":\"webix_scroll_\"+mode\n\t\t},\"\");\n\n\t\tscroll.style[dim] = Math.max((py*py/dy-7),10) +\"px\";\n\t\tif (t._scroll_stat.left) \n\t\t\tif (mode === \"x\")\n\t\t\t\tscroll.style.left = t._scroll_stat.left+\"px\";\n\t\t\telse\n\t\t\t\tscroll.style.right = (-t._scroll_stat.left)+\"px\";\n\t\tif (t._scroll_stat.hidden)\n\t\t\tscroll.style.visibility = \"hidden\";\n\n\t\tt._scroll_node.parentNode.appendChild(scroll);\n\t\t\n\t\treturn scroll;\n\t},\n\t_axis_check:function(value, mode, old){\n\t\tif (value > t.config.deltaStep){\n\t\t\t\tif (t._was_not_moved){\n\t\t\t\t\tt._long_move(mode);\n\t\t\t\t\tt._locate(mode);\n\t\t\t\t\tif ((t._scroll_mode||\"\").indexOf(mode) == -1) t._scroll_mode = \"\";\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t}\n\t\treturn old;\n\t},\n\t_scroll_end:function(){\n        //sending event to the owner of the scroll only\n        var result,state,view;\n        view = webix.$$(t._scroll_node||this);\n        if (view){\n        \tif (t._scroll_node)\n        \t\tresult = t._get_matrix(t._scroll_node);\n        \telse if(view.getScrollState){\n                state = view.getScrollState();\n                result = {e:state.x, f:state.y};\n            }\n            webix.callEvent(\"onAfterScroll\", [result]);\n            if (view.callEvent)\n                 view.callEvent(\"onAfterScroll\",[result]);\n        }\n\t\tif (!t._scroll_mode){\n\t\t\twebix.html.remove(t._scroll);\n\t\t\tt._scroll = [null, null];\n\t\t}\n\t\tt._active_transion = false;\n\t},\n\t_long_move:function(mode){\n\t\twindow.clearTimeout(t._long_touch_timer);\n\t\tt._was_not_moved = false;\t\n\t},\t\n\t_stop_old_scroll:function(e){\n\t\tif (t._scroll[0] || t._scroll[1]){\n\t\t\tt._stop_scroll(e, t._scroll[0]?\"x\":\"y\");\n\t\t}else\n\t\t\treturn true;\n\t},\n\t_touchstart :function(e){\n\t\tvar target = e.target || event.srcElement;\n\n\n\t\tif (t._disabled || (target.tagName&&target.tagName.toLowerCase() == \"textarea\" && target.offsetHeight<target.scrollHeight)) return;\n\t\tt._long_touched = null;\n\t\tt._scroll_context = t._start_context = mouse.context(e);\n\n\t\t// in \"limited\" mode we should have possibility to use slider\n\t\tvar element = webix.$$(e);\n\n\t\tif (t._limited && !t._is_scroll() && !(element && element.$touchCapture)){\n\t\t\tt._scroll_context = null;\n\t\t}\n\n\n\n\t\tt._translate_event(\"onTouchStart\");\n\n\t\tif (t._stop_old_scroll(e))\n\t\t\tt._long_touch_timer = window.setTimeout(t._long_touch, t.config.longTouchDelay);\n\t\t\n\t\tif (element && element.touchable && (!target.className || target.className.indexOf(\"webix_view\")!==0)){\n\t\t\tt._css_button_remove = element.getNode(e);\n\t\t\twebix.html.addCss(t._css_button_remove,\"webix_touch\");\n\t\t}\t\n\t\t\t\n\t},\n\t_long_touch:function(e){\n        if(t._start_context){\n\t\t\tt._translate_event(\"onLongTouch\");\n\t\t\twebix.callEvent(\"onClick\", [t._start_context]);\n\t\t\tt._long_touched = true;\n\t\t\t//t._clear_artefacts();\n        }\n\t},\n\t_stop_scroll:function(e, stop_mode){ \n\t\tt._locate(stop_mode);\n\t\tvar scroll = t._scroll[0]||t._scroll[1];\n\t\tif (scroll){\n\t\t\tvar view = t._get_event_view(\"onBeforeScroll\", true);\n\t\t\tif (view)\n\t\t\t\tview.callEvent(\"onBeforeScroll\", [t._start_context,t._current_context]);\n\t\t}\n\t\tif (scroll && (!t._scroll_node || scroll.parentNode != t._scroll_node.parentNode)){\n\t\t\tt._clear_artefacts();\n\t\t\tt._scroll_end();\n\t\t\tt._start_context = mouse.context(e);\n\t\t}\n\t\tt._touchmove(e);\n\t},\t\n\t_get_delta:function(e, ch){\n\t\tt._prev_context = t._current_context;\n\t\tt._current_context = mouse.context(e);\n\t\t\t\n\t\tt._delta._x = Math.abs(t._start_context.x - t._current_context.x);\n\t\tt._delta._y = Math.abs(t._start_context.y - t._current_context.y);\n\t\t\n\t\tif (t._prev_context){\n\t\t\tif (t._current_context.time - t._prev_context.time < t.config.scrollDelay){\n\t\t\t\tt._delta._x_moment = t._delta._x_moment/1.3+t._current_context.x - t._prev_context.x;\n\t\t\t\tt._delta._y_moment = t._delta._y_moment/1.3+t._current_context.y - t._prev_context.y;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tt._delta._y_moment = t._delta._x_moment = 0;\n\t\t\t}\n\t\t\tt._delta._time = t._delta._time/1.3+(t._current_context.time - t._prev_context.time);\n\t\t}\n\t\t\n\t\treturn t._delta;\n\t},\n\t_get_sizes:function(node){\n\t\tt._scroll_stat = {\n\t\t\tdx:node.offsetWidth,\n\t\t\tdy:node.offsetHeight,\n\t\t\tpx:node.parentNode.offsetWidth,\n\t\t\tpy:node.parentNode.offsetHeight\n\t\t};\n\t},\n\t_is_scroll:function(locate_mode){\n\t\tvar node = t._start_context.target;\n\t\tif (!webix.env.touch && !webix.env.transition && !webix.env.transform) return null;\n\t\twhile(node && node.tagName!=\"BODY\"){\n\t\t\tif(node.getAttribute){\n\t\t\t\tvar mode = node.getAttribute(\"touch_scroll\");\n\t\t\t\tif (mode && (!locate_mode || mode.indexOf(locate_mode)!=-1))\n\t\t\t\t\treturn [node, mode];\n\t\t\t}\n\t\t\tnode = node.parentNode;\n\t\t}\n\t\treturn null;\n\t},\n\t_locate:function(locate_mode){\n\t\tvar state = this._is_scroll(locate_mode);\n\t\tif (state){\n\t\t\tt._scroll_mode = state[1];\n\t\t\tt._scroll_node = state[0];\n\t\t\tt._get_sizes(state[0]);\n\t\t}\n\t\treturn state;\n\t},\n\t_translate_event:function(name){\n\t\twebix.callEvent(name, [t._start_context,t._current_context]);\n\t\tvar view = t._get_event_view(name);\n\t\tif (view)\n\t\t\tview.callEvent(name, [t._start_context,t._current_context]);\n\t},\n\t_get_event_view:function(name, active){\n\t\tvar view = webix.$$(active ? t._scroll_node : t._start_context);\n\t\tif(!view) return null;\n\t\t\n\t\twhile (view){\n\t\t\tif (view.hasEvent&&view.hasEvent(name))\t\n\t\t\t\treturn view;\n\t\t\tview = view.getParentView();\n\t\t}\n\t\t\n\t\treturn null;\n\t},\t\n\t_get_context:function(e){\n\t\tif (!e.touches[0]) {\n\t\t\tvar temp = t._current_context;\n\t\t\ttemp.time = new Date();\n\t\t\treturn temp;\n\t\t}\n\t\t\t\n\t\treturn {\n\t\t\ttarget:e.target,\n\t\t\tx:e.touches[0].pageX,\n\t\t\ty:e.touches[0].pageY,\n\t\t\ttime:new Date()\n\t\t};\n\t},\n\t_get_context_m:function(e){\n\t\treturn {\n\t\t\ttarget:e.target || e.srcElement,\n\t\t\tx:e.pageX,\n\t\t\ty:e.pageY,\n\t\t\ttime:new Date()\n\t\t};\n\t}\n};\n\n\nfunction touchInit(){\n\tif (webix.env.touch){\n\t\tt.$init();\n\t\t//not full screen mode\n\t\tif (document.body.className.indexOf(\"webix_full_screen\") == -1)\n\t\t\tt.limit(true);\n\n\t\tif (window.MSCSSMatrix)\n\t\t\twebix.html.addStyle(\".webix_view{ -ms-touch-action: none; }\");\n\t} else {\n\t\tvar id = webix.event(document.body, \"touchstart\", function(ev){\n\t\t\tif (ev.touches.length && ev.touches[0].radiusX > 4){\n\t\t\t\twebix.env.touch = true;\n\t\t\t\tsetMouse(mouse);\n\t\t\t\ttouchInit();\n\t\t\t\tfor (var key in webix.ui.views){\n\t\t\t\t\tvar view = webix.ui.views[key];\n\t\t\t\t\tif (view && view.$touch)\n\t\t\t\t\t\tview.$touch();\n\t\t\t\t}\n\t\t\t}\n\t\t\twebix.eventRemove(id);\n\t\t}, { capture: true });\n\t}\n}\n\nfunction setMouse(mouse){\n\tmouse.down = \"touchstart\";\n\tmouse.move = \"touchmove\";\n\tmouse.up   = \"touchend\";\n\tmouse.context = t._get_context;\n}\n\nwebix.ready(touchInit);\n\n\nvar mouse = webix.env.mouse = { down:\"mousedown\", up:\"mouseup\", \n\t\t\t\t\t\t\t\tmove:\"mousemove\", context:t._get_context_m };\n\nif (window.navigator.pointerEnabled){\n\tmouse.down = \"pointerdown\";\n\tmouse.move = \"pointermove\";\n\tmouse.up   = \"pointerup\";\n} else if (window.navigator.msPointerEnabled){\n\tmouse.down = \"MSPointerDown\";\n\tmouse.move = \"MSPointerMove\";\n\tmouse.up   = \"MSPointerUp\";\n} else if (webix.env.touch)\n\tsetMouse(mouse);\n\t\n\n\n})();\n\n\n\nwebix.attachEvent(\"onDataTable\", function(table, config){\n\tif (webix.env.touch){\n\t\twebix.Touch.$init();\n\t\tconfig.scrollSize = 0;\n\n\t\t// needed to show datatable scroll\n\t\tif(webix.Touch._disabled)\n\t\t\twebix.Touch.limit();\n\n\t\ttable.$ready.push(table.$touch);\n\t}\n});\n\nwebix.extend(webix.ui.datatable, {\n\t$touch:function(){\n\t\tvar config = this._settings;\n\t\tconfig.scrollAlignY = false;\n\n\t\twebix.extend(this, (config.prerender===true)?this._touchNative:this._touch);\n\t\t\n\t\tvar scrollMode = \"\";\n\t\tif (!config.autowidth && config.scrollX !== false)\n\t\t\tscrollMode += \"x\";\n\t\tif (!config.autoheight && config.scrollY !== false)\n\t\t\tscrollMode += \"y\";\n\t\tthis._body.setAttribute(\"touch_scroll\", scrollMode);\n\t\t\n\t\twebix.Touch._init_scroll_node(this._body.childNodes[1].firstChild);\n\t\twebix.Touch._set_matrix(this._body.childNodes[1].firstChild, 0,0,\"0ms\");\n\t\tthis._sync_scroll(0,0,\"0ms\");\n\t},\n\t_touchNative:{\n\t\t_scrollTo_touch:function(x,y){\n\t\t\twebix.Touch._set_matrix(this._body.childNodes[1].firstChild, 0,0,\"0ms\");\n\t\t\tthis._sync_scroll(x,y,\"0ms\");\n\t\t},\n\t\t_getScrollState_touch:function(){\n\t\t\tvar temp = webix.Touch._get_matrix(this._body.childNodes[1].firstChild);\n\t\t\treturn { x : -temp.e, y : -temp.f };\n\t\t},\n\t\t$init:function(){\n\t\t\tthis.attachEvent(\"onBeforeScroll\", function(){ \n\t\t\t\twebix.Touch._scroll_node = this._body.childNodes[1].firstChild;\n\t\t\t\twebix.Touch._get_sizes(webix.Touch._scroll_node);\n\t\t\t\twebix.Touch._scroll_master = this;\n\t\t\t});\n\t\t\tthis.attachEvent(\"onTouchEnd\", function(){\n\t\t\t\twebix.Touch._scroll_master = null;\n\t\t\t});\n\t\t},\n\t\t_sync_scroll:function(x,y,t){\n\t\t\tif (this._settings.leftSplit)\n\t\t\t\twebix.Touch._set_matrix(this._body.childNodes[0].firstChild,0,y,t);\n\t\t\tif (this._settings.rightSplit)\n\t\t\t\twebix.Touch._set_matrix(this._body.childNodes[2].firstChild,0,y,t);\n\t\t\tif (this._settings.header)\n\t\t\t\twebix.Touch._set_matrix(this._header.childNodes[1].firstChild,x,0,t);\n\t\t\tif (this._settings.footer)\n\t\t\t\twebix.Touch._set_matrix(this._footer.childNodes[1].firstChild,x,0,t);\n\n\t\t\tthis.callEvent(\"onSyncScroll\", [x,y,t]);\n\t\t},\n\t\t_sync_pos:function(){}\n\t},\n\t_touch:{\n\t\t_scrollTo_touch:function(x,y){\n\t\t\twebix.delay(function(){\n\t\t\t\tthis.callEvent(\"onAfterScroll\", [{ e: -x, f: -y}]);\t\n\t\t\t}, this);\n\t\t  \t\n\t\t},\n\t\t$scroll:{\n\t\t\tgravity:0,\n\t\t\telastic:false\n\t\t},\n\t\t$init:function(){\n\t\t\t//if the result column's width < container's width,\n\t\t\tthis.attachEvent(\"onAfterColumnHide\", function(){\n\t\t\t\tthis._scrollTo_touch(0, 0);\n\t\t\t});\n\t\t\tthis.attachEvent(\"onBeforeScroll\", function(){\n\t\t\t\tvar t = webix.Touch;\n\t\t\t\tt._scroll_node = this._body.childNodes[1].firstChild;\n\t\t\t\tt._get_sizes(t._scroll_node);\n\t\t\t\tt._scroll_stat.left = this._scrollLeft;\n\t\t\t\tt._scroll_stat.hidden = this._x_scroll._settings.scrollVisible || this._y_scroll._settings.scrollVisible;\n\t\t\t\tt._scroll_stat.dy = this._dtable_height;\n\t\t\t\tt._scroll_master = this;\n\t\t\t});\n\t\t\tthis.attachEvent(\"onAfterScroll\", function(result){\n\t\t\t\t//onAfterScroll may be triggered by some non-touch related logic\n\t\t\t\tif (!result) return;\n\n\t\t\t\tvar isScrollX = (this._scrollLeft != -result.e);\n\t\t\t\tvar isScrollY = (this._scrollTop != -result.f);\n\n\t\t\t\twebix.Touch._scroll_master = null;\n\t\t\t\twebix.Touch._fix_f = null;\n\n\t\t\t\tthis._scrollTop = 0;\n\t\t\t\tthis._scrollLeft = 0;\n\n\t\t\t\t//ipad can delay content rendering if 3d transformation applied\n\t\t\t\t//switch back to 2d\n\t\t\t\tvar temp = webix.Touch.config.translate;\n\t\t\t\twebix.Touch.config.translate = \"translate\";\n\t\t\t\tthis._sync_scroll((this._x_scroll ? 0 : result.e), 0, \"0ms\");\n\t\t\t\twebix.Touch.config.translate = temp;\n\n\t\t\t\tthis._scrollLeft = -result.e;\n\t\t\t\tthis._scrollTop = -result.f;\n\t\t\t\tthis._correctScrollSize();\n\n\t\t\t\tthis.render();\n\n\t\t\t\tif(isScrollX){\n\t\t\t\t\tif (this._x_scroll)\n\t\t\t\t\t\tthis._x_scroll.scrollTo(this._scrollLeft);\n\t\t\t\t\tthis.callEvent(\"onScrollX\",[]);\n\t\t\t\t}\n\t\t\t\tif(isScrollY){\n\t\t\t\t\tif (this._y_scroll) \n\t\t\t\t\t\tthis._y_scroll.scrollTo(this._scrollTop);\n\t\t\t\t\tthis.callEvent(\"onScrollY\",[]);\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t});\n\t\t},\n\t\t_sync_scroll:function(x,y,t){\n\t\t\ty += this._scrollTop;\n\t\t\tx += this._scrollLeft;\n\n\t\t\twebix.Touch._set_matrix(this._body.childNodes[1].firstChild, x, y, t);\n\t\t\tif (this._settings.leftSplit)\n\t\t\t\twebix.Touch._set_matrix(this._body.childNodes[0].firstChild,0,y,t);\n\t\t\tif (this._settings.rightSplit)\n\t\t\t\twebix.Touch._set_matrix(this._body.childNodes[2].firstChild,0,y,t);\n\t\t\tif (this._settings.header)\n\t\t\t\twebix.Touch._set_matrix(this._header.childNodes[1].firstChild,x,0,t);\n\t\t\tif (this._settings.footer)\n\t\t\t\twebix.Touch._set_matrix(this._footer.childNodes[1].firstChild,x,0,t);\n\n\t\t\tthis.callEvent(\"onSyncScroll\", [x,y,t]);\n\t\t},\n\t\t_sync_pos:function(matrix){\n\t\t\tmatrix.f -= this._scrollTop;\n\t\t\tmatrix.e -= this._scrollLeft;\n\t\t}\n\t}\n});\nwebix.extend(webix.ui.datatable, {\n\t$init:function(){\n\t\tthis.data.attachEvent(\"onStoreUpdated\", webix.bind(function(id){\n\t\t\tif (!id) this._adjustColumns();\n\t\t}, this));\n\t\tthis.attachEvent(\"onStructureLoad\", this._adjustColumns);\n\n\t\tthis.attachEvent(\"onStructureUpdate\", this._resizeColumns);\n\t\tthis.attachEvent(\"onColumnResize\", function(a,b,c,user){\n\t\t\tif (user)\n\t\t\t\tthis._resizeColumns();\n\t\t});\n\t\tthis.attachEvent(\"onResize\", this._resizeColumns);\n\t},\n\t_adjustColumns:function(){\n\t\tvar resize = false;\n\t\tvar cols = this._columns;\n\t\tfor (var i = 0; i < cols.length; i++)\n\t\t\tif (cols[i].adjust && ( cols[i].adjust ==\"header\" || this.count() ))\n\t\t\t\tresize = this._adjustColumn(i, cols[i].adjust, true) || resize;\n\n\t\tif (resize){\n\t\t\tthis._updateColsSizeSettings(true);\n\t\t\tthis._resizeColumns();\n\t\t}\n\t},\n\t_resizeColumns:function(){\n\t\tvar cols = this._settings.columns;\n\t\tvar fill = [];\n\t\tvar summ = 0;\n\n\t\tif (cols && !this._settings.autowidth)\n\t\t\tfor (var i = 0; i < cols.length; i++){\n\t\t\t\tvar colfil = cols[i].fillspace;\n\t\t\t\tif (colfil){\n\t\t\t\t\tfill[i] = colfil;\n\t\t\t\t\tsumm += colfil*1 || 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\tif (summ)\n\t\t\tthis._fillColumnSize(fill, summ);\n\t},\n\t_fillColumnSize:function(fill, summ){\n\t\tvar cols = this._settings.columns;\n\t\tif (!cols) return;\n\n\t\tvar width = this._content_width - this._scrollSizeY;\n\t\tvar resize = false;\n\n\t\tif (width>0){\n\t\t\tfor (var i=0; i<cols.length; i++)\n\t\t\t\tif (!fill[i]) width -= (cols[i].width || this.config.columnWidth);\n\n\t\t\tfor (var i = 0; i < fill.length; i++)\n\t\t\t\tif (fill[i]){\n\t\t\t\t\tvar request = Math.min(width, Math.round(width * fill[i]/summ));\n\t\t\t\t\tresize = this._setColumnWidth(i, request, true) || resize;\n\t\t\t\t\twidth = width - cols[i].width;\n\t\t\t\t\tsumm = summ - fill[i];\n\t\t\t\t}\n\n\t\t\tif (resize) \n\t\t\t\tthis._updateColsSizeSettings(true);\n\t\t}\n\t},\n\t_getColumnConfigSize:function(ind, headers){\n\t\tvar config = this._settings.columns[ind];\n\t\tvar max = config.minColumnWidth || 10;\n\n\t\t//get max data width\n\t\tif (headers != \"header\"){\n\t\t\tvar order = [].concat(this.data.order);\n\t\t\tfor (var i = 0; i < order.length; i++)\n\t\t\t\torder[i] = order[i] ? this._getValue(this.getItem(order[i]), config, 0) : \"\";\n\t\t\tmax = Math.max(max, webix.html.getTextSize(order, \"webix_table_cell webix_cell\").width);\n\t\t}\n\n\t\t//get max header width\n\t\tif (headers != \"data\"){\n\t\t\tfor (var i=0; i<config.header.length; i++){\n\t\t\t\tvar header = config.header[i];\n\t\t\t\tif (header){\n\t\t\t\t\tvar width = 0;\n\t\t\t\t\tif(header.rotate)\n\t\t\t\t\t\tfor(var h = 0; h<(header.rowspan || 1); h++)\n\t\t\t\t\t\t\twidth += this._headers[h];\n\t\t\t\t\tvar css = \"webix_table_cell webix_cell \"+(header.css||\"\") + (header.rotate?\"webix_measure_rotate\":\"\");\n\t\t\t\t\tvar size = webix.html.getTextSize([header.text], css, width);\n\t\t\t\t\tmax = Math.max(max, header.rotate?size.height:size.width);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//1px to compensate offsetWidth rounding\n\t\treturn max+1+(webix.env.isIE?webix.skin.$active.layoutPadding.space:0);\n\t},\n\t_adjustColumn:function(ind, headers, ignore){\n\t\tif (ind >= 0){\n\t\t\tvar width = this._getColumnConfigSize(ind, headers);\n\t\t\treturn this._setColumnWidth(ind, width, ignore);\n\t\t}\n\t},\n\tadjustColumn:function(id, headers){\n\t\tthis._adjustColumn(this.getColumnIndex(id), headers);\n\t},\n\tadjustRowHeight:function(id, silent){\n\t\tif(id) {\n\t\t\tvar config = this.getColumnConfig(id);\n\t\t\tvar container;\n\t\t\tvar d = webix.html.create(\"DIV\",{\"class\":\"webix_table_cell webix_measure_size webix_cell\"},\"\");\n\t\t\td.style.cssText = \"width:\"+config.width+\"px; height:1px; visibility:hidden; position:absolute; top:0px; left:0px; overflow:hidden;\";\n\t\t\tthis.$view.appendChild(d);\n\n\t\t\tif (d.offsetHeight < 1){\n\t\t\t\t//hidden container, height detection is broken\n\t\t\t\t//reattach to the body\n\t\t\t\tcontainer = this.$view.cloneNode(true);\n\t\t\t\tdocument.body.appendChild(container);\n\t\t\t\tcontainer.appendChild(d);\n\t\t\t}\n\n\t\t\tthis.data.each(function(obj){\n\t\t\t\t//in case of dyn. mode - this can be undefined \n\t\t\t\tif (obj){\n\t\t\t\t\td.innerHTML = this._getValue(obj, config, 0);\n\t\t\t\t\tobj.$height = Math.max(d.scrollHeight, this._settings.rowHeight);\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\td = webix.html.remove(d);\n\t\t\tif (container)\n\t\t\t\twebix.html.remove(container);\n\t\t} else {\n\t\t\tvar heightsArr = new Array(this.data.count()).join('0').split('');\n\t\t\tvar cols = this.config.columns;\n\n\t\t\tfor (var i = 0; i < cols.length; i++) {\n\t\t\t\tthis.adjustRowHeight(cols[i].id, true);\n\t\t\t\tthis.data.each(function(obj, index){\n\t\t\t\t\tif (obj.$height > heightsArr[index]) {\n\t\t\t\t\t\theightsArr[index] = obj.$height;\n\t\t\t\t\t}\n\t\t\t\t\tobj.$height = heightsArr[index];\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (!silent)\n\t\t\tthis.refresh();\n\t}\n});\n\nwebix.extend(webix.ui.datatable,{\n\n\tmath_setter:function(value){\n\t\tif (value)\n\t\t\tthis._math_init();\n\t\treturn value;\n\t},\n\n\t_math_pref: '$',\n\n\t_math_init: function() {\n\t\tif(webix.env.strict) return;\n\n\t\tthis.data.attachEvent(\"onStoreUpdated\", webix.bind(this._parse_row_math, this));\n\t\tthis.data.attachEvent(\"onStoreLoad\", webix.bind(this._parse_math, this));\n\t\tthis.attachEvent(\"onStructureLoad\", this._parse_math);\n\t},\n\t_parse_row_math:function(id, obj, action){\n\t\tif (!id || (action==\"delete\" || action==\"paint\")) return;\n\n\t\tif (action == \"add\")\n\t\t\tthis._exprs_by_columns(obj);\n\n\t\tfor (var i=0; i<this._columns.length; i++)\n\t\t\tthis._parse_cell_math(id, this._columns[i].id, action !== \"add\");\n\t\tthis._math_recalc = {};\n\t},\n\t_parse_cell_math: function(row, col, _inner_call) {\n\t\tvar item = this.getItem(row);\n\t\tvar value;\n\n\t\t// if it's outer call we should use inputted value otherwise to take formula, not calculated value\n\t\tif (_inner_call === true)\n\t\t\tvalue = item[this._math_pref + col] || item[col];\n\t\telse {\n\t\t\tvalue = item[col];\n\t\t\tthis._math_recalc = {};\n\t\t}\n\n\t\tif (typeof value === \"undefined\" || value === null) return;\n\n\t\tif (value.length > 0 && value.substr(0, 1) === '=') {\n\t\t\t// calculate math value\n\t\t\tif (!item[this._math_pref + col] || (_inner_call !== true))\n\t\t\t\titem[this._math_pref + col] = item[col];\n\t\t\titem[col] = this._calculate(value, row, col);\n\t\t\t//this.updateItem(item);\n\t\t} else {\n\t\t\t// just a string\n\t\t\tif (typeof(item[this._math_pref + col]) !== 'undefined')\n\t\t\t\tdelete item[this._math_pref + col];\n\t\t\t// remove triggers if they were setted earlier\n\t\t\tthis._remove_old_triggers(row, col);\n\t\t}\n\t\t// recalculate depending cells\n\t\tif (typeof(item.depends) !== 'undefined' && typeof(item.depends[col]) !== 'undefined') {\n\t\t\tfor (var i in item.depends[col]) {\n\t\t\t\tvar name = item.depends[col][i][0] + '__' + item.depends[col][i][1];\n\t\t\t\tif (typeof(this._math_recalc[name]) === 'undefined') {\n\t\t\t\t\tthis._math_recalc[name] = true;\n\t\t\t\t\tthis._parse_cell_math(item.depends[col][i][0], item.depends[col][i][1], true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t_set_original_value: function(row, col) {\n\t\tvar item = this.getItem(row);\n\t\tif (typeof(item[this._math_pref + col]) !== 'undefined')\n\t\t\titem[col] = item[this._math_pref + col];\n\t},\n\n\t_parse_math: function(){\n\t\tif (!this._columns || !this.count()) return;\n\n\t\tthis._exprs_by_columns();\n\n\n\t\tfor (var j = 0; j < this._columns.length; j++){\n\t\t\tvar col = this.columnId(j);\n\t\t\tthis.data.each(function(obj){\n\t\t\t\tthis._parse_cell_math(obj.id, col);\n\t\t\t}, this);\n\t\t}\n\n\t\tthis._math_recalc = {};\n\t},\n\n\t_exprs_by_columns: function(row) {\n\t\tfor (var i = 0; i < this._columns.length; i++){\n\t\t\tif (this._columns[i].math) {\n\t\t\t\tvar col = this.columnId(i);\n\t\t\t\tvar math = '=' + this._columns[i].math;\n\t\t\t\tmath = math.replace(/\\$r/g, '#$r#');\n\t\t\t\tmath = math.replace(/\\$c/g, '#$c#');\n\t\t\t\tif (row)\n\t\t\t\t\trow[col] = this._parse_relative_expr(math, row.id, col);\n\t\t\t\telse\n\t\t\t\t\tthis.data.each(function(obj){\n\t\t\t\t\t\tobj[col] = this._parse_relative_expr(math, obj.id, col);\n\t\t\t\t\t}, this);\n\t\t\t}\n\t\t}\n\t},\n\n\t_parse_relative_expr: function(expr, row, col) {\n\t\treturn (webix.template(expr))({ '$r': row, '$c': col });\n\t},\n\n\t_get_calc_value: function(row, col) {\n\t\tvar item;\n\n\t\tif (this.exists(row))\n\t\t\titem = this.getItem(row);\n\t\telse\n\t\t\treturn '#out_of_range';\n\n\t\tvar value = item[this._math_pref + col] || item[col] || 0;\n\t\tvalue = value.toString();\n\t\tif (value.substring(0, 1) !== '=')\n\t\t\t// it's a string\n\t\t\treturn value;\n\t\telse {\n\t\t\t// TODO: check if value shouldn't be recalculated\n\t\t\t// and return value calculated earlier\n\n\t\t\t// calculate math expr value right now\n\t\t\tif (typeof(item[this._math_pref + col]) === 'undefined')\n\t\t\t\titem[this._math_pref + col] = item[col];\n\t\t\titem[col] = this._calculate(value, row, col, true);\n\t\t\treturn item[col];\n\t\t}\n\t},\n\n\t_calculate: function(value, row, col, _inner_call) {\n\t\t// add coord in math trace to detect self-references\n\t\tif (_inner_call === true) {\n\t\t\tif (this._in_math_trace(row, col))\n\t\t\t\treturn '#selfreference';\n\t\t} else\n\t\t\tthis._start_math_trace();\n\t\tthis._to_math_trace(row, col);\n\n\t\tvar item = this.getItem(row);\n\t\tvalue = value.substring(1);\n\n\t\t// get operations list\n\t\tvar operations = this._get_operations(value);\n\t\tvar triggers = this._get_refs(value);\n\n\t\tif (operations) {\n\t\t\tvalue = this._replace_refs(value, triggers);\n\t\t\tvalue = this._parse_args(value, operations);\n\t\t} else {\n\t\t\tvalue = this._replace_refs(value, triggers, true);\n\t\t}\n\n\t\tvar exc = this._math_exception(value);\n\t\tif (exc !== false)\n\t\t\treturn exc;\n\n\t\t// remove from coord from trace when calculations were finished - it's important!\n\t\tthis._from_math_trace(row, col);\n\n\t\t// process triggers to know which cells should be recalculated when one was changed\n\t\tthis._remove_old_triggers(row, col);\n\t\tfor (var i = 0; i < triggers.length; i++) {\n\t\t\tthis._add_trigger([row, col], triggers[i]);\n\t\t}\n\t\tvar exc = this._math_exception(value);\n\t\tif (exc !== false)\n\t\t\treturn exc;\n\n\t\t// there aren't any operations here. returns number or value of another cell\n\t\tif (!value) return value;\n\n\t\t// process mathematical expression and getting final result\n\t\tvalue = this._compute(value);\n\t\tvar exc = this._math_exception(value);\n\t\tif (exc !== false)\n\t\t\treturn exc;\n\t\treturn value;\n\t},\n\n\t_get_operations: function(value) {\n\t\t// gettings operations list (+-*/)\n\t\tvar splitter = /(\\+|\\-|\\*|\\/)/g;\n\t\tvar operations = value.replace(/\\[[^)]*?\\]/g,\"\").match(splitter);\n\t\treturn operations;\n\t},\n\n\t/*! gets list of referencies in formula\n\t **/\n\t_get_refs: function(value) {\n\t\tvar reg = /\\[([^\\]]+),([^\\]]+)\\]/g;\n\t\tvar cells = value.match(reg);\n\t\tif (cells === null) cells = [];\n\n\t\tfor (var i = 0; i < cells.length; i++) {\n\t\t\tvar cell = cells[i];\n\t\t\tvar tmp = cell;\n\t\t\tcell = cell.substr(1, cell.length - 2);\n\t\t\tcell = cell.split(',');\n\t\t\tcell[0] = this._trim(cell[0]);\n\t\t\tcell[1] = this._trim(cell[1]);\n\t\t\tif (cell[0].substr(0, 1) === ':')\n\t\t\t\tcell[0] = this.getIdByIndex(cell[0].substr(1));\n\t\t\tif (cell[1].substr(0, 1) === ':')\n\t\t\t\tcell[1] = this.columnId(cell[1].substr(1));\n\t\t\tcell[2] = tmp;\n\t\t\tcells[i] = cell;\n\t\t}\n\n\t\treturn cells;\n\t},\n\n\t// replace given list of references by their values\n\t_replace_refs: function(value, cells, clean) {\n\t\tvar dell = \"(\", delr = \")\";\n\t\tif (clean) dell = delr = \"\";\n\t\tfor (var i = 0; i < cells.length; i++) {\n\t\t\tvar cell = cells[i];\n\t\t\tvar cell_value = this._get_calc_value(cell[0], cell[1]);\n\t\t\tif (isNaN(cell_value))\n\t\t\t\tcell_value = '\"'+cell_value+'\"';\n\t\t\tvalue = value.replace(cell[2], dell + cell_value + delr);\n\t\t}\n\t\treturn value;\n\t},\n\n\t_parse_args: function(value, operations) {\n\t\tvar args = [];\n\t\tfor (var i = 0; i < operations.length; i++) {\n\t\t\tvar op = operations[i];\n\t\t\tvar temp = this._split_by(value, op);\n\t\t\targs.push(temp[0]);\n\t\t\tvalue = temp[1];\n\t\t}\n\t\targs.push(value);\n\n\t\t//var reg = /^(-?\\d|\\.|\\(|\\))+$/;\n\t\tfor (var i = 0; i < args.length; i++) {\n\t\t\tvar arg = this._trim(args[i]);\n\t\t//\tif (reg.test(arg) === false)\n\t\t//\t\treturn ''; //error\n\t\t\targs[i] = arg;\n\t\t}\n\n\t\tvar expr = \"\";\n\t\tfor (var i = 0; i < args.length - 1; i++) {\n\t\t\texpr += args[i] + operations[i];\n\t\t}\n\t\texpr += args[args.length - 1];\n\t\treturn expr;\n\t},\n\n\t_compute: function(expr) {\n\t\ttry {\n\t\t\twebix.temp_value = '';\n\t\t\texpr = 'webix.temp_value = ' + expr;\n\t\t\teval(expr);\n\t\t} catch(ex) {\n\t\t\twebix.assert(false,\"Math error in datatable<br>\"+expr);\n\t\t\twebix.temp_value = '';\n\t\t}\n\t\tvar result = webix.temp_value;\n\t\twebix.temp_value = null;\n\t\treturn result.toString();\n\t},\n\n\t_split_by: function(value, splitter) {\n\t\tvar pos = value.indexOf(splitter);\n\t\tvar before = value.substr(0, pos);\n\t\tvar after = value.substr(pos + 1);\n\t\treturn [before, after];\n\t},\n\n\t_trim: function(value) {\n\t\tvalue = value.replace(/^ */g, '');\n\t\tvalue = value.replace(/ *$/g, '');\n\t\treturn value;\n\t},\n\n\t_start_math_trace: function() {\n\t\tthis._math_trace = [];\n\t},\n\t_to_math_trace: function(row, col) {\n\t\tthis._math_trace[row + '__' + col] = true;\n\t},\n\t_from_math_trace: function(row, col) {\n\t\tif (typeof(this._math_trace[row + '__' + col]) !== 'undefined')\n\t\t\tdelete this._math_trace[row + '__' + col];\n\t},\n\t_in_math_trace: function(row, col) {\n\t\tif (typeof(this._math_trace[row + '__' + col]) !== 'undefined')\n\t\t\treturn true;\n\t\telse\n\t\t\treturn false;\n\t},\n\n\t_add_trigger: function(depends, from) {\n\t\tvar item = this.getItem(from[0]);\n\t\tif (typeof(item.depends) === 'undefined')\n\t\t\titem.depends = {};\n\t\tif (typeof(item.depends[from[1]]) === 'undefined')\n\t\t\titem.depends[from[1]] = {};\n\t\titem.depends[from[1]][depends[0] + '__' + depends[1]] = depends;\n\n\t\titem = this.getItem(depends[0]);\n\t\tif (typeof(item.triggers) === 'undefined')\n\t\t\titem.triggers = {};\n\t\tif (typeof(item.triggers[depends[1]]) === 'undefined')\n\t\t\titem.triggers[depends[1]] = {};\n\t\titem.triggers[depends[1]][from[0] + '__' + from[1]] = from;\n\t},\n\n\t_remove_old_triggers: function(row, col) {\n\t\tif (!this.exists(row, col)) return;\n\t\tvar item = this.getItem(row, col);\n\t\tif (typeof(item.triggers) === 'undefined') return;\n\t\tfor (var i in item.triggers[col]) {\n\t\t\tvar depend = item.triggers[col][i];\n\t\t\tdelete this.getItem(depend[0]).depends[depend[1]][row + '__' + col];\n\t\t}\n\t},\n\n\t// check if exception syntax exists and returns exception text or false\n\t_math_exception: function(value) {\n\t\tvar reg = /#\\w+/;\n\t\tvar match = value.match(reg);\n\t\tif (match !== null && match.length > 0)\n\t\t\treturn match[0];\n\t\treturn false;\n\t}\n\n});\n\n\n\n\nwebix.extend(webix.ui.datatable, {\n\n\t/////////////////////////\n\t//    edit start       //\n\t/////////////////////////\n\t_get_editor_type:function(id){\n\t\treturn this.getColumnConfig(id.column).editor;\n\t},\n\tgetEditor:function(row, column){\n\t\tif (!row)\n\t\t\treturn this._last_editor;\n\n\t\tif (arguments.length == 1){\n\t\t\tcolumn = row.column;\n\t\t\trow = row.row; \n\t\t}\n\t\t\n\t\treturn ((this._editors[row]||{})[column]);\n\t},\n\t_for_each_editor:function(handler){\n\t\tfor (var row in this._editors){\n\t\t\tvar row_editors = this._editors[row];\n\t\t\tfor (var column in row_editors)\n\t\t\t\tif (column!=\"$count\")\n\t\t\t\t\thandler.call(this, row_editors[column]);\n\t\t}\n\t},\n\t_init_editor:function(id, type, show){\n\t\tvar row = id.row;\n\t\tvar column  = id.column;\n\t\tvar col_settings = type.config = this.getColumnConfig(column);\n\t\t//show it over cell\n\t\tif (show !== false)\n\t\t\tthis.showCell(row, column);\n\n\t\tvar node = type.render();\n\n\t\tif (type.$inline)\n\t\t\tnode = this._locateInput(id);\n\t\ttype.node = node;\n\t\t\t\n\t\tvar item = this.getItem(row);\n\t\tvar format = col_settings.editFormat;\n\n\t\tvar value;\n\t\tif (this._settings.editMath)\n\t\t\tvalue = item[\"$\"+column];\n\t\tvalue = value || item[column];\n\n\t\tif (webix.isUndefined(value))\n\t\t\tvalue=\"\";\n\n\t\ttype.setValue(format?format(value):value, item);\n\t\ttype.value = item[column];\n\t\tthis._addEditor(id, type);\n\n\t\tif (!type.$inline)\n\t\t\tthis._sizeToCell(id, node, true);\n\n\t\tif (type.afterRender)\n\t\t\ttype.afterRender();\n\t\t\n\t\tif (this._settings.liveValidation){\n\t\t\twebix._event(type.node, \"keyup\", this._bind_live_validation(id, this));\n\t\t\tthis.validateEditor(id);\n\t\t}\n\n\t\treturn node;\n\t},\n\t_bind_live_validation:function(id, that){\n\t\treturn function(){\n\t\t\tthat.validateEditor(id);\n\t\t};\n\t},\n\t_set_new_value:function(editor, new_value, copy){\n\t\tvar parser = this.getColumnConfig(editor.column).editParse;\n\t\tvar item = copy ? {} : this.getItem(editor.row);\n\t\titem[editor.column] = parser?parser(new_value):new_value;\n\n\t\tif (this._settings.editMath)\n\t\t\titem[\"$\"+editor.column] = null;\n\n\t\treturn item;\n\t},\n\t//register editor in collection\n\t_addEditor:function(id, type, node){\n\t\tvar row_editors = this._editors[id.row]=this._editors[id.row]||{};\n\n\t\trow_editors.$count = (row_editors.$count||0)+1;\n\n\t\ttype.row = id.row; type.column = id.column;\n\t\tthis._last_editor = row_editors[id.column] = type;\n\n\t\tthis._in_edit_mode++;\n\t\tthis._last_editor_scroll = this.getScrollState();\n\t},\n\t_removeEditor:function(editor){\n\t\tif (this._last_editor == editor)\n\t\t\tthis._last_editor = 0;\n\t\t\n\t\tif (editor.destroy)\n\t\t\teditor.destroy();\n\t\t\n\t\tvar row = this._editors[editor.row];\n\t\tdelete row[editor.column];\n\t\trow.$count -- ;\n\t\tif (!row.$count)\n\t\t\tdelete this._editors[editor.row];\n\t\tthis._in_edit_mode--;\n\t},\n\t_changeEditorId:function(oldid, newid)\t{\n\t\tvar editor = this._editors[oldid];\n\t\tif (editor){\n\t\t\tthis._editors[newid] = editor;\n\t\t\tdelete this._editors[oldid];\n\t\t\tfor (var key in editor)\n\t\t\t\teditor[key].row = newid;\n\t\t}\n\t},\n\t//get html cell by combined id\n\t_locate_cell:function(id){\n\t\tvar area, i, index, j, node, span,\n\t\t\tconfig = this.getColumnConfig(id.column),\n\t\t\tcell = 0;\n\n\t\tif (config && config.node && config.attached){\n\t\t\tindex = this.getIndexById(id.row);\n\t\t\tif(this._spans_pull){\n\t\t\t\tspan = this.getSpan(id.row,id.column);\n\t\t\t\tif(span){\n\t\t\t\t\tfor (i=0; i<3; i++){\n\t\t\t\t\t\tarea = this._spans_areas[i];\n\t\t\t\t\t\tfor(j=0; !cell && j < area.childNodes.length; j++){\n\t\t\t\t\t\t\tnode = area.childNodes[j];\n\t\t\t\t\t\t\tif(node.getAttribute(\"row\") == index && node.getAttribute(\"column\") == this.getColumnIndex(id.column))\n\t\t\t\t\t\t\t\tcell = node;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!cell && index >= (config._yr0-this._settings.topSplit) && index< config._yr1)\n\t\t\t\tcell = config.node.childNodes[index-config._yr0+this._settings.topSplit];\n\t\t}\n\t\treturn cell;\n\t},\n\n\t\n\t/////////////////////////\n\t//    public methods   //\n\t/////////////////////////\n\teditCell:function(row, column, preserve, show){\n\t\tcolumn = column || this._settings.columns[0].id;\n\t\treturn webix.EditAbility.edit.call(this, {row:row, column:column}, preserve, show);\n\t},\n\teditRow:function(id, focus){\n\t\tif (id && id.row)\n\t\t\tid = id.row;\n\n\t\tvar next = false;\n\t\tthis.eachColumn(function(column){\n\t\t\tthis.edit({ row:id, column:column}, next, !next);\n\t\t\tnext = true;\n\t\t});\n\t},\n\teditColumn:function(id, focus){\n\t\tif (id && id.column)\n\t\t\tid = id.column;\n\n\t\tvar next = false;\n\t\tthis.eachRow(function(row){\n\t\t\tthis.edit({row:row, column:id}, next, !next);\n\t\t\tnext = true;\n\t\t});\n\t},\n\teachRow:function(handler, all){\n\t\tvar order = this.data.order;\n\t\tif (all) \n\t\t\torder = this.data._filter_order || order;\n\n\t\tfor (var i=0; i<order.length; i++)\n\t\t\thandler.call(this, order[i]);\n\t},\n\teachColumn:function(handler, all){\n\t\tfor (var i in this._columns_pull){\n\t\t\tvar column = this._columns_pull[i];\n\t\t\thandler.call(this, column.id, column);\n\t\t}\n\t\tif (all){\n\t\t\tfor (var i in this._hidden_column_hash){\n\t\t\t\tvar column = this._hidden_column_hash[i];\n\t\t\t\thandler.call(this, column.id, column);\n\t\t\t}\n\t\t}\n\t},\n\n\n\t////////////////////\n\t//    edit next   //\n\t////////////////////\n\t_after_edit_next:function(editor_next){\n\t\tif (this.getSelectedId){\t//select related cell when possible\n\t\t\tvar sel = this.getSelectedId(true);\n\t\t\tif (sel.length == 1){\n\t\t\t\tthis._select(editor_next);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\t_custom_tab_handler:function(tab, e){\n\t\tif (this._settings.editable && !this._in_edit_mode){\n\t\t\t//if we have focus in some custom input inside of datatable\n\t\t\tif (e.target && e.target.tagName == \"INPUT\") return true;\n\n\t\t\tvar selection = this.getSelectedId(true);\n\t\t\tif (selection.length == 1){\n\t\t\t\tthis.editNext(tab, selection[0]);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t},\n\n\t_find_cell_next:function(start, check, direction){\n\t\tvar row = this.getIndexById(start.row);\n\t\tvar column = this.getColumnIndex(start.column);\n\t\tvar order = this.data.order;\n\t\tvar cols = this._columns;\n\n\t\tif (direction){\n\n\t\t\tfor (var i=row; i<order.length; i++){\n\t\t\t\tfor (var j=column+1; j<cols.length; j++){\n\t\t\t\t\tvar id = { row:order[i], column:cols[j].id};\n\t\t\t\t\tif (check.call(this, id) && (!this._checkCellMerge || !this._checkCellMerge(start,id))){\n\t\t\t\t\t\treturn id;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcolumn = -1;\n\t\t\t}\n\t\t} else {\n\t\t\tfor (var i=row; i>=0; i--){\n\t\t\t\tfor (var j=column-1; j>=0; j--){\n\t\t\t\t\tvar id = { row:order[i], column:cols[j].id};\n\t\t\t\t\tif (check.call(this, id))\n\t\t\t\t\t\treturn id;\n\t\t\t\t}\n\t\t\t\tcolumn = cols.length;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\n\n\t/////////////////////////////\n\t//    scroll correction    //\n\t/////////////////////////////\n\t_correct_after_focus_y:function(){\n\t\tif (this._in_edit_mode){\n\t\t\tif (this._ignore_after_focus_scroll)\n\t\t\t\tthis._ignore_after_focus_scroll = false;\n\t\t\telse {\n\t\t\t\tthis._y_scroll.scrollTo(this.getScrollState().y+this._body.childNodes[1].firstChild.scrollTop);\n\t\t\t\tthis._body.childNodes[1].firstChild.scrollTop = 0;\n\t\t\t\tthis._ignore_after_focus_scroll = true;\n\t\t\t}\n\t\t}\n\t},\n\t_correct_after_focus_x:function(){\n\t\tif (this._in_edit_mode){\n\t\t\tthis._x_scroll.scrollTo(this._body.childNodes[1].scrollLeft);\n\t\t}\n\t},\n\t_component_specific_edit_init:function(){\n\t\tthis.attachEvent(\"onScrollY\", this._update_editor_y_pos);\n\t\tthis.attachEvent(\"onScrollX\", this._update_editor_y_pos);\n\t\tthis.attachEvent(\"onScrollY\", this._refocus_inline_editor);\n\t\tthis.attachEvent(\"onColumnResize\", function(){ this.editStop(); });\n\t\tthis.attachEvent(\"onAfterFilter\", function(){ this.editStop(); });\n\t\tthis.attachEvent(\"onRowResize\", function(){ this.editStop(); });\n\t\tthis.attachEvent(\"onAfterScroll\", function(){ if(this._settings.topSplit) this.editStop(); });\n\t\tthis._body.childNodes[1].firstChild.onscroll = webix.bind(this._correct_after_focus_y, this);\n\t\tthis._body.childNodes[1].onscroll = webix.bind(this._correct_after_focus_x, this);\n\t},\n\t_update_editor_y_pos:function(){\n\t\tif (this._in_edit_mode){\n\t\t\tvar old  = this._last_editor_scroll;\n\t\t\tthis._last_editor_scroll = this.getScrollState();\n\n\t\t\tvar diff = this._last_editor_scroll.y - old.y;\n\t\t\tthis._for_each_editor(function(editor){\n\t\t\t\tif (editor.getPopup){\n\t\t\t\t\tvar node = this.getItemNode(editor);\n\t\t\t\t\tif (node)\n\t\t\t\t\t\teditor.getPopup().show(node);\n\t\t\t\t\telse\n\t\t\t\t\t\teditor.getPopup().show({ x:-10000, y:-10000 });\n\t\t\t\t} else if (!editor.$inline){\n\t\t\t\t\teditor.node.top -= diff;\n\t\t\t\t\teditor.node.style.top = editor.node.top + \"px\";\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n});\n\nwebix.extend(webix.ui.datatable, webix.EditAbility);\nwebix.extend(webix.ui.datatable, {\n\t$init:function(){\n\t\tthis._clear_hidden_state();\t\n\t\tthis.attachEvent(\"onStructureLoad\", this._hideInitialColumns);\n\t},\n\t_clear_hidden_state:function(){\n\t\tthis._hidden_column_hash = {};\n\t\tthis._hidden_column_order = webix.toArray();\n\t\tthis._hidden_split=[0,0];\n\t},\n\t_hideInitialColumns:function(){\n\t\tvar cols = this._columns;\n\n\t\tfor (var i = cols.length-1; i>=0; i--){\n\t\t\tif(cols[i].header) this._getInitialSpans(cols, cols[i].header);\n\t\t\tif(cols[i].footer) this._getInitialSpans(cols, cols[i].footer);\n\t\t\tif (cols[i].hidden)\n\t\t\t\tthis.hideColumn(cols[i].id, true, true);\n\t\t\telse if (cols[i].batch && this.config.visibleBatch && cols[i].batch!=this.config.visibleBatch){\n\t\t\t\tthis.hideColumn(cols[i].id, true, true);\n\t\t\t}\n\t\t}\n\t},\n\t_getInitialSpans:function(cols, elements){\n\t\tfor(var h = 0; h<elements.length;h++){\n\t\t\tvar line = elements[h];\n\t\t\tif(line && line.colspan)\n\t\t\t\tline.$colspan = line.colspan;\n\t\t}\n\t},\n\tmoveColumn:function(id, index){\n\t\tvar start_index = this.getColumnIndex(id);\n\t\tif (start_index == index) return; //already in place\n\t\tvar columns = this._settings.columns;\n\n\t\tvar start = columns.splice(start_index,1);\n\t\tvar pos = index - (index>start_index?1:0);\n\t\twebix.PowerArray.insertAt.call(columns, start[0], pos);\n\n\t\t//TODO: split handling\n\t\t//we can move split line when column dropped after it\n\n\t\tthis._refresh_columns();\n\t},\n\t_init_horder:function(){\n\t\tvar horder = this._hidden_column_order;\n\t\tvar cols = this._settings.columns;\n\t\tif (!horder.length){\n\t\t\tfor (var i=0; i<cols.length; i++)\n\t\t\t\thorder[i] = cols[i].id;\n\t\t\tthis._hidden_split = [this._settings.leftSplit, this._rightSplit];\n\t\t}\n\t},\n\tisColumnVisible:function(id){\n\t\treturn !this._hidden_column_hash[id];\n\t},\n\thideColumn:function(id, mode, silent){\n\t\tvar cols = this._settings.columns;\n\t\tvar horder = this._hidden_column_order;\n\t\tvar hhash = this._hidden_column_hash;\n\t\tvar column;\n\t\tvar span = 1;\n\n\t\tif (mode!==false){\n\t\t\t\n\t\t\tvar index = this.getColumnIndex(id);\n\t\t\twebix.assert(index != -1, \"hideColumn: invalid ID or already hidden\");\n\t\t\tif(index === -1 || !this.callEvent(\"onBeforeColumnHide\", [id])) return;\n\n\t\t\t//in case of second call to hide the same column, command will be ignored\n\t\t\tif (index == -1) return;\n\n\t\t\tthis._init_horder();\n\t\t\tvar header = cols[index].header[0];\n\t\t\tif (header)\n\t\t\t\theader.$groupSpan = span = (header.colspan || 1);\n\n\t\t\tif (index<this._settings.leftSplit)\n\t\t\t\tthis._settings.leftSplit-=span;\n\t\t\tif (index>=this._rightSplit)\n\t\t\t\tthis._settings.rightSplit-=span;\n\t\t\telse \n\t\t\t\tthis._rightSplit-=span;\n\t\t\tfor (var i=index+span-1; i>=index; i--){\n\t\t\t\tthis._hideColumn(index);\n\t\t\t\tcolumn  = cols.splice(index, 1)[0];\n\t\t\t\thhash[column.id] = column;\n\t\t\t\tcolumn._yr0 = -1;\n\t\t\t\tdelete this._columns_pull[column.id];\n\t\t\t}\n\n\t\t\tthis.callEvent(\"onAfterColumnHide\", [id]);\n\t\t} else {\n\t\t\tcolumn = hhash[id];\n\t\t\twebix.assert(column, \"showColumn: invalid ID or already visible\");\n\n\t\t\t//in case of second show command for already visible column - ignoring\n\t\t\tif(!column || !this.callEvent(\"onBeforeColumnShow\", [id])) return;\n\n\t\t\tvar prev = null;\n\t\t\tvar i = 0;\n\t\t\tvar hindex = 0;\n\t\t\tfor (; i<horder.length; i++){\n\t\t\t\tif (horder[i] == id){\n\t\t\t\t\thindex = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (!hhash[horder[i]])\n\t\t\t\t\tprev = horder[i];\n\t\t\t}\n\n\t\t\tvar index = prev?this.getColumnIndex(prev)+1:0;\n\t\t\tvar header = column.header[0];\n\t\t\tif (header){\n\t\t\t\theader.colspan = header.$groupSpan || header.colspan;\n\t\t\t\tdelete header.$groupSpan;\n\t\t\t\tspan = (header.colspan || 1);\n\t\t\t}\n\t\t\t\n\n\t\t\tif (i<this._hidden_split[0])\n\t\t\t\tthis._settings.leftSplit+=span;\n\t\t\tif (i>=this._hidden_split[1])\t\n\t\t\t\tthis._settings.rightSplit+=span;\n\t\t\telse\n\t\t\t\tthis._rightSplit+=span;\n\n\t\t\tfor (var i=hindex+span-1; i>=hindex; i--){\n\t\t\t\tvar column = hhash[horder[i]];\n\t\t\t\twebix.PowerArray.insertAt.call(cols, column, index);\n\t\t\t\tdelete column.hidden;\t\t\n\t\t\t\tdelete hhash[column.id];\n\t\t\t\tthis._columns_pull[column.id] = column;\n\t\t\t}\n\n\t\t\tthis.callEvent(\"onAfterColumnShow\", [id]);\n\t\t}\n\t\tif (span === 1){\n\t\t\tif(column.header) this._fixColspansHidden(column, mode !== false ? 0 : 1, \"header\");\n\t\t\tif(column.footer) this._fixColspansHidden(column, mode !== false ? 0 : 1, \"footer\");\n\t\t}\n\t\tif (!silent)\n\t\t\tthis._refresh_columns();\n\t},\n\t_fixColspansHidden:function(config, mod, elName){\n\t\tfor (var i = config[elName].length - 1; i >= 0; i--) {\n\t\t\tvar ind = this._hidden_column_order;\n\t\t\tvar spanSource, isHidden = false, spanSize = 0;\n\n\t\t\tfor (var j = 0; j < ind.length; j++) {\n\t\t\t\tvar config = this.getColumnConfig(ind[j]);\n\t\t\t\tvar el = config[elName][i];\n\t\t\t\tif (!this.isColumnVisible(ind[j])){\n\t\t\t\t\t//hidden column\n\t\t\t\t\tif (el && el.$colspan && spanSize <= 0){\n\t\t\t\t\t\t//start of colspan in hidden\n\t\t\t\t\t\tspanSize = el.colspan = el.$colspan;\n\t\t\t\t\t\tisHidden = spanSource = el;\n\t\t\t\t\t}\n\t\t\t\t\tif (spanSource && spanSize > 0){\n\t\t\t\t\t\t//hidden column in colspan, decrease colspan size\n\t\t\t\t\t\tspanSource.colspan--;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t//visible column\n\t\t\t\t\tif (isHidden && spanSize > 0 && spanSource && spanSource.colspan > 0){\n\t\t\t\t\t\t//bit start of colspan is hidden\n\t\t\t\t\t\tel = config.el[i] = spanSource;\n\t\t\t\t\t\tspanSource = el;\n\t\t\t\t\t} else if (el && el.$colspan && spanSize <= 0){\n\t\t\t\t\t\t//visible start of colspan\n\t\t\t\t\t\tspanSize = el.colspan = el.$colspan;\n\t\t\t\t\t\tspanSource = el;\n\t\t\t\t\t}\n\t\t\t\t\tisHidden = null;\n\t\t\t\t}\n\t\t\t\tspanSize--;\n\t\t\t}\n\t\t}\n\t},\n\trefreshColumns:function(columns, reset){\n\t\tif ((columns && columns != this.config.columns) || reset){\n\t\t\tthis._clear_hidden_state();\n\t\t\tthis._filter_elements = {};\n\t\t\tif (columns)\n\t\t\t\tthis._rightSplit = columns.length - (this.config.rightSplit || 0);\n\t\t}\n\n\t\tthis._columns_pull = {};\n\t\t//clear rendered data\n\t\tfor (var i=0; i<this._columns.length; i++){\n\t\t\tvar col = this._columns[i];\n\t\t\tthis._columns_pull[col.id] = col;\n\t\t\tcol.attached = col.node = null;\n\t\t}\n\t\tfor (var i=0; i<3; i++){\n\t\t\tthis._header.childNodes[i].innerHTML = \"\";\n\t\t\tthis._body.childNodes[i].firstChild.innerHTML = \"\";\n\t\t}\n\n\t\t//render new structure\n\t\tthis._columns = this.config.columns = (columns || this.config.columns);\n\t\tthis._rightSplit = this._columns.length-this._settings.rightSplit;\n\n\t\tthis._dtable_fully_ready = 0;\n\t\tthis._define_structure();\n\n\t\tthis.callEvent(\"onStructureUpdate\");\n\n\t\tthis._update_scroll();\n\t\tthis.render();\t\n\t},\n\t_refresh_columns:function(){\n\t\tthis._dtable_fully_ready = 0;\n\t\tthis.callEvent(\"onStructureUpdate\");\n\t\t\n\t\tthis._apply_headers();\n\t\tthis.render();\n\t},\n\tshowColumn:function(id){\n\t\treturn this.hideColumn(id, false);\n\t},\n\tshowColumnBatch:function(batch, mode){\n\t\tvar preserve = typeof mode != \"undefined\";\n\t\tmode = mode !== false;\n\n\t\tthis.eachColumn(function(id, col){\n\t\t\tif(col.batch){\n\t\t\t\tvar hidden = this._hidden_column_hash[col.id];\n\t\t\t\tif (!mode) hidden = !hidden;\n\n\t\t\t\tif(col.batch == batch && hidden)\n\t\t\t\t\tthis.hideColumn(col.id, !mode, true);\n\t\t\t\telse if(!preserve && col.batch!=batch && !hidden)\n\t\t\t\t\tthis.hideColumn(col.id, mode, true);\n\t\t\t}\n\t\t}, true);\n\n\t\tthis._refresh_columns();\n\t}\n});\n\n\n\nwebix.extend(webix.ui.datatable, {\n\t$init:function(){\n\t\tthis.attachEvent(\"onAfterScroll\", this._set_focusable_item);\n\t},\n\t_set_focusable_item:function(){\n\t\tvar sel = this._getVisibleSelection();\n\t\tif(!sel){\n\t\t\tvar node =  this._dataobj.querySelector(\".webix_cell\");\n\t\t\tif(node) node.setAttribute(\"tabindex\", \"0\");\n\t\t}\n\t},\n\t_getVisibleSelection:function(){\n\t\tvar sel = this.getSelectedId(true);\n\t\tfor(var i = 0; i<sel.length; i++){\n\t\t\tif(this.isColumnVisible(sel[i].column))\n\t\t\t\treturn this.getItemNode(sel[i]);\n\t\t}\n\t\treturn null;\n\t},\n\tmoveSelection:function(mode, shift){\n\t\tif(this._settings.disabled) return;\n\t\t\n\t\t//get existing selection as array\n\t\tvar t = this.getSelectedId(true);\n\t\tvar index = t.length-1;\n\t\tvar preserve = this._settings.multiselect || this._settings.areaselect ? shift : false;\n\n\t\t//change defaults in case of multiselection\n\t\tif(t.length>1 && this._settings.select !==\"cell\"){\n\t\t\tt = t.sort(webix.bind(function(a, b){\n\t\t\t\tif(this.getIndexById(a.row)>this.getIndexById(b.row) || this.getColumnIndex(a.column)>this.getColumnIndex(b.column)) return 1;\n\t\t\t\telse return -1;\n\t\t\t}, this));\n\t\t\t\tif (mode == \"up\" || mode == \"left\" || mode ==\"top\" || mode ==\"pgup\")\n\t\t\t\t\tindex = 0;\n\t\t\t\n\t\t}\n\t\t\n\t\tif (index < 0 && this.count()){ //no selection\n\t\t\tif (mode == \"down\" || mode == \"right\") mode = \"top\";\n\t\t\telse if (mode == \"up\" || mode == \"left\") mode = \"bottom\";\n\t\t\telse return;\n\t\t\tindex = 0;\n\t\t\tt =  [{ row:1, column:1 }];\n\t\t}\n\n\t\t\n\n\t\tif (index>=0){\n\t\t\tvar row = t[index].row;\n\t\t\tvar column = t[index].column;\n\n\t\t\tif (mode == \"top\" || mode == \"bottom\") {\n\t\t\t\tif (row) {\n\t\t\t\t\t// first/last row setting\n\t\t\t\t\tif (mode == \"top\")\n\t\t\t\t\t\trow = this.data.getFirstId();\n\t\t\t\t\telse if (mode == \"bottom\")\n\t\t\t\t\t\trow = this.data.getLastId();\n\t\t\t\t}\n\t\t\t\tif (column) {\n\t\t\t\t\t// first/last column setting\n\t\t\t\t\tindex = 0;\n\t\t\t\t\tif(mode == \"bottom\")\n\t\t\t\t\t\tindex = this.config.columns.length-1;\n\t\t\t\t\tcolumn = this.columnId(index);\n\t\t\t\t}\n\t\t\t} else if (mode == \"up\" || mode== \"down\" || mode == \"pgup\" || mode == \"pgdown\"){\n\t\t\t\tif (row){\n\t\t\t\t\t//it seems row's can be seleted\n\t\t\t\t\tvar index = this.getIndexById(row);\n\t\t\t\t\tvar step = (mode == \"pgup\" || mode == \"pgdown\") ? Math.round(this._dtable_offset_height/this._settings.rowHeight) : 1;\n\t\t\t\t\t//get new selection row\n\t\t\t\t\tif (mode == \"up\" || mode == \"pgup\") index-=step;\n\t\t\t\t\telse if (mode == \"down\" || mode == \"pgdown\") index+=step;\n\t\t\t\t\t//check that we in valid row range\n\t\t\t\t\tif (index <0) index=0;\n\t\t\t\t\tif (index >=this.data.order.length) index=this.data.order.length-1;\n\n\t\t\t\t\trow = this.getIdByIndex(index);\n\t\t\t\t\tif (!row && this._settings.pager)\n\t\t\t\t\t\tthis.showItemByIndex(index);\n\t\t\t\t}\n\t\t\t} else if (mode == \"right\" || mode == \"left\"){\n\t\t\t\tif (column && this.config.select != \"row\"){\n\t\t\t\t\t//it seems column's can be selected\n\t\t\t\t\tvar index = this.getColumnIndex(column);\n\t\t\t\t\t//get new selected column\n\t\t\t\t\tif (mode == \"right\") index++;\n\t\t\t\t\telse if (mode == \"left\") index--;\n\t\t\t\t\t//check that result column index is in valid range\n\t\t\t\t\tif (index<0) index = 0;\n\t\t\t\t\tif (index>=this.config.columns.length) index = this.config.columns.length-1;\n\n\t\t\t\t\tcolumn = this.columnId(index);\n\t\t\t\t} else if ((this.open || this._subViewStorage) && mode == \"right\"){\n\t\t\t\t\treturn this.open ? this.open(row) : this.openSub(row);\n\t\t\t\t} else if ((this.close || this._subViewStorage) && mode == \"left\"){\n\t\t\t\t\treturn this.close ? this.close(row) : this.closeSub(row);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twebix.assert(false, \"Not supported selection moving mode\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (row){\n\t\t\t\tthis.showCell(row, column);\n\n\t\t\t\tif(!this.select){ //switch on cell or row selection by default\n\t\t\t\t\twebix.extend(this, this._selections._commonselect, true);\n\t\t\t\t\tthis._settings.select = (this.open || this._subViewStorage?\"row\":\"cell\");\n\t\t\t\t\twebix.extend(this, this._selections[this._settings.select], true);\n\t\t\t\t}\n\n\t\t\t\tvar cell = { row:row, column:column };\n\n\t\t\t\tif(preserve && this._settings.select == \"area\"){\n\t\t\t\t\tvar last = this._selected_areas[this._selected_areas.length-1];\n\t\t\t\t\tthis._extendAreaRange(cell, last, mode);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tthis._select(cell, preserve);\n\n\t\t\t\tif(!this._settings.clipboard){\n\t\t\t\t\tvar node = this.getItemNode(cell);\n\t\t\t\t\tif(node) node.focus();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t}\n\n        return false;\n\t}\n});\nwebix.extend(webix.ui.datatable, webix.KeysNavigation);\n\n\n\n\nwebix.extend(webix.ui.datatable,webix.DataMove);\nwebix.extend(webix.ui.datatable, {\n\tdrag_setter:function(value){\n\t\t// disable drag-n-drop for frozen rows\n\t\tthis.attachEvent(\"onBeforeDrag\", function(context){\n\t\t\treturn this._checkDragTopSplit(context.source);\n\t\t});\n\t\tthis.attachEvent(\"onBeforeDragIn\", function(context){\n\t\t\treturn this._checkDragTopSplit(context.target);\n\t\t});\n\t\tthis.attachEvent(\"onBeforeDropOrder\", function(startId, index){\n\t\t\treturn index<0 || index >= this._settings.topSplit;\n\t\t});\n\n\t\treturn webix.DragItem.drag_setter.call(this,value);\n\t},\n\t_checkDragTopSplit: function(ids){\n\t\tvar i, index,\n\t\t\tfrozen = false;\n\t\tif(this._settings.topSplit && ids){\n\t\t\tif(!webix.isArray(ids))\n\t\t\t\tids = [ids];\n\t\t\tfor(i=0; !frozen && i< ids.length;i++ ){\n\t\t\t\tindex = this.getIndexById(ids[i]);\n\t\t\t\tfrozen = index < this._settings.topSplit;\n\t\t\t}\n\t\t}\n\t\treturn !frozen;\n\t},\n\t$dragHTML:function(item, e){\n\t\tvar width = this._content_width - this._scrollSizeY;\n\t\tvar html=\"<div class='webix_dd_drag' style='width:\"+(width-2)+\"px;'>\";\n\t\tvar cols = this._settings.columns;\n\t\tfor (var i=0; i<cols.length; i++){\n\t\t\tvar value = this._getValue(item, cols[i]);\n\t\t\thtml += \"<div style='width:\"+cols[i].width+\"px;'>\"+value+\"</div>\";\n\t\t}\n\t\treturn html+\"</div>\";\n\t},\n\tgetHeaderNode:function(column_id, row_index){\n\t\tif(this.isColumnVisible(column_id)){\n\n\t\t\tvar ind = this.getColumnIndex(column_id);\n\t\t\tvar hind = this._settings.leftSplit > ind ? 0 : (this._rightSplit <=ind ? 2 :1 );\n\t\t\trow_index = row_index || 0;\n\t\t\t\n\t\t\tvar nodes = this._header.childNodes[hind].getElementsByTagName(\"TR\")[row_index+1].childNodes;\n\t\t\tfor (var i=0; i<nodes.length; i++)\n\t\t\t\tif (nodes[i].getAttribute(\"column\") == ind)\n\t\t\t\t\treturn nodes[i].firstChild;\n\t\t\t\t\n\t\t}\n\t\treturn null;\n\t},\n\tgetItemNode:function(id, e){\n\t\tif (id && !id.header){\n\t\t\tvar row = id.row || id;\n\t\t\tvar rowindex = this.getIndexById(row);\n\t\t\tvar state = this._get_y_range();\n\t\t\tvar minRow = state[0]-this._settings.topSplit;\n\t\t\t//row not visible\n\t\t\tif (rowindex < minRow && rowindex > state[1]) return;\n\n\t\t\t//get visible column\n\t\t\tvar x_range = this._get_x_range();\n\t\t\tvar colindex = this._settings.leftSplit ? 0 : x_range[0];\n\t\t\tif (id.column){\n\t\t\t\tcolindex = this.getColumnIndex(id.column);\n\t\t\t\t//column not visible\n\t\t\t\tif (colindex < this._rightSplit && colindex >= this._settings.leftSplit && ( colindex<x_range[0] || colindex > x_range[1]))\n\t\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar column = this._settings.columns[colindex];\n\n\t\t\tif (column.attached && column.node){\n\t\t\t\tvar nodeIndex = rowindex < this._settings.topSplit?rowindex:(rowindex-minRow);\n\t\t\t\treturn column.node.childNodes[nodeIndex];\n\t\t\t}\n\n\t\t}\n\t},\n\tdragColumn_setter:function(value){\n\t\tvar control; //will be defined below\n\t\tif (value == \"order\"){\n\t\t\tcontrol = {\n\t\t\t\t$drag:webix.bind(function(s,e){\n\t\t\t\t\tvar id = this.locate(e);\n\t\t\t\t\tif (this._rs_process || !id || !this.callEvent(\"onBeforeColumnDrag\", [id.column, e])) return false;\n\t\t\t\t\twebix.DragControl._drag_context = { from:control, start:id, custom:\"column_dnd\" };\n\n\t\t\t\t\tvar column = this.getColumnConfig(id.column);\n\n\t\t\t\t\tthis._relative_column_drag = webix.html.posRelative(e);\n\t\t\t\t\tthis._limit_column_drag = column.width;\n\n\t\t\t\t\treturn \"<div class='webix_dd_drag_column' style='width:\"+column.width+\"px'>\"+(column.header[0].text||\"&nbsp;\")+\"</div>\";\n\t\t\t\t}, this),\n\t\t\t\t$dragPos:webix.bind(function(pos, e, node){\n\t\t\t\t\tvar context = webix.DragControl.getContext();\n\t\t\t\t\tvar box = webix.html.offset(this.$view);\n\t\t\t\t\tnode.style.display = 'none';\n\t\t\t\t\tvar html = document.elementFromPoint(pos.x, box.y+1);\n\n\t\t\t\t\tvar id = (html?this.locate(html):null);\n\n\t\t\t\t\tvar start = webix.DragControl.getContext().start.column;\n\n\t\t\t\t\tif (id && id.column != start && (!this._column_dnd_temp_block || id.column != this._last_sort_dnd_node )){\n\t\t\t\t\t\t//ignore normal dnd , and dnd from other components\n\t\t\t\t\t\tif (context.custom == \"column_dnd\" && webix.$$(html) == this){\n\n\t\t\t\t\t\t\tif (!this.callEvent(\"onBeforeColumnDropOrder\",[start, id.column,e])) return;\n\n\t\t\t\t\t\t\tvar start_index = this.getColumnIndex(start);\n\t\t\t\t\t\t\tvar end_index = this.getColumnIndex(id.column);\n\n\t\t\t\t\t\t\t//on touch devices we need to preserve drag-start element till the end of dnd\n\t\t\t\t\t\t\tif(e.touches){\n\t\t\t\t\t\t\t\tthis._dragTarget = e.target;\n\t\t\t\t\t\t\t\tthis._dragTarget.style.display = \"none\";\n\t\t\t\t\t\t\t\tthis.$view.parentNode.appendChild(this._dragTarget);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.moveColumn(start, end_index+(start_index<end_index?1:0));\n\t\t\t\t\t\t\tthis._last_sort_dnd_node = id.column;\n\t\t\t\t\t\t\tthis._column_dnd_temp_block = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t} if (id && id.column == start){\n\t\t\t\t\t\t//flag prevent flickering just after column move\n\t\t\t\t\t\tthis._column_dnd_temp_block = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tnode.style.display = 'block';\n\n\t\t\t\t\tpos.x = pos.x - this._relative_column_drag.x;\n\t\t\t\t\tpos.y = box.y;\n\n\t\t\t\t\tif (pos.x < box.x)\n\t\t\t\t\t\tpos.x = box.x; \n\t\t\t\t\telse {\n\t\t\t\t\t\tvar max = box.x + this.$view.offsetWidth - this._scrollSizeY-this._limit_column_drag;\n\t\t\t\t\t\tif (pos.x > max)\n\t\t\t\t\t\t\tpos.x = max;\n\t\t\t\t\t}\n\t\t\t\t\twebix.DragControl._skip = true;\n\t\t\t\t\n\t\t\t\t}, this),\n\t\t\t\t$dragDestroy:webix.bind(function(a, node){\n\t\t\t\t\twebix.html.remove(node);\n\t\t\t\t\t//clean dnd source element\n\t\t\t\t\tif(this._dragTarget)\n\t\t\t\t\t\twebix.html.remove(this._dragTarget);\n\t\t\t\t\tvar id = webix.DragControl.getContext().start;\n\t\t\t\t\tthis.callEvent(\"onAfterColumnDropOrder\",[id.column, this._last_sort_dnd_node, a]);\n\t\t\t\t}, this),\n\t\t\t\t$drop: function(){}\n\t\t\t};\n\t\t} else if (value) {\n\t\t\tcontrol = {\n\t\t\t\t_inner_drag_only:true,\n\t\t\t\t$drag:webix.bind(function(s,e){\n\t\t\t\t\tvar id = this.locate(e);\n\t\t\t\t\tif (this._rs_process || !id || !this.callEvent(\"onBeforeColumnDrag\", [id.column, e])) return false;\n\t\t\t\t\twebix.DragControl._drag_context = { from:control, start:id, custom:\"column_dnd\" };\n\n\t\t\t\t\tvar header = this.getColumnConfig(id.column).header;\n\t\t\t\t\tvar text = \"&nbsp;\";\n\t\t\t\t\tfor (var i = 0; i < header.length; i++)\n\t\t\t\t\t\tif (header[i]){\n\t\t\t\t\t\t\ttext = header[i].text;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\treturn \"<div class='webix_dd_drag_column'>\"+text+\"</div>\";\n\t\t\t\t}, this),\n\t\t\t\t$drop:webix.bind(function(s,t,e){\n\t\t\t\t\tvar target = e;\n\t\t\t\t\t//on touch devices event doesn't point to the actual drop target\n\t\t\t\t\tif(e.touches && this._drag_column_last)\n\t\t\t\t\t\ttarget = this._drag_column_last;\n\n\t\t\t\t\tvar id = this.locate(target);\n\n\t\t\t\t\tif (!id) return false;\n\t\t\t\t\tvar start = webix.DragControl.getContext().start.column;\n\t\t\t\t\tif (start != id.column){\n\t\t\t\t\t\tif (!this.callEvent(\"onBeforeColumnDrop\",[start, id.column ,e])) return;\n\t\t\t\t\t\tvar start_index = this.getColumnIndex(start);\n\t\t\t\t\t\tvar end_index = this.getColumnIndex(id.column);\n\n\t\t\t\t\t\tthis.moveColumn(start, end_index+(start_index<end_index?1:0));\n\t\t\t\t\t\tthis.callEvent(\"onAfterColumnDrop\",[start, id.column, e]);\n\t\t\t\t\t}\n\t\t\t\t}, this),\n\t\t\t\t$dragIn:webix.bind(function(s,t,e){\n\t\t\t\t\tvar context = webix.DragControl.getContext();\n\t\t\t\t\t//ignore normal dnd , and dnd from other components\n\t\t\t\t\t\n\t\t\t\t\tif (context.custom != \"column_dnd\" || context.from != control) return false;\n\n\t\t\t\t\tvar target = (e.target||e.srcElement);\n\t\t\t\t\twhile ((target.className||\"\").indexOf(\"webix_hcell\") == -1){\n\t\t\t\t\t\ttarget = target.parentNode;\n\t\t\t\t\t\tif (!target) return;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (target != this._drag_column_last){\t//new target\n\t\t\t\t\t\tif (this._drag_column_last)\n\t\t\t\t\t\t\twebix.html.removeCss(this._drag_column_last, \"webix_dd_over_column\");\n\t\t\t\t\t\twebix.html.addCss(target, \"webix_dd_over_column\");\n\t\t\t\t\t}\n\n\t\t\t\t\treturn (this._drag_column_last = target);\n\t\t\t\t}, this),\n\t\t\t\t$dragDestroy:webix.bind(function(a,h){\n\t\t\t\t\tif (this._drag_column_last)\n\t\t\t\t\t\twebix.html.removeCss(this._drag_column_last, \"webix_dd_over_column\");\n\t\t\t\t\twebix.html.remove(h);\n\t\t\t\t}, this)\n\t\t\t};\n\t\t}\n\n\t\tif (value){\n\t\t\twebix.DragControl.addDrag(this._header, control);\n\t\t\twebix.DragControl.addDrop(this._header, control, true);\n\t\t}\n\t}\n});\nwebix.extend(webix.ui.datatable,webix.DragItem);\nwebix.extend(webix.ui.datatable, {\n\tclearValidation:function(){\n\t\tfor(var i in this.data._marks)\n\t\t\tthis._clear_invalid_css(i);\n\t\tthis.data.clearMark(\"webix_invalid\", true);\n\t},\n\t_mark_invalid:function(id, details){\n\t\tthis._clear_invalid_css(id);\n\t\tfor (var key in details)\n\t\t\tthis.addCellCss(id, key, \"webix_invalid_cell\");\n\n\t\tthis.addCss(id, \"webix_invalid\");\n\t},\n\t_clear_invalid:function(id){\n\t\tthis._clear_invalid_css(id);\n\t\tthis.removeCss(id, \"webix_invalid\");\n\t},\n\t_clear_invalid_css:function(id){\n\t\tvar item = this.getItem(id);\n\t\tvar mark = this.data.getMark(id, \"$cellCss\");\n\t\tif (mark){\n\t\t\tfor (var key in mark)\n\t\t\t\tmark[key] = mark[key].replace(\"webix_invalid_cell\", \"\").replace(\"  \",\" \");\n\t\t}\n\t},\n\n\taddRowCss:function(id, css, silent){\n\t\tthis.addCss(id, css, silent);\n\t},\n\tremoveRowCss:function(id, css, silent){\n\t\tthis.removeCss(id, css, silent);\n\t},\n\taddCellCss:function(id, name, css, silent){\n\t\tvar mark = this.data.getMark(id, \"$cellCss\");\n\t\tvar newmark = mark || {};\n\n\t\tvar style = newmark[name]||\"\";\n\t\tnewmark[name] = style.replace(css, \"\").replace(\"  \",\" \")+\" \"+css;\n\n\t\tif (!mark) this.data.addMark(id, \"$cellCss\", false, newmark, true);\n\t\tif (!silent)\n\t\t\tthis.refresh(id);\n\t},\n\tremoveCellCss:function(id, name, css, silent){\n\t\tvar mark = this.data.getMark(id, \"$cellCss\");\n\t\tif (mark){\n\t\t\tvar style = mark[name]||\"\";\n\t\t\tif (style)\n\t\t\t\tmark[name] = style.replace(css, \"\").replace(\"  \",\" \");\n\t\t\tif (!silent)\n\t\t\t\tthis.refresh(id);\n\t\t}\n\t}\n});\nwebix.extend(webix.ui.datatable, webix.ValidateCollection);\n\n(function(){\n\tfunction getData(data){\n\t\tvar values = [];\n\t\tfor (var i = data.length - 1; i >= 0; i--) {\n\t\t\tvar value = data[i];\n\t\t\tvalues[i] = (typeof value === \"object\" ? value.value : value);\n\t\t}\n\t\treturn values;\n\t}\n\n\tvar SLines = webix.Sparklines = function(){};\n\tSLines.types ={};\n\n\tSLines.getTemplate = function(customConfig){\n\t\tvar config = customConfig||{};\n\t\tif(typeof customConfig == \"string\")\n\t\t\tconfig = { type: customConfig };\n\n\t\twebix.extend(config,{ type:\"line\" });\n\n\t\tvar slConstructor = this.types[config.type];\n\t\twebix.assert(slConstructor,\"Unknown sparkline type\");\n\t\treturn webix.bind(this._template, new slConstructor(config));\n\t};\n\n\tSLines._template =  function(item, common, data, column){\n\t\tif (column)\n\t\t\treturn this.draw(getData(data), column.width, 33);\n\t\telse\n\t\t\treturn this.draw(item.data || item, common.width, common.height);\n\t};\n})();\n\n// add \"sparklines\" type\nwebix.attachEvent(\"onDataTable\", function(table){\n\ttable.type.sparklines = webix.Sparklines.getTemplate();\n});\n\n(function(){\n\tfunction setOpacity(color,opacity){\n\t\tcolor = webix.color.toRgb(color);\n\t\tcolor.push(opacity);\n\t\treturn \"rgba(\"+color.join(\",\")+\")\";\n\t}\n\n\tfunction joinAttributes(attrs){\n\t\tvar result = ' ';\n\t\tif(attrs)\n\t\t\tfor(var a in attrs)\n\t\t\t\tresult += a+'=\\\"'+attrs[a]+'\\\" ';\n\t\treturn result;\n\t}\n\t// SVG\n\tvar SVG = {};\n\n\tSVG.draw = function(content, width, height, css){\n\t\tvar attrs = {\n\t\t\txmlns: 'http://www.w3.org/2000/svg',\n\t\t\tversion: '1.1',\n\t\t\theight: '100%',\n\t\t\twidth: '100%',\n\t\t\tviewBox: '0 0 '+width+' '+height,\n\t\t\t\"class\": css||\"\"\n\t\t};\n\t\treturn '<svg '+joinAttributes(attrs)+'>'+content+'</svg>';\n\t};\n\tSVG.styleMap = {\n\t\t\"lineColor\": \"stroke\",\n\t\t\"color\": \"fill\"\n\t};\n\tSVG.group = function(path){\n\t\treturn \"<g>\"+path+\"</g>\";\n\t};\n\tSVG._handlers = {\n\t\t// MoveTo: {x:px,y:py}\n\t\t\"M\": function(p){\n\t\t\treturn \" M \"+ p.x+\" \"+ p.y;\n\t\t},\n\t\t// LineTo: {x:px,y:py}\n\t\t\"L\": function(p){\n\t\t\treturn \" L \"+ p.x+\" \"+ p.y;\n\t\t},\n\t\t// Curve: 3 points {x:px,y:py}: two control points and an end point\n\t\t\"C\": function(cp0, cp1, p){\n\t\t\treturn \" C \"+cp0.x + \" \"+cp0.y+\" \"+cp1.x + \" \"+cp1.y+\" \"+p.x + \" \"+p.y;\n\t\t},\n\t\t// Arc: center point {x:px,y:py}, radius, angle0, angle1\n\t\t\"A\": function(p, radius, angle0, angle1){\n\t\t\tvar x = p.x+Math.cos(angle1)*radius;\n\t\t\tvar y = p.y+Math.sin(angle1)*radius;\n\t\t\tvar bigCircle = angle1-angle0 >= Math.PI;\n\t\t\treturn  \" A \"+radius+\" \"+radius+\" 0 \"+(bigCircle?1:0)+\" 1 \"+x+\" \"+y;\n\t\t}\n\t};\n\t// points is an array of an array with two elements: {string} line type, {array}\n\tSVG.definePath = function(points, close){\n\t\tvar path = \"\";\n\t\tfor(var i =0; i < points.length; i++){\n\t\t\twebix.assert(points[i][0]&&typeof points[i][0] == \"string\", \"Path type must be a string\");\n\t\t\tvar type = (points[i][0]).toUpperCase();\n\t\t\twebix.assert(this._handlers[type], \"Incorrect path type\");\n\t\t\tpath += this._handlers[type].apply(this,points[i].slice(1));\n\n\t\t}\n\t\tif(close)\n\t\t\tpath += \" Z\";\n\n\t\treturn path;\n\t};\n\tSVG._linePoints = function(points){\n\t\tvar result = [];\n\t\tfor(var i = 0; i< points.length; i++){\n\t\t\tresult.push([i?\"L\":\"M\",points[i]]);\n\t\t}\n\t\treturn result;\n\t};\n\tSVG.setOpacity = function(color,opacity){\n\t\tcolor = webix.color.toRgb(color);\n\t\tcolor.push(opacity);\n\t\treturn \"rgba(\"+color.join(\",\")+\")\";\n\t};\n\tSVG._curvePoints = function(points){\n\t\tvar result = [];\n\t\tfor(var i = 0; i< points.length; i++){\n\t\t\tvar p = points[i];\n\t\t\tif(!i){\n\t\t\t\tresult.push([\"M\",p[0]]);\n\t\t\t}\n\t\t\tresult.push([\"C\",p[1],p[2],p[3]]);\n\t\t}\n\t\treturn result;\n\t};\n\tSVG.getPath = function(path, css, attrs){\n\t\tattrs = joinAttributes(attrs);\n\t\treturn '<path class=\"'+css+'\" vector-effect=\"non-scaling-stroke\" d=\"'+path+'\" '+attrs+'/>';\n\t};\n\tSVG.getSector = function(p, radius, angle0, angle1, css, attrs){\n\t\tattrs = joinAttributes(attrs);\n\t\tvar x0 = p.x+Math.cos(angle0)*radius;\n\t\tvar y0 = p.y+Math.sin(angle0)*radius;\n\t\tvar lines = [\n\t\t\t[\"M\",p],\n\t\t\t[\"L\",{x:x0, y:y0}],\n\t\t\t[\"A\", p,radius,angle0,angle1],\n\t\t\t[\"L\",p]\n\t\t];\n\n\n\t\treturn '<path class=\"'+css+'\" vector-effect=\"non-scaling-stroke\" d=\"'+SVG.definePath(lines,true)+'\" '+attrs+'/>';\n\t};\n\tSVG.getCurve = function(points,css, attrs){\n\t\tattrs = joinAttributes(attrs);\n\t\tvar path = this.definePath(this._curvePoints(points));\n\t\treturn '<path fill=\"none\" class=\"'+css+'\" vector-effect=\"non-scaling-stroke\" d=\"'+path+'\" '+attrs+'/>';\n\t};\n\tSVG.getLine = function(p0,p1,css, attrs){\n\t\treturn this.getPath(this.definePath(this._linePoints([p0,p1]),true),css,attrs);\n\t};\n\tSVG.getCircle = function(p, radius, css, attrs){\n\t\tattrs = joinAttributes(attrs);\n\t\treturn '<circle class=\"'+css+'\" cx=\"'+ p.x+'\" cy=\"'+ p.y+'\" r=\"'+radius+'\" '+attrs+'/>';\n\t};\n\tSVG.getRect = function(x, y, width, height, css, attrs){\n\t\tattrs = joinAttributes(attrs);\n\t\treturn '<rect class=\"'+css+'\" rx=\"0\" ry=\"0\" x=\"'+x+'\" y=\"'+y+'\" width=\"'+width+'\" height=\"'+height+'\" '+attrs+'/>';\n\t};\n\twebix._SVG = SVG;\n})();\n(function(){\n\tvar defaults = {\n\t\tpaddingX: 3,\n\t\tpaddingY: 4,\n\t\tradius: 1,\n\t\tminHeight: 4,\n\t\teventRadius: 8\n\t};\n\n\tfunction Area(config){\n\t\tthis.config = webix.extend(webix.copy(defaults),config||{},true);\n\t}\n\n\tArea.prototype.draw = function(data, width, height){\n\t\tvar eventRadius, graph, path, points, styles,\n\t\t\tconfig = this.config,\n\t\t\tLine = webix.Sparklines.types.line.prototype,\n\t\t\trenderer = webix._SVG;\n\n\t\t// draw area\n\t\tpoints = this.getPoints(data, width, height);\n\t\tpath = renderer.definePath(Line._getLinePoints(points),true);\n\n\t\tif(config.color)\n\t\t\tstyles = this._applyColor(renderer,config.color);\n\n\t\tgraph = renderer.group(renderer.getPath(path,'webix_sparklines_area'+(styles?' '+styles.area:'')));\n\t\t// draw line\n\t\tpoints.splice(points.length - 3, 3);\n\t\tpath = renderer.definePath(Line._getLinePoints(points));\n\t\tgraph += renderer.group(renderer.getPath(path,'webix_sparklines_line'+(styles?' '+styles.line:'')));\n\t\t// draw items\n\t\tgraph += Line._drawItems(renderer, points, config.radius, 'webix_sparklines_item'+(styles?' '+styles.item:''));\n\t\t// draw event areas\n\t\teventRadius = Math.min(data.length?(width-2*(config.paddingX||0))/data.length:0,config.eventRadius);\n\t\tgraph += Line._drawEventItems(renderer, points, eventRadius);\n\t\treturn  renderer.draw(graph, width, height, 'webix_sparklines_area_chart'+(config.css?' '+config.css:''));\n\t};\n\tArea.prototype._applyColor = function(renderer,color){\n\t\tvar config = {'area': {}, 'line':{},'item':{}},\n\t\t\tmap = renderer.styleMap;\n\t\tif(color){\n\t\t\tconfig.area[map.color] = renderer.setOpacity(color,0.2);\n\t\t\tconfig.line[map.lineColor] = color;\n\t\t\tconfig.item[map.color] = color;\n\t\t\tfor(var name in config)\n\t\t\t\tconfig[name] = webix.html.createCss(config[name]);\n\t\t}\n\n\t\treturn config;\n\t};\n\tArea.prototype.getPoints = function(data, width, height){\n\t\tvar Line = webix.Sparklines.types.line.prototype;\n\t\tvar points =Line.getPoints.call(this, data, width, height);\n\t\tvar x = this.config.paddingX || 0;\n\t\tvar y = this.config.paddingY || 0;\n\t\tpoints.push({x: width - x, y: height - y},{x: x, y: height - y},{x: x, y: points[0].y});\n\t\treturn points;\n\t};\n\twebix.Sparklines.types[\"area\"]=Area;\n})();\n(function(){\n\tvar defaults = {\n\t\tpaddingX: 3,\n\t\tpaddingY: 4,\n\t\twidth: 20,\n\t\tmargin: 4,\n\t\tminHeight: 4,\n\t\teventRadius: 8,\n\t\torigin:0,\n\t\titemCss: function(value){return value < (this.config.origin||0)?\" webix_sparklines_bar_negative\":\"\";}\n\t};\n\tfunction Bar(config){\n\t\tthis.config = webix.extend(webix.copy(defaults),config||{},true);\n\t}\n\n\tBar.prototype.draw = function(data, width, height){\n\t\tvar i, css, p, y, padding,\n\t\t\tconfig = this.config,\n\t\t\tgraph = \"\", items = [],\n\t\t\tpoints = this.getPoints(data, width, height),\n\t\t\trenderer = webix._SVG;\n\n\t\t// draw bars\n\t\tfor( i = 0; i< points.length; i++){\n\t\t\tcss = (typeof config.itemCss == 'function'?config.itemCss.call(this,data[i]):(config.itemCss||''));\n\t\t\tif (config.negativeColor && data[i] < config.origin)\n\t\t\t\tcss += ' '+this._applyColor(renderer,config.negativeColor);\n\t\t\telse if(config.color)\n\t\t\t\tcss += ' '+this._applyColor(renderer,config.color);\n\t\t\tp = points[i];\n\t\t\titems.push(renderer.getRect(p.x, p.y, p.width, p.height,'webix_sparklines_bar '+css));\n\t\t}\n\t\tgraph += renderer.group(items.join(\"\"));\n\t\t// origin)\n\t\ty = parseInt(this._getOrigin(data, width, height),10)+0.5;\n\t\tpadding = config.paddingX||0;\n\t\tgraph += renderer.group(renderer.getLine({x:padding, y: y},{x: width-padding, y: y},'webix_sparklines_origin'));\n\n\t\t// event areas\n\t\tvar evPoints = this._getEventPoints(data, width, height);\n\t\tvar evItems = [];\n\t\tfor( i = 0; i< evPoints.length; i++){\n\t\t\tp = evPoints[i];\n\t\t\tevItems.push(renderer.getRect(p.x, p.y, p.width, p.height,'webix_sparklines_event_area ',{\"webix_area\":i}));\n\t\t}\n\t\tgraph += renderer.group(evItems.join(\"\"));\n\t\treturn  renderer.draw(graph, width, height, 'webix_sparklines_bar_chart'+(config.css?' '+config.css:''));\n\t};\n\tBar.prototype._applyColor = function(renderer,color){\n\t\tvar config = {},\n\t\t\tmap = renderer.styleMap;\n\t\tif(color)\n\t\t\tconfig[map.color] = color;\n\t\treturn webix.html.createCss(config);\n\t};\n\tBar.prototype._getOrigin = function(data, width, height){\n\t\tvar config = this.config;\n\t\tvar y = config.paddingY||0;\n\t\theight = (height||100)-y*2;\n\t\tvar pos = y+height;\n\t\tif(config.origin !== false){\n\t\t\tvar minValue = Math.min.apply(null,data);\n\t\t\tvar maxValue = Math.max.apply(null,data);\n\t\t\tvar origin = config.origin||-0.000001;\n\t\t\tif(origin >= maxValue){\n\t\t\t\tpos = y;\n\t\t\t}\n\t\t\telse if(origin > minValue){\n\t\t\t\tvar unitY = height/(maxValue - minValue);\n\t\t\t\tpos -= unitY*(origin-minValue);\n\t\t\t}\n\t\t}\n\t\treturn pos;\n\t};\n\tBar.prototype._getEventPoints = function(data, width, height){\n\t\tvar result = [];\n\t\tvar x = this.config.paddingX||0;\n\t\tvar y = this.config.paddingY||0;\n\t\twidth = (width||100)-x*2;\n\t\theight = (height||100)-y*2;\n\t\tif(data.length){\n\t\t\tvar unitX = width/data.length;\n\t\t\tfor(var i=0; i < data.length; i++)\n\t\t\t\tresult.push({x: Math.ceil(unitX*i)+x, y: y, height: height, width: unitX});\n\t\t}\n\t\treturn result;\n\t};\n\tBar.prototype.getPoints = function(data, width, height){\n\t\tvar config = this.config;\n\t\tvar minValue = Math.min.apply(null,data);\n\t\tif (config.origin < minValue) \n\t\t\tminValue = config.origin;\n\n\t\tvar maxValue = Math.max.apply(null,data);\n\t\tvar result = [];\n\t\tvar x = config.paddingX;\n\t\tvar y = config.paddingY;\n\t\tvar margin = config.margin;\n\t\tvar barWidth = config.width||20;\n\t\tvar originY = this._getOrigin(data,width,height);\n\t\twidth = (width||100)-x*2;\n\t\theight = (height||100)-y*2;\n\t\tif(data.length){\n\t\t\tvar unitX = width/data.length;\n\t\t\tvar yNum = config.scale || (maxValue - minValue);\n\t\t\tbarWidth = Math.min(unitX-margin,barWidth);\n\t\t\tmargin = unitX-barWidth;\n\t\t\tvar minHeight = 0;\n\t\t\tvar origin = minValue;\n\n\t\t\tif(config.origin !== false && config.origin > minValue)\n\t\t\t\torigin = config.origin||0;\n\t\t\telse\n\t\t\t\tminHeight = config.minHeight;\n\n\t\t\tvar unitY = (height-minHeight)/(yNum?yNum:1);\n\n\t\t\tfor(var i=0; i < data.length; i++){\n\t\t\t\tvar h = Math.ceil(unitY*(data[i]-origin));\n\t\t\t\tresult.push({x: Math.ceil(unitX*i)+x+margin/2, y: originY-(data[i]>=origin?h:0)-minHeight, height: Math.abs(h)+minHeight, width: barWidth});\n\t\t\t}\n\n\t\t}\n\t\treturn result;\n\t};\n\twebix.Sparklines.types[\"bar\"]=Bar;\n})();\n(function(){\n\tvar defaults = {\n\t\tpaddingX: 6,\n\t\tpaddingY: 6,\n\t\tradius: 2,\n\t\tminHeight: 4,\n\t\teventRadius: 8\n\t};\n\tfunction Line(config){\n\t\tthis.config = webix.extend(webix.copy(defaults),config||{},true);\n\t}\n\n\tLine.prototype.draw = function(data, width, height){\n\t\tvar points = this.getPoints(data, width, height);\n\t\tvar config = this.config;\n\t\tvar renderer = webix._SVG;\n\t\tvar styles = config.color?this._applyColor(renderer,config.color):null;\n\t\t// draw line\n\t\tvar path = renderer.definePath(this._getLinePoints(points));\n\t\tvar graph = renderer.group(renderer.getPath(path,'webix_sparklines_line'+(styles?' '+styles.line:'')));\n\t\t// draw items\n\t\tgraph += this._drawItems(renderer, points, config.radius, 'webix_sparklines_item'+(styles?' '+styles.item:''));\n\t\t// draw event items\n\t\tvar eventRadius = Math.min(data.length?(width-2*(config.paddingX||0))/data.length:0,config.eventRadius);\n\t\tgraph += this._drawEventItems(renderer, points, eventRadius);\n\t\treturn  renderer.draw(graph, width, height, \"webix_sparklines_line_chart\"+(config.css?' '+config.css:''));\n\t};\n\tLine.prototype._applyColor = function(renderer,color){\n\t\tvar config = {'line':{},'item':{}},\n\t\t\tmap = renderer.styleMap;\n\t\tif(color){\n\t\t\tconfig.line[map.lineColor] = color;\n\t\t\tconfig.item[map.color] = color;\n\t\t\tfor(var name in config)\n\t\t\t\tconfig[name] = webix.html.createCss(config[name]);\n\t\t}\n\t\treturn config;\n\t};\n\tLine.prototype._drawItems = function(renderer,points,radius,css,attrs){\n\t\tvar items = [];\n\t\tfor(var i = 0; i< points.length; i++){\n\t\t\titems.push(renderer.getCircle(points[i], radius, css,attrs));\n\t\t}\n\t\treturn renderer.group(items.join(\"\"));\n\t};\n\tLine.prototype._drawEventItems = function(renderer,points,radius){\n\t\tvar items = [];\n\t\tfor(var i = 0; i< points.length; i++){\n\t\t\titems.push(renderer.getCircle(points[i], radius, 'webix_sparklines_event_area', {webix_area:i}));\n\t\t}\n\t\treturn renderer.group(items.join(\"\"));\n\t};\n\n\tLine.prototype._getLinePoints = function(points){\n\t\tvar i, type, result =[];\n\t\tfor( i =0; i< points.length; i++){\n\t\t\ttype = i?\"L\":\"M\";\n\t\t\tresult.push([type,points[i]]);\n\t\t}\n\t\treturn result;\n\t};\n\tLine.prototype.getPoints = function(data, width, height) {\n\t\tvar config = this.config;\n\t\tvar minValue = Math.min.apply(null,data);\n\t\tif (typeof config.origin !== \"undefined\")\n\t\t\tminValue = Math.min(config.origin, minValue);\n\n\t\tvar maxValue = Math.max.apply(null,data);\n\t\tvar result = [];\n\t\tvar x = config.paddingX||0;\n\t\tvar y = config.paddingY||0;\n\t\twidth = (width||100)-x*2;\n\t\tvar minHeight = config.minHeight||0;\n\t\theight = (height||100)-y*2;\n\t\tif(data.length){\n\t\t\tif(data.length==1)\n\t\t\t\tresult.push({x: width/2+x, y: height/2+x});\n\t\t\telse{\n\t\t\t\tvar unitX = width/(data.length-1);\n\t\t\t\tvar yNum = config.scale || (maxValue - minValue);\n\t\t\t\tvar unitY = (height- minHeight)/(yNum?yNum:1);\n\t\t\t\tif(!yNum)\n\t\t\t\t\theight /= 2;\n\t\t\t\tfor(var i=0; i < data.length; i++){\n\t\t\t\t\tresult.push({x: Math.ceil(unitX*i)+x, y: height-Math.ceil(unitY*(data[i]-minValue))+y-minHeight});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t};\n\twebix.Sparklines.types[\"line\"] = Line;\n})();\n(function(){\n\tvar defaults = {\n\t\tpaddingY: 2\n\t};\n\n\tfunction Pie(config){\n\t\tthis.config = webix.extend(defaults,config||{},true);\n\t}\n\tPie.prototype._defColorsCursor = 0;\n\tPie.prototype._defColors  = [\n\t\t\"#f55b50\",\"#ff6d3f\",\"#ffa521\",\"#ffc927\",\"#ffee54\",\"#d3e153\",\"#9acb61\",\"#63b967\",\n\t\t\"#21a497\",\"#21c5da\",\"#3ea4f5\",\"#5868bf\",\"#7b53c0\",\"#a943ba\",\"#ec3b77\",\"#9eb0b8\"\n\t];\n\tPie.prototype._getColor = function(i,data){\n\t\tvar count = data.length;\n\t\tvar colorsCount = this._defColors.length;\n\t\tif(colorsCount > count){\n\t\t\tif(i){\n\t\t\t\tif(i < colorsCount - count)\n\t\t\t\t\ti = this._defColorsCursor +2;\n\t\t\t\telse\n\t\t\t\t\ti = this._defColorsCursor+1;\n\t\t\t}\n\t\t\tthis._defColorsCursor = i;\n\t\t}\n\t\telse\n\t\t\ti = i%colorsCount;\n\t\treturn this._defColors[i];\n\t};\n\tPie.prototype.draw = function(data, width, height){\n\t\tvar attrs, graph, i, sectors,\n\t\t\tconfig = this.config,\n\t\t\tcolor = config.color||this._getColor,\n\t\t\tpoints = this.getAngles(data),\n\t\t\trenderer = webix._SVG,\n\t\t\ty = config.paddingY|| 0,\n\t\t\t// radius\n\t\t\tr = height/2 - y,\n\t\t\t// center\n\t\t\tx0 = width/2, y0 = height/2;\n\n\t\t// draw sectors\n\t\tif(typeof color != \"function\")\n\t\t\tcolor = function(){return color;};\n\t\tsectors = \"\";\n\t\tfor( i =0; i < points.length; i++){\n\t\t\tattrs = {};\n\t\t\tattrs[renderer.styleMap['color']] = color.call(this,i,data,this._context);\n\t\t\tsectors += renderer.getSector({x:x0,y:y0},r,points[i][0],points[i][1],'webix_sparklines_sector', attrs);\n\t\t}\n\t\tgraph = renderer.group(sectors);\n\n\t\t// draw event areas\n\t\tsectors = \"\";\n\t\tfor(i =0; i < points.length; i++){\n\t\t\tsectors += renderer.getSector({x:x0,y:y0},r,points[i][0],points[i][1],'webix_sparklines_event_area',{\"webix_area\":i});\n\t\t}\n\t\tgraph += renderer.group(sectors);\n\n\t\treturn  renderer.draw(graph, width, height, 'webix_sparklines_pie_chart'+(config.css?' '+config.css:''));\n\t};\n\tPie.prototype.getAngles = function(data){\n\t\tvar a0 = -Math.PI/ 2, a1,\n\t\t\ti, result = [];\n\n\t\tvar ratios = this._getRatios(data);\n\n\t\tfor( i =0; i < data.length; i++){\n\t\t\ta1= -Math.PI/2+ratios[i]-0.0001;\n\t\t\tresult.push([a0,a1]);\n\t\t\ta0 = a1;\n\t\t}\n\t\treturn result;\n\t};\n\tPie.prototype._getTotalValue = function(data){\n\t\tvar t=0;\n\t\tfor(var i = 0; i < data.length;i++)\n\t\t\tt += data[i]*1;\n\t\treturn  t;\n\t};\n\tPie.prototype._getRatios = function(data){\n\t\tvar i, value,\n\t\t\tratios = [],\n\t\t\tprevSum = 0,\n\t\t\ttotalValue = this._getTotalValue(data);\n\t\tfor(i = 0; i < data.length;i++){\n\t\t\tvalue = data[i]*1;\n\t\t\tratios[i] = Math.PI*2*(totalValue?((value+prevSum)/totalValue):(1/data.length));\n\t\t\tprevSum += value;\n\t\t}\n\t\treturn ratios;\n\t};\n\n\twebix.Sparklines.types[\"pie\"]=Pie;\n})();\n(function(){\n\tvar defaults = {\n\t\tpaddingX: 3,\n\t\tpaddingY: 6,\n\t\tradius: 2,\n\t\tminHeight: 4,\n\t\teventRadius: 8\n\t};\n\n\tfunction Spline(config){\n\t\tthis.config = webix.extend(webix.copy(defaults),config||{},true);\n\t}\n\n\tSpline.prototype.draw = function(data, width, height){\n\t\tvar config = this.config,\n\t\t\tgraph = \"\",\n\t\t \tLine = webix.Sparklines.types.line.prototype,\n\t\t\tpoints = this.getPoints(data, width, height),\n\t\t\trenderer = webix._SVG,\n\t\t\tstyles = config.color?this._applyColor(renderer,config.color):null;\n\n\t\t// draw spline\n\t\tgraph += renderer.group(renderer.getCurve(points, 'webix_sparklines_line'+(styles?' '+styles.line:'')));\n\n\t\tvar linePoints = Line.getPoints.call(this,data, width, height);\n\t\t// draw items\n\t\tgraph += Line._drawItems(renderer, linePoints, config.radius, 'webix_sparklines_item'+(styles?' '+styles.item:''));\n\t\t// draw event items\n\t\tvar eventRadius = Math.min(data.length?(width-2*(config.paddingX||0))/data.length:0,config.eventRadius);\n\t\tgraph += Line._drawEventItems(renderer, linePoints, eventRadius);\n\t\treturn  renderer.draw(graph, width, height,\"webix_sparklines_line_chart\"+(config.css?' '+config.css:''));\n\t};\n\tSpline.prototype._applyColor = function(renderer,color){\n\t\tvar config = {'line':{},'item':{}},\n\t\t\tmap = renderer.styleMap;\n\t\tif(color){\n\t\t\tconfig.line[map.lineColor] = color;\n\t\t\tconfig.item[map.color] = color;\n\t\t\tfor(var name in config)\n\t\t\t\tconfig[name] = webix.html.createCss(config[name]);\n\t\t}\n\t\treturn config;\n\t};\n\tSpline.prototype.getPoints = function(data, width, height){\n\t\tvar i, points, px, py,\n\t\t\tresult = [], x = [], y =[],\n\t\t\tLine = webix.Sparklines.types.line.prototype;\n\n\t\tpoints = Line.getPoints.call(this, data, width, height);\n\n\t\tfor(i = 0; i< points.length; i++){\n\t\t\tx.push(points[i].x);\n\t\t\ty.push(points[i].y);\n\t\t}\n\t\tpx = this._getControlPoints(x);\n\t\tpy = this._getControlPoints(y);\n\t\t/*updates path settings, the browser will draw the new spline*/\n\t\tfor ( i=0;i<points.length-1;i++){\n\t\t\tresult.push([points[i],{x:px[0][i],y:py[0][i]},{x:px[1][i],y:py[1][i]},points[i+1]]);\n\t\t}\n\t\treturn result;\n\n\t};\n\t/* code from https://www.particleincell.com/2012/bezier-splines/ */\n\tSpline.prototype._getControlPoints = function(points){\n\t\tvar a=[], b=[], c=[], r=[], p1=[], p2=[],\n\t\t\ti, m, n = points.length-1;\n\n\t\ta[0]=0;\n\t\tb[0]=2;\n\t\tc[0]=1;\n\t\tr[0] = points[0] + 2*points[1];\n\n\t\tfor (i = 1; i < n - 1; i++){\n\t\t\ta[i]=1;\n\t\t\tb[i]=4;\n\t\t\tc[i]=1;\n\t\t\tr[i] = 4 * points[i] + 2 * points[i+1];\n\t\t}\n\n\t\ta[n-1]=2;\n\t\tb[n-1]=7;\n\t\tc[n-1]=0;\n\t\tr[n-1] = 8*points[n-1]+points[n];\n\n\t\tfor (i = 1; i < n; i++){\n\t\t\tm = a[i]/b[i-1];\n\t\t\tb[i] = b[i] - m * c[i - 1];\n\t\t\tr[i] = r[i] - m*r[i-1];\n\t\t}\n\n\t\tp1[n-1] = r[n-1]/b[n-1];\n\t\tfor (i = n - 2; i >= 0; --i)\n\t\t\tp1[i] = (r[i] - c[i] * p1[i+1]) / b[i];\n\n\t\tfor (i=0;i<n-1;i++)\n\t\t\tp2[i]=2*points[i+1]-p1[i+1];\n\n\t\tp2[n-1]=0.5*(points[n]+p1[n-1]);\n\n\t\treturn [p1, p2];\n\t};\n\n\twebix.Sparklines.types[\"spline\"] = Spline;\n\n\tvar defaultsArea = {\n\t\tpaddingX: 3,\n\t\tpaddingY: 6,\n\t\tradius: 1,\n\t\tminHeight: 4,\n\t\teventRadius: 8\n\t};\n\t// spline area\n\tfunction SplineArea(config){\n\t\tthis.config = webix.extend(webix.copy(defaultsArea),config||{},true);\n\t}\n\tSplineArea.prototype = webix.copy(Spline.prototype);\n\tSplineArea.prototype.draw = function(data, width, height){\n\t\tvar config = this.config,\n\t\t\tLine = webix.Sparklines.types.line.prototype,\n\t\t\trenderer = webix._SVG,\n\t\t\tstyles = config.color?this._applyColor(renderer,config.color):null;\n\n\t\tvar points = this.getPoints(data, width, height);\n\t\t// draw area\n\t\tvar linePoints = points.splice(points.length - 3, 3);\n\t\tvar linePath = renderer._linePoints(linePoints);\n\t\tlinePath[0][0] = \"L\";\n\t\tvar areaPoints = renderer._curvePoints(points).concat(linePath);\n\t\tvar graph = renderer.group(renderer.getPath(renderer.definePath(areaPoints),'webix_sparklines_area'+(styles?' '+styles.area:''), true));\n\t\t// draw line\n\t\tgraph += renderer.group(renderer.getPath(renderer.definePath(renderer._curvePoints(points)),'webix_sparklines_line'+(styles?' '+styles.line:'')));\n\n\t\tvar itemPoints = Line.getPoints.call(this,data, width, height);\n\t\t// draw items\n\t\tgraph += Line._drawItems(renderer, itemPoints, config.radius, 'webix_sparklines_item'+(styles?' '+styles.item:''));\n\t\t// draw event items\n\t\tvar eventRadius = Math.min(data.length?(width-2*(config.paddingX||0))/data.length:0,config.eventRadius);\n\t\tgraph += Line._drawEventItems(renderer, itemPoints, eventRadius);\n\t\treturn  renderer.draw(graph, width, height, \"webix_sparklines_splinearea_chart\"+(config.css?' '+config.css:''));\n\t};\n\tSplineArea.prototype._applyColor = function(renderer,color){\n\t\tvar config = {'area': {}, 'line':{},'item':{}},\n\t\t\tmap = renderer.styleMap;\n\t\tif(color){\n\t\t\tconfig.area[map.color] = renderer.setOpacity(color,0.2);\n\t\t\tconfig.line[map.lineColor] = color;\n\t\t\tconfig.item[map.color] = color;\n\t\t\tfor(var name in config)\n\t\t\t\tconfig[name] = webix.html.createCss(config[name]);\n\t\t}\n\t\treturn config;\n\t};\n\tSplineArea.prototype.getPoints = function(data, width, height){\n\t\tvar points = Spline.prototype.getPoints.call(this, data, width, height);\n\t\tvar x = this.config.paddingX || 0;\n\t\tvar y = this.config.paddingY || 0;\n\t\tpoints.push({x: width - x, y: height - y},{x: x, y: height - y},{x: x, y: points[0][0].y});\n\t\treturn points;\n\t};\n\twebix.Sparklines.types[\"splineArea\"] = SplineArea;\n})();\n\n\n\nwebix.extend(webix.ui.datatable, {\n\t_prePrint:function(options, htmlOnly){\n\t\tif(options.scroll && !htmlOnly) return true;\n\n\t\toptions.header = webix.isUndefined(options.header)?(this.config.header?true:false):options.header;\n\t\toptions.footer = webix.isUndefined(options.footer)?(this.config.footer?true:false):options.footer;\n\t\toptions.xCorrection = options.xCorrection || 0; //spreadsheet\n\t},\n\t_findIndex:function(arr, func){\n\t\tvar result = -1;\n\t\tfor(var i =0; result<0 && i < arr.length; i++){\n\t\t\tif(func(arr[i]))\n\t\t\t\tresult = i;\n\t\t}\n\t\treturn result;\n\t},\n\t_getTableHeader:function(base, columns, group){\n\n\t\tvar spans = {}, start = 0;\n\n\t\tbase.forEach(webix.bind(function(tableArray, tid){\n\t\t\tvar row = tableArray[0], headerArray = [], length = row.length;\n\n\t\t\trow.forEach(webix.bind(function(cell, cid){\n\t\t\t\tvar column = columns[cid+start];\n\n\t\t\t\tfor(var h  = 0; h< column[group].length; h++){\n\t\t\t\t\tvar header = column[group][h];\n\n\t\t\t\t\tif(!header && !(spans[tid] && spans[tid][h])) continue;\n\t\t\t\t\t\n\t\t\t\t\theader = webix.copy(header || {text:\"\"});\n\t\t\t\t\t\n\t\t\t\t\tif(spans[tid] && spans[tid][h] && cid ===0){\n\t\t\t\t\t\theader.colspan = spans[tid][h];\n\t\t\t\t\t\tspans[tid][h] = 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(header.colspan){\n\t\t\t\t\t\tvar colspan = Math.min(header.colspan, (length-cid));\n\t\t\t\t\t\tspans[tid+1] = spans[tid+1] || {};\n\t\t\t\t\t\tspans[tid+1][h] = header.colspan-colspan;\n\t\t\t\t\t\theader.colspan = colspan;\n\t\t\t\t\t}\n\t\t\t\t\tif(header.rowspan && length === 1){\n\t\t\t\t\t\theader.height = (header.height || this.config.headerRowHeight)*header.rowspan;\n\t\t\t\t\t\theader.rowspan = null;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar hcell = {\n\t\t\t\t\t\ttxt:header.text || (header.contentId?this.getHeaderContent(header.contentId).getValue():\"\"),\n\t\t\t\t\t\tclassName:\"webix_hcell \"+\"webix_\"+group+\"_cell \"+(header.css || \"\"),\n\t\t\t\t\t\tstyle:{\n\t\t\t\t\t\t\theight:(header.height || this.config.headerRowHeight)+\"px\",\n\t\t\t\t\t\t\twidth:header.colspan?\"auto\":column.width + \"px\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tspan:(header.colspan || header.rowspan) ? {colspan:header.colspan || 1, rowspan:header.rowspan || 1}:null\n\t\t\t\t\t};\n\t\t\t\t\theaderArray[h] = headerArray[h] || [];\n\t\t\t\t\theaderArray[h][cid] = hcell;\n\t\t\t\t}\n\t\t\t}, this));\n\t\t\tif(group ==\"header\")\n\t\t\t\tbase[tid] = headerArray.concat(tableArray);\n\t\t\telse\n\t\t\t\tbase[tid] = tableArray.concat(headerArray);\n\t\t\tstart+=length;\n\t\t}, this));\n\n\t\treturn base;\n\t},\n\t_getTableArray:function (options, base, start){ \n\n\t\tvar columns = this.config.columns;\n\t\tvar sel = this.getSelectedId(true);\n\t\tvar maxWidth = this._getPageWidth(options);\n\t\t\n\t\tvar rightRestriction = 0;\n\t\tvar bottomRestriction = 0;\n\t\tvar tableArray = [];\n\t\tvar newTableStart = 0;\n\n\t\tstart = start || (0 + options.xCorrection);\n\t\tbase = base || [];\n\n\t\tthis.eachRow(webix.bind(function(row){\n\t\t\tvar width = 0;\n\t\t\tvar rowItem = this.getItem(row);\n\t\t\tvar rowIndex = this.getIndexById(row);\n\n\t\t\tvar colrow = [];\n\t\t\tvar datarow = false;\n\n\t\t\tfor(var c=start; c<columns.length; c++){\n\t\t\t\tvar column = columns[c].id;\n\t\t\t\tvar colIndex = this.getColumnIndex(column)-start;\n\n\t\t\t\tif(columns[c]){\n\t\t\t\t\twidth += columns[c].width;\n\n\t\t\t\t\tif(width > maxWidth && c>start){ // 'c>start' ensures that a single long column will have to fit the page\n\t\t\t\t\t\tnewTableStart = c; break; }\n\n\t\t\t\t\tif(options.data !==\"selection\" || (options.data==\"selection\" && this._findIndex(sel, function(obj){\n\t\t\t\t\t\treturn obj.column == column && obj.row == row;\n\t\t\t\t\t})!==-1)){\n\n\t\t\t\t\t\tvar span = this.getSpan(row, column);\n\t\t\t\t\t\t//check span from previous table\n\t\t\t\t\t\tif(span && this.getColumnIndex(column) === start){\n\t\t\t\t\t\t\tvar spanStart = this.getColumnIndex(span[1]);\n\t\t\t\t\t\t\tif(spanStart < start){\n\t\t\t\t\t\t\t\tspan[2] = span[2] - (start-spanStart);\n\t\t\t\t\t\t\t\tspan[4] = span[4] ? span[4] : (rowItem[span[1]] ? this.getText(row, span[1]) : null);\n\t\t\t\t\t\t\t\tspan[1] = column;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\tif(!span  || (span && span[0] == row && span[1] == column)){\n\t\t\t\t\t\t\tvar cellValue = span && span[4] ? span[4] : (rowItem[column] ? this.getText(row, column) : \"\");\n\t\t\t\t\t\t\tvar className = this.getCss(row, column)+\" \"+(columns[c].css || \"\")+(span? (\" webix_dtable_span \"+ (span[5] || \"\")):\"\" );\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar style  = {\n\t\t\t\t\t\t\t\theight:span && span[3] > 1? \"auto\": ((rowItem.$height || this.config.rowHeight) + \"px\"),\n\t\t\t\t\t\t\t\twidth: span && span [2] > 1? \"auto\": columns[c].width + \"px\"\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tcolrow.push({\n\t\t\t\t\t\t\t\ttxt: cellValue, className: className, style: style,\n\t\t\t\t\t\t\t\tspan: (span ? {colspan:span[2], spanStart:this.getColumnIndex(span[1]), rowspan:span[3]}:null)\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tif (cellValue) {\n\t\t\t\t\t\t\t\trightRestriction = Math.max(colIndex+1, rightRestriction);\n\t\t\t\t\t\t\t\tbottomRestriction = Math.max(rowIndex+1, bottomRestriction);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdatarow = datarow || !!cellValue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(span){\n\t\t\t\t\t\t\tcolrow.push({$inspan:true});\n\t\t\t\t\t\t\trightRestriction = Math.max(colIndex+1, rightRestriction);\n\t\t\t\t\t\t\tbottomRestriction = Math.max(rowIndex+1, bottomRestriction);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!options.skiprows || datarow)\n\t\t\t\ttableArray.push(colrow);\n\t\t}, this));\n\n\t\tif(bottomRestriction && rightRestriction){\n\t\t\tif(options.trim){\n\t\t\t\ttableArray.length = bottomRestriction;\n\t\t\t\ttableArray = tableArray.map(function(item){\n\t\t\t\t\tfor(var i = item.length-1; i>=0; i--){\n\t\t\t\t\t\tif(item[i].span && item[i].span.colspan){\n\t\t\t\t\t\t\titem[i].span.colspan = Math.min(item[i].span.colspan, item.length-i);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\titem.length = rightRestriction;\n\t\t\t\t\treturn item;\n\t\t\t\t});\n\t\t\t}\t\n\t\t\tbase.push(tableArray);\n\t\t}\n\n\t\tif(newTableStart) \n\t\t\tthis._getTableArray(options, base, newTableStart);\n\t\telse{\n\t\t\tif(options.header)\n\t\t\t\tbase = this._getTableHeader(base, columns, \"header\");\n\t\t\tif(options.footer)\n\t\t\t\tbase = this._getTableHeader(base, columns, \"footer\");\n\t\t}\n\n\t\treturn base;\n\t},\n\t_getTableHTML:function(tableData, options){\n\t\t\n\t\tvar container = webix.html.create(\"div\");\n\n\t\ttableData.forEach(webix.bind(function(table, i){\n\n\t\t\tvar tableHTML = webix.html.create(\"table\", {\n\t\t\t\t\"class\":\"webix_table_print \"+this.$view.className+(options.borderless?\" borderless\":\"\"),\n\t\t\t\t\"style\":\"border-collapse:collapse\"\n\t\t\t});\n\n\t\t\ttable.forEach(function(row){\n\t\t\t\tvar tr = webix.html.create(\"tr\");\n\n\t\t\t\trow.forEach(function(cell, i){\n\t\t\t\t\tif(!cell.$inspan){\n\t\t\t\t\t\tvar td = webix.html.create(\"td\");\n\n\t\t\t\t\t\ttd.innerHTML = cell.txt;\n\t\t\t\t\t\ttd.className = cell.className;\n\t\t\t\t\t\t\n\t\t\t\t\t\tfor(var key in cell.style)\n\t\t\t\t\t\t\ttd.style[key] = cell.style[key];\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(cell.span){\n\t\t\t\t\t\t\ttd.colSpan = cell.span.colspan;\n\t\t\t\t\t\t\ttd.rowSpan = cell.span.rowspan;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttr.appendChild(td);\t\n\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t});\n\t\t\t\ttableHTML.appendChild(tr);\n\t\t\t});\n\t\t\tcontainer.appendChild(tableHTML);\n\n\t\t\tif(i+1 < tableData.length){\n\t\t\t\tvar br = webix.html.create(\"DIV\", {\"class\":\"webix_print_pagebreak\"});\n\t\t\t\tcontainer.appendChild(br);\n\t\t\t}\n\t\t\t\n\t\t}, this));\n\n\t\treturn container;\n\t}\n});\n\nwebix.extend(webix.ui.datatable, webix.CustomPrint);\n\n\n\n\n\n\nwebix.TreeTableClick = {};\n\nwebix.TreeTablePaste = {\n\tinsert: function(data) {\n\t\tvar parent = this.getSelectedId(true, true);\n\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\tvar item = {};\n\t\t\tfor (var j = 0; j < this._settings.columns.length; j++) {\n\t\t\t\titem[this._settings.columns[j].id] = data[i][j] || \"\";\n\t\t\t}\n\t\t\tif (!webix.isUndefined(item.id) && this.exists(item.id))\n\t\t\t\titem.id = webix.uid();\n\t\t\tthis.add(item, null, parent[0]);\n\t\t}\n\t}\n};\n\nwebix.protoUI({\n\tname:\"treetable\",\n\t$init:function(){\n\t\twebix.extend(this.data, webix.TreeStore, true);\n\t\twebix.extend(this.type, webix.TreeType);\n\t\twebix.extend(this,  webix.TreeDataMove, true);\n\n\t\tfor (var key in webix.TreeClick)\n\t\t\tif (!this.on_click[key])\n\t\t\t\tthis.on_click[key] = this._unwrap_id(webix.TreeClick[key]);\n\t\t\n\t\tthis.type.treetable = webix.template(\"{common.space()}{common.icon()} {common.folder()}\");\n\t\tthis.type.treecheckbox = function(obj, common){\n\t\t\tif (obj.indeterminate && !obj.nocheckbox)\n\t\t\t\treturn \"<div class='webix_tree_checkbox webix_indeterminate'></div>\";\n\t\t\telse\n\t\t\t\treturn webix.TreeType.checkbox.apply(this, arguments);\n\t\t};\n\t\n\t\tthis.data.provideApi(this,true);\n\n\t\tthis._viewobj.setAttribute(\"role\", \"treegrid\");\n\n\t},\n\t$exportView:function(options){\n\t\twebix.extend(options, { filterHTML: true });\n\t\treturn this;\n\t},\n\t_drag_order_complex:false,\n\t_unwrap_id:function(original){\n\t\treturn function (e,id){\n\t\t\tid = id.row;\n\t\t\treturn original.call(this,e,id);\n\t\t};\n\t},\n\tgetState:function(){\n\t\tvar state = webix.DataState.getState.call(this);\n\t\twebix.extend(state, webix.TreeAPI.getState.call(this));\n\t\treturn state;\n\t},\n\tsetState:function(state){\n\t\tif (webix.TreeAPI.setState.call(this, state)){\n\t\t\t//run grid-state only when tree component was fully loaded \n\t\t\twebix.DataState.setState.call(this, state);\t\n\t\t}\n\t},\n\tclipboard_setter: function(value) {\n\t\twebix.extend(this._paste, webix.TreeTablePaste);\n\t\treturn webix.TablePaste.clipboard_setter.call(this, value);\n\t},\n\t_run_load_next:function(conf, direction){\n\t\tfor (var i=0; i<conf.start; i++){\n\t\t\tvar id = this.data.order[i];\n\t\t\tif (id && this.getItem(id).$level != 1)\n\t\t\t\tconf.start--;\n\t\t}\n\t\treturn webix.ui.datatable.prototype._run_load_next.call(this, conf, direction);\n\t},\n}, webix.TreeAPI, webix.TreeStateCheckbox, webix.TreeDataLoader, webix.ui.datatable);\n\n\n\n\n\nwebix.Canvas = webix.proto({\n\t$init:function(container){\n\t\tthis._canvas_labels = [];\n\t\tthis._canvas_series =  (!webix.isUndefined(container.series)?container.series:container.name);\n\t\tthis._obj = webix.toNode(container.container||container);\n\t\tvar width = container.width*(window.devicePixelRatio||1);\n\t\tvar height = container.height*(window.devicePixelRatio||1);\n\t\tvar style = container.style||\"\";\n\t\tstyle += \";width:\"+container.width+\"px;height:\"+container.height+\"px;\";\n\t\tthis._prepareCanvas(container.name, style ,width, height);\n\t},\n\t_prepareCanvas:function(name,style,x,y){\n\t\t//canvas has the same size as master object\n\t\tthis._canvas = webix.html.create(\"canvas\",{ title:name, width:x, height:y, canvas_id:name, style:(style||\"\")});\n\t\tthis._obj.appendChild(this._canvas);\n\t\t//use excanvas in IE\n\t\tif (!this._canvas.getContext){\n\t\t\tif (webix.env.isIE){\n\t\t\t\twebix.require(\"legacy/excanvas/excanvas.js\", true);\t//sync loading\n\t\t\t\tG_vmlCanvasManager.init_(document);\n\t\t\t\tG_vmlCanvasManager.initElement(this._canvas);\n\t\t\t} else\t//some other not supported browser\n\t\t\t\twebix.assert(this._canvas.getContext,\"Canvas is not supported in the browser\");\n\t\t}\n\t\treturn this._canvas;\n\t}, \n\tgetCanvas:function(context){\n\t\tvar ctx = (this._canvas||this._prepareCanvas(this._contentobj)).getContext(context||\"2d\");\n\t\tif(!this._webixDevicePixelRatio){\n\t\t\tthis._webixDevicePixelRatio = true;\n\t\t\tctx.scale(window.devicePixelRatio||1, window.devicePixelRatio||1);\n\t\t}\n\t\treturn ctx;\n\t},\n\t_resizeCanvas:function(x, y){\n\t\tif (this._canvas){\n\t\t\tthis._canvas.setAttribute(\"width\", x*(window.devicePixelRatio||1));\n\t\t\tthis._canvas.setAttribute(\"height\", y*(window.devicePixelRatio||1));\n\t\t\tthis._canvas.style.width = x+\"px\";\n\t\t\tthis._canvas.style.height = y+\"px\";\n\t\t\tthis._webixDevicePixelRatio = false;\n\t\t}\n\t},\n\trenderText:function(x,y,text,css,w){\n\t\tif (!text) return; //ignore empty text\n\t\tif (w) w = Math.max(w,0);\n\t\tif (y) y = Math.max(y,0);\n\t\tvar t = webix.html.create(\"DIV\",{\n\t\t\t\"class\":\"webix_canvas_text\"+(css?(\" \"+css):\"\"),\n\t\t\t\"style\":\"left:\"+x+\"px; top:\"+y+\"px;\",\n\t\t\t\"aria-hidden\":\"true\"\n\t\t},text);\n\t\tthis._obj.appendChild(t);\n\t\tthis._canvas_labels.push(t); //destructor?\n\t\tif (w)\n\t\t\tt.style.width = w+\"px\";\n\t\treturn t;\n\t},\n\trenderTextAt:function(valign,align, x,y,t,c,w){\n\t\tvar text=this.renderText.call(this,x,y,t,c,w);\n\t\tif (text){\n\t\t\tif (valign){\n\t\t\t\tif(valign == \"middle\")\n\t\t\t\t\ttext.style.top = parseInt(y-text.offsetHeight/2,10) + \"px\";\n\t\t\t\telse\n\t\t\t\t\ttext.style.top = y-text.offsetHeight + \"px\";\n\t\t\t}\n\t\t\tif (align){\n\t\t\t\tif(align == \"left\")\n\t\t\t\t\ttext.style.left = x-text.offsetWidth + \"px\";\n\t\t\t\telse\n\t\t\t\t\ttext.style.left = parseInt(x-text.offsetWidth/2,10) + \"px\";\n\t\t\t}\n\t\t}\n\t\treturn text;\n\t},\n\tclearCanvas:function(skipMap){\n\t\tvar areas=[], i;\n\n\t\twebix.html.remove(this._canvas_labels);\n\t\tthis._canvas_labels = [];\n\n\t\tif (!skipMap&&this._obj._htmlmap){\n\n\t\t\t//areas that correspond this canvas layer\n\t\t\tareas = this._getMapAreas();\n\t\t\t//removes areas of this canvas\n\t\t\twhile(areas.length){\n\t\t\t\tareas[0].parentNode.removeChild(areas[0]);\n\t\t\t\tareas.splice(0,1);\n\t\t\t}\n\t\t\tareas = null;\n\n\t\t\t//removes _htmlmap object if all its child nodes are removed\n\t\t\tif(!this._obj._htmlmap.getElementsByTagName(\"AREA\").length){\n\t\t\t\tthis._obj._htmlmap.parentNode.removeChild(this._obj._htmlmap);\n\t\t\t\tthis._obj._htmlmap = null;\n\t\t\t}\n\n\t\t}\n\t\t//FF breaks, when we are using clear canvas and call clearRect without parameters\n\t\tthis.getCanvas().clearRect(0,0,this._canvas.offsetWidth, this._canvas.offsetHeight);\n\t},\n\ttoggleCanvas:function(){\n\t\tthis._toggleCanvas(this._canvas.style.display==\"none\");\n\t},\n\tshowCanvas:function(){\n\t\tthis._toggleCanvas(true);\n\t},\n\thideCanvas:function(){\n\t\tthis._toggleCanvas(false);\n\t},\n\t_toggleCanvas:function(show){\n\t\tvar areas, i;\n\n\t\tfor(i=0; i < this._canvas_labels.length;i++)\n\t\t\tthis._canvas_labels[i].style.display = (show?\"\":\"none\");\n\n\t\tif (this._obj._htmlmap){\n\t\t\tareas = this._getMapAreas();\n\t\t\tfor( i = 0; i < areas.length; i++){\n\t\t\t\tif(show)\n\t\t\t\t\tareas[i].removeAttribute(\"disabled\");\n\t\t\t\telse\n\t\t\t\t\tareas[i].setAttribute(\"disabled\",\"true\");\n\t\t\t}\n\t\t}\n\t\t//FF breaks, when we are using clear canvas and call clearRect without parameters\n\t\tthis._canvas.style.display = (show?\"\":\"none\");\n\t},\n\t_getMapAreas:function(){\n\t\tvar res = [], areas, i;\n\t\tareas = this._obj._htmlmap.getElementsByTagName(\"AREA\");\n\t\tfor(i = 0; i < areas.length; i++){\n\t\t\tif(areas[i].getAttribute(\"userdata\") == this._canvas_series){\n\t\t\t\tres.push(areas[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn res;\n\t}\n});\n\n\n\n\n\n\n\nwebix.color = {\n\t_toHex:[\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"A\",\"B\",\"C\",\"D\",\"E\",\"F\"],\n\ttoHex:function(number, length){\n\t\tnumber=parseInt(number,10);\n\t\tvar str = \"\";\n\t\t\twhile (number>0){\n\t\t\t\tstr=this._toHex[number%16]+str;\n\t\t\t\tnumber=Math.floor(number/16);\n\t\t\t}\n\t\t\twhile (str.length <length)\n\t\t\t\tstr = \"0\"+str;\n\t\treturn str;\n\t},\n\thexToDec:function(hex){\n\t\treturn parseInt(hex, 16);\n\t},\n\ttoRgb:function(rgb){\n\t\tvar r,g,b,rgbArr;\n\t\tif (typeof(rgb) != 'string') {\n\t\t\tr = rgb[0];\n\t\t\tg = rgb[1];\n\t\t\tb = rgb[2];\n\t\t} else if (rgb.indexOf('rgb')!=-1) {\n\t\t\trgbArr = rgb.substr(rgb.indexOf(\"(\")+1,rgb.lastIndexOf(\")\")-rgb.indexOf(\"(\")-1).split(\",\");\n\t\t\tr = rgbArr[0];\n\t\t\tg = rgbArr[1];\n\t\t\tb = rgbArr[2];\n\t\t} else {\n\t\t\tif (rgb.substr(0, 1) == '#') {\n\t\t\t\trgb = rgb.substr(1);\n\t\t\t}\n\t\t\tr = this.hexToDec(rgb.substr(0, 2));\n\t\t\tg = this.hexToDec(rgb.substr(2, 2));\n\t\t\tb = this.hexToDec(rgb.substr(4, 2));\n\t\t}\n\t\tr = (parseInt(r,10)||0);\n\t\tg = (parseInt(g,10)||0);\n\t\tb = (parseInt(b,10)||0);\n\t\tif (r < 0 || r > 255)\n\t\t\tr = 0;\n\t\tif (g < 0 || g > 255)\n\t\t\tg = 0;\n\t\tif (b < 0 || b > 255)\n\t\t\tb = 0;\n\t\treturn [r,g,b];\n\t},\n\thsvToRgb:function(h, s, v){\n\t\tvar hi,f,p,q,t,r,g,b;\n\t\thi = Math.floor((h/60))%6;\n\t\tf = h/60-hi;\n\t\tp = v*(1-s);\n\t\tq = v*(1-f*s);\n\t\tt = v*(1-(1-f)*s);\n\t\tr = 0;\n\t\tg = 0;\n\t\tb = 0;\n\t\tswitch(hi) {\n\t\t\tcase 0:\n\t\t\t\tr = v; g = t; b = p;\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tr = q; g = v; b = p;\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tr = p; g = v; b = t;\n\t\t\t\t break;\n\t\t\tcase 3:\n\t\t\t\tr = p; g = q; b = v;\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\tr = t; g = p; b = v;\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\tr = v; g = p; b = q;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\tr = Math.floor(r*255);\n\t\tg = Math.floor(g*255);\n\t\tb = Math.floor(b*255);\n\t\treturn [r, g, b];\n\t},\n\trgbToHsv:function(r, g, b){\n\t\tvar r0,g0,b0,min0,max0,s,h,v;\n\t\tr0 = r/255;\n\t\tg0 = g/255;\n\t\tb0 = b/255;\n\t\tmin0 = Math.min(r0, g0, b0);\n\t\tmax0 = Math.max(r0, g0, b0);\n\t\th = 0;\n\t\ts = max0===0?0:(1-min0/max0);\n\t\tv = max0;\n\t\tif (max0 == min0) {\n\t\t\th = 0;\n\t\t} else if (max0 == r0 && g0>=b0) {\n\t\t\th = 60*(g0 - b0)/(max0 - min0)+0;\n\t\t} else if (max0 == r0 && g0 < b0) {\n\t\t\th = 60*(g0 - b0)/(max0 - min0)+360;\n\t\t} else if (max0 == g0) {\n\t\t\th = 60*(b0 - r0)/(max0-min0)+120;\n\t\t} else if (max0 == b0) {\n\t\t\th = 60*(r0 - g0)/(max0 - min0)+240;\n\t\t}\n\t\treturn [h, s, v];\n\t}\n};\n\n\n\n\n\n\nwebix.HtmlMap = webix.proto({\n\t$init:function(key){\n\t\tthis._id = \"map_\"+webix.uid();\n\t\tthis._key = key;\n\t\tthis._map = [];\n\t\tthis._areas = [];\n\t},\n\taddRect: function(id,points,userdata) {\n\t\tthis._createMapArea(id,\"RECT\",points,userdata);\n\t},\n\taddPoly: function(id,points,userdata) {\n\t\tthis._createMapArea(id,\"POLY\",points,userdata);\n\t},\n\t_createMapArea:function(id,shape,coords,userdata){\n\t\tvar extra_data = \"\";\n\t\tif(arguments.length==4) \n\t\t\textra_data = \"userdata='\"+userdata+\"'\";\n\t\tthis._map.push(\"<area \"+this._key+\"='\"+id+\"' shape='\"+shape+\"' coords='\"+coords.join()+\"' \"+extra_data+\"></area>\");\n\t\tthis._areas.push({index: userdata, points:coords});\n\n\t},\n\taddSector:function(id,alpha0,alpha1,x,y,R,ky,userdata){\n\t\tvar points = [];\n\t\tpoints.push(x);\n\t\tpoints.push(Math.floor(y*ky)); \n\t\tfor(var i = alpha0; i < alpha1; i+=Math.PI/18){\n\t\t\tpoints.push(Math.floor(x+R*Math.cos(i)));\n\t\t\tpoints.push(Math.floor((y+R*Math.sin(i))*ky));\n\t\t}\n\t\tpoints.push(Math.floor(x+R*Math.cos(alpha1)));\n\t\tpoints.push(Math.floor((y+R*Math.sin(alpha1))*ky));\n\t\tpoints.push(x);\n\t\tpoints.push(Math.floor(y*ky)); \n\t\t\n\t\treturn this.addPoly(id,points,userdata);\n\t},\n\thide:function(obj, data, mode){\n\t\tif (obj.querySelectorAll){\n\t\t\tvar nodes = obj.querySelectorAll(\"area[userdata=\\\"\"+data+\"\\\"]\");\n\t\t\tfor (var i = 0; i < nodes.length; i++)\n\t\t\t\tnodes[i].style.display = mode?\"none\":\"\";\n\t\t}\n\t},\n\trender:function(obj){\n\t\tvar d = webix.html.create(\"DIV\");\n\t\td.style.cssText=\"position:absolute; width:100%; height:100%; top:0px; left:0px;\";\n\t\tobj.appendChild(d);\n\t\tvar src = webix.env.isIE?\"\":\"src='data:image/gif;base64,R0lGODlhEgASAIAAAP///////yH5BAUUAAEALAAAAAASABIAAAIPjI+py+0Po5y02ouz3pwXADs='\";\n\t\td.innerHTML=\"<map id='\"+this._id+\"' name='\"+this._id+\"'>\"+this._map.join(\"\\n\")+\"</map><img \"+src+\" class='webix_map_img' usemap='#\"+this._id+\"'>\";\n\t\t\n\t\tobj._htmlmap = d; //for clearing routine\n\t\t\n\t\tthis._map = [];\n\t}\n});\n\n\n\nwebix.protoUI({\n\tname:\"chart\",\n\t$init:function(config){\n\t\tthis._series = [this._settings];\n\t\tthis._legend_labels = [];\n\t\tthis._contentobj.className += \" webix_chart\";\n\t\tthis.$ready.push(this._after_init_call);\n\t\t/*preset*/\n\t\tif(config.preset){\n\t\t\tthis._definePreset(config);\n\t\t}\n\n\t\t// move series to end of configuration properties hash\n\t\t// so it will be parsed after other settings\n\t\tif(config.series){\n\t\t\tvar series = config.series;\n\t\t\tdelete config.series;\n\t\t\tconfig.series = series;\n\t\t}\n\n\t\tthis.attachEvent(\"onMouseMove\",this._switchSeries);\n\n\t\tthis.data.provideApi(this, true);\n\t},\n\t_after_init_call:function(){\n\t\tthis.data.attachEvent(\"onStoreUpdated\",webix.bind(function(){\n\t\t\tthis.render.apply(this,arguments);\n\t\t},this));\n\t},\n\tdefaults:{\n\t\tariaLabel:\"chart\",\n        color:\"default\",\n\t\talpha:\"1\",\n\t\tlabel:false,\n\t\tvalue:\"{obj.value}\",\n\t\tpadding:{},\n\t\ttype:\"pie\",\n\t\tlineColor:\"#ffffff\",\n\t\tcant:0.5,\n\t\tbarWidth: 30,\n\t\tline:{\n            width:2,\n\t\t\tcolor:\"#1293f8\"\n        },\n\t\titem:{\n\t\t\tradius:3,\n\t\t\tborderColor:\"#636363\",\n            borderWidth:1,\n            color: \"#ffffff\",\n            alpha:1,\n            type:\"r\",\n            shadow:false\n\t\t},\n\t\tshadow:true,\n\t\tgradient:false,\n\t\tborder:true,\n\t\tlabelOffset: 20,\n\t\torigin:\"auto\",\n\t\tscale: \"linear\"\n    },\n\t_id:\"webix_area_id\",\n\ton_click:{\n\t\twebix_chart_legend_item: function(e,id,obj){\n\t\t\tvar series = obj.getAttribute(\"series_id\");\n\t\t\tif(this.callEvent(\"onLegendClick\",[e,series,obj])){\n\t\t\t\tvar config = this._settings;\n\t\t\t\tvar values = config.legend.values;\n\t\t\t\tvar toggle = (values&&values[series].toggle)||config.legend.toggle;\n\t\t\t\tif((typeof series != \"undefined\")&&this._series.length>1){\n\t\t\t\t\t// hide action\n\t\t\t\t\tif(toggle){\n\t\t\t\t\t\tif(obj.className.indexOf(\"hidden\")!=-1){\n\t\t\t\t\t\t\tthis.showSeries(series);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tthis.hideSeries(series);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\ton_dblclick:{\n\t},\n\ton_mouse_move:{\n\t},\n\tlocate: function(e){\n\t\treturn webix.html.locate(e,this._id);\n\t},\n\t$setSize:function(x,y){\n\t\tvar res = webix.ui.view.prototype.$setSize.call(this,x,y);\n\t\tif(res){\n\t\t\tfor(var c in this.canvases){\n\t\t\t\tthis.canvases[c]._resizeCanvas(this._content_width, this._content_height);\n\t\t\t}\n\t\t\tthis.render();\n\t\t}\n\t\treturn res;\n\t},\n\ttype_setter:function(val){\n\t\twebix.assert(this[\"$render_\"+val], \"Chart type is not supported, or extension is not loaded: \"+val);\n\t\t\n\t\tif (typeof this._settings.offset == \"undefined\"){\n\t\t\tthis._settings.offset = !(val.toLowerCase().indexOf(\"area\")!=-1);\n\t\t}\n\n        if(val==\"radar\"&&!this._settings.yAxis)\n\t\t    this.define(\"yAxis\",{});\n        if(val==\"scatter\"){\n            if(!this._settings.yAxis)\n                this.define(\"yAxis\",{});\n            if(!this._settings.xAxis)\n                this.define(\"xAxis\",{});\n        }\n\t\t\t\n\t\t\t\n\t\treturn val;\n\t},\n\tdestructor: function(){\n\t\tthis.removeAllSeries();\n\t\twebix.Destruction.destructor.apply(this,arguments);\n\t},\n\tremoveAllSeries: function(){\n\t\tthis.clearCanvas();\n\t\tif(this._legendObj){\n\t\t\tthis._legendObj.innerHTML = \"\";\n\t\t\tthis._legendObj.parentNode.removeChild(this._legendObj);\n\t\t\tthis._legendObj = null;\n\t\t}\n\t\tif(this.canvases){\n\t\t\tthis.canvases = {};\n\t\t}\n\t\tthis._contentobj.innerHTML=\"\";\n\t\tfor(var i = 0; i < this._series.length; i++){\n\t\t\tif(this._series[i].tooltip)\n\t\t\t\tthis._series[i].tooltip.destructor();\n\t\t}\n\t//\tthis.callEvent(\"onDestruct\",[]);\n\t\tthis._series = [];\n\t},\n\tclearCanvas:function(){\n\t\tif(this.canvases&&typeof this.canvases == \"object\")\n\t\t\tfor(var c in this.canvases){\n\t\t\t\tthis.canvases[c].clearCanvas();\n\t\t\t}\n\t},\n\trender:function(id,data, type){\n\t\tvar bounds, i, data, map, temp;\n\t\tif (!this.isVisible(this._settings.id))\n\t\t\treturn;\n\n\t\tdata = this._getChartData();\n\n\t\tif (!this.callEvent(\"onBeforeRender\",[data, type]))\n\t\t\treturn;\n\t\tif(this.canvases&&typeof this.canvases == \"object\"){\n\t\t\tfor(i in this.canvases){\n\t\t\t\tthis.canvases[i].clearCanvas();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tthis.canvases = {};\n\t\t\n\t\tif(this._settings.legend){\n\t\t\tif(!this.canvases[\"legend\"])\n\t\t\t\tthis.canvases[\"legend\"] =  this._createCanvas(\"legend\");\n\t\t\tthis._drawLegend(\n\t\t\t\tthis.data.getRange(),\n\t\t\t\tthis._content_width,\n\t\t\t\tthis._content_height\n\t\t\t);\n\t\t}\n\n\t\tthis._map = map = new webix.HtmlMap(this._id);\n\t\ttemp = this._settings;\n\n\t\tbounds =this._getChartBounds(this._content_width,this._content_height);\n\n\t\tif(this._series){\n\t\t\tfor(i=0; i < this._series.length;i++){\n\t\t\t\tthis._settings = this._series[i];\n\t\t\t\tif(!this.canvases[i])\n\t\t\t\t\tthis.canvases[i] = this._createCanvas(this._settings.ariaLabel+\" \"+i,\"z-index:\"+(2+i),null,i);\n\t\t\t\tthis[\"$render_\"+this._settings.type](\n\t\t\t\t\tthis.canvases[i].getCanvas(),\n\t\t\t\t\tdata,\n\t\t\t\t\tbounds.start,\n\t\t\t\t\tbounds.end,\n\t\t\t\t\ti,\n\t\t\t\t\tmap\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\t\n\t\tmap.render(this._contentobj);\n\t\tthis._contentobj.lastChild.style.zIndex = 100;\n\t\tthis._applyBounds(this._contentobj.lastChild,bounds);\n\t\tthis.callEvent(\"onAfterRender\",[data]);\n\t\tthis._settings = temp;\n\t},\n\t_applyBounds: function(elem,bounds){\n\t\tvar style = {};\n\t\tstyle.left = bounds.start.x;\n\t\tstyle.top = bounds.start.y;\n\t\tstyle.width = bounds.end.x-bounds.start.x;\n\t\tstyle.height = bounds.end.y - bounds.start.y;\n\t\tfor(var prop in style){\n\t\t\telem.style[prop] = style[prop]+\"px\";\n\t\t}\n\t},\n\t_getChartData: function(){\n\t\tvar axis, axisConfig ,config, data, i, newData,\n\t\t\tstart, units, value, valuesHash;\n\t\tdata = this.data.getRange();\n\t\taxis = (this._settings.type.toLowerCase().indexOf(\"barh\")!=-1?\"yAxis\":\"xAxis\");\n\t\taxisConfig = this._settings[axis];\n\t\tif(axisConfig&&axisConfig.units&&(typeof axisConfig.units == \"object\")){\n\t\t\tconfig = axisConfig.units;\n\t\t\tunits = [];\n\t\t\tif(typeof config.start != \"undefined\"&&typeof config.end != \"undefined\" && typeof config.next != \"undefined\"){\n\t\t\t\tstart = config.start;\n\t\t\t\twhile(start<=config.end){\n\t\t\t\t\tunits.push(start);\n\t\t\t\t\tstart = config.next.call(this,start);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if(Object.prototype.toString.call(config) === '[object Array]'){\n\t\t\t\tunits = config;\n\t\t\t}\n\t\t\tnewData = [];\n\t\t\tif(units.length){\n\t\t\t\tvalue = axisConfig.value;\n\t\t\t\tvaluesHash = {};\n\t\t\t\tfor(i=0;i < data.length;i++){\n\t\t\t\t\tvaluesHash[value(data[i])] = i;\n\t\t\t\t}\n\t\t\t\tfor(i=0;i< units.length;i++){\n\t\t\t\t\tif(typeof valuesHash[units[i]]!= \"undefined\"){\n\t\t\t\t\t\tdata[valuesHash[units[i]]].$unit = units[i];\n\t\t\t\t\t\tnewData.push(data[valuesHash[units[i]]]);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tnewData.push({$unit:units[i]});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn newData;\n\t\t}\n\t\treturn data;\n\t},\n\tseries_setter:function(config){\n\t\tif(typeof config!=\"object\"){\n\t\t\twebix.assert(config,\"Chart :: Series must be an array or object\");\t\n\t\t}\n\t\telse{\n\n\t\t\tthis._parseSettings(!config.length?config:config[0]);\n\t\t\tthis._series = [this._settings];\n\n\n\t\t\tfor(var i=1;i< config.length;i++)\n\t\t\t\tthis.addSeries(config[i]);\n\t\t}\n\t\treturn config;\n\t},\n\tvalue_setter:webix.template,\n    xValue_setter:webix.template,\n    yValue_setter:function(config){\n        this.define(\"value\",config);\n    },\n\talpha_setter:webix.template,\n\tlabel_setter:webix.template,\n\tlineColor_setter:webix.template,\n\tborderColor_setter:webix.template,\n\tpieInnerText_setter:webix.template,\n\tgradient_setter:function(config){\n\t\tif((typeof(config)!=\"function\")&&config&&(config === true))\n\t\t\tconfig = \"light\";\n\t\treturn config;\n\t},\n\tcolormap:{\n\t\t\"RAINBOW\":function(obj){\n            var pos = Math.floor(this.getIndexById(obj.id)/this.count()*1536);\n\t\t\tif (pos==1536) pos-=1;\n\t\t\treturn this._rainbow[Math.floor(pos/256)](pos%256);\n\t\t},\n\n\t\t\"default\": function(obj){\n\t\t\tvar count = this.count();\n\t\t\tvar colorsCount = this._defColors.length;\n\t\t\tvar i = this.getIndexById(obj.id);\n\t\t\tif(colorsCount > count){\n\t\t\t\tif(i){\n\t\t\t\t\tif(i < colorsCount - count)\n\t\t\t\t\t\ti = this._defColorsCursor +2;\n\t\t\t\t\telse\n\t\t\t\t\t\ti = this._defColorsCursor+1;\n\t\t\t\t}\n\t\t\t\tthis._defColorsCursor = i;\n\t\t\t}\n\t\t\telse\n\t\t\t\ti = i%colorsCount;\n\t\t\treturn this._defColors[i];\n\t\t}\n\t},\n\tcolor_setter:function(value){\n\t\treturn this.colormap[value]||webix.template( value);\n\t},\n    fill_setter:function(value){\n        return ((!value||value==\"0\")?false:webix.template( value));\n    },\n    _definePreset:function(obj){\n        this.define(\"preset\",obj.preset);\n        delete obj.preset;\n    },\n\tpreset_setter:function(value){\n        var a, b, preset;\n        this.defaults = webix.extend({},this.defaults);\n        preset =  this.presets[value];\n\n        if(typeof preset == \"object\"){\n\n            for(a in preset){\n\n                if(typeof preset[a]==\"object\"){\n                    if(!this.defaults[a]||typeof this.defaults[a]!=\"object\"){\n                         this.defaults[a] = webix.extend({},preset[a]);\n                    }\n                    else{\n                        this.defaults[a] = webix.extend({},this.defaults[a]);\n                        for(b in preset[a]){\n                            this.defaults[a][b] = preset[a][b];\n                        }\n                    }\n                }else{\n                     this.defaults[a] = preset[a];\n                }\n            }\n            return value;\n        }\n\t\treturn false;\n\t},\n\tlegend_setter:function( config){\n\t\tif(!config){\n\t\t\tif(this._legendObj){\n\t\t\t\tthis._legendObj.innerHTML = \"\";\n\t\t\t\tthis._legendObj = null;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\tif(typeof(config)!=\"object\")\t//allow to use template string instead of object\n\t\t\tconfig={template:config};\n\n\t\tthis._mergeSettings(config,{\n\t\t\twidth:150,\n\t\t\theight:18,\n\t\t\tlayout:\"y\",\n\t\t\talign:\"left\",\n\t\t\tvalign:\"bottom\",\n\t\t\ttemplate:\"\",\n\t\t\ttoggle:(this._settings.type.toLowerCase().indexOf(\"stacked\")!=-1?\"\":\"hide\"),\n\t\t\tmarker:{\n\t\t\t\ttype:\"square\",\n\t\t\t\twidth:15,\n\t\t\t\theight:15,\n                radius:3\n\t\t\t},\n            margin: 4,\n            padding: 3\n\t\t});\n\n\t\tconfig.template = webix.template(config.template);\n\t\treturn config;\n\t},\n\titem_setter:function( config){\n\t\tif(typeof(config)!=\"object\")\n\t\t\tconfig={color:config, borderColor:config};\n        this._mergeSettings(config,webix.extend({},this.defaults.item));\n\t\tvar settings = [\"alpha\",\"borderColor\",\"color\",\"radius\"];\n\t\tthis._converToTemplate(settings,config);\n\t\treturn config;\n\t},\n\tline_setter:function( config){\n\t\tif(typeof(config)!=\"object\")\n\t\t\tconfig={color:config};\n\n        config = webix.extend(config,this.defaults.line);\n\t\tconfig.color = webix.template(config.color);\n\t\treturn config;\n\t},\n\tpadding_setter:function( config){\n\t\tif(typeof(config)!=\"object\")\n\t\t\tconfig={left:config, right:config, top:config, bottom:config};\n\t\tthis._mergeSettings(config,{\n\t\t\tleft:50,\n\t\t\tright:20,\n\t\t\ttop:35,\n\t\t\tbottom:40\n\t\t});\n\t\treturn config;\n\t},\n\txAxis_setter:function( config){\n\t\tif(!config) return false;\n\t\tif(typeof(config)!=\"object\")\n\t\t\tconfig={ template:config };\n\n\t\tthis._mergeSettings(config,{\n\t\t\ttitle:\"\",\n\t\t\tcolor:\"#000000\",\n\t\t\tlineColor:\"#cfcfcf\",\n\t\t\ttemplate:\"{obj}\",\n\t\t\tlines:true\n\t\t});\n\t\tvar templates = [\"lineColor\",\"template\",\"lines\"];\n        this._converToTemplate(templates,config);\n\t\tthis._configXAxis = webix.extend({},config);\n\t\treturn config;\n\t},\n    yAxis_setter:function( config){\n\t    this._mergeSettings(config,{\n\t\t\ttitle:\"\",\n\t\t\tcolor:\"#000000\",\n\t\t\tlineColor:\"#cfcfcf\",\n\t\t\ttemplate:\"{obj}\",\n\t\t\tlines:true,\n            bg:\"#ffffff\"\n\t\t});\n\t\tvar templates = [\"lineColor\",\"template\",\"lines\",\"bg\"];\n        this._converToTemplate(templates,config);\n\t\tthis._configYAxis = webix.extend({},config);\n\t\treturn config;\n\t},\n    _converToTemplate:function(arr,config){\n        for(var i=0;i< arr.length;i++){\n            config[arr[i]] = webix.template(config[arr[i]]);\n        }\n    },\n\t_createCanvas: function(name,style,container, index){\n\t\tvar params = {container:(container||this._contentobj),name:name, series: index, style:(style||\"\"), width: this._content_width, height:this._content_height };\n\t\treturn new webix.Canvas(params);\n\t},\n    _drawScales:function(data,point0,point1,start,end,cellWidth){\n\t    var ctx, y = 0;\n\t    if(this._settings.yAxis){\n\t\t    if(!this.canvases[\"y\"])\n\t\t        this.canvases[\"y\"] =  this._createCanvas(\"axis_y\");\n\n\t\t    y = this._drawYAxis(this.canvases[\"y\"].getCanvas(),data,point0,point1,start,end);\n\t    }\n\t\tif (this._settings.xAxis){\n\t\t\tif (!this.canvases[\"x\"])\n\t\t\t\tthis.canvases[\"x\"] = this._createCanvas(\"axis_x\");\n\t\t\tctx = this.canvases[\"x\"].getCanvas();\n\t\t\tif(this.callEvent(\"onBeforeXAxis\",[ctx,data,point0,point1,cellWidth,y]))\n\t\t\t\tthis._drawXAxis(ctx, data, point0, point1, cellWidth, y);\n\t\t}\n\t    return y;\n\t},\n\t_drawXAxis:function(ctx,data,point0,point1,cellWidth,y){\n\t\tvar i, unitPos,\n\t\t\tconfig = this._settings,\n\t\t\tx0 = point0.x-0.5,\n\t\t\ty0 = parseInt((y?y:point1.y),10)+0.5,\n\t\t\tx1 = point1.x,\n\t\t\tcenter = true,\n\t\t\tlabelY = config.type == \"stackedBar\"?(point1.y+0.5):y0;\n\n\t\tfor(i=0; i < data.length;i++){\n\t\t\tif(config.offset === true)\n\t\t\t\tunitPos = x0+cellWidth/2+i*cellWidth;\n\t\t\telse{\n\t\t\t\tunitPos = (i==data.length-1 && !config.cellWidth)?point1.x:x0+i*cellWidth;\n\t\t\t\tcenter = !!i;\n\t\t\t}\n\t\t\tunitPos = Math.ceil(unitPos)-0.5;\n\t\t\t/*scale labels*/\n\t\t\tvar top = ((config.origin!=\"auto\")&&(config.type==\"bar\")&&(parseFloat(config.value(data[i]))<config.origin));\n\t\t\tthis._drawXAxisLabel(unitPos,labelY,data[i],center,top);\n\t\t\t/*draws a vertical line for the horizontal scale*/\n\t\t\tif((config.offset||i||config.cellWidth)&&config.xAxis.lines.call(this,data[i]))\n\t\t\t\tthis._drawXAxisLine(ctx,unitPos,point1.y,point0.y,data[i]);\n\t\t}\n\n\t\tthis.canvases[\"x\"].renderTextAt(true, false, x0, point1.y + config.padding.bottom-3,\n\t\t\tconfig.xAxis.title,\n\t\t\t\"webix_axis_title_x\",\n\t\t\tpoint1.x - point0.x\n\t\t);\n\t\tthis._drawLine(ctx,x0,y0,x1,y0,config.xAxis.color,1);\n\t\t/*the right border in lines in scale are enabled*/\n\t\tif (!config.xAxis.lines.call(this,{}) || !config.offset) return;\n\t\tthis._drawLine(ctx,x1+0.5,point1.y,x1+0.5,point0.y+0.5,config.xAxis.color,0.2);\n\t},\n\t_drawYAxis:function(ctx,data,point0,point1,start,end){\n\t\tvar step;\n\t\tvar scaleParam= {};\n\t\tif (!this._settings.yAxis) return;\n\n\t\tvar x0 = point0.x - 0.5;\n\t\tvar y0 = point1.y;\n\t\tvar y1 = point0.y;\n\t\tvar lineX = point1.y+0.5;\n\n\t\t//this._drawLine(ctx,x0,y0,x0,y1,this._settings.yAxis.color,1);\n\n\t\tif(this._settings.yAxis.step)\n\t\t\tstep = parseFloat(this._settings.yAxis.step);\n\n\t\tif(typeof this._configYAxis.step ==\"undefined\"||typeof this._configYAxis.start==\"undefined\"||typeof this._configYAxis.end ==\"undefined\"){\n\t\t\tscaleParam = this._calculateScale(start,end);\n\t\t\tstart = scaleParam.start;\n\t\t\tend = scaleParam.end;\n\t\t\tstep = scaleParam.step;\n\n\t\t\tthis._settings.yAxis.end = end;\n\t\t\tthis._settings.yAxis.start = start;\n\t\t}\n\t\telse if(this.config.scale == \"logarithmic\")\n\t\t\tthis._logScaleCalc = true;\n\n\t\tthis._setYAxisTitle(point0,point1);\n\t\tif(step===0) return;\n\t\tif(end==start){\n\t\t\treturn y0;\n\t\t}\n\t\tvar stepHeight = (y0-y1)*step/(end-start);\n\t\tvar c = 0;\n\t\tfor(var i = start; i<=end; i += step){\n\t\t\tvar value = this._logScaleCalc?Math.pow(10,i):i;\n\t\t\tif (scaleParam.fixNum)  value = parseFloat(value).toFixed(scaleParam.fixNum);\n\t\t\tvar yi = Math.floor(y0-c*stepHeight)+ 0.5;/*canvas line fix*/\n\t\t\tif(!(i==start&&this._settings.origin==\"auto\") &&this._settings.yAxis.lines.call(this,i))\n\t\t\t\tthis._drawLine(ctx,x0,yi,point1.x,yi,this._settings.yAxis.lineColor.call(this,i),1);\n\t\t\tif(i == this._settings.origin) lineX = yi;\n\t\t\t/*correction for JS float calculation*/\n\t\t\tif(step<1 && !this._logScaleCalc){\n\t\t\t\tvar power = Math.min(Math.floor(this._log10(step)),(start<=0?0:Math.floor(this._log10(start))));\n\t\t\t\tvar corr = Math.pow(10,-power);\n\t\t\t\tvalue = Math.round(value*corr)/corr;\n\t\t\t\ti = value;\n\t\t\t}\n\t\t\tthis.canvases[\"y\"].renderText(0,yi-5,\n\t\t\t\tthis._settings.yAxis.template(value.toString()),\n\t\t\t\t\"webix_axis_item_y\",\n\t\t\t\tpoint0.x-5\n\t\t\t);\n\t\t\tc++;\n\t\t}\n\t\tthis._drawLine(ctx,x0,y0+1,x0,y1,this._settings.yAxis.color,1);\n\t\treturn lineX;\n\t},\n\n\t_setYAxisTitle:function(point0,point1){\n        var className = \"webix_axis_title_y\"+(webix._isIE&&webix._isIE !=9?\" webix_ie_filter\":\"\");\n\t\tvar text=this.canvases[\"y\"].renderTextAt(\"middle\",false,0,parseInt((point1.y-point0.y)/2+point0.y,10),this._settings.yAxis.title,className);\n        if (text)\n\t\t\ttext.style.left = (webix.env.transform?(text.offsetHeight-text.offsetWidth)/2:0)+\"px\";\n\t},\n\t_calculateLogScale: function(nmin,nmax){\n\t\tvar startPower = Math.floor(this._log10(nmin));\n\t\tvar endPower = Math.ceil(this._log10(nmax));\n\t\treturn {start: startPower, step: 1, end: endPower};\n\t},\n\t_calculateScale:function(nmin,nmax){\n\t\tthis._logScaleCalc = false;\n\t\tif(this._settings.scale == \"logarithmic\"){\n\t\t\tvar logMin = Math.floor(this._log10(nmin));\n\t\t\tvar logMax = Math.ceil(this._log10(nmax));\n\t\t\tif(nmin>0 && nmax > 0 && (logMax-logMin>1) ){\n\t\t\t\tthis._logScaleCalc = true;\n\t\t\t\treturn this._calculateLogScale(nmin,nmax);\n\t\t\t}\n\n\t\t}\n\t    if(this._settings.origin!=\"auto\"&&this._settings.origin<nmin)\n\t\t\tnmin = this._settings.origin;\n\t\tvar step,start,end;\n\t   \tstep = ((nmax-nmin)/8)||1;\n\t\tvar power = Math.floor(this._log10(step));\n\t\tvar calculStep = Math.pow(10,power);\n\t\tvar stepVal = step/calculStep;\n\t\tstepVal = (stepVal>5?10:5);\n\t\tstep = parseInt(stepVal,10)*calculStep;\n\n\t\tif(step>Math.abs(nmin))\n\t\t\tstart = (nmin<0?-step:0);\n\t\telse{\n\t\t\tvar absNmin = Math.abs(nmin);\n\t\t\tvar powerStart = Math.floor(this._log10(absNmin));\n\t\t\tvar nminVal = absNmin/Math.pow(10,powerStart);\n\t\t\tstart = Math.ceil(nminVal*10)/10*Math.pow(10,powerStart)-step;\n\t\t\tif(absNmin>1&&step>0.1){\n\t\t\t\tstart = Math.ceil(start);\n\t\t\t}\n\t\t\twhile(nmin<0?start<=nmin:start>=nmin)\n\t\t\t\tstart -= step;\n\t\t\tif(nmin<0) start =-start-2*step;\n\t\t\t\n\t\t}\n\t     end = start;\n\t\twhile(end<nmax){\n\t\t\tend += step;\n\t\t\tend = parseFloat((end*1.0).toFixed(Math.abs(power)));\n\t\t}\n\t\treturn { start:start,end:end,step:step,fixNum:power<0?Math.abs(power):0 };\n\t},\n\t_getLimits:function(orientation,value){\n\t\tvar data = this.data._obj_array();\n\n\t\tvar maxValue, minValue;\n\t\tvar axis = ((arguments.length && orientation==\"h\")?this._configXAxis:this._configYAxis);\n\t\tvalue = value||\"value\";\n\t\tif(axis&&(typeof axis.end!=\"undefined\")&&(typeof axis.start!=\"undefined\")&&axis.step){\n\t\t    maxValue = parseFloat(axis.end);\n\t\t\tminValue = parseFloat(axis.start);\n\t\t}\n\t\telse{\n\t\t\tmaxValue = webix.GroupMethods.max(this._series[0][value], data);\n\t\t\tminValue = (axis&&(typeof axis.start!=\"undefined\"))?parseFloat(axis.start):webix.GroupMethods.min(this._series[0][value], data);\n\t\t\tif(this._series.length>1)\n\t\t\tfor(var i=1; i < this._series.length;i++){\n\t\t\t\tvar maxI = webix.GroupMethods.max(this._series[i][value], data);\n\t\t\t\tvar minI = webix.GroupMethods.min(this._series[i][value], data);\n\t\t\t\tif (maxI > maxValue) maxValue = maxI;\n\t\t    \tif (minI < minValue) minValue = minI;\n\t\t\t}\n\t\t}\n\t\treturn {max:maxValue,min:minValue};\n\t},\n\t_log10:function(n){\n        var method_name=\"log\";\n        return Math[method_name](n)/Math.LN10;\n    },\n\t_drawXAxisLabel:function(x,y,obj,center,top){\n\t\tif (!this._settings.xAxis) return;\n\t\tvar elem = this.canvases[\"x\"].renderTextAt(top, center, x,y-(top?2:0),this._settings.xAxis.template(obj));\n\t\tif (elem)\n\t\t\telem.className += \" webix_axis_item_x\";\n\t},\n\t_drawXAxisLine:function(ctx,x,y1,y2,obj){\n\t\tif (!this._settings.xAxis||!this._settings.xAxis.lines) return;\n\t\tthis._drawLine(ctx,x,y1,x,y2,this._settings.xAxis.lineColor.call(this,obj),1);\n\t},\n\t_drawLine:function(ctx,x1,y1,x2,y2,color,width){\n\t\tctx.strokeStyle = color;\n\t\tctx.lineWidth = width;\n\t\tctx.beginPath();\n\t\tctx.moveTo(x1,y1);\n\t\tctx.lineTo(x2,y2);\n\t\tctx.stroke();\n        ctx.lineWidth = 1;\n\t},\n\t_getRelativeValue:function(minValue,maxValue){\n\t    var relValue, origRelValue;\n\t\tvar valueFactor = 1;\n\t\tif(maxValue != minValue){\n\t\t\trelValue = maxValue - minValue;\n\t\t}\n\t\telse relValue = minValue;\n\t\treturn [relValue,valueFactor];\n\t},\n\t_rainbow : [\n\t\tfunction(pos){ return \"#FF\"+webix.color.toHex(pos/2,2)+\"00\";},\n\t\tfunction(pos){ return \"#FF\"+webix.color.toHex(pos/2+128,2)+\"00\";},\n\t\tfunction(pos){ return \"#\"+webix.color.toHex(255-pos,2)+\"FF00\";},\n\t\tfunction(pos){ return \"#00FF\"+webix.color.toHex(pos,2);},\n\t\tfunction(pos){ return \"#00\"+webix.color.toHex(255-pos,2)+\"FF\";},\n\t\tfunction(pos){ return \"#\"+webix.color.toHex(pos,2)+\"00FF\";}\t\t\n\t],\n\t_defColors : [\n\t\t\"#f55b50\",\"#ff6d3f\",\"#ffa521\",\"#ffc927\",\"#ffee54\",\"#d3e153\",\"#9acb61\",\"#63b967\",\n\t\t\"#21a497\",\"#21c5da\",\"#3ea4f5\",\"#5868bf\",\"#7b53c0\",\"#a943ba\",\"#ec3b77\",\"#9eb0b8\"\n\t],\n\t_defColorsCursor: 0,\n\t/**\n\t*   adds series to the chart (value and color properties)\n\t*   @param: obj - obj with configuration properties\n\t*/\n\taddSeries:function(obj){\n\t\tvar temp = webix.extend({},this._settings);\n\t\tthis._settings = webix.extend({},temp);\n\t\tthis._parseSettings(obj,{});\n\t    this._series.push(this._settings);\n\t\tthis._settings = temp;\n    },\n    /*switch global settings to serit in question*/\n    _switchSeries:function(id, e, tag) {\n\t    var tip;\n\n\t    if(!tag.getAttribute(\"userdata\"))\n\t        return;\n\n\t    this._active_serie = this._series.length==1?tag.getAttribute(\"userdata\"):this._getActiveSeries(e);\n\t    if (!this._series[this._active_serie]) return;\n\t    for (var i=0; i < this._series.length; i++) {\n\t\t    tip = this._series[i].tooltip;\n\n\t\t    if (tip)\n\t\t\t    tip.disable();\n\t    }\n\t    if(!tag.getAttribute(\"disabled\")){\n\t\t    tip = this._series[this._active_serie].tooltip;\n\t\t    if (tip)\n\t\t\t    tip.enable();\n\t    }\n    },\n\t_getActiveSeries: function(e){\n\t\tvar a, areas, i, offset, pos, selection,  x, y;\n\n\t\tareas = this._map._areas;\n\t\toffset = webix.html.offset(this._contentobj._htmlmap);\n\t\tpos = webix.html.pos(e);\n\t\tx = pos.x - offset.x;\n\t\ty = pos.y - offset.y;\n\n\t\tfor( i = 0; i < areas.length; i++){\n\t\t\ta = areas[i].points;\n\t\t\tif(x <= a[2] && x >= a[0] && y <= a[3] && y >= a[1]){\n\t\t\t\tif(selection){\n\t\t\t\t\tif(areas[i].index > selection.index)\n\t\t\t\t\t\tselection = areas[i];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tselection = areas[i];\n\t\t\t}\n\t\t}\n\n\t\treturn selection?selection.index:0;\n\t},\n\thideSeries:function(series){\n\t\tthis.canvases[series].hideCanvas();\n\t\tvar legend = this._settings.legend;\n\t\tif(legend && legend.values && legend.values[series]){\n\t\t\tlegend.values[series].$hidden = true;\n\t\t\tthis._drawLegend();\n\t\t}\n\t\tthis._map.hide(this._contentobj, series, true);\n\t},\n\tshowSeries:function(series){\n\t\tthis.canvases[series].showCanvas();\n\t\tvar legend = this._settings.legend;\n\t\tif(legend && legend.values && legend.values[series]){\n\t\t\tdelete legend.values[series].$hidden;\n\t\t\tthis._drawLegend();\n\t\t}\n\t\tthis._map.hide(this._contentobj, series, false);\n\t},\n\t/**\n\t*   renders legend block\n\t*   @param: ctx - canvas object\n\t*   @param: data - object those need to be displayed\n\t*   @param: width - the width of the container\n\t*   @param: height - the height of the container\n\t*/\n\t_drawLegend:function(data,width){\n\t\t/*position of the legend block*/\n\t\tvar i, legend, legendContainer, legendHeight, legendItems, legendWidth, style,\n\t\t\tx=0, y= 0, ctx, itemColor, disabled, item;\n\n\t\tdata = data||[];\n\t\twidth = width||this._content_width;\n\t\tctx = this.canvases[\"legend\"].getCanvas();\n\t\t/*legend config*/\n\t\tlegend = this._settings.legend;\n\t\t /*the legend sizes*/\n\n\t\tstyle = (this._settings.legend.layout!=\"x\"?\"width:\"+legend.width+\"px\":\"\");\n\t\t/*creation of legend container*/\n\n\t\tif(this._legendObj){\n\n\t\t\tthis._legendObj.innerHTML = \"\";\n\t\t\tthis._legendObj.parentNode.removeChild(this._legendObj);\n\t\t}\n\t\tthis.canvases[\"legend\"].clearCanvas(true);\n\n\t\tlegendContainer = webix.html.create(\"DIV\",{\n\t\t\t\"class\":\"webix_chart_legend\",\n\t\t\t\"style\":\"left:\"+x+\"px; top:\"+y+\"px;\"+style\n\t\t},\"\");\n\t\tif(legend.padding){\n\t\t\tlegendContainer.style.padding =  legend.padding+\"px\";\n\t\t}\n\t\tthis._legendObj = legendContainer;\n\t\tthis._contentobj.appendChild(legendContainer);\n\n\t\t/*rendering legend text items*/\n\t\tlegendItems = [];\n\t\tif(!legend.values)\n\t\t\tfor(i = 0; i < data.length; i++){\n\t\t\t\tlegendItems.push(this._drawLegendText(legendContainer,legend.template(data[i])));\n\t\t\t}\n\t\telse\n\t\t\tfor(i = 0; i < legend.values.length; i++){\n\t\t\t\tlegendItems.push(this._drawLegendText(legendContainer,legend.values[i].text,(typeof legend.values[i].id!=\"undefined\"?typeof legend.values[i].id:i),legend.values[i].$hidden));\n\t\t\t}\n\t\tif (legendContainer.offsetWidth === 0)\n\t\t\tlegendContainer.style.width = \"auto\"; \n\t   \tlegendWidth = legendContainer.offsetWidth;\n\t    legendHeight = legendContainer.offsetHeight;\n\n\t\t/*this._settings.legend.width = legendWidth;\n\t\tthis._settings.legend.height = legendHeight;*/\n\t\t/*setting legend position*/\n\t\tif(legendWidth<width){\n\t\t\tif(legend.layout == \"x\"&&legend.align == \"center\"){\n\t\t\t    x = (width-legendWidth)/2;\n            }\n\t\t\tif(legend.align == \"right\"){\n\t\t\t\tx = width-legendWidth;\n\t\t\t}\n            if(legend.margin&&legend.align != \"center\"){\n                x += (legend.align == \"left\"?1:-1)*legend.margin;\n            }\n        }\n\n\t\tif(legendHeight<this._content_height){\n\t\t\tif(legend.valign == \"middle\"&&legend.align != \"center\"&&legend.layout != \"x\")\n\t\t\t\ty = (this._content_height-legendHeight)/2;\n\t\t\telse if(legend.valign == \"bottom\")\n\t\t\t\ty = this._content_height-legendHeight;\n            if(legend.margin&&legend.valign != \"middle\"){\n                y += (legend.valign == \"top\"?1:-1)*legend.margin;\n            }\n\t\t}\n\t\tlegendContainer.style.left = x+\"px\";\n\t\tlegendContainer.style.top = y+\"px\";\n\n\t\t/*drawing colorful markers*/\n\t\tctx.save();\n\t\tfor(i = 0; i < legendItems.length; i++){\n\t\t\titem = legendItems[i];\n\t\t\tif(legend.values&&legend.values[i].$hidden){\n\t\t\t\tdisabled = true;\n\t\t\t\titemColor = (legend.values[i].disableColor?legend.values[i].disableColor:\"#d9d9d9\");\n\t\t\t}\n\t\t\telse{\n\t\t\t\tdisabled = false;\n\t\t\t\titemColor = (legend.values?legend.values[i].color:this._settings.color.call(this,data[i]));\n\t\t\t}\n\t\t\tthis._drawLegendMarker(ctx,item.offsetLeft+x,item.offsetTop+y,itemColor,item.offsetHeight,disabled,i);\n\t\t}\n\t\tctx.restore();\n\t\tlegendItems = null;\n\t},\n\t/**\n\t*   appends legend item to legend block\n\t*   @param: ctx - canvas object\n\t*   @param: obj - data object that needs being represented\n\t*/\n\t_drawLegendText:function(cont,value,series,disabled){\n\t\tvar style = \"\";\n\t\tif(this._settings.legend.layout==\"x\")\n\t\t\tstyle = \"float:left;\";\n\t\t/*the text of the legend item*/\n\t\tvar text = webix.html.create(\"DIV\",{\n\t\t\t\"style\":style+\"padding-left:\"+(10+this._settings.legend.marker.width)+\"px\",\n\t\t\t\"class\":\"webix_chart_legend_item\"+(disabled?\" hidden\":\"\"),\n\t\t\t\"role\":\"button\",\n\t\t\t\"tabindex\":\"0\",\n\t\t\t\"aria-label\":(webix.i18n.aria[(disabled?\"show\":\"hide\")+\"Chart\"])+\" \"+value\n\t\t},value);\n\t\tif(arguments.length>2)\n\t\t\ttext.setAttribute(\"series_id\",series);\n\t\tcont.appendChild(text);\n\t\treturn text;\n\t},\n\t/**\n\t*   draw legend colorful marder\n\t*   @param: ctx - canvas object\n\t*   @param: x - the horizontal position of the marker\n\t*   @param: y - the vertical position of the marker\n\t*   @param: obj - data object which color needs being used\n\t*/\n\t_drawLegendMarker:function(ctx,x,y,color,height,disabled,i){\n\t\tvar p = [];\n\t\tvar marker = this._settings.legend.marker;\n\t\tvar values = this._settings.legend.values;\n\t\tvar type = (values&&values[i].markerType?values[i].markerType:marker.type);\n\t\tif(color){\n\t\t\tctx.strokeStyle = ctx.fillStyle = color;\n\t\t}\n\n\t\tif(type==\"round\"||!marker.radius){\n\t\t\tctx.beginPath();\n\t\t\tctx.lineWidth = marker.height;\n\t\t\tctx.lineCap = marker.type;\n\t\t\t/*start of marker*/\n\t\t\tx += ctx.lineWidth/2+5;\n\t\t\ty += height/2;\n\t\t\tctx.moveTo(x,y);\n\t\t\tvar x1 = x + marker.width-marker.height +1;\n\t\t\tctx.lineTo(x1,y);\n\t\t\tctx.stroke();\n\t\t\tctx.fill();\n\n\t\t}\n\t\telse if(type==\"item\"){\n\t\t\t/*copy of line*/\n\t\t\tif(this._settings.line&&this._settings.type != \"scatter\" && !this._settings.disableLines){\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.lineWidth = this._series[i].line.width;\n\t\t\t\tctx.strokeStyle = disabled?color:this._series[i].line.color.call(this,{});\n\t\t\t\tvar x0 = x + 5;\n\t\t\t\tvar y0 = y + height/2;\n\t\t\t\tctx.moveTo(x0,y0);\n\t\t\t\tvar x1 = x0 + marker.width;\n\t\t\t\tctx.lineTo(x1,y0);\n\t\t\t\tctx.stroke();\n\t\t\t}\n\t\t\t/*item copy*/\n\t\t\tvar config = this._series[i].item;\n\t\t\tvar radius = parseInt(config.radius.call(this,{}),10)||0;\n\t\t\tif(radius){\n\t\t\t\tctx.beginPath();\n\t\t\t\tif(disabled){\n\t\t\t\t\tctx.lineWidth = config.borderWidth;\n\t\t\t\t\tctx.strokeStyle = color;\n\t\t\t\t\tctx.fillStyle = color;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tctx.lineWidth = config.borderWidth;\n\t\t\t\t\tctx.fillStyle = config.color.call(this,{});\n\t\t\t\t\tctx.strokeStyle = config.borderColor.call(this,{});\n\t\t\t\t\tctx.globalAlpha = config.alpha.call(this,{});\n\t\t\t\t}\n\t\t\t\tctx.beginPath();\n\t\t\t\tx += marker.width/2+5;\n\t\t\t\ty += height/2;\n\t\t\t\tthis._strokeChartItem(ctx,x,y,radius+1,config.type);\n\t\t\t\tctx.fill();\n\t\t\t\tctx.stroke();\n\t\t\t}\n\t\t\tctx.globalAlpha = 1;\n\t\t}else{\n\t\t\tctx.beginPath();\n\t\t\tctx.lineWidth = 1;\n\t\t\tx += 5;\n\t\t\ty += height/2-marker.height/2;\n\t\t\tp = [\n\t\t\t\t[x+marker.radius,y+marker.radius,marker.radius,Math.PI,3*Math.PI/2,false],\n\t\t\t\t[x+marker.width-marker.radius,y],\n\t\t\t\t[x+marker.width-marker.radius,y+marker.radius,marker.radius,-Math.PI/2,0,false],\n\t\t\t\t[x+marker.width,y+marker.height-marker.radius],\n\t\t\t\t[x+marker.width-marker.radius,y+marker.height-marker.radius,marker.radius,0,Math.PI/2,false],\n\t\t\t\t[x+marker.radius,y+marker.height],\n\t\t\t\t[x+marker.radius,y+marker.height-marker.radius,marker.radius,Math.PI/2,Math.PI,false],\n\t\t\t\t[x,y+marker.radius]\n\t\t\t];\n\t\t\tthis._path(ctx,p);\n\t\t\tctx.stroke();\n\t\t\tctx.fill();\n\t\t}\n\n\t},\n\t/**\n\t*   gets the points those represent chart left top and right bottom bounds\n\t*   @param: width - the width of the chart container\n\t*   @param: height - the height of the chart container\n\t*/\n\t_getChartBounds:function(width,height){\n\t\tvar chartX0, chartY0, chartX1, chartY1;\n\t\t\n\t\tchartX0 = this._settings.padding.left;\n\t\tchartY0 = this._settings.padding.top;\n\t\tchartX1 = width - this._settings.padding.right;\n\t\tchartY1 = height - this._settings.padding.bottom;\t\n\t\t\n\t\tif(this._settings.legend){\n\t\t\tvar legend = this._settings.legend;\n\t\t\t/*legend size*/\n\t\t\tvar legendWidth = this._settings.legend.width;\n\t\t\tvar legendHeight = this._settings.legend.height;\n\t\t\n\t\t\t/*if legend is horizontal*/\n\t\t\tif(legend.layout == \"x\"){\n\t\t\t\tif(legend.valign == \"center\"){\n\t\t\t\t\tif(legend.align == \"right\")\n\t\t\t\t\t\tchartX1 -= legendWidth;\n\t\t\t\t\telse if(legend.align == \"left\")\n\t\t\t\t \t\tchartX0 += legendWidth;\n\t\t\t \t}\n\t\t\t \telse if(legend.valign == \"bottom\"){\n\t\t\t    \tchartY1 -= legendHeight;\n\t\t\t \t}\n\t\t\t \telse{\n\t\t\t    \tchartY0 += legendHeight;\n\t\t\t \t}\n\t\t\t}\n\t\t\t/*vertical scale*/\n\t\t\telse{\n\t\t\t\tif(legend.align == \"right\")\n\t\t\t\t\tchartX1 -= legendWidth;\n\t\t\t \telse if(legend.align == \"left\")\n\t\t\t\t\tchartX0 += legendWidth;\n\t\t\t}\n\t\t}\n\t\treturn {start:{x:chartX0,y:chartY0},end:{x:chartX1,y:chartY1}};\n\t},\n\t/**\n\t*   gets the maximum and minimum values for the stacked chart\n\t*   @param: data - data set\n\t*/\n\t_getStackedLimits:function(data){\n\t\tvar i, j, maxValue, minValue, value;\n\t\tif(this._settings.yAxis&&(typeof this._settings.yAxis.end!=\"undefined\")&&(typeof this._settings.yAxis.start!=\"undefined\")&&this._settings.yAxis.step){\n\t\t\tmaxValue = parseFloat(this._settings.yAxis.end);\n\t\t\tminValue = parseFloat(this._settings.yAxis.start);\n\t\t}\n\t\telse{\n\t\t\tfor(i=0; i < data.length; i++){\n\t\t\t\tdata[i].$sum = 0 ;\n\t\t\t\tdata[i].$min = Infinity;\n\t\t\t\tfor(j =0; j < this._series.length;j++){\n\t\t\t\t\tvalue = parseFloat(this._series[j].value(data[i])||0);\n\t\t\t\t\tif(isNaN(value)) continue;\n\t\t\t\t\tif(this._series[j].type.toLowerCase().indexOf(\"stacked\")!=-1)\n\t\t\t\t\t\tdata[i].$sum += value;\n\t\t\t\t\tif(value < data[i].$min) data[i].$min = value;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmaxValue = -Infinity;\n\t\t\tminValue = Infinity;\n\t\t\tfor(i=0; i < data.length; i++){\n\t\t\t\tif (data[i].$sum > maxValue) maxValue = data[i].$sum ;\n\t\t\t\tif (data[i].$min < minValue) minValue = data[i].$min ;\n\t\t\t}\n\t\t\tif(minValue>0) minValue =0;\n\t\t}\n\t\treturn {max: maxValue, min: minValue};\n\t},\n\t/*adds colors to the gradient object*/\n\t_setBarGradient:function(ctx,x1,y1,x2,y2,type,color,axis){\n\t\tvar gradient, offset, rgb, hsv, color0, stops;\n\t\tif(type == \"light\"){\n\t\t\tif(axis == \"x\")\n\t\t\t\tgradient = ctx.createLinearGradient(x1,y1,x2,y1);\n\t\t\telse\n\t\t\t\tgradient = ctx.createLinearGradient(x1,y1,x1,y2);\n\t\t\tstops = [[0,\"#FFFFFF\"],[0.9,color],[1,color]];\n\t\t\toffset = 2;\n\t\t}\n\t\telse if(type == \"falling\"||type == \"rising\"){\n\t\t\tif(axis == \"x\")\n\t\t\t\tgradient = ctx.createLinearGradient(x1,y1,x2,y1);\n\t\t\telse\n\t\t\t\tgradient = ctx.createLinearGradient(x1,y1,x1,y2);\n\t\t\trgb = webix.color.toRgb(color);\n\t\t\thsv = webix.color.rgbToHsv(rgb[0],rgb[1],rgb[2]);\n\t\t\thsv[1] *= 1/2;\n\t\t\tcolor0 = \"rgb(\"+webix.color.hsvToRgb(hsv[0],hsv[1],hsv[2])+\")\";\n\t\t\tif(type == \"falling\"){\n\t\t\t\tstops = [[0,color0],[0.7,color],[1,color]];\n\t\t\t}\n\t\t\telse if(type == \"rising\"){\n\t\t\t\tstops = [[0,color],[0.3,color],[1,color0]];\n\t\t\t}\n\t\t\toffset = 0;\n\t\t}\n\t\telse{\n\t\t\tctx.globalAlpha = 0.37;\n\t\t\toffset = 0;\n\t\t\tif(axis == \"x\")\n\t\t\t\tgradient = ctx.createLinearGradient(x1,y2,x1,y1);\n\t\t\telse\n\t\t\t\tgradient = ctx.createLinearGradient(x1,y1,x2,y1);\n\t\t\tstops = [[0,\"#9d9d9d\"],[0.3,\"#e8e8e8\"],[0.45,\"#ffffff\"],[0.55,\"#ffffff\"],[0.7,\"#e8e8e8\"],[1,\"#9d9d9d\"]];\n\t\t}\n\t\tthis._gradient(gradient,stops);\n\t\treturn {gradient: gradient,offset: offset};\n\t},\n\t/**\n\t*   returns the x and y position\n    *   @param: a - angle\n    *   @param: x - start x position\n    *   @param: y - start y position\n\t*   @param: r - destination to the point\n\t*/\n     _getPositionByAngle:function(a,x,y,r){\n         a *= (-1);\n         x = x+Math.cos(a)*r;\n         y = y-Math.sin(a)*r;\n         return {x:x,y:y};\n    },\n\t_gradient:function(gradient,stops){\n\t\tfor(var i=0; i< stops.length; i++){\n\t\t\tgradient.addColorStop(stops[i][0],stops[i][1]);\n\t\t}\n\t},\n\t_path: function(ctx,points){\n\t\tvar i, method;\n\t\tfor(i = 0; i< points.length; i++){\n\t\t\tmethod = (i?\"lineTo\":\"moveTo\");\n\t\t\tif(points[i].length>2)\n\t\t\t\tmethod = \"arc\";\n\t\t\tctx[method].apply(ctx,points[i]);\n\t\t}\n\t},\n\t_addMapRect:function(map,id,points,bounds,sIndex){\n\t\tmap.addRect(id,[points[0].x-bounds.x,points[0].y-bounds.y,points[1].x-bounds.x,points[1].y-bounds.y],sIndex);\n\t}\n}, webix.Group, webix.AutoTooltip, webix.DataLoader, webix.MouseEvents,  webix.EventSystem , webix.ui.view);\n\n\nwebix.extend(webix.ui.chart, {\n\t$render_pie:function(ctx,data,x,y,sIndex,map){\n\t\tthis._renderPie(ctx,data,x,y,1,map,sIndex);\n\t\t\n\t},\n\t/**\n\t *   renders a pie chart\n\t *   @param: ctx - canvas object\n\t *   @param: data - object those need to be displayed\n\t *   @param: x - the width of the container\n\t *   @param: y - the height of the container\n\t *   @param: ky - value from 0 to 1 that defines an angle of inclination (0<ky<1 - 3D chart)\n\t */\n\t_renderPie:function(ctx,data,point0,point1,ky,map,sIndex){\n\t\tif(!data.length)\n\t\t\treturn;\n\t\tvar coord = this._getPieParameters(point0,point1);\n\t\t/*pie radius*/\n\t\tvar radius = (this._settings.radius?this._settings.radius:coord.radius);\n\t\tif(radius<0)\n\t\t\treturn;\n\n\t\t/*real values*/\n\t\tvar values = this._getValues(data);\n\n\t\tvar totalValue = this._getTotalValue(values);\n\n\t\t/*weighed values (the ratio of object value to total value)*/\n\t\tvar ratios = this._getRatios(values,totalValue);\n\n\t\t/*pie center*/\n\t\tvar x0 = (this._settings.x?this._settings.x:coord.x);\n\t\tvar y0 = (this._settings.y?this._settings.y:coord.y);\n\t\t/*adds shadow to the 2D pie*/\n\t\tif(ky==1&&this._settings.shadow)\n\t\t\tthis._addShadow(ctx,x0,y0,radius);\n\n\t\t/*changes vertical position of the center according to 3Dpie cant*/\n\t\ty0 = y0/ky;\n\t\t/*the angle defines the 1st edge of the sector*/\n\t\tvar alpha0 = -Math.PI/2;\n\t\tvar angles = [];\n\t\t/*changes Canvas vertical scale*/\n\t\tctx.scale(1,ky);\n\t\t/*adds radial gradient to a pie*/\n\t\tif (this._settings.gradient){\n\t\t\tvar x1 = (ky!=1?x0+radius/3:x0);\n\t\t\tvar y1 = (ky!=1?y0+radius/3:y0);\n\t\t\tthis._showRadialGradient(ctx,x0,y0,radius,x1,y1);\n\t\t}\n\t\tfor(var i = 0; i < data.length;i++){\n\t\t\tif (!values[i]) continue;\n\t\t\t/*drawing sector*/\n\t\t\t//ctx.lineWidth = 2;\n\t\t\tctx.strokeStyle = this._settings.lineColor.call(this,data[i]);\n\t\t\tctx.beginPath();\n\t\t\tctx.moveTo(x0,y0);\n\t\t\tangles.push(alpha0);\n\t\t\t/*the angle defines the 2nd edge of the sector*/\n\t\t\tvar alpha1 = -Math.PI/2+ratios[i]-0.0001;\n\t\t\tctx.arc(x0,y0,radius,alpha0,alpha1,false);\n\t\t\tctx.lineTo(x0,y0);\n\n\t\t\tvar color = this._settings.color.call(this,data[i]);\n\t\t\tctx.fillStyle = color;\n\t\t\tctx.fill();\n\n\t\t\t/*text that needs being displayed inside the sector*/\n\t\t\tif(this._settings.pieInnerText)\n\t\t\t\tthis._drawSectorLabel(x0,y0,5*radius/6,alpha0,alpha1,ky,this._settings.pieInnerText(data[i],totalValue),true);\n\t\t\t/*label outside the sector*/\n\t\t\tif(this._settings.label)\n\t\t\t\tthis._drawSectorLabel(x0,y0,radius+this._settings.labelOffset,alpha0,alpha1,ky,this._settings.label(data[i]));\n\t\t\t/*drawing lower part for 3D pie*/\n\t\t\tif(ky!=1){\n\t\t\t\tthis._createLowerSector(ctx,x0,y0,alpha0,alpha1,radius,true);\n\t\t\t\tctx.fillStyle = \"#000000\";\n\t\t\t\tctx.globalAlpha = 0.2;\n\t\t\t\tthis._createLowerSector(ctx,x0,y0,alpha0,alpha1,radius,false);\n\t\t\t\tctx.globalAlpha = 1;\n\t\t\t\tctx.fillStyle = color;\n\t\t\t}\n\t\t\t/*creats map area (needed for events)*/\n\t\t\tmap.addSector(data[i].id,alpha0,alpha1,x0-point0.x,y0-point0.y/ky,radius,ky,sIndex);\n\n\t\t\talpha0 = alpha1;\n\t\t}\n\t\t/*renders radius lines and labels*/\n\t\tctx.globalAlpha = 0.8;\n\t\tvar p;\n\t\tfor(i=0;i< angles.length;i++){\n\t\t\tp = this._getPositionByAngle(angles[i],x0,y0,radius);\n\t\t\tthis._drawLine(ctx,x0,y0,p.x,p.y,this._settings.lineColor.call(this,data[i]),2);\n\t\t}\n\t\tif(ky==1){\n\t\t\tctx.lineWidth = 2;\n\t\t\tctx.strokeStyle = \"#ffffff\";\n\t\t\tctx.beginPath();\n\t\t\tctx.arc(x0,y0,radius+1,0,2*Math.PI,false);\n\t\t\tctx.stroke();\n\t\t}\n\t\tctx.globalAlpha =1;\n\n\t\tctx.scale(1,1/ky);\n\t},\n\t/**\n\t *   returns list of values\n\t *   @param: data array\n\t */\n\t_getValues:function(data){\n\t\tvar v = [];\n\t\tfor(var i = 0; i < data.length;i++)\n\t\t\tv.push(parseFloat(this._settings.value(data[i])||0));\n\t\treturn v;\n\t},\n\t/**\n\t *   returns total value\n\t *   @param: the array of values\n\t */\n\t_getTotalValue:function(values){\n\t\tvar t=0;\n\t\tfor(var i = 0; i < values.length;i++)\n\t\t\tt += values[i];\n\t\treturn  t;\n\t},\n\t/**\n\t *   gets angles for all values\n\t *   @param: the array of values\n\t *   @param: total value (optional)\n\t */\n\t_getRatios:function(values,totalValue){\n\t\tvar value;\n\t\tvar ratios = [];\n\t\tvar prevSum = 0;\n\t\ttotalValue = totalValue||this._getTotalValue(values);\n\t\tfor(var i = 0; i < values.length;i++){\n\t\t\tvalue = values[i];\n\n\t\t\tratios[i] = Math.PI*2*(totalValue?((value+prevSum)/totalValue):(1/values.length));\n\t\t\tprevSum += value;\n\t\t}\n\t\treturn ratios;\n\t},\n\t/**\n\t *   returns calculated pie parameters: center position and radius\n\t *   @param: x - the width of a container\n\t *   @param: y - the height of a container\n\t */\n\t_getPieParameters:function(point0,point1){\n\t\t/*var offsetX = 0;\n\t\t var offsetY = 0;\n\t\t if(this._settings.legend &&this._settings.legend.layout!=\"x\")\n\t\t offsetX = this._settings.legend.width*(this._settings.legend.align==\"right\"?-1:1);\n\t\t var x0 = (x + offsetX)/2;\n\t\t if(this._settings.legend &&this._settings.legend.layout==\"x\")\n\t\t offsetY = this._settings.legend.height*(this._settings.legend.valign==\"bottom\"?-1:1);\n\t\t var y0 = (y+offsetY)/2;*/\n\t\tvar width = point1.x-point0.x;\n\t\tvar height = point1.y-point0.y;\n\t\tvar x0 = point0.x+width/2;\n\t\tvar y0 = point0.y+height/2;\n\t\tvar radius = Math.min(width/2,height/2);\n\t\treturn {\"x\":x0,\"y\":y0,\"radius\":radius};\n\t},\n\t/**\n\t *   creates lower part of sector in 3Dpie\n\t *   @param: ctx - canvas object\n\t *   @param: x0 - the horizontal position of the pie center\n\t *   @param: y0 - the vertical position of the pie center\n\t *   @param: a0 - the angle that defines the first edge of a sector\n\t *   @param: a1 - the angle that defines the second edge of a sector\n\t *   @param: R - pie radius\n\t *   @param: line (boolean) - if the sector needs a border\n\t */\n\t_createLowerSector:function(ctx,x0,y0,a1,a2,R,line){\n\t\tctx.lineWidth = 1;\n\t\t/*checks if the lower sector needs being displayed*/\n\t\tif(!((a1<=0 && a2>=0)||(a1>=0 && a2<=Math.PI)||(Math.abs(a1-Math.PI)>0.003&&a1<=Math.PI && a2>=Math.PI))) return;\n\n\t\tif(a1<=0 && a2>=0){\n\t\t\ta1 = 0;\n\t\t\tline = false;\n\t\t\tthis._drawSectorLine(ctx,x0,y0,R,a1,a2);\n\t\t}\n\t\tif(a1<=Math.PI && a2>=Math.PI){\n\t\t\ta2 = Math.PI;\n\t\t\tline = false;\n\t\t\tthis._drawSectorLine(ctx,x0,y0,R,a1,a2);\n\t\t}\n\t\t/*the height of 3D pie*/\n\t\tvar offset = (this._settings.pieHeight||Math.floor(R/4))/this._settings.cant;\n\t\tctx.beginPath();\n\t\tctx.arc(x0,y0,R,a1,a2,false);\n\t\tctx.lineTo(x0+R*Math.cos(a2),y0+R*Math.sin(a2)+offset);\n\t\tctx.arc(x0,y0+offset,R,a2,a1,true);\n\t\tctx.lineTo(x0+R*Math.cos(a1),y0+R*Math.sin(a1));\n\t\tctx.fill();\n\t\tif(line)\n\t\t\tctx.stroke();\n\t},\n\t/**\n\t *   draws a serctor arc\n\t */\n\t_drawSectorLine:function(ctx,x0,y0,R,a1,a2){\n\t\tctx.beginPath();\n\t\tctx.arc(x0,y0,R,a1,a2,false);\n\t\tctx.stroke();\n\t},\n\t/**\n\t *   adds a shadow to pie\n\t *   @param: ctx - canvas object\n\t *   @param: x - the horizontal position of the pie center\n\t *   @param: y - the vertical position of the pie center\n\t *   @param: R - pie radius\n\t */\n\t_addShadow:function(ctx,x,y,R){\n\t\tctx.globalAlpha = 0.5;\n\t\tvar shadows = [\"#c4c4c4\",\"#c6c6c6\",\"#cacaca\",\"#dcdcdc\",\"#dddddd\",\"#e0e0e0\",\"#eeeeee\",\"#f5f5f5\",\"#f8f8f8\"];\n\t\tfor(var i = shadows.length-1;i>-1;i--){\n\t\t\tctx.beginPath();\n\t\t\tctx.fillStyle = shadows[i];\n\t\t\tctx.arc(x+1,y+1,R+i,0,Math.PI*2,true);\n\t\t\tctx.fill();\n\t\t}\n\t\tctx.globalAlpha = 1;\n\t},\n\t/**\n\t *   returns a gray gradient\n\t *   @param: gradient - gradient object\n\t */\n\t_getGrayGradient:function(gradient){\n\t\tgradient.addColorStop(0.0,\"#ffffff\");\n\t\tgradient.addColorStop(0.7,\"#7a7a7a\");\n\t\tgradient.addColorStop(1.0,\"#000000\");\n\t\treturn gradient;\n\t},\n\t/**\n\t *   adds gray radial gradient\n\t *   @param: ctx - canvas object\n\t *   @param: x - the horizontal position of the pie center\n\t *   @param: y - the vertical position of the pie center\n\t *   @param: radius - pie radius\n\t *   @param: x0 - the horizontal position of a gradient center\n\t *   @param: y0 - the vertical position of a gradient center\n\t */\n\t_showRadialGradient:function(ctx,x,y,radius,x0,y0){\n\t\t//ctx.globalAlpha = 0.3;\n\t\tctx.beginPath();\n\t\tvar gradient;\n\t\tif(typeof this._settings.gradient!= \"function\"){\n\t\t\tgradient = ctx.createRadialGradient(x0,y0,radius/4,x,y,radius);\n\t\t\tgradient = this._getGrayGradient(gradient);\n\t\t}\n\t\telse gradient = this._settings.gradient(gradient);\n\t\tctx.fillStyle = gradient;\n\t\tctx.arc(x,y,radius,0,Math.PI*2,true);\n\t\tctx.fill();\n\t\t//ctx.globalAlpha = 1;\n\t\tctx.globalAlpha = 0.7;\n\t},\n\t/**\n\t *   returns the calculates pie parameters: center position and radius\n\t *   @param: ctx - canvas object\n\t *   @param: x0 - the horizontal position of the pie center\n\t *   @param: y0 - the vertical position of the pie center\n\t *   @param: R - pie radius\n\t *   @param: alpha1 - the angle that defines the 1st edge of a sector\n\t *   @param: alpha2 - the angle that defines the 2nd edge of a sector\n\t *   @param: ky - the value that defines an angle of inclination\n\t *   @param: text - label text\n\t *   @param: in_width (boolean) - if label needs being displayed inside a pie\n\t */\n\t_drawSectorLabel:function(x0,y0,R,alpha1,alpha2,ky,text,in_width){\n\t\tvar t = this.canvases[0].renderText(0,0,text,0,1);\n\t\tif (!t) return;\n\n\t\t//get existing width of text\n\t\tvar labelWidth = t.scrollWidth;\n\t\tt.style.width = labelWidth+\"px\";\t//adjust text label to fit all text\n\t\tif (labelWidth>x0) labelWidth = x0;\t//the text can't be greater than half of view\n\n\t\t//calculate expected correction based on default font metrics\n\t\tvar width = (alpha2-alpha1<0.2?4:8);\n\t\tif (in_width) width = labelWidth/1.8;\n\t\tvar alpha = alpha1+(alpha2-alpha1)/2;\n\n\t\t//position and its correction\n\t\tR = R-(width-8)/2;\n\t\tvar corr_x = - width;\n\t\tvar corr_y = -8;\n\t\tvar align = \"right\";\n\n\t\t//for items in left upper and lower sector\n\t\tif(alpha>=Math.PI/2 && alpha<Math.PI || alpha<=3*Math.PI/2 && alpha>=Math.PI){\n\t\t\tcorr_x = -labelWidth-corr_x+1;/*correction for label width*/\n\t\t\talign = \"left\";\n\t\t}\n\n\t\t/*\n\t\t   calculate position of text\n\t\t   basically get point at center of pie sector\n\t\t*/\n\t\tvar offset = 0;\n\n\t\tif(!in_width&&ky<1&&(alpha>0&&alpha<Math.PI))\n\t\t\toffset = (this._settings.height||Math.floor(R/4))/ky;\n\n\t\tvar y = (y0+Math.floor((R+offset)*Math.sin(alpha)))*ky+corr_y;\n\t\tvar x = x0+Math.floor((R+width/2)*Math.cos(alpha))+corr_x;\n\n\t\t/*\n\t\t   if pie sector starts in left of right part pie,\n\t\t   related text\tmust be placed to the left of to the right of pie as well\n\t\t*/\n\t\tvar left_end = (alpha2 < Math.PI/2+0.01);\n\t\tvar left_start = (alpha1 < Math.PI/2);\n\t\tif (left_start && left_end){\n\t\t\tx = Math.max(x,x0+3);\t//right part of pie\n\t\t\t/*if(alpha2-alpha1<0.2)\n\t\t\t\tx = x0;*/\n\t\t}\n\t\telse if (!left_start && !left_end)\n\t\t\tx = Math.min(x,x0-labelWidth);\t//left part of pie\n\t\telse if (!in_width&&(alpha>=Math.PI/2 && alpha<Math.PI || alpha<=3*Math.PI/2 && alpha>=Math.PI)){\n\t\t\tx += labelWidth/3;\n\t\t}\n\n\n\t\t//we need to set position of text manually, based on above calculations\n\t\tt.style.top  = y+\"px\";\n\t\tt.style.left = x+\"px\";\n\t\tt.style.width = labelWidth+\"px\";\n\t\tt.style.textAlign = align;\n\t\tt.style.whiteSpace = \"nowrap\";\n\t},\n\t$render_pie3D:function(ctx,data,x,y,sIndex,map){\n\t\tthis._renderPie(ctx,data,x,y,this._settings.cant,map);\n\t},\n\t$render_donut:function(ctx,data,point0,point1,sIndex,map){\n        if(!data.length)\n\t\t\treturn;\n\t\tthis._renderPie(ctx,data,point0,point1,1,map,sIndex);\n        var config = this._settings;\n\t\tvar coord = this._getPieParameters(point0,point1);\n\t\tvar pieRadius = (config.radius?config.radius:coord.radius);\n\t    var innerRadius = ((config.innerRadius&&(config.innerRadius<pieRadius))?config.innerRadius:pieRadius/3);\n        var x0 = (config.x?config.x:coord.x);\n\t\tvar y0 = (config.y?config.y:coord.y);\n        ctx.fillStyle = \"#ffffff\";\n        ctx.beginPath();\n\t\tctx.arc(x0,y0,innerRadius,0,Math.PI*2,true);\n\t\tctx.fill();\n    }\n});\n\t\t//+pie3d\nwebix.extend(webix.ui.chart, {\n\t/**\n\t*   renders a bar chart\n\t*   @param: ctx - canvas object\n\t*   @param: data - object those need to be displayed\n\t*   @param: x - the width of the container\n\t*   @param: y - the height of the container\n\t*   @param: sIndex - index of drawing chart\n\t*/\n\t$render_bar:function(ctx, data, point0, point1, sIndex, map){\n\t\tvar barWidth, cellWidth,\n\t\t\ti,\n\t\t\tlimits, maxValue, minValue,\n\t\t\trelValue, valueFactor, relativeValues,\n\t\t\tstartValue, unit,\n\t\t\txax, yax,\n\t\t\ttotalHeight = point1.y-point0.y;\n\n\t\tyax = !!this._settings.yAxis;\n\t\txax = !!this._settings.xAxis;\n\n\t\tlimits = this._getLimits();\n\t\tmaxValue = limits.max;\n\t\tminValue = limits.min;\n\n\t\t/*an available width for one bar*/\n\t\tcellWidth = (point1.x-point0.x)/data.length;\n\n\n\t\t/*draws x and y scales*/\n\t\tif(!sIndex&&!(this._settings.origin!=\"auto\"&&!yax)){\n\t\t\tthis._drawScales(data,point0, point1,minValue,maxValue,cellWidth);\n\t\t}\n\n\t\t/*necessary for automatic scale*/\n\t\tif(yax){\n\t\t\tmaxValue = parseFloat(this._settings.yAxis.end);\n\t\t\tminValue = parseFloat(this._settings.yAxis.start);\n\t\t}\n\n\t\t/*unit calculation (bar_height = value*unit)*/\n\t\trelativeValues = this._getRelativeValue(minValue,maxValue);\n\t\trelValue = relativeValues[0];\n\t\tvalueFactor = relativeValues[1];\n\n\t\tunit = (relValue?totalHeight/relValue:relValue);\n\n\t\tif(!yax&&!(this._settings.origin!=\"auto\"&&xax)){\n\t\t\t/*defines start value for better representation of small values*/\n\t\t\tstartValue = 10;\n\t\t\tunit = (relValue?(totalHeight-startValue)/relValue:startValue);\n\t\t}\n\t\t/*if yAxis isn't set, but with custom origin */\n\t\tif(!sIndex&&(this._settings.origin!=\"auto\"&&!yax)&&this._settings.origin>minValue){\n\t\t\tthis._drawXAxis(ctx,data,point0,point1,cellWidth,point1.y-unit*(this._settings.origin-minValue));\n\t\t}\n\n\t\t/*a real bar width */\n\t\tbarWidth = parseInt(this._settings.barWidth,10);\n\t\tvar seriesNumber = 0;\n\t\tvar seriesIndex = 0;\n\t\tfor(i=0; i<this._series.length; i++ ){\n\t\t\tif(i == sIndex){\n\t\t\t\tseriesIndex  = seriesNumber;\n\t\t\t}\n\t\t\tif(this._series[i].type == \"bar\")\n\t\t\t\tseriesNumber++;\n\t\t}\n\t\tif(this._series&&(barWidth*seriesNumber+4)>cellWidth) barWidth = parseInt(cellWidth/seriesNumber-4,10);\n\n\t\t/*the half of distance between bars*/\n\t\tvar barOffset = (cellWidth - barWidth*seriesNumber)/2;\n\n\t\t/*the radius of rounding in the top part of each bar*/\n\t\tvar radius = (typeof this._settings.radius!=\"undefined\"?parseInt(this._settings.radius,10):Math.round(barWidth/5));\n\n\t\tvar inner_gradient = false;\n\t\tvar gradient = this._settings.gradient;\n\n\t\tif(gradient && typeof(gradient) != \"function\"){\n\t\t\tinner_gradient = gradient;\n\t\t\tgradient = false;\n\t\t} else if (gradient){\n\t\t\tgradient = ctx.createLinearGradient(0,point1.y,0,point0.y);\n\t\t\tthis._settings.gradient(gradient);\n\t\t}\n\t\t/*draws a black line if the horizontal scale isn't defined*/\n\t\tif(!xax){\n\t\t\tthis._drawLine(ctx,point0.x,point1.y+0.5,point1.x,point1.y+0.5,\"#000000\",1); //hardcoded color!\n\t\t}\n\n\t\tfor(i=0; i < data.length;i ++){\n\n\t\t\tvar value =  parseFloat(this._settings.value(data[i])||0);\n\t\t\tif(this._logScaleCalc)\n\t\t\t\tvalue = this._log10(value);\n\n\t\t\tif(!value || isNaN(value))\n\t\t\t\tcontinue;\n\n\t\t\tif(value>maxValue) value = maxValue;\n\t\t\tvalue -= minValue;\n\t\t\tvalue *= valueFactor;\n\n\t\t\t/*start point (bottom left)*/\n\t\t\tvar x0 = point0.x + barOffset + i*cellWidth+(barWidth+1)*seriesIndex;\n\t\t\tvar y0 = point1.y;\n\n\t\t\tif(value<0||(this._settings.yAxis&&value===0&&!(this._settings.origin!=\"auto\"&&this._settings.origin>minValue))){\n\t\t\t\tthis.canvases[sIndex].renderTextAt(true, true, x0+Math.floor(barWidth/2),y0,this._settings.label(data[i]));\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t/*takes start value into consideration*/\n\t\t\tif(!yax&&!(this._settings.origin!=\"auto\"&&xax)) value += startValue/unit;\n\n\t\t\tvar color = gradient||this._settings.color.call(this,data[i]);\n\n\n\t\t\t/*drawing bar body*/\n\t\t\tctx.globalAlpha = this._settings.alpha.call(this,data[i]);\n\t\t\tvar points = this._drawBar(ctx,point0,x0,y0,barWidth,minValue,radius,unit,value,color,gradient,inner_gradient);\n\t\t\tif (inner_gradient){\n\t\t\t\tthis._drawBarGradient(ctx,x0,y0,barWidth,minValue,radius,unit,value,color,inner_gradient);\n\t\t\t}\n\t\t\t/*drawing the gradient border of a bar*/\n\t\t\tif(this._settings.border)\n\t\t\t\tthis._drawBarBorder(ctx,x0,y0,barWidth,minValue,radius,unit,value,color);\n\n\t\t\tctx.globalAlpha = 1;\n\n\t\t\t/*sets a bar label*/\n\t\t\tif(points[0]!=x0)\n\t\t\t\tthis.canvases[sIndex].renderTextAt(false, true, x0+Math.floor(barWidth/2),points[1],this._settings.label(data[i]));\n\t\t\telse\n\t\t\t\tthis.canvases[sIndex].renderTextAt(true, true, x0+Math.floor(barWidth/2),points[3],this._settings.label(data[i]));\n\t\t\t/*defines a map area for a bar*/\n\t\t\tmap.addRect(data[i].id,[x0-point0.x,points[3]-point0.y,points[2]-point0.x,points[1]-point0.y],sIndex);\n\t\t\t//this._addMapRect(map,data[i].id,[{x:x0,y:points[3]},{x:points[2],y:points[1]}],point0,sIndex);\n\t\t}\n\t},\n\t_correctBarParams:function(ctx,x,y,value,unit,barWidth,minValue){\n\t\tvar xax = this._settings.xAxis;\n\t\tvar axisStart = y;\n\t\tif(!!xax&&this._settings.origin!=\"auto\" && (this._settings.origin>minValue)){\n\t\t\ty -= (this._settings.origin-minValue)*unit;\n\t\t\taxisStart = y;\n\t\t\tvalue = value-(this._settings.origin-minValue);\n\t\t\tif(value < 0){\n\t\t\t\tvalue *= (-1);\n\t\t\t\tctx.translate(x+barWidth,y);\n\t\t\t\tctx.rotate(Math.PI);\n\t\t\t\tx = 0;\n\t\t\t\ty = 0;\n\t\t\t}\n\t\t\ty -= 0.5;\n\t\t}\n\n\t\treturn {value:value,x0:x,y0:y,start:axisStart};\n\t},\n\t_drawBar:function(ctx,point0,x0,y0,barWidth,minValue,radius,unit,value,color,gradient,inner_gradient){\n\t\tctx.save();\n\t\tctx.fillStyle = color;\n\t\tvar p = this._correctBarParams(ctx,x0,y0,value,unit,barWidth,minValue);\n\t\tvar points = this._setBarPoints(ctx,p.x0,p.y0,barWidth,radius,unit,p.value,(this._settings.border?1:0));\n\t\tif (gradient&&!inner_gradient) ctx.lineTo(p.x0+(this._settings.border?1:0),point0.y); //fix gradient sphreading\n\t\tctx.fill();\n\t\tctx.restore();\n\t\tvar x1 = p.x0;\n\t\tvar x2 = (p.x0!=x0?x0+points[0]:points[0]);\n\t\tvar y1 = (p.x0!=x0?(p.start-points[1]-p.y0):p.y0);\n\t\tvar y2 = (p.x0!=x0?p.start-p.y0:points[1]);\n\n\t\treturn [x1,y1,x2,y2];\n\t},\n\t_setBorderStyles:function(ctx,color){\n\t\tvar hsv,rgb;\n\t\trgb = webix.color.toRgb(color);\n\t\thsv = webix.color.rgbToHsv(rgb[0],rgb[1],rgb[2]);\n\t\thsv[2] /= 1.4;\n\t\tcolor = \"rgb(\"+webix.color.hsvToRgb(hsv[0],hsv[1],hsv[2])+\")\";\n\t\tctx.strokeStyle = color;\n\t\tif(ctx.globalAlpha==1)\n\t\t\tctx.globalAlpha = 0.9;\n\t},\n\t_drawBarBorder:function(ctx,x0,y0,barWidth,minValue,radius,unit,value,color){\n\t\tvar p;\n\t\tctx.save();\n\t\tp = this._correctBarParams(ctx,x0,y0,value,unit,barWidth,minValue);\n\t\tthis._setBorderStyles(ctx,color);\n\t\tthis._setBarPoints(ctx,p.x0,p.y0,barWidth,radius,unit,p.value,ctx.lineWidth/2,1);\n\t\tctx.stroke();\n\t\t/*ctx.fillStyle = color;\n\t\t this._setBarPoints(ctx,p.x0,p.y0,barWidth,radius,unit,p.value,0);\n\t\t ctx.lineTo(p.x0,0);\n\t\t ctx.fill()\n\n\n\t\t ctx.fillStyle = \"#000000\";\n\t\t ctx.globalAlpha = 0.37;\n\n\t\t this._setBarPoints(ctx,p.x0,p.y0,barWidth,radius,unit,p.value,0);\n\t\t ctx.fill()\n\t\t */\n\t\tctx.restore();\n\t},\n\t_drawBarGradient:function(ctx,x0,y0,barWidth,minValue,radius,unit,value,color,inner_gradient){\n\t\tctx.save();\n\t\tvar p = this._correctBarParams(ctx,x0,y0,value,unit,barWidth,minValue);\n\t\tvar gradParam = this._setBarGradient(ctx,p.x0,p.y0,p.x0+barWidth,p.y0-unit*p.value+2,inner_gradient,color,\"y\");\n\t\tvar borderOffset = this._settings.border?1:0;\n\t\tctx.fillStyle = gradParam.gradient;\n\t\tthis._setBarPoints(ctx,p.x0+gradParam.offset,p.y0,barWidth-gradParam.offset*2,radius,unit,p.value,gradParam.offset+borderOffset);\n\t\tctx.fill();\n\t\tctx.restore();\n\t},\n\t/**\n\t *   sets points for bar and returns the position of the bottom right point\n\t *   @param: ctx - canvas object\n\t *   @param: x0 - the x position of start point\n\t *   @param: y0 - the y position of start point\n\t *   @param: barWidth - bar width\n\t *   @param: radius - the rounding radius of the top\n\t *   @param: unit - the value defines the correspondence between item value and bar height\n\t *   @param: value - item value\n\t *   @param: offset - the offset from expected bar edge (necessary for drawing border)\n\t */\n\t_setBarPoints:function(ctx,x0,y0,barWidth,radius,unit,value,offset,skipBottom){\n\t\t/*correction for displaing small values (when rounding radius is bigger than bar height)*/\n\t\tctx.beginPath();\n\t\t//y0 = 0.5;\n\t\tvar angle_corr = 0;\n\t\tif(radius>unit*value){\n\t\t\tvar cosA = (radius-unit*value)/radius;\n\t\t\tif(cosA<=1&&cosA>=-1)\n\t\t\t\tangle_corr = -Math.acos(cosA)+Math.PI/2;\n\t\t}\n\t\t/*start*/\n\t\tctx.moveTo(x0+offset,y0);\n\t\t/*start of left rounding*/\n\t\tvar y1 = y0 - Math.floor(unit*value) + radius + (radius?0:offset);\n\t\tif(radius<unit*value)\n\t\t\tctx.lineTo(x0+offset,y1);\n\t\t/*left rounding*/\n\t\tvar x2 = x0 + radius;\n\n\t\tif (radius&&radius>0)\n\t\t\tctx.arc(x2,y1,Math.max(radius-offset,0),-Math.PI+angle_corr,-Math.PI/2,false);\n\t\t/*start of right rounding*/\n\t\tvar x3 = x0 + barWidth - radius - offset;\n\t\tvar y3 = y1 - radius + (radius?offset:0);\n\t\tctx.lineTo(x3,y3);\n\t\t/*right rounding*/\n\t\tif (radius&&radius>0)\n\t\t\tctx.arc(x3+offset,y1,Math.max(radius-offset,0),-Math.PI/2,0-angle_corr,false);\n\t\t/*bottom right point*/\n\t\tvar x5 = x0 + barWidth-offset;\n\t\tctx.lineTo(x5,y0);\n\t\t/*line to the start point*/\n\t\tif(!skipBottom){\n\t\t\tctx.lineTo(x0+offset,y0);\n\t\t}\n\t\t//\tctx.lineTo(x0,0); //IE fix!\n\t\treturn [x5,y3];\n\t}\n});\t\nwebix.extend(webix.ui.chart, {\n\t/**\n\t*   renders a graphic\n\t*   @param: ctx - canvas object\n\t*   @param: data - object those need to be displayed\n\t*   @param: width - the width of the container\n\t*   @param: height - the height of the container\n\t*   @param: sIndex - index of drawing chart\n\t*/\n\t$render_line:function(ctx, data, point0, point1, sIndex, map){\n\t\tvar config,i,items,params,x0,x1,x2,y1,y2,y0,res1,res2;\n\t\tparams = this._calculateLineParams(ctx,data,point0,point1,sIndex);\n\t\tconfig = this._settings;\n\n\t\tif (data.length) {\n\t\t\tx0 = (config.offset?point0.x+params.cellWidth*0.5:point0.x);\n\t\t\t//finds items with data (excludes scale units)\n\t\t\titems= [];\n\t\t\tfor(i=0; i < data.length;i++){\n\t\t\t\tres2 = this._getPointY(data[i],point0,point1,params);\n\t\t\t\tif(res2 || res2==\"0\"){\n\t\t\t\t\tx2 = ((!i)?x0:params.cellWidth*i - 0.5 + x0);\n\t\t\t\t\ty2 = (typeof res2 == \"object\"?res2.y0:res2);\n\t\t\t\t\tif(i && this._settings.fixOverflow){\n\t\t\t\t\t\tres1 = this._getPointY(data[i-1],point0,point1,params);\n\t\t\t\t\t\tif(res1.out && res1.out == res2.out){\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tx1 = params.cellWidth*(i-1) - 0.5 + x0;\n\t\t\t\t\t\ty1 = (typeof res1 == \"object\"?res1.y0:res1);\n\n\t\t\t\t\t\tif(res1.out){\n\t\t\t\t\t\t\ty0 = (res1.out == \"min\"?point1.y:point0.y);\n\t\t\t\t\t\t\titems.push({x:this._calcOverflowX(x1,x2,y1,y2,y0),y:y0});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(res2.out){\n\t\t\t\t\t\t\ty0 = (res2.out == \"min\"?point1.y:point0.y);\n\t\t\t\t\t\t\titems.push({x:this._calcOverflowX(x1,x2,y1,y2,y0),y:y0});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif(!res2.out)\n\t\t\t\t\t\titems.push({x:x2, y: res2, index: i});\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._mapStart = point0;\n\t\t\tfor(i = 1; i <= items.length; i++){\n\t\t\t\t//line start position\n\t\t\t\tx1 = items[i-1].x;\n\t\t\t\ty1 = items[i-1].y;\n\t\t\t\tif(i<items.length){\n\t\t\t\t\t//line end position\n\t\t\t\t\tx2 = items[i].x;\n\t\t\t\t\ty2 = items[i].y;\n\t\t\t\t\t//line\n\t\t\t\t\tthis._drawLine(ctx,x1,y1,x2,y2,config.line.color.call(this,data[i-1]),config.line.width);\n\t\t\t\t\t//line shadow\n\t\t\t\t\tif(config.line&&config.line.shadow){\n\t\t\t\t\t\tctx.globalAlpha = 0.3;\n\t\t\t\t\t\tthis._drawLine(ctx,x1+2,y1+config.line.width+8,x2+2,y2+config.line.width+8,\"#eeeeee\",config.line.width+3);\n\t\t\t\t\t\tctx.globalAlpha = 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t//item\n\t\t\t\tif(typeof items[i-1].index != \"undefined\"){\n\t\t\t\t\tthis._drawItem(ctx,x1,y1,data[items[i-1].index],config.label(data[items[i-1].index]), sIndex, map, point0);\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t},\n\t_calcOverflowX: function(x1,x2,y1,y2,y){\n\t\treturn  x1 + ( y - y1 )*( x2 - x1 )/( y2 - y1 );\n\t},\n\t/**\n\t*   draws an item and its label\n\t*   @param: ctx - canvas object\n\t*   @param: x0 - the x position of a circle\n\t*   @param: y0 - the y position of a circle\n\t*   @param: obj - data object\n\t*   @param: label - (boolean) defines wherether label needs being drawn\n\t*/\n\t_drawItem:function(ctx,x0,y0,obj,label,sIndex,map){\n\t\tvar config = this._settings.item;\n\n\t\tvar R = parseInt(config.radius.call(this,obj),10)||0;\n\t\tvar mapStart = this._mapStart;\n\t\tif(R){\n\t\t\tctx.save();\n\t\t\tif(config.shadow){\n\t\t\t\tctx.lineWidth = 1;\n\t\t\t\tctx.strokeStyle = \"#bdbdbd\";\n\t\t\t\tctx.fillStyle = \"#bdbdbd\";\n\t\t\t\tvar alphas = [0.1,0.2,0.3];\n\t\t\t\tfor(var i=(alphas.length-1);i>=0;i--){\n\t\t\t\t\tctx.globalAlpha = alphas[i];\n\t\t\t\t\tctx.strokeStyle = \"#d0d0d0\";\n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\tthis._strokeChartItem(ctx,x0,y0+2*R/3,R+i+1,config.type);\n\t\t\t\t\tctx.stroke();\n\t\t\t\t}\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.globalAlpha = 0.3;\n\t\t\t\tctx.fillStyle = \"#bdbdbd\";\n\t\t\t\tthis._strokeChartItem(ctx,x0,y0+2*R/3,R+1,config.type);\n\t\t\t\tctx.fill();\n\t\t\t}\n\t\t\tctx.restore();\n\t\t\tctx.lineWidth = config.borderWidth;\n\t\t\tctx.fillStyle = config.color.call(this,obj);\n\t\t\tctx.strokeStyle = config.borderColor.call(this,obj);\n\t\t\tctx.globalAlpha = config.alpha.call(this,obj);\n\t\t\tctx.beginPath();\n\t\t\tthis._strokeChartItem(ctx,x0,y0,R+1,config.type);\n\t\t\tctx.fill();\n\t\t\tctx.stroke();\n\t\t\tctx.globalAlpha = 1;\n\t\t}\n\t\t/*item label*/\n\t\tif(label){\n\t\t\tthis.canvases[sIndex].renderTextAt(false, true, x0,y0-R-this._settings.labelOffset,this._settings.label.call(this,obj));\n\t\t}\n\t\tif(map){\n\t\t\tvar areaPos = (this._settings.eventRadius||R+1);\n\t\t\t//this._addMapRect(map,obj.id,[{x:x0-areaPos,y:y0-areaPos},{x0+areaPos,y:y0+areaPos}],point0,sIndex);\n\t\t\tmap.addRect(obj.id,[x0-areaPos-mapStart.x,y0-areaPos-mapStart.y,x0+areaPos-mapStart.x,y0+areaPos-mapStart.y],sIndex);\n\t\t}\n\n\t},\n\t_strokeChartItem:function(ctx,x0,y0,R,type){\n\t\tvar p=[];\n\t\tif(type && (type==\"square\" || type==\"s\")){\n\t\t\tR *= Math.sqrt(2)/2;\n\t\t\tp = [\n\t\t\t\t[x0-R-ctx.lineWidth/2,y0-R],\n\t\t\t\t[x0+R,y0-R],\n\t\t\t\t[x0+R,y0+R],\n\t\t\t\t[x0-R,y0+R],\n\t\t\t\t[x0-R,y0-R]\n\t\t\t];\n\t\t}\n\t\telse if(type && (type==\"diamond\" || type==\"d\")){\n\t\t\tvar corr = (ctx.lineWidth>1?ctx.lineWidth*Math.sqrt(2)/4:0);\n\t\t\tp = [\n\t\t\t\t[x0,y0-R],\n\t\t\t\t[x0+R,y0],\n\t\t\t\t[x0,y0+R],\n\t\t\t\t[x0-R,y0],\n\t\t\t\t[x0+corr,y0-R-corr]\n\t\t\t];\n\t\t}\n\t\telse if(type && (type==\"triangle\" || type==\"t\")){\n\t\t\tp = [\n\t\t\t\t[x0,y0-R],\n\t\t\t\t[x0+Math.sqrt(3)*R/2,y0+R/2],\n\t\t\t\t[x0-Math.sqrt(3)*R/2,y0+R/2],\n\t\t\t\t[x0,y0-R]\n\t\t\t];\n\t\t}\n\t\telse\n\t\t\tp = [\n\t\t\t\t[x0,y0,R,0,Math.PI*2,true]\n\t\t\t];\n\t\tthis._path(ctx,p);\n\t},\n\t/**\n\t*   gets the vertical position of the item\n\t*   @param: data - data object\n\t*   @param: y0 - the y position of chart start\n\t*   @param: y1 - the y position of chart end\n\t*   @param: params - the object with elements: minValue, maxValue, unit, valueFactor (the value multiple of 10)\n\t*/\n\t_getPointY: function(data,point0,point1,params){\n\t\tvar minValue = params.minValue;\n\t\tvar maxValue = params.maxValue;\n\t\tvar unit = params.unit;\n\t\tvar valueFactor = params.valueFactor;\n\t\t/*the real value of an object*/\n\t\tvar value = this._settings.value(data);\n\t\tif(this._logScaleCalc){\n\t\t\tvalue = this._log10(value);\n\t\t}\n\t\t/*a relative value*/\n\t\tvar v = (parseFloat(value||0) - minValue)*valueFactor;\n\t\tif(!this._settings.yAxis)\n\t\t\tv += params.startValue/unit;\n\t\t/*a vertical coordinate*/\n\t\tvar y = point1.y - unit*v;\n\t\t/*the limit of the max and min values*/\n\t\tif(this._settings.fixOverflow && ( this._settings.type == \"line\" || this._settings.type == \"area\")){\n\t\t\tif(value > maxValue)\n\t\t\t\ty = {y: point0.y, y0:  y, out: \"max\"};\n\t\t\telse if(v<0 || value < minValue)\n\t\t\t\ty = {y: point1.y, y0:  y, out: \"min\"};\n\t\t}\n\t\telse{\n\t\t\tif(value > maxValue)\n\t\t\t\ty =  point0.y;\n\t\t\tif(v<0 || value < minValue)\n\t\t\t\ty =  point1.y;\n\t\t}\n\t\treturn y;\n\t},\n\t_calculateLineParams: function(ctx,data,point0,point1,sIndex){\n\t\tvar params = {};\n\n\t\t/*maxValue - minValue*/\n\t\tvar relValue;\n\n\t\t/*available height*/\n\t\tparams.totalHeight = point1.y-point0.y;\n\n\t\t/*a space available for a single item*/\n\t\t//params.cellWidth = Math.round((point1.x-point0.x)/((!this._settings.offset&&this._settings.yAxis)?(data.length-1):data.length));\n\t\tif(this._settings.cellWidth)\n\t\t\tparams.cellWidth = Math.min(point1.x-point0.x, this._settings.cellWidth);\n\t\telse\n\t\t\tparams.cellWidth = (point1.x-point0.x)/((!this._settings.offset)?(data.length-1):data.length);\n\t\t/*scales*/\n\t\tvar yax = !!this._settings.yAxis;\n\n\t\tvar limits = (this._settings.type.indexOf(\"stacked\")!=-1?this._getStackedLimits(data):this._getLimits());\n\t\tparams.maxValue = limits.max;\n\t\tparams.minValue = limits.min;\n\n\t\t/*draws x and y scales*/\n\t\tif(!sIndex)\n\t\t\tthis._drawScales(data, point0, point1,params.minValue,params.maxValue,params.cellWidth);\n\n\t\t/*necessary for automatic scale*/\n\t\tif(yax){\n\t\t    params.maxValue = parseFloat(this._settings.yAxis.end);\n\t\t\tparams.minValue = parseFloat(this._settings.yAxis.start);\n\t\t}\n\n\t\t/*unit calculation (y_position = value*unit)*/\n\t\tvar relativeValues = this._getRelativeValue(params.minValue,params.maxValue);\n\t\trelValue = relativeValues[0];\n\t\tparams.valueFactor = relativeValues[1];\n\t\tparams.unit = (relValue?params.totalHeight/relValue:10);\n\n\t\tparams.startValue = 0;\n\t\tif(!yax){\n\t\t\t/*defines start value for better representation of small values*/\n\t\t\tparams.startValue = 10;\n\t\t\tif(params.unit!=params.totalHeight)\n\t\t\t\tparams.unit = (relValue?(params.totalHeight - params.startValue)/relValue:10);\n\t\t}\n\t\treturn params;\n\t}\n});\n\n\nwebix.extend(webix.ui.chart, {\n\t/**\n\t*   renders a bar chart\n\t*   @param: ctx - canvas object\n\t*   @param: data - object those need to be displayed\n\t*   @param: x - the width of the container\n\t*   @param: y - the height of the container\n\t*   @param: sIndex - index of drawing chart\n\t*/\n\t$render_barH:function(ctx, data, point0, point1, sIndex, map){\n\t\tvar barOffset, barWidth, cellWidth, color, gradient, i, limits, maxValue, minValue,\n\t\t\tinnerGradient, valueFactor, relValue, radius, relativeValues,\n\t\t\tstartValue, totalWidth,value,  unit, x0, y0, xax;\n\n\t\t/*an available width for one bar*/\n\t\tcellWidth = (point1.y-point0.y)/data.length;\n\n\t\tlimits = this._getLimits(\"h\");\n\n\t\tmaxValue = limits.max;\n\t\tminValue = limits.min;\n\n\t\ttotalWidth = point1.x-point0.x;\n\n\t\txax = !!this._settings.xAxis;\n\n\t\t/*draws x and y scales*/\n\t\tif(!sIndex )\n\t\t\tthis._drawHScales(ctx,data,point0, point1,minValue,maxValue,cellWidth);\n\n\t\t/*necessary for automatic scale*/\n\t\tif(xax ){\n\t\t\tmaxValue = parseFloat(this._settings.xAxis.end);\n\t\t\tminValue = parseFloat(this._settings.xAxis.start);\n\t\t}\n\n\t\t/*unit calculation (bar_height = value*unit)*/\n\t\trelativeValues = this._getRelativeValue(minValue,maxValue);\n\t\trelValue = relativeValues[0];\n\t\tvalueFactor = relativeValues[1];\n\n\t\tunit = (relValue?totalWidth/relValue:10);\n\t\tif(!xax){\n\t\t\t/*defines start value for better representation of small values*/\n\t\t\tstartValue = 10;\n\t\t\tunit = (relValue?(totalWidth-startValue)/relValue:10);\n\t\t}\n\n\n\t\t/*a real bar width */\n\t\tbarWidth = parseInt(this._settings.barWidth,10);\n\t\tif((barWidth*this._series.length+4)>cellWidth) barWidth = cellWidth/this._series.length-4;\n\t\t/*the half of distance between bars*/\n\t\tbarOffset = Math.floor((cellWidth - barWidth*this._series.length)/2);\n\t\t/*the radius of rounding in the top part of each bar*/\n\t\tradius = (typeof this._settings.radius!=\"undefined\"?parseInt(this._settings.radius,10):Math.round(barWidth/5));\n\n\t\tinnerGradient = false;\n\t\tgradient = this._settings.gradient;\n\n\t\tif (gradient&&typeof(gradient) != \"function\"){\n\t\t\tinnerGradient = gradient;\n\t\t\tgradient = false;\n\t\t} else if (gradient){\n\t\t\tgradient = ctx.createLinearGradient(point0.x,point0.y,point1.x,point0.y);\n\t\t\tthis._settings.gradient(gradient);\n\t\t}\n\t\t/*draws a black line if the horizontal scale isn't defined*/\n\t\tif(!xax){\n\t\t\tthis._drawLine(ctx,point0.x-0.5,point0.y,point0.x-0.5,point1.y,\"#000000\",1); //hardcoded color!\n\t\t}\n\n\n\n\t\tfor(i=0; i < data.length;i ++){\n\n\n\t\t\tvalue =  parseFloat(this._settings.value(data[i]||0));\n\t\t\tif(this._logScaleCalc)\n\t\t\t\tvalue = this._log10(value);\n\t\t\t\n\t\t\tif(!value || isNaN(value))\n\t\t\t\tcontinue;\n\n\t\t\tif(value>maxValue) value = maxValue;\n\t\t\tvalue -= minValue;\n\t\t\tvalue *= valueFactor;\n\n\t\t\t/*start point (bottom left)*/\n\t\t\tx0 = point0.x;\n\t\t\ty0 = point0.y+ barOffset + i*cellWidth+(barWidth+1)*sIndex;\n\n\t\t\tif((value<0&&this._settings.origin==\"auto\")||(this._settings.xAxis&&value===0&&!(this._settings.origin!=\"auto\"&&this._settings.origin>minValue))){\n\t\t\t\tthis.canvases[sIndex].renderTextAt(\"middle\", \"right\", x0+10,y0+barWidth/2+barOffset,this._settings.label(data[i]));\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(value<0&&this._settings.origin!=\"auto\"&&this._settings.origin>minValue){\n\t\t\t\tvalue = 0;\n\t\t\t}\n\n\t\t\t/*takes start value into consideration*/\n\t\t\tif(!xax) value += startValue/unit;\n\t\t\tcolor = gradient||this._settings.color.call(this,data[i]);\n\n\t\t\t/*drawing the gradient border of a bar*/\n\t\t\tif(this._settings.border){\n\t\t\t\tthis._drawBarHBorder(ctx,x0,y0,barWidth,minValue,radius,unit,value,color);\n\t\t\t}\n\n\t\t\t/*drawing bar body*/\n\t\t\tctx.globalAlpha = this._settings.alpha.call(this,data[i]);\n\t\t\tvar points = this._drawBarH(ctx,point1,x0,y0,barWidth,minValue,radius,unit,value,color,gradient,innerGradient);\n\t\t\tif (innerGradient){\n\t\t\t\tthis._drawBarHGradient(ctx,x0,y0,barWidth,minValue,radius,unit,value,color,innerGradient);\n\n\t\t\t}\n\t\t\tctx.globalAlpha = 1;\n\n\n\t\t\t/*sets a bar label and map area*/\n\n\t\t\tif(points[3]==y0){\n\t\t\t\tthis.canvases[sIndex].renderTextAt(\"middle\", \"left\", points[0]-5,points[3]+Math.floor(barWidth/2),this._settings.label(data[i]));\n\t\t\t\tmap.addRect(data[i].id,[points[0]-point0.x,points[3]-point0.y,points[2]-point0.x,points[3]+barWidth-point0.y],sIndex);\n\n\t\t\t}else{\n\t\t\t\tthis.canvases[sIndex].renderTextAt(\"middle\", false, points[2]+5,points[1]+Math.floor(barWidth/2),this._settings.label(data[i]));\n\t\t\t\tmap.addRect(data[i].id,[points[0]-point0.x,y0-point0.y,points[2]-point0.x,points[3]-point0.y],sIndex);\n\t\t\t}\n\n\t\t}\n\t},\n\t/**\n\t *   sets points for bar and returns the position of the bottom right point\n\t *   @param: ctx - canvas object\n\t *   @param: x0 - the x position of start point\n\t *   @param: y0 - the y position of start point\n\t *   @param: barWidth - bar width\n\t *   @param: radius - the rounding radius of the top\n\t *   @param: unit - the value defines the correspondence between item value and bar height\n\t *   @param: value - item value\n\t *   @param: offset - the offset from expected bar edge (necessary for drawing border)\n\t */\n\t_setBarHPoints:function(ctx,x0,y0,barWidth,radius,unit,value,offset,skipLeft){\n\t\t/*correction for displaing small values (when rounding radius is bigger than bar height)*/\n\t\tvar angle_corr = 0;\n\n\t\tif(radius>unit*value){\n\t\t\tvar sinA = (radius-unit*value)/radius;\n\t\t\tangle_corr = -Math.asin(sinA)+Math.PI/2;\n\t\t}\n\t\t/*start*/\n\t\tctx.moveTo(x0,y0+offset);\n\t\t/*start of left rounding*/\n\t\tvar x1 = x0 + unit*value - radius - (radius?0:offset);\n\t\tx1 = Math.max(x0,x1);\n\t\tif(radius<unit*value)\n\t\t\tctx.lineTo(x1,y0+offset);\n\t\t/*left rounding*/\n\t\tvar y2 = y0 + radius;\n\t\tif (radius&&radius>0)\n\t\t\tctx.arc(x1,y2,radius-offset,-Math.PI/2+angle_corr,0,false);\n\t\t/*start of right rounding*/\n\t\tvar y3 = y0 + barWidth - radius - (radius?0:offset);\n\t\tvar x3 = x1 + radius - (radius?offset:0);\n\t\tctx.lineTo(x3,y3);\n\t\t/*right rounding*/\n\t\tif (radius&&radius>0)\n\t\t\tctx.arc(x1,y3,radius-offset,0,Math.PI/2-angle_corr,false);\n\t\t/*bottom right point*/\n\t\tvar y5 = y0 + barWidth-offset;\n\t\tctx.lineTo(x0,y5);\n\t\t/*line to the start point*/\n\t\tif(!skipLeft){\n\t\t\tctx.lineTo(x0,y0+offset);\n\t\t}\n\t\t//\tctx.lineTo(x0,0); //IE fix!\n\t\treturn [x3,y5];\n\t},\n\t_drawHScales:function(ctx,data,point0,point1,start,end,cellWidth){\n\t\tvar x = 0;\n\t\tif(this._settings.xAxis){\n\t\t\tif(!this.canvases[\"x\"])\n\t\t\t\tthis.canvases[\"x\"] =  this._createCanvas(\"axis_x\");\n\t\t\tx = this._drawHXAxis(this.canvases[\"x\"].getCanvas(),data,point0,point1,start,end);\n\t\t}\n\t\tif (this._settings.yAxis){\n\t\t\tif(!this.canvases[\"y\"])\n\t\t\t\tthis.canvases[\"y\"] =  this._createCanvas(\"axis_y\");\n\t\t\tthis._drawHYAxis(this.canvases[\"y\"].getCanvas(),data,point0,point1,cellWidth,x);\n\t\t}\n\t},\n\t_drawHYAxis:function(ctx,data,point0,point1,cellWidth,yAxisX){\n\t\tif (!this._settings.yAxis) return;\n\t\tvar unitPos;\n\t\tvar x0 = parseInt((yAxisX?yAxisX:point0.x),10)-0.5;\n\t\tvar y0 = point1.y+0.5;\n\t\tvar y1 = point0.y;\n\t\tthis._drawLine(ctx,x0,y0,x0,y1,this._settings.yAxis.color,1);\n\n\n\n\t\tfor(var i=0; i < data.length;i ++){\n\n\t\t\t/*scale labels*/\n\t\t\tvar right = ((this._settings.origin!=\"auto\")&&(this._settings.type==\"barH\")&&(parseFloat(this._settings.value(data[i]))<this._settings.origin));\n\t\t\tunitPos = y1+cellWidth/2+i*cellWidth;\n\t\t\tthis.canvases[\"y\"].renderTextAt(\"middle\",(right?false:\"left\"),(right?x0+5:x0-5),unitPos,\n\t\t\t\tthis._settings.yAxis.template(data[i]),\n\t\t\t\t\"webix_axis_item_y\",(right?0:x0-10)\n\t\t\t);\n\t\t\tif(this._settings.yAxis.lines.call(this,data[i]))\n\t\t\t\tthis._drawLine(ctx,point0.x,unitPos,point1.x,unitPos,this._settings.yAxis.lineColor.call(this,data[i]),1);\n\t\t}\n\n\t\tif(this._settings.yAxis.lines.call(this,{}))\n\t\t\tthis._drawLine(ctx,point0.x+0.5,y1+0.5,point1.x,y1+0.5,this._settings.yAxis.lineColor.call(this,{}),1);\n\t\tthis._setYAxisTitle(point0,point1);\n\t},\n\t_drawHXAxis:function(ctx,data,point0,point1,start,end){\n\t\tvar step;\n\t\tvar scaleParam= {};\n\t\tvar axis = this._settings.xAxis;\n\t\tif (!axis) return;\n\n\t\tvar y0 = point1.y+0.5;\n\t\tvar x0 = point0.x-0.5;\n\t\tvar x1 = point1.x-0.5;\n\t\tvar yAxisStart = point0.x;\n\t\tthis._drawLine(ctx,x0,y0,x1,y0,axis.color,1);\n\n\t\tif(axis.step)\n\t\t\tstep = parseFloat(axis.step);\n\n\t\tif(typeof this._configXAxis.step ==\"undefined\"||typeof this._configXAxis.start==\"undefined\"||typeof this._configXAxis.end ==\"undefined\"){\n\t\t\tscaleParam = this._calculateScale(start,end);\n\t\t\tstart = scaleParam.start;\n\t\t\tend = scaleParam.end;\n\t\t\tstep = scaleParam.step;\n\t\t\tthis._settings.xAxis.end = end;\n\t\t\tthis._settings.xAxis.start = start;\n\t\t\tthis._settings.xAxis.step = step;\n\t\t}\n\n\t\tif(step===0) return;\n\t\tvar stepHeight = (x1-x0)*step/(end-start);\n\t\tvar c = 0;\n\t\tfor(var i = start; i<=end; i += step){\n\t\t\tvar value = this._logScaleCalc?Math.pow(10,i):i;\n\t\t\tif(scaleParam.fixNum)  value = parseFloat(value).toFixed(scaleParam.fixNum);\n\t\t\tvar xi = Math.floor(x0+c*stepHeight)+ 0.5;/*canvas line fix*/\n\n\t\t\tif(!(i==start&&this._settings.origin==\"auto\") &&axis.lines.call(this,i))\n\t\t\t\tthis._drawLine(ctx,xi,y0,xi,point0.y,this._settings.xAxis.lineColor.call(this,i),1);\n\t\t\tif(i == this._settings.origin) yAxisStart = xi+1;\n\t\t\t/*correction for JS float calculation*/\n\t\t\tif(step<1 && !this._logScaleCalc){\n\t\t\t\tvar power = Math.min(Math.floor(this._log10(step)),(start<=0?0:Math.floor(this._log10(start))));\n\t\t\t\tvar corr = Math.pow(10,-power);\n\t\t\t\tvalue = Math.round(value*corr)/corr;\n\t\t\t\ti = value;\n\t\t\t}\n\t\t\tthis.canvases[\"x\"].renderTextAt(false, true,xi,y0+2,axis.template(value.toString()),\"webix_axis_item_x\");\n\t\t\tc++;\n\t\t}\n\t\tthis.canvases[\"x\"].renderTextAt(true, false, x0,point1.y+this._settings.padding.bottom-3,\n\t\t\tthis._settings.xAxis.title,\n\t\t\t\"webix_axis_title_x\",\n\t\t\tpoint1.x - point0.x\n\t\t);\n\t\t/*the right border in lines in scale are enabled*/\n\t\tif (!axis.lines.call(this,{})){\n\t\t\tthis._drawLine(ctx,x0,point0.y-0.5,x1,point0.y-0.5,this._settings.xAxis.color,0.2);\n\t\t}\n\t\treturn yAxisStart;\n\t},\n\t_correctBarHParams:function(ctx,x,y,value,unit,barWidth,minValue){\n\t\tvar yax = this._settings.yAxis;\n\t\tvar axisStart = x;\n\t\tif(!!yax&&this._settings.origin!=\"auto\" && (this._settings.origin>minValue)){\n\t\t\tx += (this._settings.origin-minValue)*unit;\n\t\t\taxisStart = x;\n\t\t\tvalue = value-(this._settings.origin-minValue);\n\t\t\tif(value < 0){\n\t\t\t\tvalue *= (-1);\n\t\t\t\tctx.translate(x,y+barWidth);\n\t\t\t\tctx.rotate(Math.PI);\n\t\t\t\tx = 0.5;\n\t\t\t\ty = 0;\n\t\t\t}\n\t\t\tx += 0.5;\n\t\t}\n\n\t\treturn {value:value,x0:x,y0:y,start:axisStart};\n\t},\n\t_drawBarH:function(ctx,point1,x0,y0,barWidth,minValue,radius,unit,value,color,gradient,inner_gradient){\n\t\tctx.save();\n\t\tvar p = this._correctBarHParams(ctx,x0,y0,value,unit,barWidth,minValue);\n\t\tctx.fillStyle = color;\n\t\tctx.beginPath();\n\t\tvar points = this._setBarHPoints(ctx,p.x0,p.y0,barWidth,radius,unit,p.value,(this._settings.border?1:0));\n\t\tif (gradient&&!inner_gradient) ctx.lineTo(point1.x,p.y0+(this._settings.border?1:0)); //fix gradient sphreading\n\t\tctx.fill();\n\t\tctx.restore();\n\t\tvar y1 = p.y0;\n\t\tvar y2 = (p.y0!=y0?y0:points[1]);\n\t\tvar x1 = (p.y0!=y0?(p.start-points[0]):p.start);\n\t\tvar x2 = (p.y0!=y0?p.start:points[0]);\n\n\t\treturn [x1,y1,x2,y2];\n\t},\n\t_drawBarHBorder:function(ctx,x0,y0,barWidth,minValue,radius,unit,value,color){\n\t\tctx.save();\n\t\tvar p = this._correctBarHParams(ctx,x0,y0,value,unit,barWidth,minValue);\n\n\t\tctx.beginPath();\n\t\tthis._setBorderStyles(ctx,color);\n\t\tctx.globalAlpha =0.9;\n\t\tthis._setBarHPoints(ctx,p.x0,p.y0,barWidth,radius,unit,p.value,ctx.lineWidth/2,1);\n\n\t\tctx.stroke();\n\t\tctx.restore();\n\t},\n\t_drawBarHGradient:function(ctx,x0,y0,barWidth,minValue,radius,unit,value,color,inner_gradient){\n\t\tctx.save();\n\t\t//y0 -= (webix.env.isIE?0:0.5);\n\t\tvar p = this._correctBarHParams(ctx,x0,y0,value,unit,barWidth,minValue);\n\t\tvar gradParam = this._setBarGradient(ctx,p.x0,p.y0+barWidth,p.x0+unit*p.value,p.y0,inner_gradient,color,\"x\");\n\t\tctx.fillStyle = gradParam.gradient;\n\t\tctx.beginPath();\n\t\tthis._setBarHPoints(ctx,p.x0,p.y0+gradParam.offset,barWidth-gradParam.offset*2,radius,unit,p.value,gradParam.offset);\n\t\tctx.fill();\n\t\tctx.globalAlpha = 1;\n\t\tctx.restore();\n\t}\n});\n\t\t\nwebix.extend(webix.ui.chart, {\n\t/**\n\t*   renders a bar chart\n\t*   @param: ctx - canvas object\n\t*   @param: data - object those need to be displayed\n\t*   @param: x - the width of the container\n\t*   @param: y - the height of the container\n\t*   @param: sIndex - index of drawing chart\n\t*/\n\t$render_stackedBar:function(ctx, data, point0, point1, sIndex, map){\n\t\tvar maxValue,minValue, xAxisY, x0, y0;\n\t\t/*necessary if maxValue - minValue < 0*/\n\t\tvar valueFactor;\n\t\t/*maxValue - minValue*/\n\t\tvar relValue;\n\t\tvar config = this._settings;\n\t\tvar total_height = point1.y-point0.y;\n\n\t\tvar yax = !!config.yAxis;\n\t\tvar xax = !!config.xAxis;\n\n\t\tvar limits = this._getStackedLimits(data);\n\n\t\tvar origin = (config.origin === 0);\n\n\t\tmaxValue = limits.max;\n\t\tminValue = limits.min;\n\n\t\t/*an available width for one bar*/\n\t\tvar cellWidth = Math.floor((point1.x-point0.x)/data.length);\n\n\t\t/*draws x and y scales*/\n\t\tif(!sIndex){\n\t\t\txAxisY = this._drawScales(data,point0, point1,minValue,maxValue,cellWidth);\n\t\t}\n\n\t\t/*necessary for automatic scale*/\n\t\tif(yax){\n\t\t\tmaxValue = parseFloat(config.yAxis.end);\n\t\t\tminValue = parseFloat(config.yAxis.start);\n\t\t}\n\n\t\t/*unit calculation (bar_height = value*unit)*/\n\t\tvar relativeValues = this._getRelativeValue(minValue,maxValue);\n\t\trelValue = relativeValues[0];\n\t\tvalueFactor = relativeValues[1];\n\n\t\tvar unit = (relValue?total_height/relValue:10);\n\n\t\t/*a real bar width */\n\t\tvar barWidth = parseInt(config.barWidth,10);\n\t\tif(barWidth+4 > cellWidth) barWidth = cellWidth-4;\n\t\t/*the half of distance between bars*/\n\t\tvar barOffset = Math.floor((cellWidth - barWidth)/2);\n\n\n\t\tvar inner_gradient = (config.gradient?config.gradient:false);\n\n\t\t/*draws a black line if the horizontal scale isn't defined*/\n\t\tif(!xax){\n\t\t\t//scaleY = y-bottomPadding;\n\t\t\tthis._drawLine(ctx,point0.x,point1.y+0.5,point1.x,point1.y+0.5,\"#000000\",1); //hardcoded color!\n\t\t}\n\n\t\tfor(var i=0; i < data.length;i ++){\n\t\t\tvar value =  parseFloat(config.value(data[i]||0));\n\n\t\t\tif(this._logScaleCalc)\n\t\t\t\tvalue = this._log10(value);\n\n\t\t\t/*start point (bottom left)*/\n\t\t\tx0 = point0.x + barOffset + i*cellWidth;\n\n\n\t\t\tvar negValue = origin&&value<0;\n\t\t\tif(!sIndex){\n\t\t\t\ty0 = xAxisY-1;\n\t\t\t\tdata[i].$startY = y0;\n\t\t\t\tif(origin){\n\t\t\t\t\tif(negValue)\n\t\t\t\t\t\ty0 = xAxisY+1;\n\t\t\t\t\tdata[i].$startYN = xAxisY+1;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\ty0 = negValue?data[i].$startYN:data[i].$startY;\n\t\t\t}\n\n\t\t\tif(!value || isNaN(value))\n\t\t\t\tcontinue;\n\n\t\t\t/*adjusts the first tab to the scale*/\n\t\t\tif(!sIndex && !origin)\n\t\t\t\tvalue -= minValue;\n\n\t\t\tvalue *= valueFactor;\n\n\t\t\t/*the max height limit*/\n\t\t\tif(y0 < (point0.y+1)) continue;\n\n\t\t\tvar color = this._settings.color.call(this,data[i]);\n\n\t\t\tvar firstSector =  Math.abs(y0-(origin?(point1.y+minValue*unit):point1.y))<3;\n\n\t\t\t/*drawing bar body*/\n\t\t\tctx.globalAlpha = config.alpha.call(this,data[i]);\n\t\t\tctx.fillStyle = ctx.strokeStyle = config.color.call(this,data[i]);\n\t\t\tctx.beginPath();\n\n\t\t\tvar y1 = y0 - unit*value + (firstSector?(negValue?-1:1):0);\n\n\t\t\tvar points = this._setStakedBarPoints(ctx,x0-(config.border?0.5:0),y0,barWidth+(config.border?0.5:0),y1, 0,point0.y);\n\t\t\tctx.fill();\n\t\t\tctx.stroke();\n\n\t\t\t/*gradient*/\n\t\t\tif (inner_gradient){\n\t\t\t\tctx.save();\n\t\t\t\tvar gradParam = this._setBarGradient(ctx,x0,y0,x0+barWidth,points[1],inner_gradient,color,\"y\");\n\t\t\t\tctx.fillStyle = gradParam.gradient;\n\t\t\t\tctx.beginPath();\n\t\t\t\tpoints = this._setStakedBarPoints(ctx,x0+gradParam.offset,y0,barWidth-gradParam.offset*2,y1,(config.border?1:0),point0.y);\n\t\t\t\tctx.fill();\n\t\t\t\tctx.restore();\n\t\t\t}\n\t\t\t/*drawing the gradient border of a bar*/\n\t\t\tif(config.border){\n\t\t\t\tctx.save();\n\t\t\t\tif(typeof config.border == \"string\")\n\t\t\t\t\tctx.strokeStyle = config.border;\n\t\t\t\telse\n\t\t\t\t\tthis._setBorderStyles(ctx,color);\n\t\t\t\tctx.beginPath();\n\n\t\t\t\tthis._setStakedBarPoints(ctx,x0-0.5,parseInt(y0,10)+0.5,barWidth+1,parseInt(y1,10)+0.5,0,point0.y, firstSector);\n\t\t\t\tctx.stroke();\n\t\t\t\tctx.restore();\n\t\t\t}\n\t\t\tctx.globalAlpha = 1;\n\n\t\t\t/*sets a bar label*/\n\t\t\tthis.canvases[sIndex].renderTextAt(false, true, x0+Math.floor(barWidth/2),(points[1]+(y0-points[1])/2)-7,this._settings.label(data[i]));\n\t\t\t/*defines a map area for a bar*/\n\t\t\tmap.addRect(data[i].id,[x0-point0.x,points[1]-point0.y,points[0]-point0.x,data[i][negValue?\"$startYN\":\"$startY\"]-point0.y],sIndex);\n\n\t\t\t/*the start position for the next series*/\n\n\t\t\tdata[i][negValue?\"$startYN\":\"$startY\"] = points[1];\n\n\t\t}\n\t},\n\t/**\n\t *   sets points for bar and returns the position of the bottom right point\n\t *   @param: ctx - canvas object\n\t *   @param: x0 - the x position of start point\n\t *   @param: y0 - the y position of start point\n\t *   @param: barWidth - bar width\n\t *   @param: radius - the rounding radius of the top\n\t *   @param: unit - the value defines the correspondence between item value and bar height\n\t *   @param: value - item value\n\t *   @param: offset - the offset from expected bar edge (necessary for drawing border)\n\t *   @param: minY - the minimum y position for the bars ()\n\t */\n\t_setStakedBarPoints:function(ctx,x0,y0,barWidth,y1,offset,minY,skipBottom){\n\t\t/*start*/\n\t\tctx.moveTo(x0,y0);\n\t\t/*maximum height limit*/\n\n\t\tif(y1<minY)\n\t\t\ty1 = minY;\n\t\tctx.lineTo(x0,y1);\n\t\tvar x3 = x0 + barWidth;\n\t\tvar y3 = y1;\n\t\tctx.lineTo(x3,y3);\n\t\t/*right rounding*/\n\t\t/*bottom right point*/\n\t\tvar x5 = x0 + barWidth;\n\t\tctx.lineTo(x5,y0);\n\t\t/*line to the start point*/\n\t\tif(!skipBottom){\n\t\t\tctx.lineTo(x0,y0);\n\t\t}\n\t\t//\tctx.lineTo(x0,0); //IE fix!\n\t\treturn [x5,y3];\n\t}\n});\t\n\nwebix.extend(webix.ui.chart, {\n/**\n\t*   renders a bar chart\n\t*   @param: ctx - canvas object\n\t*   @param: data - object those need to be displayed\n\t*   @param: x - the width of the container\n\t*   @param: y - the height of the container\n\t*   @param: sIndex - index of drawing chart\n\t*   @param: map - map object\n\t*/\n\t$render_stackedBarH:function(ctx, data, point0, point1, sIndex, map){\n\t\tvar maxValue,minValue;\n\t\t/*necessary if maxValue - minValue < 0*/\n\t\tvar valueFactor;\n\t\t/*maxValue - minValue*/\n\t\tvar relValue;\n\n\t\tvar total_width = point1.x-point0.x;\n\n\t\tvar yax = !!this._settings.yAxis;\n\n\t\tvar limits = this._getStackedLimits(data);\n\t\tmaxValue = limits.max;\n\t\tminValue = limits.min;\n\n\t\t/*an available width for one bar*/\n\t\tvar cellWidth = Math.floor((point1.y-point0.y)/data.length);\n\n\t\t/*draws x and y scales*/\n\t\tif(!sIndex)\n\t\t\tthis._drawHScales(ctx,data,point0, point1,minValue,maxValue,cellWidth);\n\n\t\t/*necessary for automatic scale*/\n\t\tif(yax){\n\t\t\tmaxValue = parseFloat(this._settings.xAxis.end);\n\t\t\tminValue = parseFloat(this._settings.xAxis.start);\n\t\t}\n\n\t\t/*unit calculation (bar_height = value*unit)*/\n\t\tvar relativeValues = this._getRelativeValue(minValue,maxValue);\n\t\trelValue = relativeValues[0];\n\t\tvalueFactor = relativeValues[1];\n\n\t\tvar unit = (relValue?total_width/relValue:10);\n\t\tvar startValue = 0;\n\t\tif(!yax){\n\t\t\t/*defines start value for better representation of small values*/\n\t\t\tstartValue = 10;\n\t\t\tunit = (relValue?(total_width-startValue)/relValue:10);\n\t\t}\n\n\t\t/*a real bar width */\n\t\tvar barWidth = parseInt(this._settings.barWidth,10);\n\t\tif((barWidth+4)>cellWidth) barWidth = cellWidth-4;\n\t\t/*the half of distance between bars*/\n\t\tvar barOffset = (cellWidth - barWidth)/2;\n\t\t/*the radius of rounding in the top part of each bar*/\n\t\tvar radius = 0;\n\n\t\tvar inner_gradient = false;\n\t\tvar gradient = this._settings.gradient;\n\t\tif (gradient){\n\t\t\tinner_gradient = true;\n\t\t}\n\t\t/*draws a black line if the horizontal scale isn't defined*/\n\t\tif(!yax){\n\t\t\tthis._drawLine(ctx,point0.x-0.5,point0.y,point0.x-0.5,point1.y,\"#000000\",1); //hardcoded color!\n\t\t}\n\n\t\tvar seriesNumber = 0;\n\t\tvar seriesIndex = 0;\n\t\tfor(i=0; i<this._series.length; i++ ){\n\t\t\tif(i == sIndex){\n\t\t\t\tseriesIndex  = seriesNumber;\n\t\t\t}\n\t\t\tif(this._series[i].type == \"stackedBarH\")\n\t\t\t\tseriesNumber++;\n\t\t}\n\n\t\tfor(var i=0; i < data.length;i ++){\n\n\t\t\tif(!seriesIndex)\n\t\t\t\tdata[i].$startX = point0.x;\n\n\t\t\tvar value =  parseFloat(this._settings.value(data[i]||0));\n\t\t\tif(value>maxValue) value = maxValue;\n\t\t\tvalue -= minValue;\n\t\t\tvalue *= valueFactor;\n\n\t\t\t/*start point (bottom left)*/\n\t\t\tvar x0 = point0.x;\n\t\t\tvar y0 = point0.y+ barOffset + i*cellWidth;\n\n\t\t\tif(!seriesIndex)\n\t\t\t\tdata[i].$startX = x0;\n\t\t\telse\n\t\t\t\tx0 = data[i].$startX;\n\n\t\t\tif(!value || isNaN(value))\n\t\t\t\tcontinue;\n\n\t\t\t/*takes start value into consideration*/\n\t\t\tif(!yax) value += startValue/unit;\n\t\t\tvar color = this._settings.color.call(this,data[i]);\n\n\n\t\t\t/*drawing bar body*/\n\t\t\tctx.globalAlpha = this._settings.alpha.call(this,data[i]);\n\t\t\tctx.fillStyle = this._settings.color.call(this,data[i]);\n\t\t\tctx.beginPath();\n\t\t\tvar points = this._setBarHPoints(ctx,x0,y0,barWidth,radius,unit,value,0);\n\t\t\tif (gradient&&!inner_gradient) ctx.lineTo(point0.x+total_width,y0+(this._settings.border?1:0)); //fix gradient sphreading\n\t\t\tctx.fill();\n\n\t\t\tif (inner_gradient){\n\t\t\t\tvar gradParam = this._setBarGradient(ctx,x0,y0+barWidth,x0,y0,inner_gradient,color,\"x\");\n\t\t\t\tctx.fillStyle = gradParam.gradient;\n\t\t\t\tctx.beginPath();\n\t\t\t\tpoints = this._setBarHPoints(ctx,x0,y0, barWidth,radius,unit,value,0);\n\t\t\t\tctx.fill();\n\t\t\t}\n\t\t\t/*drawing the gradient border of a bar*/\n\t\t\tif(this._settings.border){\n\t\t\t\tthis._drawBarHBorder(ctx,x0,y0,barWidth,minValue,radius,unit,value,color);\n\t\t\t}\n\n\t\t\tctx.globalAlpha = 1;\n\n\t\t\t/*sets a bar label*/\n\t\t\tthis.canvases[sIndex].renderTextAt(\"middle\",true,data[i].$startX+(points[0]-data[i].$startX)/2-1, y0+(points[1]-y0)/2, this._settings.label(data[i]));\n\t\t\t/*defines a map area for a bar*/\n\t\t\tmap.addRect(data[i].id,[data[i].$startX-point0.x,y0-point0.y,points[0]-point0.x,points[1]-point0.y],sIndex);\n\t\t\t/*the start position for the next series*/\n\t\t\tdata[i].$startX = points[0];\n\t\t}\n\t}\n});\nwebix.extend(webix.ui.chart, {\n\t/**\n\t*   renders a spline chart\n\t*   @param: ctx - canvas object\n\t*   @param: data - object those need to be displayed\n\t*   @param: width - the width of the container\n\t*   @param: height - the height of the container\n\t*   @param: sIndex - index of drawing chart\n\t*/\n\t$render_spline:function(ctx, data, point0, point1, sIndex, map){\n\t\tvar config,i,items,j,params,sparam,x,x0,x1,x2,y,y1,y2;\n\t\tparams = this._calculateLineParams(ctx,data,point0,point1,sIndex);\n\t\tconfig = this._settings;\n\t\tthis._mapStart = point0;\n\n\t\t/*array of all points*/\n\t\titems = [];\n\n\t\t/*drawing all items*/\n\t\tif (data.length) {\n\n\t\t\t/*getting all points*/\n\t\t\tx0 = (config.offset?point0.x+params.cellWidth*0.5:point0.x);\n\t\t\tfor(i=0; i < data.length;i ++){\n\t\t\t\ty = this._getPointY(data[i],point0,point1,params);\n\t\t\t\tif(y || y==\"0\"){\n\t\t\t\t\tx = ((!i)?x0:params.cellWidth*i - 0.5 + x0);\n\t\t\t\t\titems.push({x:x,y:y,v:this._settings.value(data[i]),index:i});\n\t\t\t\t}\n\t\t\t}\n\t\t\tsparam = this._getSplineParameters(items);\n\n\t\t\tfor(i =0; i< items.length; i++){\n\t\t\t\tx1 = items[i].x;\n\t\t\t\ty1 = items[i].y;\n\t\t\t\tif(i<items.length-1){\n\t\t\t\t\tx2 = items[i+1].x;\n\t\t\t\t\ty2 = items[i+1].y;\n\t\t\t\t\tfor(j = x1; j < x2; j++){\n\t\t\t\t\t\tvar sY1 = this._getSplineYPoint(j,x1,i,sparam.a,sparam.b,sparam.c,sparam.d);\n\t\t\t\t\t\tif(sY1<point0.y)\n\t\t\t\t\t\t\tsY1=point0.y;\n\t\t\t\t\t\tif(sY1>point1.y)\n\t\t\t\t\t\t\tsY1=point1.y;\n\t\t\t\t\t\tvar sY2 = this._getSplineYPoint(j+1,x1,i,sparam.a,sparam.b,sparam.c,sparam.d);\n\t\t\t\t\t\tif(sY2<point0.y)\n\t\t\t\t\t\t\tsY2=point0.y;\n\t\t\t\t\t\tif(sY2>point1.y)\n\t\t\t\t\t\t\tsY2=point1.y;\n\t\t\t\t\t\tthis._drawLine(ctx,j,sY1,j+1,sY2,config.line.color(data[i]),config.line.width);\n\n\t\t\t\t\t}\n\t\t\t\t\tthis._drawLine(ctx,x2-1,this._getSplineYPoint(j,x1,i,sparam.a,sparam.b,sparam.c,sparam.d),x2,y2,config.line.color(data[i]),config.line.width);\n\t\t\t\t}\n\t\t\t\tthis._drawItem(ctx,x1,y1,data[items[i].index],config.label(data[items[i].index]), sIndex, map);\n\t\t\t}\n\t\t}\n\t},\n\t/*gets spline parameter*/\n\t_getSplineParameters:function(points){\n\t\tvar a ,b, c, d, i, s, u, v,\n\t\t\th = [],\n\t\t\tm = [],\n\t\t\tn = points.length;\n\n\t\tfor(i =0; i<n-1;i++){\n\t\t\th[i] = points[i+1].x - points[i].x;\n\t\t\tm[i] = (points[i+1].y - points[i].y)/h[i];\n\t\t}\n\t\tu = [];\tv = [];\n\t\tu[0] = 0;\n\t\tu[1] = 2*(h[0] + h[1]);\n\t\tv[0] = 0;\n\t\tv[1] = 6*(m[1] - m[0]);\n\t\tfor(i =2; i < n-1; i++){\n\t\t\tu[i] = 2*(h[i-1]+h[i]) - h[i-1]*h[i-1]/u[i-1];\n\t\t\tv[i] = 6*(m[i]-m[i-1]) - h[i-1]*v[i-1]/u[i-1];\n\t\t}\n\n\t\ts = [];\n\t\ts[n-1] = s[0] = 0;\n\t\tfor(i = n -2; i>=1; i--)\n\t\t\ts[i] = (v[i] - h[i]*s[i+1])/u[i];\n\n\t\ta = []; b = []; c = [];\td = [];\n\n\t\tfor(i =0; i<n-1;i++){\n\t\t\ta[i] = points[i].y;\n\t\t\tb[i] = - h[i]*s[i+1]/6 - h[i]*s[i]/3 + (points[i+1].y-points[i].y)/h[i];\n\t\t\tc[i] = s[i]/2;\n\t\t\td[i] = (s[i+1] - s[i])/(6*h[i]);\n\t\t}\n\n\t\tfor (i=0; i<points.length-1; i++){\n\t\t\tif (points[i].v === 0 && points[i+1].v === 0){\n\t\t\t\ta[i] = points[i].y;\n\t\t\t\td[i] = c[i] = b[i] = 0;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn {a:a,b:b,c:c,d:d};\n\t},\n\t/*returns the y position of the spline point */\n\t_getSplineYPoint:function(x,xi,i,a,b,c,d){\n\t\treturn a[i] + (x - xi)*(b[i] + (x-xi)*(c[i]+(x-xi)*d[i]));\n\t}\n});\nwebix.extend(webix.ui.chart,{\n\t/**\n\t*   renders an area chart\n\t*   @param: ctx - canvas object\n\t*   @param: data - object those need to be displayed\n\t*   @param: width - the width of the container\n\t*   @param: height - the height of the container\n\t*   @param: sIndex - index of drawing chart\n\t*/\n\t$render_area:function(ctx, data, point0, point1, sIndex, map){\n\n\t\tvar align, config, i, mapRect, obj, params, path,\n\t\t\tres1, res2, x0, x1, y1, x2, y2, y0;\n\n\t\tparams = this._calculateLineParams(ctx,data,point0,point1,sIndex);\n\t\tconfig = this._settings;\n\n\t\t//the size of map area\n\t\tmapRect = (config.eventRadius||Math.floor(params.cellWidth/2));\n\n\t\tif (data.length) {\n\n\t\t\t// area points\n\t\t\tpath = [];\n\n\t\t\t//the x position of the first item\n\t\t\tx0 = (!config.offset?point0.x:point0.x+params.cellWidth*0.5);\n\n\t\t\t/*\n\t\t\t iterates over all data items:\n\t\t\t calculates [x,y] for area path, adds rect to chart map and renders labels\n\t\t\t */\n\t\t\tfor(i=0; i < data.length;i ++){\n\t\t\t\tobj = data[i];\n\n\t\t\t\tres2 = this._getPointY(obj,point0,point1,params);\n\t\t\t\tx2 = x0 + params.cellWidth*i ;\n\t\t\t\tif(res2){\n\t\t\t\t\ty2 = (typeof res2 == \"object\"?res2.y0:res2);\n\t\t\t\t\tif(i && this._settings.fixOverflow){\n\t\t\t\t\t\tres1 = this._getPointY(data[i-1],point0,point1,params);\n\t\t\t\t\t\tif(res1.out && res1.out == res2.out){\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tx1 = params.cellWidth*(i-1) - 0.5 + x0;\n\t\t\t\t\t\ty1 = (typeof res1 == \"object\"?res1.y0:res1);\n\t\t\t\t\t\tif(res1.out){\n\t\t\t\t\t\t\ty0 = (res1.out == \"min\"?point1.y:point0.y);\n\t\t\t\t\t\t\tpath.push([this._calcOverflowX(x1,x2,y1,y2,y0),y0]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(res2.out){\n\t\t\t\t\t\t\ty0 = (res2.out == \"min\"?point1.y:point0.y);\n\t\t\t\t\t\t\tpath.push([this._calcOverflowX(x1,x2,y1,y2,y0),y0]);\n\t\t\t\t\t\t\tif(i == (data.length-1) && y0 == point0.y)\n\t\t\t\t\t\t\t\tpath.push([x2,point0.y]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(!res2.out){\n\t\t\t\t\t\tpath.push([x2,y2]);\n\t\t\t\t\t\t//map\n\t\t\t\t\t\tmap.addRect(obj.id,[x2-mapRect-point0.x,y2-mapRect-point0.y,x2+mapRect-point0.x,y2+mapRect-point0.y],sIndex);\n\t\t\t\t\t}\n\n\t\t\t\t\t//labels\n\t\t\t\t\tif(!config.yAxis){\n\t\t\t\t\t\talign = (!config.offset&&(i == data.length-1)?\"left\":\"center\");\n\t\t\t\t\t\tthis.canvases[sIndex].renderTextAt(false, align, x2, y2-config.labelOffset,config.label(obj));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tif(path.length){\n\t\t\t\tpath.push([x2,point1.y]);\n\t\t\t\tpath.push([path[0][0],point1.y]);\n\t\t\t}\n\n\n\n\t\t\t//filling area\n\t\t\tctx.globalAlpha = this._settings.alpha.call(this,data[0]);\n\t\t\tctx.fillStyle = this._settings.color.call(this,data[0]);\n\t\t\tctx.beginPath();\n\t\t\tthis._path(ctx,path);\n\t\t\tctx.fill();\n\n\t\t\tctx.lineWidth = 1;\n\t\t\tctx.globalAlpha =1;\n\n\t\t\t//border\n\t\t\tif(config.border){\n\t\t\t\tctx.lineWidth = config.borderWidth||1;\n\t\t\t\tif(config.borderColor)\n\t\t\t\t\tctx.strokeStyle =  config.borderColor.call(this,data[0]);\n\t\t\t\telse\n\t\t\t\t\tthis._setBorderStyles(ctx,ctx.fillStyle);\n\n\t\t\t\tctx.beginPath();\n\t\t\t\tthis._path(ctx,path);\n\t\t\t\tctx.stroke();\n\n\t\t\t}\n\n\n\t\t}\n\t},\n\t\n\t/**\n\t*   renders an area chart\n\t*   @param: ctx - canvas object\n\t*   @param: data - object those need to be displayed\n\t*   @param: width - the width of the container\n\t*   @param: height - the height of the container\n\t*   @param: sIndex - index of drawing chart\n\t*/\n\t$render_stackedArea:function(ctx, data, point0, point1, sIndex, map){\n\n\t\tvar a0, a1, align, config, i, j, lastItem, mapRect, obj, params, path, x, y, yPos;\n\n\t\tparams = this._calculateLineParams(ctx,data,point0,point1,sIndex);\n\n\t\tconfig = this._settings;\n\n\t\t/*the value that defines the map area position*/\n\t\tmapRect = (config.eventRadius||Math.floor(params.cellWidth/2));\n\n\n\t\t/*drawing all items*/\n\t\tif (data.length) {\n\n\t\t\t// area points\n\t\t\tpath = [];\n\n\t\t\t// y item positions\n\t\t\tyPos = [];\n\n\t\t\t//the x position of the first item\n\t\t\tx = (!config.offset?point0.x:point0.x+params.cellWidth*0.5);\n\n\n\t\t\tvar setOffset = function(i,y){\n\t\t\t\treturn sIndex?(data[i].$startY?y-point1.y+data[i].$startY:0):y;\n\t\t\t};\n\n\t\t\tvar solveEquation  = function(x,p0,p1){\n\t\t\t\tvar k = (p1.y - p0.y)/(p1.x - p0.x);\n\t\t\t\treturn  k*x + p0.y - k*p0.x;\n\t\t\t};\n\n\t\t\t/*\n\t\t\t iterates over all data items:\n\t\t\t calculates [x,y] for area path, adds rect to chart map and renders labels\n\t\t\t */\n\n\t\t\tfor(i=0; i < data.length;i ++){\n\t\t\t\tobj = data[i];\n\n\t\t\t\tif(!i){\n\t\t\t\t\ty =  setOffset(i,point1.y);\n\t\t\t\t\tpath.push([x,y]);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tx += params.cellWidth ;\n\t\t\t\t}\n\n\t\t\t\ty = setOffset(i,this._getPointY(obj,point0,point1,params));\n\n\t\t\t\tyPos.push((isNaN(y)&&!i)?(data[i].$startY||point1.y):y);\n\n\t\t\t\tif(y){\n\t\t\t\t\tpath.push([x,y]);\n\n\t\t\t\t\t//map\n\t\t\t\t\tmap.addRect(obj.id,[x-mapRect-point0.x,y-mapRect-point0.y,x+mapRect-point0.x,y+mapRect-point0.y],sIndex);\n\n\t\t\t\t\t//labels\n\t\t\t\t\tif(!config.yAxis){\n\t\t\t\t\t\talign = (!config.offset&&lastItem?\"left\":\"center\");\n\t\t\t\t\t\tthis.canvases[sIndex].renderTextAt(false, align, x, y-config.labelOffset,config.label(obj));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// bottom right point\n\t\t\tpath.push([x,setOffset(i-1,point1.y)]);\n\n\t\t\t// lower border from the end to start\n\t\t\tif(sIndex){\n\t\t\t\tfor(i=data.length-2; i > 0; i --){\n\t\t\t\t\tx -= params.cellWidth ;\n\t\t\t\t\ty =  data[i].$startY;\n\t\t\t\t\tif(y)\n\t\t\t\t\t\tpath.push([x,y]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// go to start point\n\t\t\tpath.push([path[0][0],path[0][1]]);\n\n\t\t\t// filling path\n\t\t\tctx.globalAlpha = this._settings.alpha.call(this,data[0]);\n\t\t\tctx.fillStyle = this._settings.color.call(this,data[0]);\n\t\t\tctx.beginPath();\n\t\t\tthis._path(ctx,path);\n\t\t\tctx.fill();\n\n\t\t\t// set y positions of the next series\n\t\t\tfor(i=0; i < data.length;i ++){\n\t\t\t\ty =  yPos[i];\n\n\t\t\t\tif(!y){\n\t\t\t\t\tif(i == data.length-1){\n\t\t\t\t\t\ty = data[i].$startY;\n\t\t\t\t\t}\n\t\t\t\t\tfor(j =i+1; j< data.length; j++){\n\t\t\t\t\t\tif(yPos[j]){\n\t\t\t\t\t\t\ta0 =  {x:point0.x,y:yPos[0]};\n\t\t\t\t\t\t\ta1 =  {x:(point0.x+params.cellWidth*j),y:yPos[j]};\n\t\t\t\t\t\t\ty = solveEquation(point0.x+params.cellWidth*i,a0,a1);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tdata[i].$startY = y;\n\t\t\t}\n\n\n\t\t}\n\t}\n});\n\t \t//+stackedArea\nwebix.extend(webix.ui.chart, {\n\t$render_radar:function(ctx,data,x,y,sIndex,map){\n\t\tthis._renderRadarChart(ctx,data,x,y,sIndex,map);\n\t\t\n\t}, \n\t/**\n\t*   renders a pie chart\n\t*   @param: ctx - canvas object\n\t*   @param: data - object those need to be displayed\n\t*   @param: x - the width of the container\n\t*   @param: y - the height of the container\n\t*   @param: ky - value from 0 to 1 that defines an angle of inclination (0<ky<1 - 3D chart)\n\t*/\n\t_renderRadarChart:function(ctx,data,point0,point1,sIndex,map){\n\t\tif(!data.length)\n\t\t\treturn;\n\t\tvar coord = this._getPieParameters(point0,point1);\n\t\t/*scale radius*/\n\t\tvar radius = (this._settings.radius?this._settings.radius:coord.radius);\n\t\t/*scale center*/\n\t\tvar x0 = (this._settings.x?this._settings.x:coord.x);\n\t\tvar y0 = (this._settings.y?this._settings.y:coord.y);\n\t\t/*angles for each unit*/\n\t\tvar ratioUnits = [];\n\t\tfor(var i=0;i<data.length;i++)\n\t\t\tratioUnits.push(1);\n\t\tvar ratios = this._getRatios(ratioUnits,data.length);\n\t\tthis._mapStart = point0;\n\t\tif(!sIndex)\n\t\t\tthis._drawRadarAxises(ratios,x0,y0,radius,data);\n\t\tthis._drawRadarData(ctx,ratios,x0,y0,radius,data,sIndex,map);\n\t},\n\t_drawRadarData:function(ctx,ratios,x,y,radius,data,sIndex,map){\n\t\tvar alpha0 ,alpha1, config, i, min, max, pos0, pos1, posArr,\n\t\t\tr0, r1, relValue, startAlpha, value, value0, value1, valueFactor,\n\t\t\tunit, unitArr;\n\t\tconfig = this._settings;\n\t\t/*unit calculation (item_radius_pos = value*unit)*/\n\t\tmin = config.yAxis.start;\n\t\tmax = config.yAxis.end;\n\t\tunitArr = this._getRelativeValue(min,max);\n\t\trelValue = unitArr[0];\n\t\tunit = (relValue?radius/relValue:radius/2);\n\t\tvalueFactor = unitArr[1];\n\n\t\tstartAlpha = -Math.PI/2;\n\t\talpha0 =  alpha1 = startAlpha;\n\t\tposArr = [];\n\t\tpos1 = 0;\n\t\tfor(i=0;i<data.length;i++){\n\t\t\tif(!value1){\n\t\t\t\tvalue = config.value(data[i]);\n\t\t\t\tif(this._logScaleCalc)\n\t\t\t\t\tvalue = this._log10(value);\n\t\t\t\t/*a relative value*/\n\t\t\t\tvalue0 = (parseFloat(value||0) - min)*valueFactor;\n\t\t\t}\n\t\t\telse\n\t\t\t\tvalue0 = value1;\n\t\t\tr0 = Math.floor(unit*value0);\n\n\t\t\tvalue = config.value((i!=(data.length-1))?data[i+1]:data[0]);\n\t\t\tif(this._logScaleCalc)\n\t\t\t\tvalue = this._log10(value);\n\n\t\t\tvalue1 = (parseFloat(value||0) - min)*valueFactor;\n\t\t\tr1 = Math.floor(unit*value1);\n\t\t\talpha0 = alpha1;\n\t\t\talpha1 = ((i!=(data.length-1))?(startAlpha+ratios[i]-0.0001):startAlpha);\n\t\t\tpos0 = (pos1||this._getPositionByAngle(alpha0,x,y,r0));\n\t\t\tpos1 = this._getPositionByAngle(alpha1,x,y,r1);\n\t\t\t/*creates map area*/\n\t\t\t/*areaWidth  = (config.eventRadius||(parseInt(config.item.radius.call(this,data[i]),10)+config.item.borderWidth));\n\t\t\t map.addRect(data[i].id,[pos0.x-areaWidth,pos0.y-areaWidth,pos0.x+areaWidth,pos0.y+areaWidth],sIndex);*/\n\t\t\t//this._drawLine(ctx,pos0.x,pos0.y,pos1.x,pos1.y,config.line.color.call(this,data[i]),config.line.width)\n\t\t\tposArr.push(pos0);\n\t\t}\n\t\tif(config.fill)\n\t\t\tthis._fillRadarChart(ctx,posArr,data);\n\t\tif(!config.disableLines && data.length>2)\n\t\t\tthis._strokeRadarChart(ctx,posArr,data);\n\t\tif(!config.disableItems || data.length<3)\n\t\t\tthis._drawRadarItemMarkers(ctx,posArr,data,sIndex,map);\n\t\tposArr = null;\n\t},\n\t_drawRadarItemMarkers:function(ctx,points,data,sIndex,map){\n\t\tfor(var i=0;i < points.length;i++){\n\t\t\tthis._drawItem(ctx,points[i].x,points[i].y,data[i],this._settings.label.call(this,data),sIndex,map);\n\t\t}\n\t},\n\t_fillRadarChart:function(ctx,points,data){\n\t\tvar pos0,pos1;\n\t\tctx.globalAlpha= this._settings.alpha.call(this,{});\n\n\t\tctx.beginPath();\n\t\tfor(var i=0;i < points.length;i++){\n\t\t\tctx.fillStyle = this._settings.fill.call(this,data[i]);\n\t\t\tpos0 = points[i];\n\t\t\tpos1 = (points[i+1]|| points[0]);\n\t\t\tif(!i){\n\n\t\t\t\tctx.moveTo(pos0.x,pos0.y);\n\t\t\t}\n\t\t\tctx.lineTo(pos1.x,pos1.y);\n\t\t}\n\t\tctx.fill();\n\t\tctx.globalAlpha=1;\n\t},\n\t_strokeRadarChart:function(ctx,points,data){\n\t\tvar pos0,pos1;\n\t\tfor(var i=0;i < points.length;i++){\n\t\t\tpos0 = points[i];\n\t\t\tpos1 = (points[i+1]|| points[0]);\n\t\t\tthis._drawLine(ctx,pos0.x,pos0.y,pos1.x,pos1.y,this._settings.line.color.call(this,data[i]),this._settings.line.width);\n\t\t}\n\t},\n\t_drawRadarAxises:function(ratios,x,y,radius,data){\n\t\tvar configY = this._settings.yAxis;\n\t\tvar configX = this._settings.xAxis;\n\t\tvar start = configY.start;\n\t\tvar end = configY.end;\n\t\tvar step = configY.step;\n\t\tvar scaleParam= {};\n\t\tvar config = this._configYAxis;\n\t\tif(typeof config.step ==\"undefined\"||typeof config.start==\"undefined\"||typeof config.end ==\"undefined\"){\n\t\t\tvar limits = this._getLimits();\n\t\t\tscaleParam = this._calculateScale(limits.min,limits.max);\n\t\t\tstart = scaleParam.start;\n\t\t\tend = scaleParam.end;\n\t\t\tstep = scaleParam.step;\n\t\t\tconfigY.end = end;\n\t\t\tconfigY.start = start;\n\t\t}\n\t\tvar units = [];\n\t\tvar i,j,p;\n\t\tvar c=0;\n\t\tvar stepHeight = radius*step/(end-start);\n\t\t/*correction for small step*/\n\t\tvar power,corr;\n\t\tif(step<1){\n\t\t\tpower = Math.min(this._log10(step),(start<=0?0:this._log10(start)));\n\t\t\tcorr = Math.pow(10,-power);\n\t\t}\n\t\tvar angles = [];\n\t\tif(!this.canvases[\"scale\"])\n\t\t\tthis.canvases[\"scale\"] =  this._createCanvas(\"radar_scale\");\n\t\tvar ctx = this.canvases[\"scale\"].getCanvas();\n\t\tfor(i = end; i>=start; i -=step){\n\t\t\tvar value = this._logScaleCalc?Math.pow(10,i):i;\n\t\t\tif(scaleParam.fixNum)  value = parseFloat(i).toFixed(scaleParam.fixNum);\n\n\t\t\tunits.push(Math.floor(c*stepHeight)+ 0.5);\n\t\t\tif(corr && !this._logScaleCalc){\n\t\t\t\tvalue = Math.round(value*corr)/corr;\n\t\t\t\ti = value;\n\t\t\t}\n\t\t\tvar unitY = y-radius+units[units.length-1];\n\n\t\t\tthis.canvases[\"scale\"].renderTextAt(\"middle\",\"left\",x,unitY,\n\t\t\t\tconfigY.template(value.toString()),\n\t\t\t\t\"webix_axis_item_y webix_radar\"\n\t\t\t);\n\t\t\tif(ratios.length<2){\n\t\t\t\tthis._drawScaleSector(ctx,\"arc\",x,y,radius-units[units.length-1],-Math.PI/2,3*Math.PI/2,i);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar startAlpha = -Math.PI/2;/*possibly need  to moved in config*/\n\t\t\tvar alpha0 = startAlpha;\n\t\t\tvar alpha1;\n\n\t\t\tfor(j=0;j< ratios.length;j++){\n\t\t\t\tif(!c)\n\t\t\t\t\tangles.push(alpha0);\n\t\t\t\talpha1 = startAlpha+ratios[j]-0.0001;\n\t\t\t\tthis._drawScaleSector(ctx,(ratios.length>2?(config.lineShape||\"line\"):\"arc\"),x,y,radius-units[units.length-1],alpha0,alpha1,i,j,data[i]);\n\t\t\t\talpha0 = alpha1;\n\t\t\t}\n\t\t\tc++;\n\t\t}\n\t\t/*renders radius lines and labels*/\n\t\tfor(i=0;i< angles.length;i++){\n\t\t\tp = this._getPositionByAngle(angles[i],x,y,radius);\n\t\t\tif(configX.lines.call(this,data[i],i))\n\t\t\t\tthis._drawLine(ctx,x,y,p.x,p.y,(configX?configX.lineColor.call(this,data[i]):\"#cfcfcf\"),1);\n\t\t\tthis._drawRadarScaleLabel(ctx,x,y,radius,angles[i],(configX?configX.template.call(this,data[i]):\"&nbsp;\"));\n\t\t}\n\n\t},\n\t_drawScaleSector:function(ctx,shape,x,y,radius,a1,a2,i,j){\n\t\tvar pos1, pos2;\n\t\tif(radius<0)\n\t\t\treturn false;\n\t\tpos1 = this._getPositionByAngle(a1,x,y,radius);\n\t\tpos2 = this._getPositionByAngle(a2,x,y,radius);\n\t\tvar configY = this._settings.yAxis;\n\t\tif(configY.bg){\n\t\t\tctx.beginPath();\n\t\t\tctx.moveTo(x,y);\n\t\t\tif(shape==\"arc\")\n\t\t\t\tctx.arc(x,y,radius,a1,a2,false);\n\t\t\telse{\n\t\t\t\tctx.lineTo(pos1.x,pos1.y);\n\t\t\t\tctx.lineTo(pos2.x,pos2.y);\n\t\t\t}\n\t\t\tctx.fillStyle =  configY.bg(i,j);\n\t\t\tctx.moveTo(x,y);\n\t\t\tctx.fill();\n\t\t\tctx.closePath();\n\t\t}\n\t\tif(configY.lines.call(this,i)){\n\t\t\tctx.lineWidth = 1;\n\t\t\tctx.beginPath();\n\t\t\tif(shape==\"arc\")\n\t\t\t\tctx.arc(x,y,radius,a1,a2,false);\n\t\t\telse{\n\t\t\t\tctx.moveTo(pos1.x,pos1.y);\n\t\t\t\tctx.lineTo(pos2.x,pos2.y);\n\t\t\t}\n\t\t\tctx.strokeStyle = configY.lineColor.call(this,i);\n\t\t\tctx.stroke();\n\t\t}\n\t},\n\t_drawRadarScaleLabel:function(ctx,x,y,r,a,text){\n\t\tif(!text)\n\t\t\treturn false;\n\t\tvar t = this.canvases[\"scale\"].renderText(0,0,text,\"webix_axis_radar_title\",1);\n\t\tvar width = t.scrollWidth;\n\t\tvar height = t.offsetHeight;\n\t\tvar delta = 0.001;\n\t\tvar pos =  this._getPositionByAngle(a,x,y,r+5);\n\t\tvar corr_x=0,corr_y=0;\n\t\tif(a<0||a>Math.PI){\n\t\t\tcorr_y = -height;\n\t\t}\n\t\tif(a>Math.PI/2){\n\t\t\tcorr_x = -width;\n\t\t}\n\t\tif(Math.abs(a+Math.PI/2)<delta||Math.abs(a-Math.PI/2)<delta){\n\t\t\tcorr_x = -width/2;\n\t\t}\n\t\telse if(Math.abs(a)<delta||Math.abs(a-Math.PI)<delta){\n\t\t\tcorr_y = -height/2;\n\t\t}\n\t\tt.style.top  = pos.y+corr_y+\"px\";\n\t\tt.style.left = pos.x+corr_x+\"px\";\n\t\tt.style.width = width+\"px\";\n\t\tt.style.whiteSpace = \"nowrap\";\n\t}\n});\nwebix.extend(webix.ui.chart, {\n\n\t/**\n\t*   renders a graphic\n\t*   @param: ctx - canvas object\n\t*   @param: data - object those need to be displayed\n\t*   @param: point0  - top left point of a chart\n\t*   @param: point1  - right bottom point of a chart\n\t*   @param: sIndex - index of drawing chart\n    *   @param: map - map object\n\t*/\n\t$render_scatter:function(ctx, data, point0, point1, sIndex, map){\n\t\tif(!this._settings.xValue)\n\t\t\treturn webix.log(\"warning\",\"Undefined propery: xValue\");\n\t\t/*max in min values*/\n\t\tvar limitsY = this._getLimits();\n\t\tvar limitsX = this._getLimits(\"h\",\"xValue\");\n\t\t/*render scale*/\n\t\tif(!sIndex){\n\t\t\tif(!this.canvases[\"x\"])\n\t\t\t\tthis.canvases[\"x\"] = this._createCanvas(\"axis_x\");\n\t\t\tif(!this.canvases[\"y\"])\n\t\t\t\tthis.canvases[\"y\"] = this._createCanvas(\"axis_y\");\n\t\t\tthis._drawYAxis(this.canvases[\"y\"].getCanvas(),data,point0,point1,limitsY.min,limitsY.max);\n\t\t\tthis._drawHXAxis(this.canvases[\"x\"].getCanvas(),data,point0,point1,limitsX.min,limitsX.max);\n\t\t}\n\t\tlimitsY = {min:this._settings.yAxis.start,max:this._settings.yAxis.end};\n\t\tlimitsX = {min:this._settings.xAxis.start,max:this._settings.xAxis.end};\n\t\tvar params = this._getScatterParams(ctx,data,point0,point1,limitsX,limitsY);\n\t\tthis._mapStart = point0;\n\t\tfor(var i=0;i<data.length;i++){\n\t\t\tthis._drawScatterItem(ctx,map,point0, point1, params,limitsX,limitsY,data[i],sIndex);\n\t\t}\n\t},\n\t_getScatterParams:function(ctx, data, point0, point1,limitsX,limitsY){\n\t\tvar params = {};\n\t\t/*available space*/\n\t\tparams.totalHeight = point1.y-point0.y;\n\t\t/*available width*/\n\t\tparams.totalWidth = point1.x-point0.x;\n\t\t/*unit calculation (y_position = value*unit)*/\n\t\tthis._calcScatterUnit(params,limitsX.min,limitsX.max,params.totalWidth,\"X\");\n\t\tthis._calcScatterUnit(params,limitsY.min,limitsY.max,params.totalHeight,\"Y\");\n\t\treturn params;\n\t},\n\t_drawScatterItem:function(ctx,map,point0, point1,params,limitsX,limitsY,obj,sIndex){\n\t\tvar x0 = this._calculateScatterItemPosition(params, point1, point0, limitsX, obj, \"X\");\n\t\tvar y0 = this._calculateScatterItemPosition(params, point0, point1, limitsY, obj, \"Y\");\n\t\tthis. _drawItem(ctx,x0,y0,obj,this._settings.label.call(this,obj),sIndex,map);\n\t},\n\t_calculateScatterItemPosition:function(params, point0, point1, limits, obj, axis){\n\t\t/*the real value of an object*/\n\t\tvar value = this._settings[axis==\"X\"?\"xValue\":\"value\"].call(this,obj);\n\t\t/*a relative value*/\n\t\tvar valueFactor = params[\"valueFactor\"+axis];\n\t\tvar v = (parseFloat(value||0) - limits.min)*valueFactor;\n\t\t/*a vertical coordinate*/\n\t\tvar unit = params[\"unit\"+axis];\n\t\tvar pos = point1[axis.toLowerCase()] - (axis==\"X\"?(-1):1)*Math.floor(unit*v);\n\t\t/*the limit of the minimum value is  the minimum visible value*/\n\t\tif(v<0)\n\t\t\tpos = point1[axis.toLowerCase()];\n\t\t/*the limit of the maximum value*/\n\t\tif(value > limits.max)\n\t\t\tpos = point0[axis.toLowerCase()];\n\t\t/*the limit of the minimum value*/\n\t\tif(value < limits.min)\n\t\t\tpos = point1[axis.toLowerCase()];\n\t\treturn pos;\n\t},\n\t_calcScatterUnit:function(p,min,max,size,axis){\n\t\tvar relativeValues = this._getRelativeValue(min,max);\n\t\taxis = (axis||\"\");\n\t\tp[\"relValue\"+axis] = relativeValues[0];\n\t\tp[\"valueFactor\"+axis] = relativeValues[1];\n\t\tp[\"unit\"+axis] = (p[\"relValue\"+axis]?size/p[\"relValue\"+axis]:10);\n\t}\n});\n/*chart presents*/\nwebix.extend(webix.ui.chart, {\n    presets:{\n        \"simple\":{\n            item:{\n                borderColor: \"#ffffff\",\n                color: \"#2b7100\",\n                shadow: false,\n                borderWidth:2\n            },\n    \t\tline:{\n    \t\t\tcolor:\"#8ecf03\",\n                width:2\n    \t\t}\n        },\n        \"plot\":{\n            color:\"#1293f8\",\n            item:{\n                borderColor:\"#636363\",\n                borderWidth:1,\n                color: \"#ffffff\",\n                type:\"r\",\n                shadow: false\n            },\n    \t    line:{\n    \t\t\tcolor:\"#1293f8\",\n                width:2\n    \t    }\n        },\n        \"diamond\":{\n            color:\"#b64040\",\n            item:{\n    \t\t\tborderColor:\"#b64040\",\n    \t\t\tcolor: \"#b64040\",\n                type:\"d\",\n                radius:3,\n                shadow:true\n            },\n    \t\tline:{\n    \t\t\tcolor:\"#ff9000\",\n                width:2\n    \t\t}\n        },\n        \"point\":{\n            color:\"#fe5916\",\n    \t\tdisableLines:true,\n            fill:false,\n            disableItems:false,\n            item:{\n                color:\"#feb916\",\n                borderColor:\"#fe5916\",\n                radius:2,\n                borderWidth:1,\n                type:\"r\"\n    \t    },\n            alpha:1\n        },\n        \"line\":{\n            line:{\n                color:\"#3399ff\",\n                width:2\n            },\n            item:{\n                color:\"#ffffff\",\n                borderColor:\"#3399ff\",\n                radius:2,\n                borderWidth:2,\n                type:\"d\"\n            },\n            fill:false,\n            disableItems:false,\n            disableLines:false,\n            alpha:1\n        },\n        \"area\":{\n            fill:\"#3399ff\",\n            line:{\n                color:\"#3399ff\",\n                width:1\n            },\n            disableItems:true,\n            alpha: 0.2,\n            disableLines:false\n        },\n        \"round\":{\n            item:{\n                radius:3,\n                borderColor:\"#3f83ff\",\n                borderWidth:1,\n                color:\"#3f83ff\",\n                type:\"r\",\n                shadow:false,\n                alpha:0.6\n            }\n        },\n        \"square\":{\n             item:{\n                radius:3,\n                borderColor:\"#447900\",\n                borderWidth:2,\n                color:\"#69ba00\",\n                type:\"s\",\n                shadow:false,\n                alpha:1\n            }\n        },\n        /*bar*/\n        \"column\":{\n            color:\"RAINBOW\",\n            gradient:false,\n            barWidth:45,\n            radius:0,\n            alpha:1,\n            border:true\n        },\n        \"stick\":{\n            barWidth:5,\n            gradient:false,\n    \t\tcolor:\"#67b5c9\",\n            radius:2,\n            alpha:1,\n            border:false\n        },\n        \"alpha\":{\n            color:\"#b9a8f9\",\n            barWidth:70,\n            gradient:\"falling\",\n            radius:0,\n            alpha:0.5,\n            border:true\n        }\n    }\n});\n\nwebix.extend(webix.ui.chart,{\n\t/**\n\t *   renders an splineArea chart\n\t *   @param: ctx - canvas object\n\t *   @param: data - object those need to be displayed\n\t *   @param: width - the width of the container\n\t *   @param: height - the height of the container\n\t *   @param: sIndex - index of drawing chart\n\t */\n\t$render_splineArea:function(ctx, data, point0, point1, sIndex, map){\n\t\tvar color, i,items,j,mapRect,params,sParams,\n\t\t\tx,x0,x1,x2,y,y1,y2,\n\t\t\tconfig = this._settings,\n\t\t\tpath = [];\n\n\t\tparams = this._calculateLineParams(ctx,data,point0,point1,sIndex);\n\t\tmapRect = (config.eventRadius||Math.floor(params.cellWidth/2));\n\t\t/*array of all points*/\n\t\titems = [];\n\n\t\tif (data.length) {\n\t\t\t/*getting all points*/\n\t\t\tx0 = point0.x;\n\t\t\tfor(i=0; i < data.length;i ++){\n\t\t\t\ty = this._getPointY(data[i],point0,point1,params);\n\t\t\t\tif(y || y==\"0\"){\n\t\t\t\t\tx = ((!i)?x0:params.cellWidth*i - 0.5 + x0);\n\t\t\t\t\titems.push({x:x,y:y,index:i});\n\t\t\t\t\tmap.addRect(data[i].id,[x-mapRect-point0.x,y-mapRect-point0.y,x+mapRect-point0.x,y+mapRect-point0.y],sIndex);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tsParams = this._getSplineParameters(items);\n\n\t\t\tfor(i =0; i< items.length; i++){\n\t\t\t\tx1 = items[i].x;\n\t\t\t\ty1 = items[i].y;\n\t\t\t\tif(i<items.length-1){\n\t\t\t\t\tx2 = items[i+1].x;\n\t\t\t\t\ty2 = items[i+1].y;\n\t\t\t\t\tfor(j = x1; j < x2; j++){\n\t\t\t\t\t\tvar sY1 = this._getSplineYPoint(j,x1,i,sParams.a,sParams.b,sParams.c,sParams.d);\n\t\t\t\t\t\tif(sY1<point0.y)\n\t\t\t\t\t\t\tsY1=point0.y;\n\t\t\t\t\t\tif(sY1>point1.y)\n\t\t\t\t\t\t\tsY1=point1.y;\n\t\t\t\t\t\tvar sY2 = this._getSplineYPoint(j+1,x1,i,sParams.a,sParams.b,sParams.c,sParams.d);\n\t\t\t\t\t\tif(sY2<point0.y)\n\t\t\t\t\t\t\tsY2=point0.y;\n\t\t\t\t\t\tif(sY2>point1.y)\n\t\t\t\t\t\t\tsY2=point1.y;\n\t\t\t\t\t\tpath.push([j,sY1]);\n\t\t\t\t\t\tpath.push([j+1,sY2]);\n\t\t\t\t\t}\n\t\t\t\t\tpath.push([x2,y2]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcolor = this._settings.color.call(this,data[0]);\n\n\t\t\tif(path.length){\n\t\t\t\tpath.push([x2,point1.y]);\n\t\t\t\tpath.push([path[0][0],point1.y]);\n\t\t\t}\n\n\t\t\t//filling area\n\t\t\tctx.globalAlpha = this._settings.alpha.call(this,data[0]);\n\t\t\tctx.fillStyle = color;\n\t\t\tctx.beginPath();\n\t\t\tthis._path(ctx,path);\n\t\t\tctx.fill();\n\t\t\tctx.lineWidth = 1;\n\t\t\tctx.globalAlpha =1;\n\n\t\t\t// draw line\n\t\t\tif(config.border){\n\t\t\t\tctx.lineWidth = config.borderWidth||1;\n\t\t\t\tif(config.borderColor)\n\t\t\t\t\tctx.strokeStyle =  config.borderColor.call(this,data[0]);\n\t\t\t\telse\n\t\t\t\t\tthis._setBorderStyles(ctx,color);\n\t\t\t\tctx.beginPath();\n\t\t\t\tpath.splice(path.length-3);\n\t\t\t\tthis._path(ctx,path);\n\t\t\t\tctx.stroke();\n\t\t\t}\n\t\t}\n\t}\n});\n\n(function(){\n\tvar animateDuration = 400,\n\t\tcellWidth = 30;\n\n\twebix.extend(webix.ui.chart, {\n\t\tdynamic_setter: function(value){\n\t\t\tif(value)\n\t\t\t\tinit(this);\n\t\t\treturn value;\n\t\t}\n\t});\n\n\t/**\n\t * Sets event handlers and properties for a stock chart\n\t * @param {object} chart - chart view\n\t */\n\tfunction init(chart){\n\t\tif(chart._stockRenderHandler)\n\t\t\treturn;\n\t\tvar config = chart._settings;\n\n\t\tif(!config.cellWidth)\n\t\t\tconfig.cellWidth = cellWidth;\n\t\tif(!config.animateDuration)\n\t\t\tconfig.animateDuration = animateDuration;\n\t\tconfig.offset = false;\n\n\t\tchart._stockRenderHandler = chart.attachEvent(\"onBeforeRender\", function(data, type){\n\t\t\tvar bounds = chart._getChartBounds(chart._content_width, chart._content_height);\n\t\t\tresizeStockCanvases(chart);\n\t\t\tfilterStockData(data, bounds.start, bounds.end, config.cellWidth);\n\t\t\tif(type == \"add\")\n\t\t\t\tstartAnimation(chart);\n\t\t});\n\t\tchart._stockXAxisHandler = chart.attachEvent(\"onBeforeXAxis\", function(ctx,data,point0,point1,cellWidth,y){\n\t\t\tdrawXAxis(chart,ctx,data,point0,point1,cellWidth,y);\n\t\t\treturn false;\n\t\t});\n\t}\n\n\t/**\n\t * Starts stock animation\n\t * @param {object} chart - chart view\n\t */\n\tfunction startAnimation(chart){\n\t\tvar cellWidth = chart._settings.cellWidth;\n\t\tif(chart._stockAnimationOffset != cellWidth){\n\t\t\tchart._stockAnimationOffset = cellWidth;\n\t\t\tchart.render();\n\t\t}\n\n\t\tchart._stockAnimationOffset = 0;\n\t\tchart._stockAnimationStart = null;\n\n\t\tif(window.requestAnimationFrame && !document.hidden)\n\t\t\twindow.requestAnimationFrame(function(t){\n\t\t\t\tanimate(chart,t);\n\t\t\t});\n\n\t\tif(!chart._stockAnimateHandler)\n\t\t\tchart._stockAnimateHandler = chart.attachEvent(\"onAfterRender\", function(data){\n\t\t\t\tapplyStockOffset(chart, data);\n\t\t\t});\n\t}\n\n\t/**\n\t * Animates a chart\n\t * @param {object} chart - chart view\n\t * @param {number} timestamp - timestamp\n\t */\n\tfunction animate(chart, timestamp){\n\t\tvar progress,\n\t\t\tduration = chart._settings.animateDuration,\n\t\t\tcellWidth = chart._settings.cellWidth;\n\n\t\tif(cellWidth && chart.count() > 1){\n\t\t\tif (!chart._stockAnimationStart)\n\t\t\t\tchart._stockAnimationStart = timestamp;\n\t\t\tprogress = timestamp - chart._stockAnimationStart;\n\t\t\tchart._stockAnimationOffset = Math.min(Math.max(progress/duration*cellWidth,1), cellWidth);\n\t\t\tchart.render();\n\t\t\tif (progress < duration)\n\t\t\t\twindow.requestAnimationFrame(function(t){\n\t\t\t\t\tanimate(chart,t);\n\t\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Applies animation offset to \"series\" and \"x-axis\" canvases\n\t * @param {object} chart - chart view\n\t * @param {object} data - data array\n\t */\n\tfunction applyStockOffset(chart, data){\n\t\tvar count = chart.count(),\n\t\t\tbounds = chart._getChartBounds(chart._content_width,chart._content_height),\n\t\t\tcellWidth = chart._settings.cellWidth,\n\t\t\toffset = chart._stockAnimationOffset || 0,\n\t\t\tisScroll = (data.length < count || (data.length-1)*cellWidth > bounds.end.x-bounds.start.x);\n\n\t\tfunction setCanvasOffset(canvas, x0, x1, skipRight){\n\t\t\tvar ctx = canvas.getCanvas(),\n\t\t\t\telem = canvas._canvas,\n\t\t\t\tlabels = canvas._canvas_labels,\n\t\t\t\tseries = canvas._canvas_series;\n\n\n\t\t\t// if we need to display less values than they are\n\t\t\tif(offset && (data.length < count || (data.length-1)*cellWidth > x1-x0)){\n\t\t\t\t// move canvas to the left\n\t\t\t\telem.style.left = - offset + \"px\";\n\t\t\t\tif(data.length > 1){\n\t\t\t\t\tsetLabelsOffset(labels, offset, series);\n\t\t\t\t\t// clear out of the scale parts\n\t\t\t\t\tctx.clearRect(0, 0, x0+offset, elem.offsetHeight);\n\t\t\t\t\tctx.clearRect(x1+offset, 0, elem.offsetWidth, elem.offsetHeight);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// animation for the right part (added item)\n\t\t\telse{\n\t\t\t\telem.style.left = \"0px\";\n\t\t\t\tif(!skipRight && offset!= cellWidth)\n\t\t\t\t\tctx.clearRect(x0+(data.length-1)*cellWidth-cellWidth+offset, 0, elem.offsetWidth, elem.offsetHeight);\n\t\t\t}\n\n\t\t\t// show label for the last label after finishing animation\n\t\t\tif(labels.length>1 && offset && offset != cellWidth){\n\t\t\t\tvar last = labels.length-1;\n\t\t\t\tif(isAxisTitle(series, labels[last]))\n\t\t\t\t\tlast -= 1;\n\t\t\t\tlabels[last].style.display = \"none\";\n\t\t\t}\n\t\t\t\t\n\t\t}\n\n\t\teachStockCanvas(chart,function(name, canvas){\n\t\t\tsetCanvasOffset(canvas, bounds.start.x,  bounds.end.x, name == \"x\");\n\t\t});\n\n\t\tsetHtmlMapSizes(chart,bounds, isScroll?offset:0);\n\t}\n\n\tfunction isAxisTitle(series, label){\n\t\treturn series ===\"axis_x\" && label.className.indexOf(\"webix_axis_title_x\") !== -1;\n\t}\n\n\tfunction setLabelsOffset(labels, offset, series){\n\t\tif(labels.length){\n\n\t\t\twebix.html.remove(labels[0]);\n\t\t\tfor(var i = 1; i< labels.length; i++){\n\t\t\t\t//don't move axis title\n\t\t\t\tif(isAxisTitle(series, labels[i])) continue;\n\t\t\t\tlabels[i].style.left = labels[i].offsetLeft - offset + \"px\";\n\t\t\t}\n\t\t\t\t\n\t\t}\n\t}\n\n\t/**\n\t * Gets visible chart data\n\t * @param {object} data - an array with all chart data\n\t * @param {object} point0 - a top left point of a plot\n\t * @param {object} point1 - a bottom right point of a plot\n\t * @param {number} cellWidth - a unit width\n\t */\n\tfunction filterStockData(data, point0, point1, cellWidth){\n\t\tif(cellWidth && data.length){\n\t\t\tvar limit = Math.ceil((point1.x - point0.x)/cellWidth);\n\t\t\tif(data.length > limit+1)\n\t\t\t\tdata.splice(0, data.length - limit-1);\n\t\t}\n\t}\n\n\t/**\n\t * Calls a function for \"series\" and \"x-axis\" canvases\n\t * @param {object} chart - chart view\n\t * @param {function} func - function to call\n\t */\n\tfunction eachStockCanvas(chart, func){\n\t\tif(chart.canvases){\n\t\t\tfor(var i=0; i < chart._series.length;i++)\n\t\t\t\tif (chart.canvases[i])\n\t\t\t\t\tfunc(i,chart.canvases[i]);\n\n\t\t\tif (chart.canvases[\"x\"])\n\t\t\t\tfunc(\"x\",chart.canvases[\"x\"]);\n\t\t}\n\t}\n\n\t/**\n\t * Set sizes for animated canvases\n\t * @param {object} chart - chart view\n\t */\n\tfunction resizeStockCanvases(chart){\n\t\teachStockCanvas(chart, function(name, canvas){\n\t\t\tcanvas._resizeCanvas(chart._content_width+2*chart._settings.cellWidth, chart._content_height);\n\t\t});\n\t}\n\n\t/**\n\t * Set sizes for an html map of a chart\n\t * @param {object} chart - a chart view\n\t * @param {object} bounds - start and end points of a plot\n\t * @param {number} offset - an offset to apply\n\t */\n\tfunction setHtmlMapSizes(chart, bounds, offset){\n\t\tchart._contentobj._htmlmap.style.left = (bounds.start.x - offset)+\"px\";\n\t\tchart._contentobj._htmlmap.style.width = (bounds.end.x-bounds.start.x+offset)+\"px\";\n\t}\n\n\t/**\n\t * Renders lines and labels of an x-axis\n\t * @param {object} chart - a chart view\n\t * @param {object} ctx - a canvas Context\n\t * @param {object} data - a data array\n\t * @param {object} point0 - a top left point of a plot\n\t * @param {object} point1 - a bottom right point of a plot\n\t * @param {number} cellWidth - a width of a unit\n\t * @param {number} y - the vertical position of an \"x-axis\" line\n\t */\n\tfunction drawXAxis(chart, ctx, data,point0,point1,cellWidth,y){\n\t\tvar center, i, isScroll,unitPos,\n\t\t\tconfig = chart._settings,\n\t\t\tx0 = point0.x-0.5,\n\t\t\ty0 = parseInt((y?y:point1.y),10)+0.5,\n\t\t\tx1 = point1.x;\n\n\t\tif(!config.dynamic)\n\t\t\treturn false;\n\n\t\tisScroll = ((data.length-1)*cellWidth > x1-x0 || data.length < chart.count());\n\n\t\tfor(i=0; i < data.length;i++){\n\t\t\tunitPos = x0+i*cellWidth ;\n\t\t\tcenter = isScroll?i>1:!!i;\n\t\t\tunitPos = Math.ceil(unitPos)-0.5;\n\t\t\t//scale labels\n\t\t\tchart._drawXAxisLabel(unitPos,y0,data[i],center);\n\t\t\t//draws a vertical line for the horizontal scale\n\t\t\tif(i && config.xAxis.lines.call(chart, data[i]))\n\t\t\t\tchart._drawXAxisLine(ctx,unitPos,point1.y,point0.y,data[i]);\n\n\t\t}\n\n\t\tchart.canvases[\"x\"].renderTextAt(true, false, x0, point1.y + config.padding.bottom-3,\n\t\t\tconfig.xAxis.title,\n\t\t\t\"webix_axis_title_x\",\n\t\t\tpoint1.x - point0.x\n\t\t);\n\t\tchart._drawLine(ctx,x0,y0,x1+ (isScroll?chart._stockAnimationOffset:0),y0,config.xAxis.color,1);\n\t}\n})();\n\n/*\n\tUI:Calendar\n*/\n\n\n\n\n\n\n\nwebix.protoUI({\n\tname:\"calendar\",\n\n\tdefaults:{\n\t\tdate: new Date(), //selected date, not selected by default\n\t\tselect: false,\n\t\tnavigation: true,\n\t\tmonthSelect: true,\n\t\tweekHeader: true,\n\t\tweekNumber: false,\n\t\tskipEmptyWeeks: false,\n\n\t\tcalendarHeader: \"%F %Y\",\n\t\tcalendarWeekHeader: \"W#\",\n\t\t//calendarTime: \"%H:%i\",\n\t\tevents:webix.Date.isHoliday,\n\t\tminuteStep: 5,\n\t\ticons: false,\n\t\ttimepickerHeight: 30,\n\t\theaderHeight: 70,\n\t\tdayTemplate: function(d){\n\t\t\treturn d.getDate();\n\t\t},\n\t\twidth: 260,\n\t\theight: 250\n\t},\n\n\tdayTemplate_setter: webix.template,\n\tcalendarHeader_setter:webix.Date.dateToStr,\n\tcalendarWeekHeader_setter:webix.Date.dateToStr,\n\tcalendarTime_setter:function(format){\n\t\tthis._calendarTime = format;\n\t\treturn webix.Date.dateToStr(format);\n\t},\n\tdate_setter:function(date){\n\t\treturn this._string_to_date(date);\n\t},\n\tmaxDate_setter:function(date){\n\t\treturn this._string_to_date(date);\n\t},\n\tminDate_setter:function(date){\n\t\treturn this._string_to_date(date);\n\t},\n\tminTime_setter:function(time){\n\t\tif(typeof(time) == \"string\"){\n\t\t\ttime = webix.i18n.parseTimeFormatDate(time);\n\t\t\ttime = [time.getHours(),time.getMinutes()];\n\n\t\t}\n\n\t\treturn time;\n\t},\n\tmaxTime_setter:function(time){\n\t\tif(typeof(time) == \"string\"){\n\t\t\ttime = webix.i18n.parseTimeFormatDate(time);\n\t\t\ttime = [time.getHours(),time.getMinutes()];\n\t\t}\n\t\treturn time;\n\t},\n\t_ariaFocus:function(){\n\t\tvar ev = \"focus\"+(webix.env.isIE?\"in\":\"\");\n\n\t\twebix._event(this.$view, ev, webix.bind(function(e){\n\t\t\tvar t = e.target.className;\n\t\t\tvar css = t.indexOf(\"webix_cal_day\")!==-1 ? \"webix_cal_day\" : (t.indexOf(\"webix_cal_block\")!==-1?\"webix_cal_block\":\"\");\n\n\t\t\tif(new Date() - webix.UIManager._tab_time > 300 && css){\n\t\t\t\tvar prev = e.relatedTarget;\n\t\t\t\tif(prev && !webix.isUndefined(prev.className)){\n\t\t\t\t\tvar date = (css==\"webix_cal_day\")?\n\t\t\t\t\t\tthis._locate_day(e.target):\n\t\t\t\t\t\tthis._locate_date(e.target);\n\t\t\t\t\tthis._moveSelection(date, false);\n\t\t\t\t}\n\t\t\t}\n\t\t}, this), {capture:!webix.env.isIE});\n\t},\n\t$init: function() {\n\t\tthis._viewobj.className += \" webix_calendar\";\n\t\tthis._viewobj.setAttribute(\"role\", \"region\");\n\t\tthis._viewobj.setAttribute(\"aria-label\", webix.i18n.aria.calendar);\n\n\t\t//special dates\n\t\tthis._special_dates = {};\n\t\tthis._selected_date_part = this._selected_date = null;\n\t\tthis._zoom_level = 0;\n\n\t\t//navigation and aria\n\t\tthis._ariaFocus();\n\t\tthis.attachEvent(\"onKeyPress\", this._onKeyPress);\n\t\tthis.attachEvent(\"onAfterZoom\", function(zoom){\n\t\t\tif(zoom >= 0) this.$view.querySelector(\".webix_cal_month_name\").blur();\n\t\t});\n\t},\n\ttype_setter: function(value){\n\t\tif(value == \"time\"){\n\t\t\tthis._zoom_in = true;\n\t\t\tthis._zoom_level = -1;\n\t\t}\n\t\telse if(value == \"year\"){\n\t\t\tthis._fixed = true;\n\t\t}\n\t\treturn value;\n\t},\n\t$setSize:function(x,y){\n\n\t\tif(webix.ui.view.prototype.$setSize.call(this,x,y)){\n\t\t\t//repaint calendar when size changed\n\t\t\tthis.render();\n\t\t}\n\t},\n\t$getSize:function(dx, dy){\n\t\tif (this._settings.cellHeight){\n\t\t\tvar state = this._getDateBoundaries(this._settings.date);\n\t\t\tthis._settings.height = this._settings.cellHeight * state._rows + (webix.skin.$active.calendarHeight||70);\n\t\t}\n\t\treturn webix.ui.view.prototype.$getSize.call(this, dx,dy);\n\t},\n\tmoveSelection:function(mode){\n\t\tif(this.config.master) return; //in daterange\n\n\t\tvar date = webix.Date.copy(this.getSelectedDate() || this.getVisibleDate());\n\t\tthis._moveSelection(date, mode);\n\t\t\n\t},\n\t_moveSelection:function(date, mode){\n\t\tvar css = this._zoom_logic[this._zoom_level]._keyshift(date, mode, this);\n\n\t\tvar sel = this._viewobj.querySelector(\".\"+css+\"[tabindex='0']\");\n\t\tif(sel) sel.focus();\n\t},\n\t_getDateBoundaries: function(date, reset) {\n\t\t// addition information about rendering event:\n\t\t// how many days from the previous month,\n\t\t// next,\n\t\t// number of weeks to display and so on\n\t\t\n\t\tif (!this._set_date_bounds || reset){\n\t\t\tvar month = date.getMonth();\n\t\t\tvar year = date.getFullYear();\n\n\t\t\tvar next = new Date(year, month+1, 1);\n\t\t\tvar start = webix.Date.weekStart(new Date(year, month, 1));\n\n\t\t\tvar days = Math.round((next.valueOf() - start.valueOf())/(60*1000*60*24));\n\t\t\tvar rows = this._settings.skipEmptyWeeks?Math.ceil(days/7):6;\n\n\t\t\tthis._set_date_bounds = { _month: month, _start:start, _next:next, _rows: rows};\n\t\t}\n\n\t\treturn this._set_date_bounds;\n\t},\n\t$skin:function(){\n\t\tif(webix.skin.$active.calendar){\n\t\t\tif( webix.skin.$active.calendar.width)\n\t\t\t\tthis.defaults.width = webix.skin.$active.calendar.width;\n\t\t\tif( webix.skin.$active.calendar.height)\n\t\t\t\tthis.defaults.height = webix.skin.$active.calendar.height;\n\t\t\tif( webix.skin.$active.calendar.headerHeight)\n\t\t\t\tthis.defaults.headerHeight = webix.skin.$active.calendar.headerHeight;\n\t\t\tif( webix.skin.$active.calendar.timepickerHeight)\n\t\t\t\tthis.defaults.timepickerHeight = webix.skin.$active.calendar.timepickerHeight;\n\t\t}\n\n\t},\n\t_getColumnConfigSizes: function(date){ \n\t\tvar bounds = this._getDateBoundaries(date);\n\n\t\tvar s = this._settings;\n\t\tvar _columnsHeight = [];\n\t\tvar _columnsWidth = [];\n\n\t\tvar containerWidth = this._content_width - 36;\n\n\t\tvar containerHeight = this._content_height - this._settings.headerHeight - 10 - (this._settings.timepicker||this._icons?this._settings.timepickerHeight:0);\n\n\t\tvar columnsNumber = (s.weekNumber)?8:7;\n\t\tfor(var i=0; i<columnsNumber; i++) {\n\t\t\t_columnsWidth[i] = Math.ceil(containerWidth/(columnsNumber-i));\n\t\t\tcontainerWidth -= _columnsWidth[i];\n\t\t}\n\n\t\tvar rowsNumber = bounds._rows;\n\t\tfor (var k = 0; k < rowsNumber; k++) {\n\t\t\t_columnsHeight[k] = Math.ceil(containerHeight/(rowsNumber-k) );\n\t\t\tcontainerHeight -= _columnsHeight[k];\n\t\t}\n\t\treturn [_columnsWidth, _columnsHeight];\n\t},\n\ticons_setter: function(value){\n\t\tif(!value)\n\t\t\tthis._icons = null;\n\t\telse if(typeof value == \"object\")\n\t\t\tthis._icons = value;\n\t\telse\n\t\t\tthis._icons = this._icons2;\n\t},\n\t_icons: [],\n\t_icons2: [\n\n\t\t{\n\t\t\ttemplate: function(){\n\t\t\t\treturn \"<span role='button' tabindex='0' class='webix_cal_icon_today webix_cal_icon'>\"+webix.i18n.calendar.today+\"</span>\";\n\t\t\t},\n\t\t\ton_click:{\n\t\t\t\t\"webix_cal_icon_today\": function(){\n\t\t\t\t\tthis.setValue(new Date());\n\t\t\t\t\tthis.callEvent(\"onTodaySet\",[this.getSelectedDate()]);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\ttemplate: function(){\n\t\t\t\treturn \"<span role='button' tabindex='0' class='webix_cal_icon_clear webix_cal_icon'>\"+webix.i18n.calendar.clear+\"</span>\";\n\t\t\t},\n\t\t\ton_click:{\n\t\t\t\t\"webix_cal_icon_clear\": function(){\n\t\t\t\t\tthis.setValue(\"\");\n\t\t\t\t\tthis.callEvent(\"onDateClear\",[this.getSelectedDate()]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t],\n\trefresh:function(){ this.render(); },\n\trender: function() {\n\t\t//reset zoom level\n\t\tthis._zoom_level = 0;\n\t\tthis._zoom_size = false;\n\n\t\tvar s = this._settings;\n\n\t\tif (!this.isVisible(s.id)) return;\n\t\tthis._current_time = webix.Date.datePart(new Date());\n\n\t\tif (webix.debug_render)\n\t\t\twebix.log(\"Render: \"+this.name+\"@\"+s.id);\n\t\tthis.callEvent(\"onBeforeRender\",[]);\n\n\t\tvar date = this._settings.date;\n\n\t\tvar bounds = this._getDateBoundaries(date, true);\n\t\tvar sizes = this._getColumnConfigSizes(date);\n\t\tvar width = sizes[0];\n\t\tvar height = sizes[1];\n\n\t\tvar html = \"<div class='webix_cal_month'><span role='button' tabindex='0' aria-live='assertive' aria-atomic='true' class='webix_cal_month_name\"+(!this._settings.monthSelect?\" webix_readonly\":\"\")+\"'>\"+s.calendarHeader(date)+'</span>';\n\t\tif (s.navigation)\n\t\t\thtml += \"<div role='button' tabindex='0' aria-label='\"+webix.i18n.aria.navMonth[0]+\"' class='webix_cal_prev_button'></div><div role='button' tabindex='0' aria-label='\"+webix.i18n.aria.navMonth[1]+\"' class='webix_cal_next_button'></div>\";\n\t\thtml += \"</div>\";\n\n\t\tif(s.weekHeader)\n\t\t\thtml += \"<div class='webix_cal_header' aria-hidden='true'>\"+this._week_template(width)+\"</div>\";\n\t\thtml += \"<div class='webix_cal_body'>\"+this._body_template(width, height, bounds)+\"</div>\";\n\n\t\tif (this._settings.timepicker || this._icons){\n\t\t\thtml += \"<div class='webix_cal_footer'>\";\n\t\t\tif(this._settings.timepicker)\n\t\t\t\thtml += this._timepicker_template(date);\n\n\t\t\tif(this._icons)\n\t\t\t\thtml += this._icons_template();\n\t\t\thtml += \"</div>\";\n\t\t}\n\n\t\tthis._contentobj.innerHTML = html;\n\n\t\tif(this._settings.type == \"time\"){\n\t\t\tvar time = this._settings.date;\n\t\t\tif(time){\n\t\t\t\tif(typeof(time) == \"string\"){\n\t\t\t\t\tdate = webix.i18n.parseTimeFormatDate(time);\n\t\t\t\t}\n\t\t\t\telse if(webix.isArray(time)){\n\t\t\t\t\tdate.setHours(time[0]);\n\t\t\t\t\tdate.setMinutes(time[1]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._changeZoomLevel(-1,date);\n\t\t}\n\t\telse if(this._settings.type == \"month\"){\n\t\t\tthis._changeZoomLevel(1,date);\n\t\t}\n\t\telse if(this._settings.type == \"year\"){\n\t\t\tthis._changeZoomLevel(2,date);\n\t\t}\n\n\t\tthis.callEvent(\"onAfterRender\",[]);\n\t},\n\t_icons_template: function(date){\n\t\tvar html =\t\"<div class='webix_cal_icons'>\";\n\t\tvar icons = this._icons;\n\n\t\tfor(var i=0; i < icons.length; i++){\n\t\t\tif(icons[i].template){\n\t\t\t\tvar template = (typeof(icons[i].template) == \"function\"?icons[i].template: webix.template(icons[i].template));\n\t\t\t\thtml += template.call(this,date);\n\t\t\t}\n\t\t\tif(icons[i].on_click){\n\t\t\t\twebix.extend(this.on_click,icons[i].on_click);\n\t\t\t}\n\t\t}\n\t\thtml += \"</div>\";\n\t\treturn html;\n\t},\n\t_timepicker_template:function(date){\n\t\tvar timeFormat = this._settings.calendarTime||webix.i18n.timeFormatStr;\n\t\tvar tpl = \"\";\n\n\t\tif(!this._settings.master)\n\t\t\ttpl = \"<div role='button' tabindex='0' class='webix_cal_time\"+(this._icons?\" webix_cal_time_icons\":\"\")+\"'><span class='webix_icon fa-clock-o'></span> \"+timeFormat(date)+\"</div>\";\n\t\telse{\n\t\t\t//daterange needs two clocks\n\t\t\tvar range_date = webix.copy(webix.$$(this._settings.master)._settings.value);\n\t\t\tif(webix.Date.equal(range_date.end, date))\n\t\t\t\trange_date.start = range_date.end;\n\t\t\t\t\n\t\t\tfor(var i in range_date){\n\t\t\t\ttpl += \"<div role='button' tabindex='0' class='webix_range_time_\"+i+\" webix_cal_time'><span class='webix_icon fa-clock-o'></span> \"+timeFormat(range_date[i])+\"</div>\";\n\t\t\t}\n\t\t}\n\t\treturn tpl;\n\t},\n\t_week_template: function(widths){\n\t\tvar s = this._settings;\n\t\tvar week_template = '';\n\t\tvar correction = 0;\n\n\t\tif(s.weekNumber) {\n\t\t\tcorrection = 1;\n\t\t\tweek_template += \"<div class='webix_cal_week_header' style='width: \"+widths[0]+\"px;' >\"+s.calendarWeekHeader()+\"</div>\";\n\t\t}\n\t\t\n\t\tvar k = (webix.Date.startOnMonday)?1:0;\n\t\tfor (var i=0; i<7; i++){ // 7 days total\n\t\t\tvar day_index = (k + i) % 7; // 0 - Sun, 6 - Sat as in Locale.date.day_short\n\t\t\tvar day = webix.i18n.calendar.dayShort[day_index]; // 01, 02 .. 31\n\t\t\tweek_template += \"<div day='\"+day_index+\"' style='width: \"+widths[i+correction]+\"px;' >\"+day+\"</div>\";\n\t\t}\n\t\t\n\t\treturn week_template;\n\t},\n    blockDates_setter:function(value){\n        return webix.toFunctor(value, this.$scope);\n    },\n    _day_css:function(day, bounds){\n\t\tvar css = \"\";\n\t\tif (webix.Date.equal(day, this._current_time))\n\t\t\tcss += \" webix_cal_today\";\n\t\tif (!this._checkDate(day))\n\t\t\tcss+= \" webix_cal_day_disabled\";\n\t\tif (webix.Date.equal(day, this._selected_date_part))\n\t\t\tcss += \" webix_cal_select\";\n\t\tif (day.getMonth() != bounds._month)\n\t\t\tcss += \" webix_cal_outside\";\n\t\tif (this._settings.events)\n\t\t\tcss+=\" \"+(this._settings.events(day) || \"\");\n\t\tcss += \" webix_cal_day\";\n\t\treturn css;\n\t},\n\t_body_template: function(widths, heights, bounds){\n\t\tvar s = this._settings;\n\t\tvar html = \"\";\n\t\tvar day = webix.Date.datePart(webix.Date.copy(bounds._start));\n\t\tvar start = s.weekNumber?1:0;\n\t\tvar weekNumber = webix.Date.getISOWeek(webix.Date.add(day,2,\"day\", true));\n\t\tvar min = this._settings.minDate || new Date(1,1,1);\n        var max = this._settings.maxDate || new Date(9999,1,1);\n\n\t\tfor (var y=0; y<heights.length; y++){\n\t\t\thtml += \"<div class='webix_cal_row' style='height:\"+heights[y]+\"px;line-height:\"+heights[y]+\"px'>\";\n\n\t\t\tif (start){\n\t\t\t\t// recalculate week number for the first week of a year\n\t\t\t\tif(!day.getMonth() && day.getDate()<7)\n\t\t\t\t\tweekNumber =  webix.Date.getISOWeek(webix.Date.add(day,2,\"day\", true));\n\t\t\t\thtml += \"<div class='webix_cal_week_num' aria-hidden='true' style='width:\"+widths[0]+\"px'>\"+weekNumber+\"</div>\";\n\t\t\t}\n\n\t\t\tfor (var x=start; x<widths.length; x++){\n\t\t\t\tvar css = this._day_css(day, bounds);\n\t\t\t\tvar d = this._settings.dayTemplate.call(this,day);\n\t\t\t\tvar sel = webix.Date.equal(day, this._selected_date_part);\n\t\t\t\tvar alabel = \"\";\n\n\t\t\t\tif(typeof d == \"object\"){\n\t\t\t\t\talabel = d.aria || alabel;\n\t\t\t\t\td = d.text;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\talabel = webix.Date.dateToStr(webix.i18n.aria.dateFormat)(day);\n\n\t\t\t\thtml += \"<div day='\"+x+\"' role='gridcell' \"+(day.getMonth() != bounds._month?\"aria-hidden='true'\":\"\")+\" aria-label='\"+alabel+\n\t\t\t\t\t\"' tabindex='\"+(sel?\"0\":\"-1\")+\"' aria-selected='\"+(sel?\"true\":\"false\")+\n\t\t\t\t\t\"' class='\"+css+\"' style='width:\"+widths[x]+\"px'><span aria-hidden='true' class='webix_cal_day_inner'>\"+d+\"</span></div>\";\n\t\t\t\tday = webix.Date.add(day, 1, \"day\");\n\t\t\t\tif(day.getHours()){\n\t\t\t\t\tday = webix.Date.datePart(day);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\thtml += \"</div>\";\n\t\t\tweekNumber++;\n\t\t}\n\t\treturn html;\n\t},\n\t_changeDate:function(dir, step, notset){\n\t\tvar now = this._settings.date;\n\t\tif(!step) { step = this._zoom_logic[this._zoom_level]._changeStep; }\n\t\tif(!this._zoom_level){\n\t\t\tnow = webix.Date.copy(now);\n\t\t\tnow.setDate(1);\n\t\t}\n\t\tvar next = webix.Date.add(now, dir*step, \"month\", true);\n\t\tthis._changeDateInternal(now, next);\n\t},\n\t_changeDateInternal:function(now, next){\n\t\tif(this.callEvent(\"onBeforeMonthChange\", [now, next])){\n\t\t\tif (this._zoom_level){\n\t\t\t\tthis._update_zoom_level(next);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.showCalendar(next);\n\t\t\t}\n\t\t\tthis.callEvent(\"onAfterMonthChange\", [next, now]);\n\t\t}\n\t},\n\t_zoom_logic:{\n\t\t\"-2\":{\n\t\t\t_isBlocked: function(i){\n\t\t\t\tvar config = this._settings,\n\t\t\t\t\tdate = config.date,\n\t\t\t\t\tisBlocked = false;\n\n\t\t\t\tvar minHour = (config.minTime ? config.minTime[0] : 0);\n\t\t\t\tvar maxHour = (config.maxTime ? (config.maxTime[0] + ( config.maxTime[1] ? 1 : 0 )) : 24);\n\n\t\t\t\tvar minMinute = (config.minTime && (date.getHours()==minHour) ? config.minTime[1] : 0);\n\t\t\t\tvar maxMinute = (config.maxTime && config.maxTime[1] && (date.getHours()==(maxHour-1)) ? config.maxTime[1] : 60);\n\n\t\t\t\tif(this._settings.blockTime){\n\t\t\t\t\tvar d = webix.Date.copy(date);\n\t\t\t\t\td.setMinutes(i);\n\t\t\t\t\tisBlocked = this._settings.blockTime(d);\n\t\t\t\t}\n\t\t\t\treturn (i < minMinute || i >= maxMinute || isBlocked);\n\n\t\t\t},\n\t\t\t_setContent:function(next, i){ next.setMinutes(i); },\n\t\t\t_findActive:function(date, mode, calendar){\n\t\t\t\tif(!this._isBlocked.call(calendar, date.getMinutes()))\n\t\t\t\t\treturn date;\n\t\t\t\telse{\n\t\t\t\t\tvar step = calendar._settings.minuteStep;\n\t\t\t\t\tvar newdate = webix.Date.add(date, mode ==\"right\"?step:-step, \"minute\", true);\n\t\t\t\t\tif(date.getHours() === newdate.getHours())\n\t\t\t\t\t\treturn  this._findActive(newdate, mode, calendar);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\"-1\":{\n\t\t\t_isBlocked: function(i){\n\t\t\t\tvar config = this._settings,\n\t\t\t\t\tdate = config.date;\n\n\t\t\t\tvar minHour = (config.minTime? config.minTime[0]:0);\n\t\t\t\tvar maxHour = (config.maxTime? config.maxTime[0]+(config.maxTime[1]?1:0):24);\n\n\t\t\t\tif (i < minHour || i >= maxHour) return true;\n\n\t\t\t\tif(config.blockTime){\n\t\t\t\t\tvar d = webix.Date.copy(date);\n\t\t\t\t\td.setHours(i);\n\t\t\t\t\t\n\t\t\t\t\tvar minMinute = (config.minTime && (i==minHour) ? config.minTime[1] : 0);\n\t\t\t\t\tvar maxMinute = (config.maxTime && config.maxTime[1] && (i==(maxHour-1)) ? config.maxTime[1] : 60);\n\n\t\t\t\t\tfor (var j=minMinute; j<maxMinute; j+= config.minuteStep){\n\t\t\t\t\t\td.setMinutes(j);\n\t\t\t\t\t\tif (!config.blockTime(d))\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t},\n\t\t\t_setContent:function(next, i){ next.setHours(i); },\n\t\t\t_keyshift:function(date, mode, calendar){\n\t\t\t\tvar newdate, inc, step = calendar._settings.minuteStep;\n\t\t\t\t\n\t\t\t\tif(mode === \"bottom\" || mode === \"top\"){\n\t\t\t\t\tdate.setHours(mode===\"bottom\"?23:0);\n\t\t\t\t\tdate.setMinutes(mode===\"bottom\"?55:0);\n\t\t\t\t\tdate.setSeconds(0);\n\t\t\t\t\tdate.setMilliseconds(0);\n\t\t\t\t\tnewdate = date;\n\t\t\t\t}\n\t\t\t\telse if(mode === \"left\" || mode === \"right\"){//minutes\n\n\t\t\t\t\tinc = (mode===\"right\"?step:-step);\n\t\t\t\t\tif(mode === \"left\" && date.getMinutes() < step ) inc = 60-step;\n\t\t\t\t\tif(mode === \"right\" && date.getMinutes() >= (60-step)) inc = step-60;\n\t\t\t\t\tinc -= date.getMinutes()%step;\n\t\t\t\t\tnewdate = calendar._zoom_logic[\"-2\"]._findActive(webix.Date.add(date, inc, \"minute\"), mode, calendar);\n\t\t\t\t}\n\t\t\t\telse if(mode === \"up\" || mode === \"down\"){ //hours\n\t\t\t\t\tinc = mode===\"down\"?1:-1;\n\t\t\t\t\tif(mode === \"down\" && date.getHours() === 23) inc = -23;\n\t\t\t\t\tif(mode === \"up\" && date.getHours() === 0) inc = 23;\n\t\t\t\t\tnewdate = this._findActive(webix.Date.add(date, inc, \"hour\"), mode, calendar);\n\t\t\t\t}\n\t\t\t\telse if(mode === false)\n\t\t\t\t\tnewdate = this._findActive(date, mode, calendar);\n\n\t\t\t\tcalendar.selectDate(newdate, false);\n\n\t\t\t\tif(newdate){\n\t\t\t\t\tcalendar._update_zoom_level(newdate);\n\t\t\t\t\tcalendar.selectDate(newdate, false);\n\t\t\t\t}\n\n\t\t\t\treturn \"webix_cal_block\"+(mode === \"left\" || mode === \"right\"?\"_min\":\"\");\n\t\t\t},\n\t\t\t_findActive:function(date, mode, calendar){\n\t\t\t\tif(!this._isBlocked.call(calendar, date.getHours()))\n\t\t\t\t\treturn date;\n\t\t\t\telse{\n\t\t\t\t\tvar newdate = webix.Date.add(date, mode ==\"down\"?1:-1, \"hour\", true);\n\t\t\t\t\tif(date.getDate() === newdate.getDate())\n\t\t\t\t\t\treturn  this._findActive(newdate, mode, calendar);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\"0\":{//days\n\t\t\t_changeStep:1,\n\t\t\t_keyshift:function(date, mode, calendar){\n\t\t\t\tvar newdate = date;\n\t\t\t\tif(mode === \"pgup\" || mode === \"pgdown\")\n\t\t\t\t\tnewdate = webix.Date.add(date, (mode===\"pgdown\"?1:-1), \"month\");\n\t\t\t\telse if(mode === \"bottom\")\n\t\t\t\t\tnewdate = new Date(date.getFullYear(), date.getMonth()+1, 0);\n\t\t\t\telse if(mode === \"top\")\n\t\t\t\t\tnewdate = new Date(date.setDate(1));\n\t\t\t\telse if(mode === \"left\" || mode === \"right\")\n\t\t\t\t\tnewdate = webix.Date.add(date, (mode===\"right\"?1:-1), \"day\");\n\t\t\t\telse if(mode === \"up\" || mode === \"down\")\n\t\t\t\t\tnewdate = webix.Date.add(date, (mode===\"down\"?1:-1), \"week\");\n\t\t\t\t\n\t\t\t\tif(!calendar._checkDate(newdate))\n\t\t\t\t\tnewdate = calendar._findActive(date, mode);\n\t\t\t\t\n\t\t\t\tif(newdate)\n\t\t\t\t\tcalendar.selectDate(newdate, true);\n\t\t\t\treturn \"webix_cal_day\";\n\t\t\t},\n\t\t\t\n\t\t},\n\t\t\"1\":{\t//months\n\t\t\t_isBlocked: function(i,calendar){\n\t\t\t\tvar blocked = false, minYear, maxYear,\n\t\t\t\tmin = calendar._settings.minDate||null,\n\t\t\t\tmax = calendar._settings.maxDate||null,\n\t\t\t\tyear = calendar._settings.date.getFullYear();\n\n\t\t\t\tif(min && max){\n                    minYear = min.getFullYear();\n                    maxYear = max.getFullYear();\n                    if(year<minYear||year==minYear&&min.getMonth()>i || year>maxYear||year==maxYear&&max.getMonth()<i)\n\t\t\t\t\t\tblocked = true;\n\t\t\t\t}\n\t\t\t\treturn blocked;\n\t\t\t},\n\t\t\t_correctDate: function(date,calendar){\n\t\t\t\tif(date < calendar._settings.minDate){\n\t\t\t\t\tdate = webix.Date.copy(calendar._settings.minDate);\n\t\t\t\t}\n\t\t\t\telse if(date > calendar._settings.maxDate){\n\t\t\t\t\tdate = webix.Date.copy(calendar._settings.maxDate);\n\t\t\t\t}\n\t\t\t\treturn date;\n\t\t\t},\n\t\t\t_getTitle:function(date){ return date.getFullYear(); },\n\t\t\t_getContent:function(i){ return webix.i18n.calendar.monthShort[i]; },\n\t\t\t_setContent:function(next, i){ if(i!=next.getMonth()) next.setDate(1);next.setMonth(i); },\n\t\t\t_changeStep:12,\n\t\t\t_keyshift:function(date, mode, calendar){\n\t\t\t\tvar newdate = date;\n\t\t\t\tif(mode === \"pgup\" || mode === \"pgdown\")\n\t\t\t\t\tnewdate = webix.Date.add(date, (mode===\"pgdown\"?1:-1), \"year\");\n\t\t\t\telse if(mode === \"bottom\")\n\t\t\t\t\tnewdate = new Date(date.setMonth(11));\n\t\t\t\telse if(mode === \"top\")\n\t\t\t\t\tnewdate = new Date(date.setMonth(0));\n\t\t\t\telse if(mode === \"left\" || mode === \"right\")\n\t\t\t\t\tnewdate = webix.Date.add(date, (mode===\"right\"?1:-1), \"month\");\n\t\t\t\telse if(mode === \"up\" || mode === \"down\")\n\t\t\t\t\tnewdate = webix.Date.add(date, (mode===\"down\"?4:-4), \"month\");\n\n\t\t\t\tif(!calendar._checkDate(newdate))\n\t\t\t\t\tnewdate = calendar._findActive(date, mode);\n\t\t\t\t\n\t\t\t\tif(newdate){\n\t\t\t\t\tcalendar._update_zoom_level(newdate);\n\t\t\t\t\tcalendar.selectDate(newdate, false);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn \"webix_cal_block\";\n\t\t\t}\n\t\t},\n\t\t\"2\":{\t//years\n\t\t\t_isBlocked: function(i,calendar){\n\t\t\t\ti += calendar._zoom_start_date;\n\t\t\t\tvar blocked = false;\n\t\t\t\tvar min = calendar._settings.minDate;\n\t\t\t\tvar max = calendar._settings.maxDate;\n\n\t\t\t\tif( min && max && (min.getFullYear()>i || max.getFullYear()<i)){\n\t\t\t\t\tblocked = true;\n\t\t\t\t}\n\t\t\t\treturn blocked;\n\t\t\t},\n\t\t\t_correctDate: function(date,calendar){\n\t\t\t\tif(date < calendar._settings.minDate){\n\t\t\t\t\tdate = webix.Date.copy(calendar._settings.minDate);\n\t\t\t\t}\n\t\t\t\telse if(date > calendar._settings.maxDate){\n\t\t\t\t\tdate = webix.Date.copy(calendar._settings.maxDate);\n\t\t\t\t}\n\t\t\t\treturn date;\n\t\t\t},\n\t\t\t_getTitle:function(date, calendar){\n\t\t\t\tvar start = date.getFullYear();\n\t\t\t\tcalendar._zoom_start_date = start = start - start%10 - 1;\n\t\t\t\treturn start+\" - \"+(start+10 + 1);\n\t\t\t},\n\t\t\t_getContent:function(i, calendar){ return calendar._zoom_start_date+i; },\n\t\t\t_setContent:function(next, i, calendar){ next.setFullYear(calendar._zoom_start_date+i); },\n\t\t\t_changeStep:12*10,\n\t\t\t_keyshift:function(date, mode, calendar){\n\t\t\t\tvar newdate = date;\n\t\t\t\tif(mode === \"pgup\" || mode === \"pgdown\")\n\t\t\t\t\tnewdate = webix.Date.add(date, (mode===\"pgdown\"?10:-10), \"year\");\n\t\t\t\telse if(mode === \"bottom\")\n\t\t\t\t\tnewdate = new Date(date.setYear(calendar._zoom_start_date+10));\n\t\t\t\telse if(mode === \"top\")\n\t\t\t\t\tnewdate = new Date(date.setYear(calendar._zoom_start_date));\n\t\t\t\telse if(mode === \"left\" || mode === \"right\")\n\t\t\t\t\tnewdate = webix.Date.add(date, (mode===\"right\"?1:-1), \"year\");\n\t\t\t\telse if(mode === \"up\" || mode === \"down\")\n\t\t\t\t\tnewdate = webix.Date.add(date, (mode===\"down\"?4:-4), \"year\");\n\n\t\t\t\tif(!calendar._checkDate(newdate))\n\t\t\t\t\tnewdate = calendar._findActive(date, mode);\n\t\t\t\t\n\t\t\t\tif(newdate){\n\t\t\t\t\tcalendar._update_zoom_level(newdate);\n\t\t\t\t\tcalendar.selectDate(newdate, false);\n\t\t\t\t}\n\n\t\t\t\treturn \"webix_cal_block\";\n\t\t\t}\n\t\t}\n\t},\n\t_correctBlockedTime: function(){\n\t\tvar i, isDisabledHour, isDisabledMinutes;\n\t\tisDisabledHour = this._zoom_logic[-1]._isBlocked.call(this,this._settings.date.getHours());\n\t\tif(isDisabledHour){\n\t\t\tfor (i= 0; i< 24; i++){\n\t\t\t\tif(!this._zoom_logic[-1]._isBlocked.call(this,i)){\n\t\t\t\t\tthis._settings.date.setHours(i);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tisDisabledMinutes = this._zoom_logic[-2]._isBlocked.call(this,this._settings.date.getMinutes());\n\t\tif(isDisabledMinutes){\n\t\t\tfor (i=0; i<60; i+=this._settings.minuteStep){\n\t\t\t\tif(!this._zoom_logic[-2]._isBlocked.call(this,i)){\n\t\t\t\t\tthis._settings.date.setMinutes(i);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t_update_zoom_level:function(date){\n\t\tvar config, css, height, i, index,  sections, selected, type, width, zlogic, value, temp;\n\t\tvar html = \"\";\n\n\t\tconfig = this._settings;\n\t\tindex = config.weekHeader?2: 1;\n\t\tzlogic = this._zoom_logic[this._zoom_level];\n\t\tsections  = this._contentobj.childNodes;\n\n\t\tif (date){\n\t\t\tconfig.date = date;\n\t\t}\n\n\t\ttype = config.type;\n\n\n\n\t\t//store width and height of draw area\n\t\tif (!this._zoom_size){\n\t\t\t/*this._reserve_box_height = sections[index].offsetHeight +(index==2?sections[1].offsetHeight:0);*/\n\n\t\t\tthis._reserve_box_height = this._contentobj.offsetHeight - config.headerHeight ;\n\t\t\tif(type != \"year\" && type != \"month\")\n\t\t\t\tthis._reserve_box_height -= config.timepickerHeight;\n\t\t\telse if(this._icons){\n\t\t\t\tthis._reserve_box_height -= 10;\n\t\t\t}\n\t\t\tthis._reserve_box_width = sections[index].offsetWidth;\n\t\t\tthis._zoom_size = 1;\n\t\t}\n\n\t\t//main section\n\t\tif (this._zoom_in){\n\t\t\t//hours and minutes\n\t\t\theight = this._reserve_box_height/6;\n\t\t\tvar timeColNum = 6;\n\t\t\tvar timeFormat = this._calendarTime||webix.i18n.timeFormat;\n\t\t\tvar enLocale = timeFormat.match(/%([a,A])/);\n\t\t\tif(enLocale)\n\t\t\t\ttimeColNum++;\n\t\t\twidth = parseInt((this._reserve_box_width-3)/timeColNum,10);\n\n\t\t\thtml += \"<div class='webix_time_header'>\"+this._timeHeaderTemplate(width,enLocale)+\"</div>\";\n\t\t\thtml += \"<div  class='webix_cal_body' style='height:\"+this._reserve_box_height+\"px'>\";\n\n\t\t\t// check and change blocked selected time\n\t\t\tthis._correctBlockedTime();\n\n\t\t\thtml += \"<div class='webix_hours'>\";\n\t\t\tselected = config.date.getHours();\n\t\t\ttemp = webix.Date.copy(config.date);\n\n\t\t\tfor (i= 0; i< 24; i++){\n\t\t\t\tcss=\"\";\n\t\t\t\tif(enLocale){\n\t\t\t\t\tif(i%4===0){\n\t\t\t\t\t\tvar label = (!i ? webix.i18n.am[0] : (i==12?webix.i18n.pm[0]:\"\"));\n\t\t\t\t\t\thtml += \"<div class='webix_cal_block_empty\"+css+\"' style='\"+this._getCalSizesString(width,height)+\"clear:both;\"+\"'>\"+label+\"</div>\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(this._zoom_logic[-1]._isBlocked.call(this,i)){\n\t\t\t\t\tcss += \" webix_cal_day_disabled\";\n\t\t\t\t}\n\t\t\t\telse if(selected ==  i)\n\t\t\t\t\tcss += \" webix_selected\";\n\n\t\t\t\t\n\t\t\t\ttemp.setHours(i);\n\n\t\t\t\thtml += \"<div aria-label='\"+webix.Date.dateToStr(webix.i18n.aria.hourFormat)(temp)+\"' role='gridcell'\"+\n\t\t\t\t\t\" tabindex='\"+(selected==i?\"0\":\"-1\")+\"' aria-selected='\"+(selected==i?\"true\":\"false\")+\n\t\t\t\t\t\"' class='webix_cal_block\"+css+\"' data-value='\"+i+\"' style='\"+\n\t\t\t\t\tthis._getCalSizesString(width,height)+(i%4===0&&!enLocale?\"clear:both;\":\"\")+\"'>\"+webix.Date.toFixed(enLocale?(!i||i==12?12:i%12):i)+\"</div>\";\n\t\t\t}\n\t\t\thtml += \"</div>\";\n\n\t\t\thtml += \"<div class='webix_minutes'>\";\n\t\t\tselected = config.date.getMinutes();\n\t\t\ttemp = webix.Date.copy(config.date);\n\n\n\t\t\tfor (i=0; i<60; i+=config.minuteStep){\n\t\t\t\tcss = \"\";\n\t\t\t\tif(this._zoom_logic[-2]._isBlocked.call(this,i)){\n\t\t\t\t\tcss = \" webix_cal_day_disabled\";\n\t\t\t\t}\n\t\t\t\telse if(selected ==  i)\n\t\t\t\t\tcss = \" webix_selected\";\n\n\t\t\t\ttemp.setMinutes(i);\n\n\t\t\t\thtml += \"<div aria-label='\"+webix.Date.dateToStr(webix.i18n.aria.minuteFormat)(temp)+\"' role='gridcell' tabindex='\"+(selected==i?\"0\":\"-1\")+\n\t\t\t\t\t\"' aria-selected='\"+(selected==i?\"true\":\"false\")+\"' class='webix_cal_block webix_cal_block_min\"+css+\"' data-value='\"+i+\"' style='\"+\n\t\t\t\t\tthis._getCalSizesString(width,height)+(i%2===0?\"clear:both;\":\"\")+\"'>\"+webix.Date.toFixed(i)+\"</div>\";\n\t\t\t}\n\t\t\thtml += \"</div>\";\n\n\t\t\thtml += \"</div>\";\n\t\t\thtml += \"<div  class='webix_time_footer'>\"+this._timeButtonsTemplate()+\"</div>\";\n\t\t\tthis._contentobj.innerHTML = html;\n\t\t} else {\n\t\t\t//years and months\n\t\t\t\n\t\t\t//reset header\n\t\t\tvar header = sections[0].childNodes;\n\t\t\tvar labels = webix.i18n.aria[\"nav\"+(this._zoom_level==1?\"Year\":\"Decade\")];\n\t\t\theader[0].innerHTML = zlogic._getTitle(config.date, this);\n\t\t\theader[1].setAttribute(\"aria-label\", labels[0]);\n\t\t\theader[2].setAttribute(\"aria-label\", labels[1]);\n\n\t\t\theight = this._reserve_box_height/3;\n\t\t\twidth = this._reserve_box_width/4;\n            if(this._checkDate(config.date))\n\t\t\t\tselected = (this._zoom_level==1?config.date.getMonth():config.date.getFullYear());\n\t\t\tfor (i=0; i<12; i++){\n\t\t\t\tcss = (selected == (this._zoom_level==1?i:zlogic._getContent(i, this)) ? \" webix_selected\" : \"\");\n\t\t\t\tif(zlogic._isBlocked(i,this)){\n\t\t\t\t\tcss += \" webix_cal_day_disabled\";\n\t\t\t\t}\n\n\t\t\t\tvar format = webix.i18n.aria[(this._zoom_level==1?\"month\":\"year\")+\"Format\"];\n\t\t\t\thtml+=\"<div role='gridcell' aria-label='\"+webix.Date.dateToStr(format)(config.date)+\n\t\t\t\t\t\"' tabindex='\"+(css.indexOf(\"selected\")!==-1?\"0\":\"-1\")+\n\t\t\t\t\t\"' aria-selected='\"+(css.indexOf(\"selected\")!==-1?\"true\":\"false\")+\n\t\t\t\t\t\"' class='webix_cal_block\"+css+\"' data-value='\"+i+\"' style='\"+this._getCalSizesString(width,height)+\"'>\"+\n\t\t\t\t\tzlogic._getContent(i, this)+\"</div>\";\n\t\t\t}\n\t\t\tif(index-1){\n\t\t\t\tsections[index-1].style.display = \"none\";\n\t\t\t}\n\t\t\tsections[index].innerHTML = html;\n\t\t\tif(type != \"year\" && type != \"month\"){\n\t\t\t\tif(!sections[index+1])\n\t\t\t\t\tthis._contentobj.innerHTML += \"<div  class='webix_time_footer'>\"+this._timeButtonsTemplate()+\"</div>\";\n\t\t\t\telse\n\t\t\t\t\tsections[index+1].innerHTML=this._timeButtonsTemplate();\n\t\t\t}\n\t\t\tsections[index].style.height = this._reserve_box_height+\"px\";\n\t\t}\n\t},\n\t_getCalSizesString: function(width,height){\n\t\treturn \"width:\"+width+\"px; height:\"+height+\"px; line-height:\"+height+\"px;\";\n\t},\n\t_timeButtonsTemplate: function(){\n\t\treturn \"<input type='button' style='width:100%' class='webix_cal_done' value='\"+webix.i18n.calendar.done+\"'>\";\n\t},\n\t_timeHeaderTemplate: function(width,enLocale){\n\t\tvar w1 = width*(enLocale?5:4);\n\t\tvar w2 = width*2;\n\t\treturn \"<div class='webix_cal_hours' style='width:\"+w1+\"px'>\"+webix.i18n.calendar.hours+\"</div><div class='webix_cal_minutes' style='width:\"+w2+\"px'>\"+webix.i18n.calendar.minutes+\"</div>\";\n\t},\n\t_changeZoomLevel: function(zoom,date){\n\t\tvar oldzoom = this._zoom_level;\n\t\tif(this.callEvent(\"onBeforeZoom\",[zoom, oldzoom])){\n\t\t\tthis._zoom_level = zoom;\n\n\t\t\tif(zoom)\n\t\t\t\tthis._update_zoom_level(date);\n\t\t\telse\n\t\t\t\tthis.showCalendar(date);\n\t\t\tthis.callEvent(\"onAfterZoom\",[zoom, oldzoom]);\n\t\t}\n\t},\n\t_correctDate:function(date){\n\t\tif(!this._checkDate(date) && this._zoom_logic[this._zoom_level]._correctDate)\n\t\t\tdate = this._zoom_logic[this._zoom_level]._correctDate(date,this);\n\t\treturn date;\n\t},\n\t_mode_selected:function(target){\n\n\t\tvar next = this._locate_date(target);\n\t\tvar zoom = this._zoom_level-(this._fixed?0:1);\n\n        next = this._correctDate(next);\n        if(this._checkDate(next)){\n\t\t\tthis._changeZoomLevel(zoom, next);\n\t\t\tvar type = this._settings.type;\n\t\t\tif(type == \"month\" || type == \"year\")\n\t\t\t\tthis._selectDate(next);\n\t\t}\n\t},\n\t// selects date and redraw calendar\n\t_selectDate: function(date){\n\t\tif(this.callEvent(\"onBeforeDateSelect\", [date])){\n\t\t\tthis.selectDate(date, true);\n\t\t\tthis.callEvent(\"onDateSelect\", [date]);       // should be deleted in a future version\n\t\t\tthis.callEvent(\"onAfterDateSelect\", [date]);\n\t\t}\n\t},\n\t_locate_day:function(target){\n\t\tvar cind = webix.html.index(target) - (this._settings.weekNumber?1:0);\n\t\tvar rind = webix.html.index(target.parentNode);\n\t\tvar date = webix.Date.add(this._getDateBoundaries()._start, cind + rind*7, \"day\", true);\n\t\tif (this._settings.timepicker){\n\t\t\tdate.setHours(this._settings.date.getHours());\n\t\t\tdate.setMinutes(this._settings.date.getMinutes());\n\t\t}\n\t\treturn date;\n\t},\n\t_locate_date:function(target){\n\t\tvar value = target.getAttribute(\"data-value\")*1;\n\t\tvar level = (target.className.indexOf(\"webix_cal_block_min\")!=-1?this._zoom_level-1:this._zoom_level);\n\t\tvar now = this._settings.date;\n\t\tvar next = webix.Date.copy(now);\n\n\t\tthis._zoom_logic[level]._setContent(next, value, this);\n\n\t\treturn next;\n\t},\n\ton_click:{\n\t\twebix_cal_prev_button: function(e, id, target){\n\t\t\tthis._changeDate(-1);\n\t\t},\n\t\twebix_cal_next_button: function(e, id, target){\n\t\t\tthis._changeDate(1);\n\t\t},\n\t\twebix_cal_day_disabled: function(){\n\t\t\treturn false;\n\t\t},\n\t\twebix_cal_outside: function(){\n\t\t\tif(!this._settings.navigation)\n\t\t\t\treturn false;\n\t\t},\n\t\twebix_cal_day: function(e, id, target){\n\t\t\tvar date = this._locate_day(target);\n\t\t\tthis._selectDate(date);\n\t\t},\n\t\twebix_cal_time:function(e){\n\t\t\tif(this._zoom_logic[this._zoom_level-1]){\n\t\t\t\tthis._zoom_in = true;\n\t\t\t\tvar zoom = this._zoom_level - 1;\n\t\t\t\tthis._changeZoomLevel(zoom);\n\t\t\t}\n\t\t},\n\t\twebix_range_time_start:function(){\n\t\t\twebix.$$(this._settings.master)._time_mode = \"start\";\n\t\t},\n\t\twebix_range_time_end:function(){\n\t\t\twebix.$$(this._settings.master)._time_mode = \"end\";\n\t\t},\n\t\twebix_cal_done:function(e){\n\t\t\tvar date = webix.Date.copy(this._settings.date);\n\t\t\tdate = this._correctDate(date);\n\t\t\tthis._selectDate(date);\n\t\t},\n\t\twebix_cal_month_name:function(e){\n\t\t\tthis._zoom_in = false;\n\t\t\t//maximum zoom reached\n\t\t\tif (this._zoom_level == 2 || !this._settings.monthSelect) return;\n\n\t\t\tvar zoom = Math.max(this._zoom_level, 0) + 1;\n\t\t\tthis._changeZoomLevel(zoom);\n\t\t},\n\t\twebix_cal_block:function(e, id, trg){\n\t\t\tif(this._zoom_in){\n\t\t\t\tif(trg.className.indexOf('webix_cal_day_disabled')!==-1)\n\t\t\t\t\treturn false;\n\t\t\t\tvar next = this._locate_date(trg);\n\t\t\t\tthis._update_zoom_level(next);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tif(trg.className.indexOf('webix_cal_day_disabled')==-1)\n\t\t\t\t\tthis._mode_selected(trg);\n\t\t\t}\n\t\t}\n\t},\n\t_string_to_date: function(date, format){\n\t\tif (!date){\n\t\t\treturn webix.Date.datePart(new Date());\n\t\t}\n\t\tif(typeof date == \"string\"){\n\t\t\tif (format)\n\t\t\t\tdate = webix.Date.strToDate(format)(date);\n\t\t\telse\n\t\t\t\tdate=webix.i18n.parseFormatDate(date);\n\t\t}\n\n\t\treturn date;\n\t},\n\t_checkDate: function(date){\n\t\tvar blockedDate = (this._settings.blockDates && this._settings.blockDates.call(this,date));\n\t\tvar minDate = this._settings.minDate;\n\t\tvar maxDate = this._settings.maxDate;\n\t\tvar outOfRange = (date < minDate || date > maxDate);\n\t\treturn !blockedDate &&!outOfRange;\n\t},\n\t_findActive:function(date, mode){\n\t\tvar dir = (mode === \"top\" || mode ===\"left\" || mode === \"pgup\" || mode === \"up\") ? -1 : 1;\n\t\tvar newdate = webix.Date.add(date, dir, \"day\", true);\n\t\tif(this._checkDate(newdate))\n\t\t\treturn newdate;\n\t\telse{\n\t\t\tvar compare;\n\t\t\tif(this._zoom_level === 0) compare = (date.getMonth() === newdate.getMonth());\n\t\t\telse if(this._zoom_level === 1 ) compare = (date.getFullYear() === newdate.getFullYear());\n\t\t\telse if(this._zoom_level === 2) compare = (newdate.getFullYear() > this._zoom_start_date && newdate.getFullYear() < this._zoom_start_date+10);\n\n\t\t\tif(compare)\n\t\t\t\treturn this._findActive(newdate, mode);\n\t\t}\n\t},\n\tshowCalendar: function(date) {\n\t\tdate = this._string_to_date(date);\n\t\tthis._settings.date = date;\n\t\tthis.render();\n\t\tthis.resize();\n\t},\n\tgetSelectedDate: function() {\n        return (this._selected_date)?webix.Date.copy(this._selected_date):this._selected_date;\n\n\t},\n\tgetVisibleDate: function() {\n\t\treturn webix.Date.copy(this._settings.date);\n\t},\n\tsetValue: function(date, format){\n        this.selectDate(date, true);\n\t},\n\tgetValue: function(format){\n\t\tvar date = this.getSelectedDate();\n\t\tif (format)\n\t\t\tdate = webix.Date.dateToStr(format)(date);\n\t\treturn date;\n\t},\n\tselectDate: function(date, show){\n        if(date){\n            date = this._string_to_date(date);\n            this._selected_date = date;\n            this._selected_date_part = webix.Date.datePart(webix.Date.copy(date));\n        }\n        else{ //deselect\n            this._selected_date = null;\n            this._selected_date_part = null;\n\t        if(this._settings.date){\n\t\t        webix.Date.datePart(this._settings.date);\n\t        }\n        }\n\n\t\tif (show)\n\t\t\tthis.showCalendar(date);\n\t\telse if(show !==false)\n\t\t\tthis.render();\n\n\t\tthis.callEvent(\"onChange\",[date]);\n\t}, \n\tlocate:function(){ return null; }\n\t\n}, webix.KeysNavigation, webix.MouseEvents, webix.ui.view, webix.EventSystem);\n\n\n\n\n\n\n\nwebix.protoUI({\n\tname:\"property\",\n\t$init:function(){\n\t\tthis._contentobj.className+=\" webix_property\";\n\t\tthis._contentobj.setAttribute(\"role\", \"listbox\");\n        this._destroy_with_me = [];\n\t},\n\tdefaults:{\n\t\tnameWidth:100,\n\t\teditable:true\n\t},\n\ton_render:{\n\t\tcheckbox:function(value, config){\n\t\t\treturn  \"<input type='checkbox' class='webix_property_check' \"+(value?\"checked\":\"\")+\">\";\n\t\t},\n\t\tcolor:function(value, config){\n\t\t\treturn  \"<div class=\\\"webix_property_col_val\\\"><div class='webix_property_col_ind' style=\\\"background-color:\"+(value||\"#FFFFFF\")+\";\\\"></div><span>\" +value+\"</span></div>\";\n\t\t}\n\t},\n\ton_edit:{\n\t\tlabel:false\n\t},\n\t_id:\"webix_f_id\",\n\ton_click:{\n\t\twebix_property_check:function(ev){\n\t\t\tvar id = this.locate(ev);\n\t\t\tthis.getItem(id).value = !this.getItem(id).value;\n\t\t\tthis.callEvent(\"onCheck\",[id, this.getItem(id).value]);\n\t\t\treturn false;\n\t\t}\n\t},\n\ton_dblclick:{\n\t},\n\tregisterType:function(name, data){\n\t\tif (data.template)\n\t\t\tthis.on_render[name] = data.template;\n\t\tif (data.editor)\n\t\t\tthis.on_edit[name] = data.editor;\n\t\tif (data.click)\n\t\t\tfor (var key in data.click)\n\t\t\t\tthis.on_click[key] = data.click[key];\n\t},\n    elements_setter:function(data){\n        this._idToLine = {};\n        for(var i =0; i < data.length; i++){\n            var line = data[i];\n            if (line.type == \"multiselect\")\n            \tline.optionslist = true;\n\n            //line.type \t= \tline.type||\"label\";\n            line.id \t=\tline.id||webix.uid();\n            line.label \t=\tline.label||\"\";\n            line.value \t=\tline.value||\"\";\n            this._idToLine[line.id] = i;\n            this.template = this._map_options(data[i]);\n        }\n        return data;\n    },\n\tshowItem:function(id){\n\t\twebix.RenderStack.showItem.call(this, id);\n\t},\n\tlocate:function(e){\n\t\treturn webix.html.locate(arguments[0], this._id);\n\t},\n\tgetItemNode:function(id){\n\t\treturn this._dataobj.childNodes[this._idToLine[id]];\n\t},\n\tgetItem:function(id){\n\t\treturn this._settings.elements[this._idToLine[id]];\n\t},\n\t_get_editor_type:function(id){\n\t\tvar type = this.getItem(id).type;\n\t\tif (type == \"checkbox\") return \"inline-checkbox\";\n\t\tvar alter_type = this.on_edit[type];\n\t\treturn (alter_type === false)?false:(alter_type||type);\n\t},\n\t_get_edit_config:function(id){\n\t\treturn this.getItem(id);\n\t},\n\t_find_cell_next:function(start, check , direction){\n\t\tvar row = this._idToLine[start.id];\n\t\tvar order = this._settings.elements;\n\t\t\n\t\tif (direction){\n\t\t\tfor (var i=row+1; i<order.length; i++){\n\t\t\t\tif (check.call(this, order[i].id))\n\t\t\t\t\treturn order[i].id;\n\t\t\t}\n\t\t} else {\n\t\t\tfor (var i=row-1; i>=0; i--){\n\t\t\t\tif (check.call(this, order[i].id))\n\t\t\t\t\treturn order[i].id;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\tupdateItem:function(key, data){\n\t\tdata = data || {};\n\n\t\tvar line = this.getItem(key);\n\t\tif (line)\n\t\t\twebix.extend(line, data, true);\n\n\t\tthis.refresh();\n\t},\n\t_cellPosition:function(id){\n\t\tvar html = this.getItemNode(id);\n\t\treturn {\n\t\t\tleft:html.offsetLeft+this._settings.nameWidth,\n\t\t\ttop:html.offsetTop,\n\t\t\theight:html.firstChild.offsetHeight,\n\t\t\twidth:this._data_width,\n\t\t\tparent:this._contentobj\n\t\t};\n\t},\n\tsetValues:function(data, update){\n\t\tif (this._settings.complexData)\n\t\t\tdata = webix.CodeParser.collapseNames(data);\n\n\t\tif(!update) this._clear();\n\t\tfor(var key in data){\n\t\t\tvar line = this.getItem(key);\n\t\t\tif (line)\n\t\t\t\tline.value = data[key];\n\t\t}\n\t\t\n\t\tthis._props_dataset = data;\n\t\tthis.refresh();\n\t},\n\t_clear:function(){\n\t\tvar lines = this._settings.elements;\n\t\tfor (var i=0; i<lines.length; i++)\n\t\t\tlines[i].value = \"\";\n\t},\n\tgetValues:function(){\n\t\tvar data = webix.clone(this._props_dataset||{});\n\t\tfor (var i = 0; i < this._settings.elements.length; i++) {\n\t\t\tvar line = this._settings.elements[i];\n\t\t\tif (line.type != \"label\")\n\t\t\t\tdata[line.id] = line.value;\n\t\t}\n\n\t\tif (this._settings.complexData)\n\t\t\tdata = webix.CodeParser.expandNames(data);\n\n\t\treturn data;\n\t},\n\trefresh:function(){\n\t\tthis.render();\n\t},\n\t$setSize:function(x,y){\n\t\tif (webix.ui.view.prototype.$setSize.call(this, x, y)){\n\t\t\tthis._data_width = this._content_width - this._settings.nameWidth;\n\t\t\tthis.render();\n\t\t}\n\t},\n\t$getSize:function(dx,dy){\n\t\tif (this._settings.autoheight){\n\t\t\tvar count = this._settings.elements.length;\n\t\t\tthis._settings.height = Math.max(this.type.height * count,this._settings.minHeight||0);\n\t\t}\n\t\treturn webix.ui.view.prototype.$getSize.call(this, dx, dy);\n\t},\n\t_toHTML:function(){\n\t\tvar html = [];\n\t\tvar els = this._settings.elements;\n\t\tif (els)\n\t\t\tfor (var i=0; i<els.length; i++){\n\t\t\t\tvar data = els[i];\n\t\t\t\tif (data.css && typeof data.css == \"object\")\n\t\t\t\t\tdata.css = webix.html.createCss(data.css);\n\n\t\t\t\tvar pre = '<div webix_f_id=\"'+data.id+'\"'+(data.type!=='label'?'role=\"option\" tabindex=\"0\"':'')+' class=\"webix_property_line '+(data.css||'')+'\">';\n\t\t\t\tif (data.type == \"label\")\n\t\t\t\t\thtml[i] = pre+\"<div class='webix_property_label_line'>\"+data.label+\"</div></div>\";\n\t\t\t\telse {\n\t\t\t\t\tvar render = this.on_render[data.type],\n                        content;\n\t\t\t\t\tvar post = \"<div class='webix_property_label' style='width:\"+this._settings.nameWidth+\"px'>\"+data.label+\"</div><div class='webix_property_value' style='width:\"+this._data_width+\"px'>\";\n                    if(data.collection || data.options){\n                        content = data.template(data, data.value);\n                    }else if(data.format)\n                        content = data.format(data.value);\n                    else\n                        content = data.value;\n\t\t\t\t\tif (render)\n\t\t\t\t\t\tcontent = render.call(this, data.value, data);\n\t\t\t\t\thtml[i] = pre+post+content+\"</div></div>\";\n\t\t\t\t}\n\t\t\t}\n\t\treturn html.join(\"\");\n\t},\n\ttype:{\n\t\theight:24,\n\t\ttemplateStart:webix.template(\"\"),\n\t\ttemplateEnd:webix.template(\"</div>\")\n\t},\n\t$skin: function(){\n\t\tthis.type.height = webix.skin.$active.propertyItemHeight||24;\n\t}\n}, webix.AutoTooltip, webix.EditAbility, webix.MapCollection, webix.MouseEvents, webix.Scrollable, webix.SingleRender, webix.AtomDataLoader, webix.EventSystem, webix.ui.view);\n\n\n\n\n\nwebix.protoUI({\n\tname:\"colorboard\",\n\tdefaults:{\n\t\ttemplate:\"<div style=\\\"width:100%;height:100%;background-color:{obj.val}\\\"></div>\",\n\t\tpalette:null,\n\t\theight:220,\n\t\twidth:220,\n\t\tcols:12,\n\t\trows:10,\n\t\tminLightness:0.15,\n\t\tmaxLightness:1,\n\t\tnavigation:true\n\t},\n\t$init:function(config){\n\t\twebix._event(this._viewobj, \"click\", webix.bind(function(e){\n\t\t\tvar value = webix.html.locate(e, \"webix_val\");\n\t\t\t\n\t\t\tthis.setValue(value);\n\t\t\tthis.callEvent(\"onItemClick\", [this._settings.value, e]);\n\t\t\tthis.callEvent(\"onSelect\", [this._settings.value]);\n\t\t}, this));\n\n\t\tthis.$view.setAttribute(\"role\", \"grid\");\n\t\tthis._viewobj.setAttribute(\"aria-readonly\", \"true\");\n\t},\n\t_findIndex:function(value){\n\t\tvar pal = this._settings.palette;\n\t\tvalue = value.toUpperCase();\n\t\tfor(var r= 0, rows= pal.length; r < rows; r++)\n\t\t\tfor(var c= 0, cols = pal[r].length; c < cols; c++){\n\t\t\t\tif(pal[r][c].toUpperCase() == value){\n\t\t\t\t\treturn {row:r, col:c};\n\t\t\t\t}\n\t\t\t}\n\t\treturn null;\n\t},\n\t$setSize:function(x,y){\n\t\tif(webix.ui.view.prototype.$setSize.call(this,x,y)){\n\t\t\tthis.render();\n\t\t}\n\t},\n\tgetValue:function(){\n\t\treturn this._settings.value;\n\t},\n\t_getBox:function(){\n\t\treturn this._viewobj.firstChild;\n\t},\n\tsetValue:function(value){\n\t\tif(value && value.toString().charAt(0) != \"#\")\n\t\t\tvalue = '#' + value;\n\n\t\tvar oldvalue = this._settings.value;\n\n\t\tthis._settings.value = value;\n\t\tthis.$setValue(value, oldvalue);\n\n\t\treturn value;\n\t},\n\t_selectBox:null,\n\t_getSelectBox:function(){\n\t\tif( this._selectBox && this._selectBox.parentNode ){\n\t\t\treturn this._selectBox;\n\t\t}else{\n\t\t\tvar div = this._selectBox = document.createElement(\"div\");\n\t\t\tdiv.className = \"webix_color_selector\";\n\t\t\tthis._viewobj.lastChild.appendChild(div);\n\t\t\treturn div;\n\t\t}\n\t},\n\t$setValue:function(value, oldvalue){\n\t\tif(this.isVisible(this._settings.id)){\n\t\t\tvar cell, div, ind, parent, style,\n\t\t\t\tleft = 0, top = 0;\n\n\t\t\t//remove tabindex for previous selection\n\t\t\tif(oldvalue) ind = this._findIndex(oldvalue);\n\t\t\tif(!ind) ind = {row:0, col:0};\n\t\t\tthis._viewobj.lastChild.childNodes[ind.row].childNodes[ind.col].setAttribute(\"tabindex\", \"-1\");\n\n\t\t\tind = this._findIndex(value);\n\t\t\tif(ind){\n\t\t\t\tcell = this._viewobj.lastChild.childNodes[ind.row].childNodes[ind.col];\n\t\t\t}\n\n\t\t\tif(cell && cell.parentNode && cell.parentNode.parentNode){\n\t\t\t\tparent = cell.parentNode;\n\t\t\t\tleft = cell.offsetLeft - parent.offsetLeft ;\n\t\t\t\ttop = - (this.$height - (cell.offsetTop -parent.parentNode.offsetTop ));\n\n\t\t\t\tcell.setAttribute(\"tabindex\", \"0\");\n\t\t\t\tcell.setAttribute(\"aria-selected\", \"true\");\n\t\t\t\tcell.setAttribute(\"tabindex\", \"0\");\n\t\t\t\tcell.setAttribute(\"aria-selected\", \"true\");\n\t\t\t}else{\n\t\t\t\tif (this._selectBox)\n\t\t\t\t\tthis._selectBox.style.left = \"-100px\";\n\t\t\t\tthis._viewobj.lastChild.childNodes[0].childNodes[0].setAttribute(\"tabindex\", \"0\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdiv = this._getSelectBox();\n\t\t\tstyle =  [\n\t\t\t\t\"left:\" + left + \"px\",\n\t\t\t\t\"top:\" + top+\"px\",\n\t\t\t\t\"width:\" + cell.style.width,\n\t\t\t\t\"height:\" + cell.style.height\n\t\t\t].join(\";\");\n\n\t\t\tif( typeof( div.style.cssText ) !== 'undefined' ) {\n\t\t\t\tdiv.style.cssText = style;\n\t\t\t} else {\n\t\t\t\tdiv.setAttribute('style',style);\n\t\t\t}\n\t\t}\n\t},\n\n\n\t_initPalette:function(config){\n\t\tfunction numToHex(n){\n\t\t\treturn webix.color.toHex(n, 2);\n\t\t}\n\t\tfunction rgbToHex(r,g,b){\n\t\t\treturn \"#\"+numToHex( Math.floor(r)) +numToHex( Math.floor(g)) + numToHex(Math.floor(b));\n\t\t}\n\t\tfunction hslToRgb(h, s, l){\n\t\t\tvar r, g, b;\n\t\t\tif(!s){\n\t\t\t\tr = g = b = l; // achromatic\n\t\t\t}else{\n\t\t\t\tvar q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n\t\t\t\tvar p = 2 * l - q;\n\t\t\t\tr = hue2rgb(p, q, h + 1/3);\n\t\t\t\tg = hue2rgb(p, q, h);\n\t\t\t\tb = hue2rgb(p, q, h - 1/3);\n\t\t\t}\n\n\t\t\treturn {r:r * 255, g:g * 255, b:b * 255};\n\t\t}\n\t\tfunction hue2rgb(p, q, t){\n\t\t\tif(t < 0) t += 1;\n\t\t\tif(t > 1) t -= 1;\n\t\t\tif (t < 1/6)\n\t\t\t\treturn p + (q - p) * 6 * t; \n\t\t\telse if (t <= 1/2)\n\t\t\t\treturn q;\n\t\t\telse if (t < 2/3) \n\t\t\t\treturn p + (q - p) * (2/3 - t) * 6;\n\t\t\telse\n\t\t\t\treturn p;\n\t\t}\n\n\t\tfunction renderGrayBar(colCount){\n\t\t\tvar gray = [],\n\t\t\t\tval = 255,\n\t\t\t\tstep = val / colCount;\n\n\t\t\tfor(var i=0; i < colCount; i++){\n\t\t\t\tval = Math.round(val > 0 ? val : 0);\n\t\t\t\tgray.push(rgbToHex(val, val, val));\n\t\t\t\tval -= step;\n\t\t\t}\n\t\t\tgray[gray.length - 1] = \"#000000\";\n\t\t\treturn gray;\n\t\t}\n\n\t\tvar colors = [];\n\t\tvar colorRows = config.rows - 1;\n\t\tvar colorStep = 1/config.cols;\n\t\tvar lightStep = (config.maxLightness - config.minLightness)/colorRows;\n\t\tvar colorRange = null;\n\n\t\tcolors.push(renderGrayBar(config.cols));\n\n\t\tfor(var step = 0, lt = config.minLightness; step < colorRows; step++){\n\t\t\tcolorRange = [];\n\t\t\tfor(var c = 0, col = 0; c < config.cols; c++ ){\n\t\t\t\tvar val = hslToRgb(col, 1, lt );\n\t\t\t\tcolorRange.push(rgbToHex(val.r, val.g, val.b));\n\t\t\t\tcol += colorStep;\n\t\t\t}\n\t\t\tcolors.push(colorRange);\n\t\t\tlt+=lightStep;\n\t\t}\n\n\t\tthis._settings.palette = colors;\n\t},\n\tmoveSelection:function(mode){\n\t\tvar value = this.getValue(), ind, cell;\n\n\t\tif(value) ind = this._findIndex(value);\n\t\tif(!ind) ind = {row:0, col:0};\n\n\t\tif(ind){\n\t\t\tif(mode == \"up\" || mode == \"down\")\n\t\t\t\tind.row = ind.row + (mode == \"up\"?-1:1);\n\t\t\telse if(mode == \"right\" || mode == \"left\")\n\t\t\t\tind.col = ind.col +(mode == \"right\"?1:-1);\n\t\t\telse if(mode == \"top\" )\n\t\t\t\tind.row = ind.col = 0;\n\t\t\telse if(mode == \"bottom\"){\n\t\t\t\tind.row = this._viewobj.lastChild.querySelectorAll(\".webix_color_row\").length-1;\n\t\t\t\tind.col = this._viewobj.lastChild.childNodes[ind.row].childNodes.length-1;\n\t\t\t}\n\n\t\t\tif(ind.row>=0)\n\t\t\t\tcell = this._viewobj.lastChild.childNodes[ind.row].childNodes[ind.col];\n\t\t\tif(cell){\n\t\t\t\tvalue =  cell.getAttribute(\"webix_val\");\n\t\t\t\tthis.setValue(value);\n\t\t\t\tthis.callEvent(\"onSelect\", [this._settings.value]);\n\n\n\t\t\t\tvar sel = this._viewobj.querySelector(\"div[tabindex='0']\");\n\t\t\t\tif(sel)  sel.focus();\n\t\t\t}\n\t\t}\n\t},\n\n\trender:function(){\n\t\tif(!this.isVisible(this._settings.id))\n\t\t\treturn;\n\n\t\tif(!this._settings.palette)\n\t\t\tthis._initPalette(this._settings);\n\t\tvar palette = this._settings.palette;\n\n\t\tthis.callEvent(\"onBeforeRender\",[]);\n\t\tvar config = this._settings,\n\t\t\titemTpl = webix.template(\"<div role='gridcell' tabindex='-1' aria-label=\\\"{obj.val}\\\" style=\\\"width:{obj.width}px;height:{obj.height}px;\\\" webix_val=\\\"{obj.val}\\\">\" + (config.template||\"\") + \"</div>\"),\n\t\t\tdata = {width: 0, height:0, val:0},\n\t\t\twidth = this.$width,\n\t\t\theight =  this.$height,\n\t\t\twidths = [];\n\n\t\tvar html = \"<div class=\\\"webix_color_palette\\\"role=\\\"rowgroup\\\">\";\n\n\t\tvar firstRow = (typeof palette[0] == \"object\") ? palette[0] : palette;\n\t\tfor(var i=0; i < firstRow.length; i++){\n\t\t\twidths[i] = Math.floor(width/(firstRow.length - i));\n\t\t\twidth -= widths[i];\n\t\t}\n\n\t\tif(typeof palette[0] == \"object\"){\n\t\t\tfor(var r=0; r < palette.length; r++){\n\t\t\t\tvar cellHeight = Math.floor(height/(palette.length - r));\n\t\t\t\theight -= cellHeight;\n\t\t\t\tvar row = palette[r];\n\t\t\t\thtml += renderRow(row, widths, cellHeight);\n\t\t\t}\n\t\t}else{\n\t\t\thtml+= renderRow(palette, widths, height);\n\t\t}\n\n\t\thtml += \"</div>\";\n\t\tthis._viewobj.innerHTML = html;\n\n\t\tfunction renderRow(row, widths, height){\n\t\t\tvar rowHtml = \"<div class=\\\"webix_color_row\\\" role=\\\"row\\\">\";\n\t\t\tfor(var cell = 0; cell < row.length; cell++){\n\t\t\t\tdata.width = widths[cell];\n\t\t\t\tdata.height = height;\n\t\t\t\tdata.val = row[cell];\n\t\t\t\trowHtml += itemTpl(data);\n\t\t\t}\n\t\t\trowHtml += \"</div>\";\n\t\t\treturn rowHtml;\n\t\t}\n\t\tthis._selectBox = null;\n\t\tif(this._settings.value)\n\t\t\tthis.$setValue(this._settings.value);\n\t\telse\n\t\t\tthis._viewobj.lastChild.childNodes[0].childNodes[0].setAttribute(\"tabindex\", \"0\");\n\t\tthis.callEvent(\"onAfterRender\",[]);\n\t},\n\trefresh:function(){ this.render(); }\n}, webix.KeysNavigation, webix.ui.view, webix.EventSystem);\n\n\nwebix.protoUI({\n\tname:\"resizer\",\n\tdefaults:{\n\t\twidth:7, height:7\n\t},\n\t$init:function(config){\n\t\twebix.assert(this.getParentView(), \"Resizer can't be initialized outside a layout\");\n\t\tthis._viewobj.className += \" webix_resizer\";\n\t\tvar space = this.getParentView()._margin;\n\t\t\n\t\twebix._event(this._viewobj, webix.env.mouse.down, this._rsDown, {bind:this});\n\t\twebix.event(document.body, webix.env.mouse.up, this._rsUp, {bind:this});\n\n\t\tvar dir = this._getResizeDir();\n\n\t\tthis._rs_started = false;\n\t\tthis._resizer_dir = dir;\n\n\t\tthis._resizer_dim = (dir==\"x\"?\"width\":\"height\");\n\t\t\n\t\tif (dir==\"x\")\n\t\t\tconfig.height = 0;\n\t\telse \n\t\t\tconfig.width = 0;\n\n\t\tif (space>0){\n\t\t\tthis._viewobj.className += \" webix_resizer_v\"+dir;\n\t\t\tthis._viewobj.style.marginRight = \"-\"+space+\"px\";\n\t\t\tif (dir == \"x\")\t\n\t\t\t\tconfig.width = space;\n\t\t\telse\n\t\t\t\tconfig.height = space;\n\t\t\tthis.$nospace = true;\n\t\t} else\n\t\t\tthis._viewobj.className += \" webix_resizer_\"+dir;\n\t\t\n\t\tthis._viewobj.innerHTML = \"<div class='webix_resizer_content'></div>\";\n\t\tif (dir == \"y\" && space>0) this._viewobj.style.marginBottom = \"-\"+(config.height||this.defaults.height)+\"px\";\n\n\t\tthis._viewobj.setAttribute(\"tabindex\", \"-1\");\n\t\tthis._viewobj.setAttribute(\"aria-grabbed\", \"false\");\n\n\t},\n\t_rsDown:function(e){\n\t\tvar cells = this._getResizerCells();\n\t\t//some sibling can block resize\n\t\tif(cells && !this._settings.disabled){\n\t\t\te = e||event;\n\t\t\tthis._rs_started = true;\n\t\t\tthis._rs_process = webix.html.pos(e);\n\t\t\tthis._rsLimit = [];\n\t\t\tthis._viewobj.setAttribute(\"aria-grabbed\", \"true\");\n\t\t\t\n\t\t\tfor(var i=0; i<2; i++)\n\t\t\t\tcells[i].$view.setAttribute(\"aria-dropeffect\", \"move\");\n\t\t\tthis._viewobj.setAttribute(\"aria-dropeffect\", \"move\");\n\t\t\t\n\t\t\tthis._rsStart(e, cells[0]);\n\t\t}\n\t},\n\t_rsUp:function(){\n\t\tthis._rs_started = false;\n\t\tthis._rs_process = false;\n\t},\n\t_rsStart:function(e, cell){\n\n\t\tvar dir,offset, pos,posParent,start;\n\t\te = e||event;\n\t\tdir = this._resizer_dir;\n\n\t\t/*layout position:relative to place absolutely positioned elements in it*/\n\t\tthis.getParentView()._viewobj.style.position = \"relative\";\n\t\tpos = webix.html.offset(this._viewobj);\n\t\tposParent = webix.html.offset(this.getParentView()._viewobj);\n\t\tstart = pos[dir]-posParent[dir];\n\t\toffset = webix.html.offset(cell.$view)[dir]- webix.html.offset(this.getParentView().$view)[dir];\n\n\t\tthis._rs_progress = [dir,cell, start, offset];\n\t\t/*resizer stick (resizerea ext)*/\n\n\t\tthis._resizeStick = new webix.ui.resizearea({\n\t\t\tcontainer:this.getParentView()._viewobj,\n\t\t\tdir:dir,\n\t\t\teventPos:this._rs_process[dir],\n\t\t\tstart:start-1,\n\t\t\theight: this.$height,\n\t\t\twidth: this.$width,\n\t\t\tborder: 1,\n\t\t\tmargin: this.getParentView()[\"_padding\"+dir.toUpperCase()]\n\t\t});\n\n\t\t/*stops resizing on stick mouseup*/\n\t\tthis._resizeStick.attachEvent(\"onResizeEnd\", webix.bind(this._rsEnd, this));\n\t\t/*needed to stop stick moving when the limit for dimension is reached*/\n\t\tthis._resizeStick.attachEvent(\"onResize\", webix.bind(this._rsResizeHandler, this));\n\n\t\twebix.html.addCss(document.body,\"webix_noselect\",1);\n\t},\n\t_getResizeDir: function(){\n\t\treturn this.getParentView()._vertical_orientation?\"y\":\"x\";\n\t},\n\t_rsResizeHandler:function(){\n\t\tvar cells,config,cDiff,diff,dir,i,limits,limitSizes,sizes,totalSize;\n\t\tif(this._rs_progress){\n\t\t\tcells = this._getResizerCells();\n\t\t\tdir = this._rs_progress[0];\n\t\t\t/*vector distance between resizer and stick*/\n\t\t\tdiff = this._resizeStick._last_result -this._rs_progress[2];\n\t\t\t/*new sizes for the resized cells, taking into account the stick position*/\n\t\t\tsizes = this._rsGetDiffCellSizes(cells,dir,diff);\n\t\t\t/*sum of cells dimensions*/\n\t\t\ttotalSize = cells[0][\"$\"+this._resizer_dim]+cells[1][\"$\"+this._resizer_dim];\n\t\t\t/*max and min limits if they're set*/\n\t\t\tlimits = (dir==\"y\"?[\"minHeight\",\"maxHeight\"]:[\"minWidth\",\"maxWidth\"]);\n\t\t\tfor(i=0;i<2;i++){\n\t\t\t\tconfig = cells[i]._settings;\n\t\t\t\tcDiff = (i?-diff:diff);/*if cDiff is positive, the size of i cell is increased*/\n\t\t\t\t/*if size is bigger than max limit or size is smaller than min limit*/\n\t\t\t\tvar min = config[limits[0]];\n\t\t\t\tvar max = config[limits[1]];\n\n\t\t\t\tif(cDiff>0&&max&&max<=sizes[i] || cDiff<0&&(min||3)>=sizes[i]){\n\t\t\t\t\tthis._rsLimit[i] = (cDiff>0?max:(min||3));\n\t\t\t\t\t/*new sizes, taking into account max and min limits*/\n\t\t\t\t\tlimitSizes = this._rsGetLimitCellSizes(cells,dir);\n\t\t\t\t\t/*stick position*/\n\t\t\t\t\tthis._resizeStick._dragobj.style[(dir==\"y\"?\"top\":\"left\")] = this._rs_progress[3] + limitSizes[0]+\"px\";\n\t\t\t\t\treturn;\n\t\t\t\t}else if(sizes[i]<3){/*cells size can not be less than 1*/\n\t\t\t\t\tthis._resizeStick._dragobj.style[(dir==\"y\"?\"top\":\"left\")] = this._rs_progress[3] + i*totalSize+1+\"px\";\n\t\t\t\t}else{\n\t\t\t\t\tthis._rsLimit[i] = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t_getResizerCells:function(){\n\t\tvar cells,i;\n\t\tcells = this.getParentView()._cells;\n\t\tfor(i=0; i< cells.length;i++){\n\t\t\tif(cells[i]==this){\n\t\t\t\tif (!cells[i-1] || cells[i-1]._settings.$noresize) return null;\n\t\t\t\tif (!cells[i+1] || cells[i+1]._settings.$noresize) return null;\n\t\t\t\treturn [cells[i-1],cells[i+1]];\n\t\t\t}\n\t\t}\n\t },\n\t_rsEnd:function(result){\n\t\tif (typeof result == \"undefined\") return;\n\n\t\tvar cells,dir,diff,i,size;\n\t\tvar vertical = this.getParentView()._vertical_orientation;\n\t\tthis._resizerStick = null;\n\t\tif (this._rs_progress){\n\t\t\tdir = this._rs_progress[0];\n\t\t\tdiff = result-this._rs_progress[2];\n\t\t\tcells = this._getResizerCells();\n\t\t\tif(cells[0]&&cells[1]){\n\t\t\t\t/*new cell sizes*/\n\t\t\t\tsize = this._rsGetCellSizes(cells,dir,diff);\n\n\t\t\t\tfor (var i=0; i<2; i++){\n\t\t\t\t\t//cell has not fixed size, of fully fixed layout\n\t\t\t\t\tvar cell_size = cells[i].$getSize(0,0);\n\t\t\t\t\tif (vertical?(cell_size[2] == cell_size[3]):(Math.abs(cell_size[1]-cell_size[0])<3)){\n\t\t\t\t\t\t/*set fixed sizes for both cells*/\n\t\t\t\t\t\tcells[i]._settings[this._resizer_dim]=size[i];\n\t\t\t\t\t\tif (cells[i]._bubble_size)\n\t\t\t\t\t\t\tcells[i]._bubble_size(this._resizer_dim, size[i], vertical);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar actualSize = cells[i].$view[vertical?\"offsetHeight\":\"offsetWidth\"];//cells[i][\"$\"+this._resizer_dim];\n\t\t\t\t\t\tcells[i]._settings.gravity = size[i]/actualSize*cells[i]._settings.gravity;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcells[0].resize();\n\n\t\t\t\tfor (var i = 0; i < 2; i++){\n\t\t\t\t\tif (cells[i].callEvent)\n\t\t\t\t\t\tcells[i].callEvent(\"onViewResize\",[]);\n\t\t\t\t\tcells[i].$view.removeAttribute(\"aria-dropeffect\");\n\t\t\t\t}\n\t\t\t\twebix.callEvent(\"onLayoutResize\", [cells]);\n\t\t\t}\n\t\t\tthis._rs_progress = false;\n\t\t}\n\t\tthis._rs_progress = false;\n\t\tthis._rs_started = false;\n\t\tthis._rsLimit = null;\n\t\twebix.html.removeCss(document.body,\"webix_noselect\");\n\n\t\tthis._viewobj.setAttribute(\"aria-grabbed\", \"false\");\n\t\tthis._viewobj.removeAttribute(\"aria-dropeffect\");\n\t},\n\t_rsGetLimitCellSizes: function(cells){\n\t\tvar size1,size2,totalSize;\n\t\ttotalSize = cells[0][\"$\"+this._resizer_dim]+cells[1][\"$\"+this._resizer_dim];\n\t\tif(this._rsLimit[0]){\n\t\t\tsize1 = this._rsLimit[0];\n\t\t\tsize2 = totalSize-size1;\n\t\t}\n\t\telse if(this._rsLimit[1]){\n\t\t\tsize2 = this._rsLimit[1];\n\t\t\tsize1 = totalSize-size2;\n\t\t}\n\t\treturn [size1,size2];\n\t},\n\t_rsGetDiffCellSizes:function(cells,dir,diff){\n\t\tvar sizes =[];\n\t\tvar styleDim = this._resizer_dim==\"height\"?\"offsetHeight\":\"offsetWidth\";\n\t\tfor(var i=0;i<2;i++)\n\t\t\tsizes[i] = cells[i].$view[styleDim]+(i?-1:1)*diff;\n\t\treturn sizes;\n\t},\n\t_rsGetCellSizes:function(cells,dir,diff){\n\t\tvar i,sizes,totalSize;\n\t\t/*if max or min dimentsions are set*/\n\t\tif(this._rsLimit[0]||this._rsLimit[1]){\n\t\t\tsizes = this._rsGetLimitCellSizes(cells,dir);\n\t\t}\n\t\telse{\n\t\t\tsizes = this._rsGetDiffCellSizes(cells,dir,diff);\n\t\t\tfor(i =0; i<2;i++ ){\n\t\t\t\t/*if stick moving is stopped outsize cells borders*/\n\t\t\t\tif(sizes[i]<0){\n\t\t\t\t\ttotalSize = sizes[0]+sizes[1];\n\t\t\t\t\tsizes[i] =1;\n\t\t\t\t\tsizes[1-i] = totalSize-1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t\treturn sizes;\n\t}\n}, webix.MouseEvents, webix.Destruction, webix.ui.view);\n\n\n\nwebix.protoUI({\n\tname:\"multiview\",\n\tdefaults:{\n\t\tanimate:{\n\t\t}\n\t},\n\tsetValue:function(val){\n\t\twebix.$$(val).show();\n\t},\n\tgetValue:function(){\n\t\treturn this.getActiveId();\n\t},\n\t$init:function(){\n\t\tthis._active_cell = 0;\n\t\tthis._vertical_orientation = 1;\n\t\tthis._viewobj.style.position = \"relative\";\n\t\tthis._viewobj.className += \" webix_multiview\";\n\t\tthis._back_queue = [];\n\t},\n\t_ask_render:function(cell_id, view_id){\n\t\tvar cell = webix.$$(cell_id);\n\t\tif (!cell._render_hash){\n\t\t\tcell._render_queue = [];\n\t\t\tcell._render_hash = {};\t\t\t\n\t\t}\n\t\tif (!cell._render_hash[view_id]){\n\t\t\tcell._render_hash[view_id]=true;\n\t\t\tcell._render_queue.push(view_id);\n\t\t}\n\t},\n\t_render_activation:function(cell_id){ \n\t\tvar cell = webix.$$(cell_id);\n\t\tif(this._settings.keepViews)\n\t\t\tcell._viewobj.style.display = \"\";\n\t\t/*back array*/\n\t\tif(this._back_queue[this._back_queue.length-2]!=cell_id){\n\t\t\tif(this._back_queue.length==10)\n\t\t\t\tthis._back_queue.splice(0,1);\n\t\t\tthis._back_queue.push(cell_id);\n\t\t}\n\t\telse \n\t\t\tthis._back_queue.splice(this._back_queue.length-1,1);\t\n\t\t\n\t\tif (cell._render_hash){\n\t\t\tfor (var i=0; i < cell._render_queue.length; i++){\n\t\t\t\tvar subcell = webix.$$(cell._render_queue[i]);\n\t\t\t\t//cell can be already destroyed\n\t\t\t\tif (subcell)\n\t\t\t\t\tsubcell.render();\n\t\t\t}\n\t\t\t\t\n\t\t\tcell._render_queue = [];\n\t\t\tcell._render_hash = {};\t\t\t\n\t\t}\n\t},\n\taddView:function(){\n\t\tvar id = webix.ui.baselayout.prototype.addView.apply(this, arguments);\n\t\tif(this._settings.keepViews)\n\t\t\twebix.$$(id)._viewobj.style.display = \"none\";\n\t\telse\n\t\t\twebix.html.remove(webix.$$(id)._viewobj);\n\t\treturn id;\n\t},\n\t_beforeRemoveView:function(index, view){\n\t\t//removing current view\n\t\tif (index == this._active_cell){\n\t\t\tvar next = Math.max(index-1, 0);\n\t\t\tif (this._cells[next]){\n\t\t\t\tthis._in_animation = false;\n\t\t\t\tthis._show(this._cells[next], false);\n\t\t\t}\n\t\t}\n\n\t\tif (index < this._active_cell)\n\t\t\tthis._active_cell--;\n\t},\n\t//necessary, as we want to ignore hide calls for elements in multiview\n\t_hide:function(){},\n\t_parse_cells:function(collection){\n\t\tcollection = collection || this._collection; \n\n\t\tfor (var i=0; i < collection.length; i++)\n\t\t\tcollection[i]._inner = this._settings.borderless?{top:1, left:1, right:1, bottom:1}:(this._settings._inner||{});\n\t\t\t\n\t\twebix.ui.baselayout.prototype._parse_cells.call(this, collection);\n\t\t\n\t\tfor (var i=1; i < this._cells.length; i++){\n\t\t\tif(this._settings.keepViews)\n\t\t\t\tthis._cells[i]._viewobj.style.display = \"none\";\n\t\t\telse\n\t\t\t\twebix.html.remove(this._cells[i]._viewobj);\n\t\t}\n\n\t\t\t\n\t\tfor (var i=0; i<collection.length; i++){\n\t\t\tvar cell = this._cells[i];\n\t\t\tif (cell._cells && !cell._render_borders) continue; \n\t\t\t\n\t\t\tvar _inner = cell._settings._inner;\n\t\t\tif (_inner.top) \n\t\t\t\tcell._viewobj.style.borderTopWidth=\"0px\";\n\t\t\tif (_inner.left) \n\t\t\t\tcell._viewobj.style.borderLeftWidth=\"0px\";\n\t\t\tif (_inner.right) \n\t\t\t\tcell._viewobj.style.borderRightWidth=\"0px\";\n\t\t\tif (_inner.bottom) \n\t\t\t\tcell._viewobj.style.borderBottomWidth=\"0px\";\n\n\t\t\tcell._viewobj.setAttribute(\"role\", \"tabpanel\");\n\t\t}\n\t\tthis._render_activation(this.getActiveId());\n\t},\n\tcells_setter:function(value){\n\t\twebix.assert(value && value.length,\"Multiview must have at least one view in 'cells'\");\n\t\tthis._collection = value;\n\t},\n\t_getDirection:function(next, active){\n\t\tvar dir = (this._settings.animate || {}).direction;\n\t\tvar vx = (dir == \"top\" || dir == \"bottom\");\n\t\treturn \t next < active ? (vx?\"bottom\":\"right\"):(vx?\"top\":\"left\");\n\t},\n\t_show:function(obj, animation_options){\n\n\t\tvar parent = this.getParentView();\n\t\tif (parent && parent.getTabbar)\n\t\t\tparent.getTabbar().setValue(obj._settings.$id || obj._settings.id);\n\n\t\t if (this._in_animation)\n\t\t\treturn webix.delay(this._show, this,[obj, animation_options],100);\n\n\t\tvar _next_cell = -1;\n\t\tfor (var i=0; i < this._cells.length; i++)\n\t\t\tif (this._cells[i]==obj){\n\t\t\t\t_next_cell = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\tif (_next_cell < 0 || _next_cell == this._active_cell)\n\t\t\treturn;\n\n\n\t\tvar prev = this._cells[this._active_cell];\n\t\tvar next = this._cells[ _next_cell ];\n\t\tvar size = prev.$getSize(0,0);\n\n\t\t//need to be moved in animate\n\t\tif((animation_options||typeof animation_options==\"undefined\")&&webix.animate.isSupported() && this._settings.animate) {\n\t\t\tvar aniset = webix.extend({}, this._settings.animate);\n\t\t\tif(this._settings.keepViews)\n\t\t\t\taniset.keepViews = true;\n        \taniset.direction = this._getDirection(_next_cell,this._active_cell);\n        \taniset = webix.Settings._mergeSettings(animation_options||{}, aniset);\n\n\t\t\tvar line = webix.animate.formLine(\n\t\t\t\tnext._viewobj,\n                prev._viewobj,\n\t\t\t\taniset);\n\t\t\tnext.$getSize(0,0);\n\t\t\tnext.$setSize(this._content_width,this._content_height);\n\n\t\t\tvar callback_original = aniset.callback;\n\t\t\taniset.callback = function(){\n\t\t\t\twebix.animate.breakLine(line,this._settings.keepViews);\n\t\t\t\tthis._in_animation = false;\n\t\t\t\tif (callback_original) callback_original.call(this);\n\t\t\t\tcallback_original = aniset.master = aniset.callback = null;\n\t\t\t\tthis.resize();\n\t\t\t};\n\t\t\taniset.master = this;\n\n\t\t\tthis._active_cell = _next_cell;\n\t\t\tthis._render_activation(this.getActiveId());\n\n\t\t\twebix.animate(line, aniset);\n\t\t\tthis._in_animation = true;\n\t\t}\n\t\telse { // browsers which don't support transform and transition\n\t\t\tif(this._settings.keepViews){\n\t\t\t\tprev._viewobj.style.display = \"none\";\n\t\t\t}\n\t\t\telse{\n\t\t\t\twebix.html.remove(prev._viewobj);\n\t\t\t\tthis._viewobj.appendChild(this._cells[i]._viewobj);\n\t\t\t}\n\n\t\t\tthis._active_cell = _next_cell;\n\n\t\t\tprev.resize();\n\t\t\tthis._render_activation(this.getActiveId());\n\t\t}\n\n\t\tif (next.callEvent){\n\t\t\tnext.callEvent(\"onViewShow\",[]);\n\t\t\twebix.ui.each(next, this._signal_hidden_cells);\n\t\t}\n\n\t\tthis.callEvent(\"onViewChange\",[prev._settings.id, next._settings.id]);\n\t\t\n\t},\n\t$getSize:function(dx, dy){\n\t\twebix.debug_size_box_start(this, true);\n\t\tvar size = this._cells[this._active_cell].$getSize(0, 0);\n\t\tif (this._settings.fitBiggest){\n\t\t\tfor (var i=0; i<this._cells.length; i++)\n\t\t\t\tif (i != this._active_cell){\n\t\t\t\t\tvar other = this._cells[i].$getSize(0, 0);\n\t\t\t\t\tfor (var j = 0; j < 4; j++)\n\t\t\t\t\t\tsize[j] = Math.max(size[j], other[j]);\n\t\t\t\t}\n\t\t}\n\n\n\t\t//get layout sizes\n\t\tvar self_size = webix.ui.baseview.prototype.$getSize.call(this, 0, 0);\n\t\t//use child settings if layout's one was not defined\n\t\tif (self_size[1] >= 100000) self_size[1]=0;\n\t\tif (self_size[3] >= 100000) self_size[3]=0;\n\n\t\tself_size[0] = (self_size[0] || size[0] ) +dx;\n\t\tself_size[1] = (self_size[1] || size[1] ) +dx;\n\t\tself_size[2] = (self_size[2] || size[2] ) +dy;\n\t\tself_size[3] = (self_size[3] || size[3] ) +dy;\n\t\t\n\t\twebix.debug_size_box_end(this, self_size);\n\t\t\n\t\treturn self_size;\n\t},\n\t$setSize:function(x,y){\n\t\tthis._layout_sizes = [x,y];\n\t\twebix.ui.baseview.prototype.$setSize.call(this,x,y);\n\t\tthis._cells[this._active_cell].$setSize(x,y);\n\t},\n\tisVisible:function(base_id, cell_id){\n\t\tif (cell_id && cell_id != this.getActiveId()){\n\t\t\tif (base_id)\n\t\t\t\tthis._ask_render(cell_id, base_id);\n\t\t\treturn false;\n\t\t}\n\t\treturn webix.ui.view.prototype.isVisible.call(this, base_id, this._settings.id);\n\t},\n\tgetActiveId:function(){\n\t\treturn this._cells.length?this._cells[this._active_cell]._settings.id:null;\n\t},\n\tback:function(step){\t\t\n\t\tstep=step||1;\n\t\tif(this.callEvent(\"onBeforeBack\",[this.getActiveId(), step])){\n\t\t\tif(this._back_queue.length>step){\n\t\t\t\tvar viewId = this._back_queue[this._back_queue.length-step-1];\n\t\t\t\twebix.$$(viewId).show();\n\t\t\t\treturn viewId;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\treturn null;\n\n\t}\n},webix.ui.baselayout);\n\n\n\n\n\nwebix.protoUI({\n\tname:\"form\",\n\tdefaults:{\n\t\ttype:\"form\",\n\t\tautoheight:true\n\t},\n\t_default_height:-1,\n\t_form_classname:\"webix_form\",\n\t_form_vertical:true,\n\t$init:function(){\n\t\tthis._viewobj.setAttribute(\"role\", \"form\");\n\t},\n\t$getSize:function(dx, dy){\n\t\tif (this._scroll_y && !this._settings.width) dx += webix.ui.scrollSize;\n\n\t\tvar sizes = webix.ui.layout.prototype.$getSize.call(this, dx, dy);\n\n\t\tif (this._settings.scroll || !this._settings.autoheight){\n\t\t\tsizes[2] =  this._settings.height || this._settings.minHeight || 0;\n\t\t\tsizes[3] += 100000;\n\t\t}\n\t\t\n\t\treturn sizes;\n\t}\n}, webix.ui.toolbar);\n\n\n\n\n\n\n\nwebix.protoUI({\n\tname:\"menu\",\n\t_listClassName:\"webix_menu\",\n\t$init:function(config){\n\t\tthis.data._scheme_init = webix.bind(function(obj){\n\t\t\tif (obj.disabled)\n\t\t\t\tthis.data.addMark(obj.id, \"webix_disabled\", true, 1, true);\n\t\t}, this);\n\n\t\tif (config.autowidth){\n\t\t\tthis._autowidth_submenu = true;\n\t\t\tdelete config.autowidth;\n\t\t}\n\n\t\tthis.data.attachEvent('onStoreUpdated', webix.bind(function(){\n\t\t\tthis._hide_sub_menu();\n\t\t},this));\n\t\tthis.attachEvent('onMouseMove', this._mouse_move_menu);\n\t\tthis.attachEvent('onMouseOut',function(){\n\t\t\tif (this._menu_was_activated() && this._settings.openAction == \"click\") return;\n\t\t\tif (!this._child_menu_active)\n\t\t\t\tthis._hide_sub_menu();\n\t\t});\n\t\tthis.attachEvent('onItemClick', function(id, e, trg){\n\t\t\tvar item = this.getItem(id);\n\t\t\tif (item){\n\t\t\t\tif (item.$template) return;\n\n\t\t\t\tvar parent = this.getTopMenu();\n\n\t\t\t\t//ignore disabled items\n\t\t\t\tif (!this.data.getMark(id, \"webix_disabled\")){\n\t\t\t\t\tif (!parent.callEvent(\"onMenuItemClick\", [id, e, trg])){\n\t\t\t\t\t\te.showpopup = true;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this != parent)\n\t\t\t\t\t\tparent._call_onclick(id,e,trg);\n\n\t\t\t\t\t//click on group - do not close submenus\n\t\t\t\t\tif (!item.submenu){\n\t\t\t\t\t\tparent._hide_sub_menu(true);\n\t\t\t\t\t\tif (parent._hide_on_item_click)\n\t\t\t\t\t\t\tparent.hide();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif ((this === parent || webix.env.touch ) && parent._settings.openAction == \"click\"){\n\t\t\t\t\t\t\tthis._mouse_move_activation(id, trg);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//do not close popups when clicking on menu folder\n\t\t\t\t\t\te.showpopup = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.attachEvent(\"onKeyPress\", function(code, e){\n\t\t\tif(code === 9) this.getTopMenu()._hide_sub_menu();\n\t\t\telse if(code === 13 || code === 32){\n\t\t\t\tvar sel = this.getSelectedId(), node;\n\t\t\t\tif(sel)\n\t\t\t\t\tnode = this.getItemNode(sel);\n\t\t\t\tif(node)\n\t\t\t\t\twebix.html.triggerEvent(node, \"MouseEvents\", \"click\");\n\t\t\t}\n\n\t\t});\n\n\t\tthis.data.attachEvent(\"onClearAll\", function(){\n\t\t\tthis._hidden_items = [];\n\t\t});\n\t\tthis.data._hidden_items = [];\n\n\t\tthis._viewobj.setAttribute(\"role\", \"menubar\");\n\t},\n\tsizeToContent:function(){\n\t\tif (this._settings.layout == \"y\"){\n\t\t\tvar texts = [];\n\t\t\tvar isSubmenu = false;\n\t\t\tthis.data.each(function(obj){\n\t\t\t\ttexts.push(this._toHTML(obj));\n\t\t\t\tif(obj.submenu)\n\t\t\t\t\tisSubmenu = true;\n\t\t\t}, this);\n\t\t\t// text width + padding + borders+ arrow\n\t\t\tthis.config.width = webix.html.getTextSize(texts, this.$view.className).width+8*2+2+(isSubmenu?15:0);\n\t\t\tthis.resize();\n\t\t} else webix.assert(false, \"sizeToContent will work for vertical menu only\");\n\t},\n\tgetTopMenu:function(){\n\t\tvar parent = this;\n\t\twhile (parent._parent_menu)\n\t\t\tparent = webix.$$(parent._parent_menu);\n\t\treturn parent;\n\t},\n\t_auto_height_calc:function(count){\n\t\tif (this._settings.autoheight) count = this.count();\n\n\t\tvar height = 0;\n\t\tfor (var i=0; i<count; i++){\n\t\t\tvar item = this.data.pull[this.data.order[i]];\n\t\t\tif (item && item.$template == \"Separator\")\n\t\t\t\theight+=4;\n\t\t\telse\n\t\t\t\theight+=this.type.height;\n\t\t}\n\t\treturn height;\n\t},\n\ton_mouse_move:{},\n\ttype:{\n\t\tcss:\"menu\",\n\t\twidth:\"auto\",\n\t\taria:function(obj, common, marks){\n\t\t\treturn 'role=\"menuitem\"'+(marks && marks.webix_selected?' aria-selected=\"true\" tabindex=\"0\"':'tabindex=\"-1\"')+(obj.submenu?'aria-haspopup=\"true\"':'')+(marks && marks.webix_disabled?' aria-disabled=\"true\"':'');\n\t\t},\n\t\ttemplateStart:function(obj, common, mark){\n\t\t\tif (obj.$template === \"Separator\" || obj.$template === \"Spacer\"){\n\t\t\t\treturn '<div webix_l_id=\"#id#\" role=\"separator\" tabindex=\"-1\" class=\"webix_context_'+obj.$template.toLowerCase()+'\">';\n\t\t\t}\n\t\t\tvar link = (obj.href?\" href='\"+obj.href+\"' \":\"\")+(obj.target?\" target='\"+obj.target+\"' \":\"\");\n\t\t\treturn webix.ui.list.prototype.type.templateStart(obj,common,mark).replace(/^<div/,\"<a \"+link)+((obj.submenu && common.subsign)?\"<div class='webix_submenu_icon'></div>\":\"\");\n\t\t},\n\t\ttemplateEnd: function(obj, common, mark){\n\t\t\treturn (obj.$template === \"Separator\" || obj.$template === \"Spacer\")?\"</div>\":\"</a>\";\n\t\t},\n\t\ttemplateSeparator:webix.template(\"<div class='sep_line'></div>\"),\n\t\ttemplateSpacer:webix.template(\"<div></div>\")\n\t},\n\tgetMenu: function(id){\n\t\tif (!this.data.pull[id]){\n\t\t\tfor (var subid in this.data.pull){\n\t\t\t\tvar obj = this.getItem(subid);\n\t\t\t\tif (obj.submenu){\n\t\t\t\t\tvar search = this._get_submenu(obj).getMenu(id);\n\t\t\t\t\tif (search) return search;\n\t\t\t\t}\n\t\t\t}\n\t\t} else return this;\n\t},\n\tgetSubMenu:function(id){\n\t\tvar menu = this.getMenu(id);\n\t\tvar obj = menu.getItem(id);\n\t\treturn (obj.submenu?menu._get_submenu(obj):null);\n\t},\n\tgetMenuItem:function(id){\n\t\treturn this.getMenu(id).getItem(id);\n\t},\n\t_get_submenu:function(data){\n\t\tvar sub  = webix.$$(data.submenu);\n\t\tif (!sub){\n\t\t\tdata.submenu = this._create_sub_menu(data);\n\t\t\tsub = webix.$$(data.submenu);\n\t\t}\n\t\treturn sub;\n\t},\n\t_mouse_move_menu:function(id, e, target){\n\t\tif (!this._menu_was_activated())\n\t\t\treturn;\n\n\t\tthis._mouse_move_activation(id, target);\n\t},\n\t_menu_was_activated:function(){\n\t\tvar top = this.getTopMenu();\n\t\tif (top._settings.openAction == \"click\"){\n\t\t\tif (webix.env.touch) return false;\n\t\t\tvar sub = top._open_sub_menu;\n\t\t\tif (sub && webix.$$(sub).isVisible())\n\t\t\t\treturn true;\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\t_mouse_move_activation:function(id, target){\n\t\tvar data = this.getItem(id);\n\t\tif (!data) return;\n\t\t\n\t\t//clear flag of submenu usage\n\t\tthis._child_menu_active = null;\n\n\t\t//hide previously opened sub-menu\n\t\tif (this._open_sub_menu && data.submenu != this._open_sub_menu)\n\t\t\tthis._hide_sub_menu(true);\n\n\t\t//show submenu\n\t\tif (data.submenu&&!this.config.hidden){\n\n\t\t\tvar sub  = this._get_submenu(data);\n\t\t\tif(this.data.getMark(id,\"webix_disabled\"))\n\t\t\t\treturn;\n\t\t\tsub.show(target,{ pos:this._settings.subMenuPos });\n\n\t\t\tsub._parent_menu = this._settings.id;\n\n\t\t\tthis._open_sub_menu = data.submenu;\n\t\t}\n\t},\n\tdisableItem:function(id){\n\t\tthis.getMenu(id).addCss(id, \"webix_disabled\");\n\t},\n\tenableItem:function(id){\n\t\tthis.getMenu(id).removeCss(id, \"webix_disabled\");\n\t},\n\t_set_item_hidden:function(id, state){\n\t\tvar menu = this.data;\n\t\tif (menu._hidden_items[id] != state){\n\t\t\tmenu._hidden_items[id] = state;\n\t\t\tmenu.filter(function(obj){\n\t\t\t\treturn !menu._hidden_items[obj.id];\n\t\t\t});\n\t\t\tthis.resize();\t\t\n\t\t}\n\t},\n\thideItem:function(id){\n\t\tvar menu = this.getMenu(id);\n\t\tif (menu) menu._set_item_hidden(id, true);\n\t},\n\tshowItem:function(id){\n\t\tvar menu = this.getMenu(id);\n\t\tif (menu){\n\t\t\tmenu._set_item_hidden(id, false);\n\t\t\treturn webix.ui.list.prototype.showItem.call(menu, id);\n\t\t}\n\t},\n\t_hide_sub_menu : function(mode){\n\t\tif (this._open_sub_menu){\n\t\t\t//recursive sub-closing\n\t\t\tvar sub = webix.$$(this._open_sub_menu);\n\t\t\tif (sub._hide_sub_menu)\t//custom context may not have submenu\n\t\t\t\tsub._hide_sub_menu(mode);\n\t\t\tif (mode || !sub._show_on_mouse_out){\n\t\t\t\tsub.hide();\n\t\t\t\tthis._open_sub_menu = null;\n\t\t\t}\n\t\t}\n\t},\n\t_create_sub_menu : function(data){\n\t\tvar listConfig = {\n\t\t\tview:\"submenu\",\n\t\t\tdata:data.submenu\n\t\t};\n\n\t\tvar settings = this.getTopMenu()._settings.submenuConfig;\n\t\tif (settings)\n\t\t\twebix.extend(listConfig, settings, true);\n\n\t\tvar parentData = this.getMenuItem(data.id);\n\t\tif(parentData && parentData.config)\n\t\t\twebix.extend(listConfig, parentData.config, true);\n\n\t\tvar menu = webix.ui(listConfig);\n\t\tmenu._parent_menu = this;\n\t\treturn menu._settings.id;\n\t},\n\t_skip_item:function(id, prev, mode){\n\t\tvar item = this.getItem(id);\n\t\tif(item.$template == \"Separator\" || item.$template == \"Spacer\" || this.data.getMark(id, \"webix_disabled\")){\n            var index = this.getIndexById(id)+(mode == \"up\"?-1:1);\n            id = (index>=0)?this.getIdByIndex(index):null;\n            return id? this._skip_item(id, prev, mode) : prev;\n        }\n        else\n\t\t\treturn id;\n\t},\n\t$skin:function(){\n\t\twebix.ui.list.prototype.$skin.call(this);\n\t\tthis.type.height = webix.skin.$active.menuHeight;\n\t},\n\tdefaults:{\n\t\tscroll:\"\",\n\t\tlayout:\"x\",\n\t\tmouseEventDelay:100,\n\t\tsubMenuPos:\"bottom\"\n\t}\n}, webix.ui.list);\n\n\nwebix.protoUI({\n\tname:\"submenu\",\n\t$init:function(){\n\t\tthis._body_cell = webix.clone(this._dummy_cell_interface);\n\t\tthis._body_cell._view = this;\n\n\t\tthis.attachEvent('onMouseOut',function(){\n\t\t\tif (this.getTopMenu()._settings.openAction == \"click\") \n\t\t\t\treturn;\n\t\t\tif (!this._child_menu_active && !this._show_on_mouse_out)\n\t\t\t\tthis.hide();\n\t\t});\n\n\t\t//inform parent that focus is still in menu\n\t\tthis.attachEvent('onMouseMoving',function(){\n\t\t\tif (this._parent_menu)\n\t\t\t\twebix.$$(this._parent_menu)._child_menu_active = true;\n\t\t});\n\t\tthis.attachEvent(\"onBeforeShow\", function(){\n\t\t\tif (this.getTopMenu()._autowidth_submenu && this.sizeToContent && !this.isVisible())\n\t\t\t\tthis.sizeToContent();\n\t\t});\n\n\t\tthis._dataobj.setAttribute(\"role\", \"menu\");\n\t},\n\t$skin:function(){\n\t\twebix.ui.menu.prototype.$skin.call(this);\n\t\twebix.ui.popup.prototype.$skin.call(this);\n\n\t\tthis.type.height = webix.skin.$active.menuHeight;\n\t},\n\t_dummy_cell_interface : {\n\t\t$getSize:function(dx, dy){\n\t\t\t//we saving height and width, as list can hardcode new values\n\t\t\tvar h = this._view._settings.height*1;\n\t\t\tvar w = this._view._settings.width*1;\n\t\t\tvar size = webix.ui.menu.prototype.$getSize.call(this._view, dx, dy);\n\t\t\t//restoring\n\t\t\tthis._view._settings.height = h;\n\t\t\tthis._view._settings.width = w;\n\t\t\treturn size;\n\t\t},\n\t\t$setSize:function(x,y){\n\t\t\tif (this._view._settings.scroll)\n\t\t\t\tthis._view._bodyobj.style.height = y+\"px\";\n\t\t},\n\t\tdestructor:function(){ this._view = null; }\n\t},\n\t//ignore body element\n\tbody_setter:function(){\n\t},\n\tgetChildViews:function(){ return []; },\n\tdefaults:{\n\t\twidth:150,\n\t\tsubMenuPos:\"right\",\n\t\tlayout:\"y\",\n\t\tautoheight:true\n\t},\n\ttype:{\n\t\theight: webix.skin.menuHeight,\n\t\tsubsign:true\n\t}\n}, webix.ui.menu, webix.ui.popup);\n\n\n\n\nwebix.ContextHelper = {\n\tdefaults:{\n\t\tpadding:\"4\",\n\t\thidden:true\n\t},\n\tbody_setter:function(value){\n\t\tvalue = webix.ui.window.prototype.body_setter.call(this, value);\n\t\tthis._body_cell._viewobj.style.borderWidth = \"0px\";\n\t\treturn value;\n\t},\n\tattachTo:function(obj){\n\t\twebix.assert(obj, \"Invalid target for Context::attach\");\n\t\tvar id;\n\t\tif (obj.on_context)\n\t\t\tid = obj.attachEvent(\"onAfterContextMenu\", webix.bind(this._show_at_ui, this));\n\t\telse \n\t\t\tid = webix.event(obj, \"contextmenu\", this._show_at_node, {bind:this});\n\n\t\tthis.attachEvent(\"onDestruct\", function(){\n\t\t\tif (obj.detachEvent)\n\t\t\t\tobj.detachEvent(id);\n\t\t\telse\n\t\t\t\twebix.eventRemove(id);\n\t\t\tobj = null;\t\t\t\n\t\t});\n\t},\n\tgetContext:function(){\n\t\treturn this._area;\n\t},\n\tsetContext:function(area){\n\t\tthis._area = area;\n\t},\n\t_show_at_node:function(e){\n\t\tthis._area = webix.toNode(e||event);\n\t\treturn this._show_at(e);\n\t},\n\t_show_at_ui:function(id, e, trg){\n\t\tthis._area = { obj:webix.$$(e), id:id };\n\t\treturn this._show_at(e);\n\t},\n\t_show_at:function(e){\n\t\tvar result = this.show(e, null, true);\n\t\tif (result === false) return result;\n\n\t\t//event forced to close other popups|context menus\n\t\twebix.callEvent(\"onClick\", []);\t\t\n\t\treturn webix.html.preventEvent(e);\n\t},\n\t_show_on_mouse_out:true,\n\tmaster_setter:function(value){\n\t\tthis.attachTo(value);\n\t\treturn null;\n\t}\n};\nwebix.protoUI({\n\tname:\"context\"\n}, webix.ContextHelper, webix.ui.popup); \n\nwebix.protoUI({\n\tname:\"contextmenu\",\n\t_hide_on_item_click:true,\n\t$init: function(config){\n\t\tif(config.submenuConfig)\n\t\t\twebix.extend(config,config.submenuConfig);\n\t}\n}, webix.ContextHelper, webix.ui.submenu);\n\n/*\n\n*/\n\nwebix.protoUI({\n\tname:\"tabbar\",\n\t$init:function(){\n\t\tthis.attachEvent(\"onKeyPress\", this._onKeyPress);\n\t},\n\t$skin:function(){\n\t\tvar skin = webix.skin.$active;\n\t\tvar defaults = this.defaults;\n\n\t\tdefaults.topOffset = skin.tabTopOffset||0;\n\t\tdefaults.tabOffset = (typeof skin.tabOffset != \"undefined\"?skin.tabOffset:10);\n\t\tdefaults.bottomOffset = skin.tabBottomOffset||0;\n\t\tdefaults.height = skin.tabbarHeight;\n\n\t\tdefaults.tabMargin = skin.tabMargin;\n\t\tdefaults.inputPadding = skin.inputPadding;\n\t\tdefaults.tabMinWidth = skin.tabMinWidth||100;\n\t\tdefaults.tabMoreWidth = skin.tabMoreWidth||40;\n\t},\n\t_getTabbarSizes: function(){\n\n\t\tvar config = this._settings,\n\t\t\ti, len,\n\t\t\ttabs = this._tabs||config.options,\n\t\t\ttotalWidth = this._input_width - config.tabOffset*2,\n\t\t\tlimitWidth = config.optionWidth||config.tabMinWidth;\n\n\t\tlen = tabs.length;\n\n\t\tif(config.tabMinWidth && totalWidth/len < limitWidth){\n\t\t\treturn { max: (parseInt(totalWidth/limitWidth,10)||1)};\n\t\t}\n\n\n\t\tif(!config.optionWidth){\n\t\t\tfor(i=0;i< len; i++){\n\t\t\t\tif(tabs[i].width){\n\t\t\t\t\ttotalWidth -= tabs[i].width+(!i&&!config .type?config.tabMargin:0);\n\t\t\t\t\tlen--;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn {width: (len?totalWidth/len:config.tabMinWidth)};\n\t},\n\t_init_popup: function(){\n\t\tvar obj = this._settings;\n\t\tif (!obj.tabbarPopup){\n\t\t\tvar popupConfig = {\n\t\t\t\tview: \"popup\",\n\t\t\t\twidth: (obj.popupWidth||200),\n\t\t\t\tbody:{\n\t\t\t\t\tview: \"list\",\n\t\t\t\t\tborderless: true,\n\t\t\t\t\tselect: true,\n\t\t\t\t\tcss: \"webix_tab_list\",\n\t\t\t\t\tautoheight: true, yCount:obj.yCount,\n\t\t\t\t\ttype:{\n\t\t\t\t\t\ttemplate: obj.popupTemplate\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tvar view = webix.ui(popupConfig);\n\t\t\tview.getBody().attachEvent(\"onBeforeSelect\",webix.bind(function(id){\n\t\t\t\tif (id && this.callEvent(\"onBeforeTabClick\", [id])){\n\t\t\t\t\t\tthis.setValue(id);\n\t\t\t\t\twebix.$$(this._settings.tabbarPopup).hide();\n\t\t\t\t\tthis.callEvent(\"onAfterTabClick\", [id]);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t},this));\n\n\t\t\tview.getBody().attachEvent(\"onAfterSelect\", webix.bind(function(id){\n\t\t\t\tthis.refresh();\n\t\t\t},this));\n\n\t\t\tobj.tabbarPopup = view._settings.id;\n\t\t\tthis._destroy_with_me.push(view);\n\t\t}\n\t\tthis._init_popup = function(){};\n\t},\n\tgetPopup: function(){\n\t\tthis._init_popup();\n\t\treturn webix.$$(this._settings.tabbarPopup);\n\t},\n\tmoreTemplate_setter: webix.template,\n\tpopupTemplate_setter: webix.template,\n\tdefaults:{\n\t\tpopupWidth: 200,\n\t\tpopupTemplate: \"#value#\",\n\t\tyCount: 7,\n\t\tmoreTemplate: '<span class=\"webix_icon fa-ellipsis-h\"></span>',\n\t\ttemplate:function(obj,common) {\n\t\t\tvar contentWidth, html, i, leafWidth, resultHTML, style, sum, tabs, verticalOffset, width;\n\n\t\t\tcommon._tabs = tabs = common._filterOptions(obj.options);\n\n\t\t\tif (!tabs.length){\n\t\t\t\thtml = \"<div class='webix_tab_filler' style='width:\"+common._input_width+\"px; border-right:0px;'></div>\";\n\t\t\t} else {\n\t\t\t\tcommon._check_options(tabs);\n\t\t\t\tif (!obj.value && tabs.length)\n\t\t\t\t\tobj.value = tabs[0].id;\n\n\t\t\t\thtml = \"\";\n\t\t\t\tif (obj.tabOffset)\n\t\t\t\t\thtml += \"<div class='webix_tab_filler' style='width:\"+obj.tabOffset+\"px;'>&nbsp;</div>\";\n\t\t\t\tcontentWidth = common._input_width - obj.tabOffset*2-(!obj.type?(obj.tabMargin)*(tabs.length-1):0);\n\t\t\t\tverticalOffset = obj.topOffset+obj.bottomOffset;\n\n\t\t\t\tvar sizes = common._getTabbarSizes();\n\n\t\t\t\tif(sizes.max && sizes.max < tabs.length){\n\t\t\t\t\t//we need popup\n\t\t\t\t\tvar popup = common.getPopup();\n\t\t\t\t\tpopup.hide();\n\n\t\t\t\t\tvar list = (popup.getBody()||null);\n\t\t\t\t\tif(list){\n\t\t\t\t\t\tif(sizes.max){\n\t\t\t\t\t\t\tvar found = false;\n\t\t\t\t\t\t\tfor( i = 0; i < tabs.length && !found; i++)\n\t\t\t\t\t\t\t\tif(tabs[i].id== obj.value){\n\t\t\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t\t\t\tif((i+1) > sizes.max){\n\t\t\t\t\t\t\t\t\t\tvar selectedTab =  tabs.splice(i, 1);\n\t\t\t\t\t\t\t\t\t\tvar displayTabs = tabs.splice(0, sizes.max-1).concat(selectedTab);\n\t\t\t\t\t\t\t\t\t\ttabs = displayTabs.concat(tabs);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlist.clearAll();\n\t\t\t\t\t\t\tlist.parse(tabs.slice(sizes.max));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tlist.clearAll();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (common._settings.tabbarPopup)\n\t\t\t\t\twebix.$$(common._settings.tabbarPopup).hide();\n\n\t\t\t\tsum = obj.tabOffset;\n\t\t\t\tvar lastTab = false;\n\t\t\t\tfor(i = 0; (i<tabs.length) && !lastTab; i++) {\n\n\t\t\t\t\t// tab width\n\t\t\t\t\tif(sizes && sizes.max){\n\t\t\t\t\t\tif(sizes.max == (i + 1)){\n\t\t\t\t\t\t\tlastTab = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontentWidth = common._input_width - obj.tabOffset*2-(!obj.type&&(sizes.max>1)?(obj.tabMargin)*(sizes.max-1):0);\n\t\t\t\t\t\twidth = (contentWidth - obj.tabMoreWidth)/sizes.max ;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\twidth = sizes.width;\n\n\t\t\t\t\twidth = (tabs[i].width||obj.optionWidth||width);\n\n\t\t\t\t\tsum += width + (i&&!obj.type?obj.tabMargin:0);\n\n\t\t\t\t\tif(obj.tabMargin>0&&i&&!obj.type)\n\t\t\t\t\t   html += \"<div class='webix_tab_filler' style='width:\"+obj.tabMargin+\"px;'></div>\";\n\n\t\t\t\t\t// tab innerHTML\n\t\t\t\t\thtml += common._getTabHTML(tabs[i],width);\n\n\n\t\t\t\t\tif(lastTab){\n\t\t\t\t\t\thtml += '<div role=\"button\" tabindex=\"0\" aria-label=\"'+webix.i18n.aria.showTabs+'\" class=\"webix_tab_more_icon\" style=\"width:'+obj.tabMoreWidth+'px;\">'+obj.moreTemplate(obj,common)+'</div>';\n\t\t\t\t\t\tsum += obj.tabMoreWidth;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t\tleafWidth = common._content_width - sum;\n\n\t\t\t\tif (leafWidth>0 && !obj.type)\n\t\t\t\t\thtml += \"<div class='webix_tab_filler' style='width:\"+leafWidth+\"px;'>&nbsp;</div>\";\n\t\t\t}\n\n\t\t\tresultHTML = \"\";\n\n\t\t\t// consider top and bottom offset in tabs height (top tabbar)\n\t\t\tstyle = (verticalOffset&& !obj.type)?\"height:\"+(common._content_height-verticalOffset)+\"px\":\"\";\n\n\t\t\t//space above tabs (top tabbar)\n\t\t\tif(obj.topOffset && !obj.type)\n\t\t\t\tresultHTML += \"<div class='webix_before_all_tabs' style='width:100%;height:\"+obj.topOffset+\"px'></div>\";\n\n\t\t\t// tabs html\n\t\t\tresultHTML +=  \"<div style='\"+style+\"' role='tablist' class='webix_all_tabs \"+(obj.type?(\"webixtype_\"+obj.type):\"\")+\"'>\"+html+\"</div>\";\n\n\t\t\t//space below to tabs (top tabbar)\n\t\t\tif(obj.bottomOffset && !obj.type)\n\t\t\t\tresultHTML += \"<div class='webix_after_all_tabs' style='width:100%;height:\"+obj.bottomOffset+\"px'></div>\";\n\n\t\t\treturn resultHTML;\n\t\t}\n\t},\n\t_getInputNode:function(){\n\t\treturn this.$view.querySelectorAll(\".webix_item_tab\");\n\t},\n\t_getTabHTML: function(tab,width){\n\t\tvar\thtml,\n\t\t\tclassName = '',\n\t\t\tconfig = this.config;\n\n\t\tif(tab.id== config.value)\n\t\t\tclassName=\" webix_selected\";\n\n\t\tif (tab.css)\n\t\t\tclassName+=\" \"+tab.css;\n\n\t\twidth = (tab.width||width);\n\n\t\thtml ='<div class=\"webix_item_tab'+className+'\" button_id=\"'+tab.id+'\" role=\"tab\" aria-selected=\"'+(tab.id== config.value?\"true\":\"false\")+'\" tabindex=\"'+(tab.id== config.value?\"0\":\"-1\")+'\" style=\"width:'+width+'px;\">';\n\n\t\t// a tab title\n\t\tif(this._tabTemplate){\n\t\t\tvar calcHeight = this._content_height- config.inputPadding*2 - 2;\n\t\t\tvar height = this._content_height - 2;\n\t\t\tvar temp = webix.extend({ cheight: calcHeight, aheight:height }, tab);\n\t\t\thtml+= this._tabTemplate(temp);\n\t\t}\n\t\telse {\n\t\t\tvar icon = tab.icon?(\"<span class='webix_icon fa-\"+tab.icon+\"'></span> \"):\"\";\n\t\t\thtml+=icon + tab.value;\n\t\t}\n\n\t\tif (tab.close || config.close)\n\t\t\thtml+=\"<span role='button' tabindex='0' aria-label='\"+webix.i18n.aria.closeTab+\"' class='webix_tab_close webix_icon fa-times'></span>\";\n\n\t\thtml+=\"</div>\";\n\t\treturn html;\n\t},\n\t_types:{\n\t\timage:\"<div class='webix_img_btn_top' style='height:#cheight#px;background-image:url(#image#);'><div class='webix_img_btn_text'>#value#</div></div>\",\n\t\ticon:\"<div class='webix_img_btn' style='line-height:#cheight#px;height:#cheight#px;'><span class='webix_icon_btn fa-#icon#' style='max-width:#cheight#px;max-height:#cheight#px;'></span>#value#</div>\",\n\t\ticonTop:\"<div class='webix_img_btn_top' style='height:#cheight#px;width:100%;top:0px;text-align:center;'><span class='webix_icon fa-#icon#'></span><div class='webix_img_btn_text'>#value#</div></div>\"\n\t},\n\ttype_setter:function(value){\n\t\tthis._settings.tabOffset = 0;\n\t\tif (this._types[value])\n\t\t\tthis._tabTemplate = webix.template(this._types[value]);\n\t\treturn value;\n\t}\n}, webix.ui.segmented);\n\nwebix.protoUI({\n\tname:\"tabview\",\n\tdefaults:{\n\t\ttype:\"clean\"\n\t},\n\tsetValue:function(val){\n\t\tthis._cells[0].setValue(val);\n\t},\n\tgetValue:function(){\n\t\treturn this._cells[0].getValue();\n\t},\n\tgetTabbar:function(){\n\t\treturn this._cells[0];\n\t},\n\tgetMultiview:function(){\n\t\treturn this._cells[1];\n\t},\n\taddView:function(obj){\n\t\tvar id = obj.body.id = obj.body.id || webix.uid();\n\n\t\tthis.getMultiview().addView(obj.body);\n\n\t\tobj.id = obj.body.id;\n\t\tobj.value = obj.header;\n\t\tdelete obj.body;\n\t\tdelete obj.header;\n\n\t\tvar t = this.getTabbar();\n\t\tt.addOption(obj);\n\n\t\treturn id;\n\t},\n\tremoveView:function(id){\n\t\tvar t = this.getTabbar();\n\t\tt.removeOption(id);\n\t\tt.refresh();\n\t},\n\t$init:function(config){\n\t\tthis.$ready.push(this._init_tabview_handlers);\n\n\t\tvar cells = config.cells;\n\t\tvar tabs = [];\n\n\t\twebix.assert(cells && cells.length, \"tabview must have cells collection\");\n\n\t\tfor (var i = cells.length - 1; i >= 0; i--){\n\t\t\tvar view = cells[i].body||cells[i];\n\t\t\tif (!view.id) view.id = \"view\"+webix.uid();\n\t\t\ttabs[i] = { value:cells[i].header, id:view.id, close:cells[i].close, width:cells[i].width, hidden:  !!cells[i].hidden};\n\t\t\tcells[i] = view;\n\t\t}\n\n\t\tvar tabbar = { view:\"tabbar\", multiview:true };\n\t\tvar mview = { view:\"multiview\", cells:cells, animate:(!!config.animate) };\n\n\t\tif (config.value)\n\t\t\ttabbar.value = config.value;\n\n\t\tif (config.tabbar)\n\t\t\twebix.extend(tabbar, config.tabbar, true);\n\t\tif (config.multiview)\n\t\t\twebix.extend(mview, config.multiview, true);\n\t\t\n\t\ttabbar.options = tabbar.options || tabs;\n\n\t\tconfig.rows = [\n\t\t\ttabbar, mview\n\t\t];\n\n\t\tdelete config.cells;\n\t\tdelete config.tabs;\n\t},\n\t_init_tabview_handlers:function(){\n\t\tthis.getTabbar().attachEvent(\"onOptionRemove\", function(id){\n\t\t\tvar view = webix.$$(id);\n\t\t\tif (view)\n\t\t\t\tview.destructor();\n\t\t});\n\t}\n}, webix.ui.layout);\n\nwebix.protoUI({\n\tname:\"fieldset\",\n\tdefaults:{\n\t\tborderless:true,\n\t\t$cssName:\"webix_fieldset\",\n\t\tpaddingX: 18,\n\t\tpaddingY: 30\n\t},\n\t$init:function(obj){\n\t\twebix.assert(obj.body, \"fieldset must have not-empty body\");\n\n\t\tthis._viewobj.className += \" \"+this.defaults.$cssName;\n\t\tthis._viewobj.innerHTML =  \"<fieldset><legend></legend><div></div></fieldset>\";\n\t},\n\tlabel_setter:function(value){\n\t\tthis._viewobj.firstChild.childNodes[0].innerHTML = value;\n\t\treturn value;\n\t},\n\tgetChildViews:function(){\n\t\treturn [this._body_view];\n\t},\n\tbody_setter:function(config){\n\t\tthis._body_view = webix.ui(config, this._viewobj.firstChild.childNodes[1]);\n\t\tthis._body_view._parent_cell = this;\n\t\treturn config;\n\t},\n\tgetBody:function(){\n\t\treturn this._body_view;\n\t},\n\tresizeChildren:function(){\n\t\tvar x = this.$width - this._settings.paddingX;\n\t\tvar y = this.$height - this._settings.paddingY;\n\t\tvar sizes=this._body_view.$getSize(0,0);\n\n\t\t//minWidth\n\t\tif (sizes[0]>x) x = sizes[0];\n\t\t//minHeight\n\t\tif (sizes[2]>y) y = sizes[2];\n\n\t\tthis._body_view.$setSize(x,y);\n\t\tthis.resize();\n\t},\n\t$getSize:function(x, y){\n\t\twebix.debug_size_box_start(this, true);\n\n\t\tx += this._settings.paddingX;\n\t\ty += this._settings.paddingY;\n\t\t\n\t\tvar t = this._body_view.$getSize(x, y);\n\t\tvar s = this._last_body_size = webix.ui.view.prototype.$getSize.call(this, x, y);\n\n\t\t//inner content minWidth > outer\n\t\tif (s[0] < t[0]) s[0] = t[0];\n\t\tif (s[2] < t[2]) s[2] = t[2];\n\t\t//inner content maxWidth < outer\n\t\tif (s[1] > t[1]) s[1] = t[1];\n\t\tif (s[3] > t[3]) s[3] = t[3];\n\n\t\twebix.debug_size_box_end(this, s);\n\t\treturn s;\n\t},\n\t$setSize:function(x,y){\n\t\tif (webix.ui.view.prototype.$setSize.call(this, x,y)){\n\t\t\tx = Math.min(this._last_body_size[1], x);\n\t\t\ty = Math.min(this._last_body_size[3], y);\n\t\t\tthis._body_view.$setSize(x - this._settings.paddingX, y - this._settings.paddingY);\n\t\t}\n\t}\n}, webix.ui.view);\nwebix.protoUI({\n\tname:\"forminput\",\n\tdefaults:{\n\t\t$cssName:\"webix_forminput\",\n\t\tlabelWidth: 80,\n\t\tlabelAlign : \"left\"\n\t},\n\tsetValue:function(value){\n\t\tthis._body_view.setValue(value);\n\t},\n\tfocus:function(){\n\t\tthis._body_view.focus();\n\t},\n\tgetValue:function(){\n\t\treturn this._body_view.getValue();\n\t},\n\tvalue_setter:function(value){\n\t\tthis.setValue(value);\n\t},\n\tgetBody:function(){\n\t\treturn this._body_view;\n\t},\n\t$skin:function(){\n\t\tthis._inputPadding = webix.skin.$active.inputPadding;\n\t\tthis._inputSpacing = webix.skin.$active.inputSpacing;\n\t},\n\t$init:function(obj){\n\t\tthis.$ready.push(function(){\n\t\t\tvar label = this._viewobj.firstChild.childNodes[0];\n\t\t\tlabel.style.width = this._settings.paddingX+\"px\";\n\t\t\tlabel.style.textAlign = this._settings.labelAlign;\n\t\t\tif (!this._settings.labelWidth)\n\t\t\t\tlabel.style.display = \"none\";\n\t\t});\n\n\t\tvar lw = webix.isUndefined(obj.labelWidth) ? this.defaults.labelWidth : obj.labelWidth;\n\t\tobj.paddingX = lw - this._inputPadding*2 + this._inputSpacing* 2;\n\t},\n\tsetBottomText: function(text) {\n\t\tvar config = this._settings;\n\t\tif (typeof text != \"undefined\"){\n\t\t\tif (config.bottomLabel == text) return;\n\t\t\tconfig.bottomLabel = text;\n\t\t}\n\t\tvar message = (config.invalid ? config.invalidMessage : \"\") || config.bottomLabel;\n\t\tif(this._invalidMessage) {\n\t\t\twebix.html.remove(this._invalidMessage);\n\t\t}\n\t\tif(message) {\n\t\t\tthis.$view.style.position = \"relative\";\n\t\t\tthis._invalidMessage = webix.html.create(\"div\", { class:\"webix_inp_bottom_label\", role:config.invalid?'alert':\"\", \"aria-relevant\":'all', style:\"position:absolute; bottom:0px; padding:2px; background: white; left:\"+this._settings.labelWidth+\"px; \" }, message);\n\t\t\tthis._viewobj.appendChild(this._invalidMessage);\n\t\t}\n\t}\n}, webix.ui.fieldset);\n\n\nwebix.protoUI({\n\tname: \"dbllist\",\n\tdefaults:{\n\t\tborderless:true\n\t},\n\t$init: function(config) {\n\t\tthis._moved = {};\n\t\tthis._inRight = webix.bind(function(obj){ return this._moved[obj.id]; }, this);\n\t\tthis._inLeft = webix.bind(function(obj){ return !this._moved[obj.id]; }, this);\n\t\n\t\tthis.$view.className += \" webix_dbllist\";\n\t\tthis.$ready.unshift(this._setLayout);\n\t},\n\t$onLoad:function(data, driver){\n\t\tthis._updateAndResize(function(){\n\t\t\tthis.$$(\"left\").data.driver = driver;\n\t\t\tthis.$$(\"left\").parse(data);\n\t\t\tthis.$$(\"right\").data.driver = driver;\n\t\t\tthis.$$(\"right\").parse(data);\n\t\t});\n\n\t\tthis._refresh();\n\t},\n\t_getButtons:function(){\n\t\tif (this._settings.buttons === false)\n\t\t\treturn { width: 10 };\n\n\t\tvar i18n = webix.i18n.dbllist;\n\t\tvar buttons = [\n\t\t\tthis._getButton(\"deselect_all\", i18n.deselectAll),\n\t\t\tthis._getButton(\"select_all\", i18n.selectAll),\n\t\t\tthis._getButton(\"deselect_one\", i18n.deselectOne),\n\t\t\tthis._getButton(\"select_one\", i18n.selectOne)\n\t\t];\n\n\n\t\tvar buttons = { width:120, template:buttons.join(\"\"), onClick:{\n\t\t\tdbllist_button:function(e, id, trg){\n\t\t\t\t this.getTopParentView()._update_list(trg.getAttribute(\"action\"));\n\t\t\t}\n\t\t}};\n\t\tif (this._settings.buttons)\n\t\t\tbuttons.template = this._settings.buttons;\n\n\t\treturn buttons;\n\t},\n\t_getButton: function(action, label){\n\t\treturn \"<button class='dbllist_button' action='\"+action+\"'>\"+label+\"</button>\";\n\t},\n\t_getList: function(id, action, label, bottom){\n\t\tvar list = {\n\t\t\tview: \"list\",\n\t\t\tselect: \"multiselect\",\n\t\t\tmultiselect: \"touch\",\n\t\t\tid: id,\n\t\t\taction: action,\n\t\t\tdrag: true,\n\t\t\ttype:{\n\t\t\t\tmargin:3,\n\t\t\t\tid:id\n\t\t\t},\n\t\t\ton: {\n\t\t\t\tonBeforeDrop: function(context) {\n\t\t\t\t\tvar source = context.from;\n\t\t\t\t\tvar target = context.to;\n\t\t\t\t\tvar top = source.getTopParentView();\n\n\t\t\t\t\tif (top === this.getTopParentView()) {\n\t\t\t\t\t\tvar mode = (target._settings.action != \"select_one\");\n\t\t\t\t\t\ttop.select(context.source, mode);\n\t\t\t\t\t\ttop._refresh();\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\tonItemDblClick: function(){\n\t\t\t\t\treturn this.getTopParentView()._update_list(this.config.action);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tif (this._settings.list)\n\t\t\twebix.extend(list, this._settings.list, true);\n\n\t\tif (label)\n\t\t\tlist = { rows:[{ view:\"label\", label:label }, list] };\n\t\tif (bottom)\n\t\t\treturn { rows:[list, { view:\"label\", height:20, label:bottom, css:\"bottom_label\" }] };\n\t\treturn list;\n\t},\n\t_setLayout: function() {\n\t\tvar cols = [{\n\t\t\tmargin: 10, type:\"clean\",\n\t\t\tcols: [\n\t\t\t\tthis._getList(\"left\", \"select_one\", this._settings.labelLeft, this._settings.labelBottomLeft),\n\t\t\t\tthis._getButtons(),\n\t\t\t\tthis._getList(\"right\", \"deselect_one\", this._settings.labelRight, this._settings.labelBottomRight)\n\t\t\t]\n\t\t}];\n\n\t\tthis.cols_setter(cols);\n\t},\n\t_update_list: function(action) {\n\t\tvar top = this.getTopParentView();\n\t\tvar id = null;\n\t\tvar mode = false;\n\n\t\tif (action === \"select_all\"){\n\t\t\tid = top.$$(\"left\").data.order;\n\t\t\tmode = true;\n\t\t} else if (action === \"select_one\"){\n\t\t\tid = top.$$(\"left\").getSelectedId(true);\n\t\t\tmode = true;\n\t\t} else if (action === \"deselect_all\"){\n\t\t\tid = top.$$(\"right\").data.order;\n\t\t\tmode = false;\n\t\t} else if (action === \"deselect_one\"){\n\t\t\tid = top.$$(\"right\").getSelectedId(true);\n\t\t\tmode = false;\n\t\t}\n\n\t\ttop.select(id, mode);\n\t},\n\tselect:function(id, mode){\n\t\tvar i;\n\t\tif (typeof id !== \"object\") id = [id];\n\n\t\tif (mode){\n\t\t\tfor (i = 0; i < id.length; i++)\n\t\t\t\tthis._moved[id[i]] = true;\n\t\t} else {\n\t\t\tfor (i = 0; i < id.length; i++)\n\t\t\t\tdelete this._moved[id[i]];\n\t\t}\n\t\tthis.callEvent(\"onChange\", []);\n\t\tthis._refresh();\n\t},\n\t_updateAndResize:function(handler, size){\n\t\twebix.ui.$freeze = true;\n\t\thandler.call(this);\n\t\twebix.ui.$freeze = false;\n\n\t\tif (size && (this.$$(\"left\")._settings.autoheight || this.$$(\"right\")._settings.autoheight))\n\t\t\tthis.resize();\n\t},\n\t_refresh: function() {\n\t\tvar left = this.$$(\"left\");\n\t\tvar right = this.$$(\"right\");\n\n\t\tif (left)\n\t\t\tthis._updateAndResize(function(){\n\t\t\t\tleft.filter(this._inLeft);\n\t\t\t\tright.filter(this._inRight);\n\t\t\t}, true);\n\t},\n\tfocus:function(){\n\t\twebix.UIManager.setFocus(this);\n\t},\n\tvalue_setter:function(val){\n\t\tthis.setValue(val);\n\t},\n\tsetValue: function(value) {\n\t\tthis._moved = {};\n\t\tif (typeof value !== \"object\")\n\t\t\tvalue = value.toString().split(\",\");\n\t\tfor (var i = 0; i < value.length; i++)\n\t\t\tthis._moved[value[i]] = true;\n\n\t\t\n\t\tthis._refresh();\n\t},\n\tgetValue: function() {\n\t\tvar value = [];\n\t\tfor (var key in this._moved)\n\t\t\tvalue.push(key);\n\n\t\treturn value.join(\",\");\n\t}\n}, webix.AtomDataLoader, webix.IdSpace, webix.ui.layout);\n\nwebix.i18n.dbllist = {\n\tselectAll : \"<span class='webix_icon fa-angle-double-right'></span>\",\n\tselectOne : \"<span class='webix_icon fa-angle-right'></span>\",\n\tdeselectAll : \"<span class='webix_icon fa-angle-double-left'></span>\",\n\tdeselectOne : \"<span class='webix_icon fa-angle-left'></span>\",\n};\n\n\n\n\n(function(){\n\n\tfunction _tagname(el) {\n\t\tif (!el.tagName) return null;\n\t\treturn el.tagName.toLowerCase();\n\t}\n\tfunction _attribute(el, name) {\n\t\tif (!el.getAttribute) return null;\n\t\tvar attr = el.getAttribute(name);\n\t\treturn attr ? attr.toLowerCase() : null;\n\t}\n\tfunction _get_html_value() {\n\t\tvar tagname = _tagname(this);\n\t\tif (_get_value[tagname])\n\t\t\treturn _get_value[tagname](this);\n\t\treturn _get_value.other(this);\n\t}\n\n\tvar _get_value = {\n\t\tradio: function(el){\n\t\t\tfor (var i = 0; i < el.length; i++)\n\t\t\t\tif (el[i].checked) return el[i].value;\n\t\t\treturn \"\";\n\t\t},\n\t\tinput: function(el) {\n\t\t\tvar type = _attribute(el, 'type');\n\t\t\tif (type === 'checkbox')\n\t\t\t\treturn el.checked;\t\t\t\n\t\t\treturn el.value;\n\t\t},\n\t\ttextarea: function(el) {\n\t\t\treturn el.value;\n\t\t},\n\t\tselect: function(el) {\n\t\t\tvar index = el.selectedIndex;\n\t\t\treturn el.options[index].value;\n\t\t},\n\t\tother: function(el) {\n\t\t\treturn el.innerHTML;\n\t\t}\n\t};\n\n\tfunction  _set_html_value(value) {\n\t\tvar tagname = _tagname(this);\n\t\tif (_set_value[tagname])\n\t\t\treturn _set_value[tagname]( this, value);\n\t\treturn _set_value.other( this, value);\n\t}\n\n\tvar _set_value = {\n\t\tradio:function(el, value){\n\t\t\tfor (var i = 0; i < el.length; i++)\n\t\t\t\tel[i].checked = (el[i].value == value);\n\t\t},\n\t\tinput: function(el, value) {\n\t\t\tvar type = _attribute(el, 'type');\n\t\t\tif (type === 'checkbox')\n\t\t\t\tel.checked = (value) ? true : false;\n\t\t\telse\n\t\t\t\tel.value = value;\n\t\t},\n\t\ttextarea: function(el, value) {\n\t\t\tel.value = value;\n\t\t},\n\t\tselect: function(el, value) {\n            //select first option if no provided and if possible\n\t\t\tel.value = value?value:el.firstElementChild.value||value;\n\t\t},\n\t\tother: function(el, value) {\n\t\t\tel.innerHTML = value;\n\t\t}\n\t};\n\n\nwebix.protoUI({\n\tname:\"htmlform\",\n\t$init: function(config) {\n\t\tthis.elements = {};\n\t\tthis._default_values  = false;\n\n\t\tif (config.content && (config.container == config.content || !config.container && config.content == document.body))\n\t\t\tthis._copy_inner_content = true;\n\t},\n\tcontent_setter:function(content){\n\t\tcontent = webix.toNode(content);\n\t\tif (this._copy_inner_content){\n\t\t\twhile (content.childNodes.length > 1)\n\t\t\t\tthis._viewobj.childNodes[0].appendChild(content.childNodes[0]);\n\t\t} else {\n\t\t\tthis._viewobj.childNodes[0].appendChild(content);\n\t\t}\n\t\tthis._parse_inputs();\n\t\treturn true;\n\t},\n\trender:function(){\n\t\twebix.ui.template.prototype.render.apply(this, arguments);\n\t\tthis._parse_inputs();\n\t},\n\t_parse_inputs: function() {\n\t\tvar inputs = this._viewobj.querySelectorAll(\"[name]\");\n\t\tthis.elements = {};\n\n\n\t\tfor (var i=0; i<inputs.length; i++){\n\t\t\tvar el = inputs[i];\n\t\t\tvar name = _attribute(el, \"name\");\n\t\t\tif (name){\n\t\t\t\tvar tag = _tagname(el) === \"button\";\n\t\t\t\tvar type = _attribute(el, \"type\");\n\n\t\t\t\tvar cant_clear = tag || type === \"button\" || type === \"submit\";\n\n\t\t\t\tif (type === \"radio\"){\n\t\t\t\t\tvar stack = this.elements[name] || [];\n\t\t\t\t\tstack.tagName = \"radio\";\n\t\t\t\t\tstack.push(el);\n\t\t\t\t\tel = stack;\n\t\t\t\t}\n\n\t\t\t\tthis.elements[name] = el;\n\n\t\t\t\tel.getValue =  _get_html_value;\n\t\t\t\tel.setValue =  _set_html_value;\n\t\t\t\tel._allowsClear = !cant_clear;\n\t\t\t\tel._settings =  { defaultValue : el.getValue() };\n\t\t\t}\n\t\t}\n\n\t\treturn this.elements;\n\t},\n\t_mark_invalid:function(id,obj){\n\t\tthis._clear_invalid(id,obj);\n\t\tvar el = this._viewobj.querySelector('[name=\"' + id + '\"]');\n\t\tif (el) webix.html.addCss(el, \"invalid\");\n\t},\n\t_clear_invalid:function(id,obj){\n\t\tvar el = this._viewobj.querySelector('[name=\"' + id + '\"]');\n\t\tif (el) webix.html.removeCss(el, \"invalid\");\n\t}\n\n}, webix.ui.template, webix.Values);\n\n})();\n(function(){\n\tvar google, script;\n\twebix.protoUI({\n\t\tname:\"google-map\",\n\t\t$init:function(config){\n\t\t\tthis.$view.innerHTML = \"<div class='webix_map_content' style='width:100%;height:100%'></div>\";\n\t\t\tthis._contentobj = this.$view.firstChild;\n\t\t\tthis._waitMap = webix.promise.defer();\n\n\t\t\tthis.data.provideApi(this, true);\n\t\t\tthis.$ready.push(this.render);\n\t\t},\n\t\tgetMap:function(waitMap){\n\t\t\treturn waitMap?this._waitMap:this._map;\n\t\t},\n\t\t_getCallBack:function(prev){\n\t\t\treturn webix.bind(function(){\n\t\t\t\tif (typeof prev === \"function\") prev();\n\n\t\t\t\tgoogle = google || window.google;\n\t\t\t\tthis._initMap.call(this);\n\t\t\t}, this);\n\t\t},\n\t\trender:function(){\n\t\t\tif(typeof window.google==\"undefined\"||typeof window.google.maps==\"undefined\"){\n\t\t\t\tif(!script){\n\t\t\t\t\tscript = document.createElement(\"script\");\n\t\t\t\t\tscript.type = \"text/javascript\";\n\n\t\t\t\t\tvar config = this._settings;\n\t\t\t\t\tvar src = config.src || \"//maps.google.com/maps/api/js\";\n\t\t\t\t\tsrc += (src.indexOf(\"?\")===-1 ? \"?\" :\"&\");\n\t\t\t\t\t\n\t\t\t\t\tif (config.key)\n\t\t\t\t\t\tsrc += \"&key=\"+config.key;\n\t\t\t\t\tif (config.libraries)\n\t\t\t\t\t\tsrc += \"&libraries=\"+config.libraries;\n\n\t\t\t\t\tscript.src = src;\n\t\t\t\t\tdocument.getElementsByTagName(\"head\")[0].appendChild(script);\n\t\t\t\t}\n\t\t\t\tscript.onload = this._getCallBack(script.onload);\n\t\t\t}\n\t\t\telse //there's a custom link to google api in document head\n\t\t\t\t(this._getCallBack())();\n\t\t},\n\t\t_initMap:function(){\n\t\t\tvar c = this.config;\n\t\t\tif(this.isVisible(c.id)){\n\t\t\t\tthis._map = new google.maps.Map(this._contentobj, {\n\t\t\t\t\tzoom: c.zoom,\n\t\t\t\t\tcenter: new google.maps.LatLng(c.center[0], c.center[1]),\n\t\t\t\t\tmapTypeId: google.maps.MapTypeId[c.mapType]\n\t\t\t\t});\n\t\t\t\tthis._waitMap.resolve(this._map);\n\t\t\t}\n\t\t},\n\t\tcenter_setter:function(config){\n\t\t\tif(this._map)\n\t\t\t\tthis._map.setCenter(new google.maps.LatLng(config[0], config[1]));\n\n\t\t\treturn config;\n\t\t},\n\t\tmapType_setter:function(config){\n\t\t\t/*ROADMAP,SATELLITE,HYBRID,TERRAIN*/\n\t\t\tif(this._map)\n\t\t\t\tthis._map.setMapTypeId(google.maps.MapTypeId[config]);\n\n\t\t\treturn config;\n\t\t},\n\t\tzoom_setter:function(config){\n\t\t\tif(this._map)\n\t\t\t\tthis._map.setZoom(config);\n\t\t\treturn config;\n\t\t},\n\t\tlayerType_setter:function(config){\n\t\t\tif(config == \"heatmap\")\n\t\t\t\tthis.config.libraries = \"visualization\";\n\t\t\tif(this._layerApi[config]){\n\t\t\t\twebix.extend(this, this._layerApi[config], true);\n\t\t\t\tthis.data.attachEvent(\"onStoreUpdated\", webix.bind(this.drawData, this));\n\t\t\t}\n\n\t\t\treturn config;\n\t\t},\n\t\tdefaults:{\n\t\t\tzoom: 5,\n\t\t\tcenter:[ 39.5, -98.5 ],\n\t\t\tmapType: \"ROADMAP\",\n\t\t\tlayerType:\"marker\"\n\t\t},\n\t\t$setSize:function(){\n\t\t\twebix.ui.view.prototype.$setSize.apply(this, arguments);\n\t\t\tif(this._map)\n\t\t\t\tgoogle.maps.event.trigger(this._map, \"resize\");\n\t\t},\n\t\t$onLoad:function(data){\n\t\t\tif(!this._map){\n\t\t\t\tthis._waitMap.then(webix.bind(function(){\n\t\t\t\t\tthis.parse(data);\n\t\t\t\t}, this));\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t_layerApi:{\n\t\t\tmarker:{\n\t\t\t\tdrawData:function(id, item, operation){\n\t\t\t\t\tswitch (operation){\n\t\t\t\t\t\tcase \"add\":\n\t\t\t\t\t\t\titem.$marker = this._getItemConfig(item);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"update\":\n\t\t\t\t\t\t\titem.$marker.setMap(null);\n\t\t\t\t\t\t\titem.$marker = this._getItemConfig(item);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"delete\":\n\t\t\t\t\t\t\titem.$marker.setMap(null);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tthis.data.each(function(item){\n\t\t\t\t\t\t\t\titem.$marker = this._getItemConfig(item);\n\t\t\t\t\t\t\t}, this);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tclearAll:function(soft){\n\t\t\t\t\tthis.data.each(function(obj){\n\t\t\t\t\t\tobj.$marker.setMap(null);\n\t\t\t\t\t});\n\t\t\t\t\tthis.data.clearAll(soft);\n\t\t\t\t},\n\t\t\t\tshowItem:function(id){\n\t\t\t\t\tvar item = this.getItem(id);\n\t\t\t\t\tthis._map.setCenter(new google.maps.LatLng(item.lat, item.lng));\n\t\t\t\t},\n\t\t\t\t_getItemConfig:function(item){\n\t\t\t\t\tvar obj = {};\n\t\t\t\t\tfor(var i in item) obj[i] = item[i];\n\t\t\t\t\tobj.position = new google.maps.LatLng(item.lat, item.lng);\n\t\t\t\t\tobj.map = item.hidden? null: this._map;\n\n\t\t\t\t\tvar marker = new google.maps.Marker(obj);\n\t\t\t\t\tthis._events(marker);\n\t\t\t\t\tthis.callEvent(\"onItemRender\", [item]);\n\t\t\t\t\t\n\t\t\t\t\treturn marker;\n\t\t\t\t},\n\t\t\t\t_events:function(marker){\n\t\t\t\t\tvar map = this;\n\t\t\t\t\t\n\t\t\t\t\tmarker.addListener('click', function(){\n\t\t\t\t\t\tmap.callEvent(\"onItemClick\", [this.id, this]);\n\t\t\t\t\t});\n\n\t\t\t\t\tif(marker.getDraggable()){\n\t\t\t\t\t\tmarker.addListener('dragend', function(){ map._onDrag(this, true); });\n\t\t\t\t\t\tmarker.addListener('drag', function(){ map._onDrag(this); });\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t_onDrag:function(marker, end){\n\t\t\t\t\tvar item = this.getItem(marker.id);\n\t\t\t\t\tvar pos = marker.getPosition();\n\t\t\t\t\tvar ev = end?\"onAfterDrop\":\"onDrag\";\n\n\t\t\t\t\titem.lat = pos.lat();\n\t\t\t\t\titem.lng = pos.lng();\n\t\t\t\t\tthis.callEvent(ev, [item.id, item]);\n\t\t\t\t}\n\t\t\t},\n\t\t\theatmap:{\n\t\t\t\theatmapConfig_setter:function(value){\n\t\t\t\t\tvalue = value || {};\n\t\t\t\t\treturn value;\n\t\t\t\t},\n\t\t\t\tdrawData:function(){\n\t\t\t\t\tif(this._heatmap){\n\t\t\t\t\t\tthis._heatmap.setMap(null);\n\t\t\t\t\t\tthis._heatmap = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar hdata = [];\n\t\t\t\t\tthis.data.each(function(item){ hdata.push(this._getConfig(item)); }, this);\n\n\t\t\t\t\tif(hdata.length){\n\t\t\t\t\t\tvar data = webix.extend(this.config.heatmapConfig, {data:hdata, map:this._map}, true);\n\t\t\t\t\t\tthis._heatmap = new google.maps.visualization.HeatmapLayer(data);\n\t\t\t\t\t\tthis.callEvent(\"onHeatMapRender\", [this._heatmap]);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tgetHeatmap:function(){\n\t\t\t\t\treturn this._heatmap;\n\t\t\t\t},\n\t\t\t\t_getConfig:function(item){\n\t\t\t\t\tvar obj = {};\n\t\t\t\t\tfor(var i in item) obj[i] = item[i];\n\t\t\t\t\tobj.location = new google.maps.LatLng(item.lat, item.lng);\n\n\t\t\t\t\treturn obj;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, webix.DataLoader, webix.EventSystem, webix.ui.view);\n})();\n\n\n\n\n\n\n\nwebix.dp = function(name,getOnly){\n\tif (typeof name == \"object\" && name._settings)\n\t\tname = name._settings.id;\n\tif (webix.dp._pull[name] || getOnly)\n\t\treturn webix.dp._pull[name];\n\n\tif (typeof name == \"string\"||typeof name == \"number\")\n\t\tname = { master:webix.$$(name) };\n\n\tvar dp = new webix.DataProcessor(name);\n\tvar masterId = dp._settings.master._settings.id;\n\twebix.dp._pull[masterId]=dp;\n\n\twebix.$$(masterId).attachEvent(\"onDestruct\",function(){\n\t\twebix.dp._pull[this._settings.id] = null;\n\t\tdelete webix.dp._pull[this._settings.id];\n\t});\n\n\treturn dp;\n};\nwebix.dp._pull = {};\nwebix.dp.$$ = function(id){\n\treturn webix.dp._pull[id];\n};\n\n\nwebix.DataProcessor = webix.proto({\n\tdefaults: {\n\t\tautoupdate:true,\n\t\tupdateFromResponse:false,\n\t\tmode:\"post\",\n\t\toperationName:\"webix_operation\",\n\t\ttrackMove:false\n\t},\n\n\n\t/*! constructor\n\t **/\n\t$init: function() {\n\t\tthis.reset();\n\t\tthis._ignore = false;\n\t\tthis.name = \"DataProcessor\";\n\t\tthis.$ready.push(this._after_init_call);\n\t},\n\treset:function(){\n\t\tthis._updates = [];\n\t},\n\turl_setter:function(value){\n\t\t/*\n\t\t\twe can use simple url or mode->url\n\t\t*/\n\t\tvar mode = \"\";\n\t\tif (typeof value == \"string\"){\n\t\t\tvar parts = value.split(\"->\");\n\t\t\tif (parts.length > 1){\n\t\t\t\tvalue = parts[1];\n\t\t\t\tmode = parts[0];\n\t\t\t}\n\t\t} else if (value && value.mode){\n\t\t\tmode = value.mode;\n\t\t\tvalue = value.url;\n\t\t}\n\n\t\tif (mode)\n\t\t\treturn webix.proxy(mode, value);\n\n\t\treturn value;\n\t},\n\tmaster_setter:function(value){\n\t\tvar store = value;\n\t\tif (value.name != \"DataStore\")\n\t\t\tstore = value.data;\n\n\t\tthis._settings.store = store;\n\t\treturn value;\n\t},\n\t/*! attaching onStoreUpdated event\n\t **/\n\t_after_init_call: function(){\n\t\twebix.assert(this._settings.store, \"store or master need to be defined for the dataprocessor\");\n\t\tthis._settings.store.attachEvent(\"onStoreUpdated\", webix.bind(this._onStoreUpdated, this));\n\t\tthis._settings.store.attachEvent(\"onDataMove\", webix.bind(this._onDataMove, this));\n\t},\n\tignore:function(code,master){\n\t\tvar temp = this._ignore;\n\t\tthis._ignore = true;\n\t\tcode.call((master||this));\n\t\tthis._ignore = temp;\n\t},\n\toff:function(){\n\t\tthis._ignore = true;\n\t},\n\ton:function(){\n\t\tthis._ignore = false;\n\t},\n\n\t_copy_data:function(source){\n\t\tvar obj = {};\n\t\tfor (var key in source)\t\n\t\t\tif (key.indexOf(\"$\")!==0)\n\t\t\t\tobj[key]=source[key];\n\t\treturn obj;\n\t},\n\tsave:function(id, operation, obj){\n\t\toperation = operation || \"update\";\n\t\tthis._save_inner(id, (obj || this._settings.store.getItem(id)), operation);\n\t},\n\t_save_inner:function(id, obj, operation){\n\t\tif (typeof id == \"object\") id = id.toString();\n\t\tif (!id || this._ignore === true || !operation || operation == \"paint\") return true;\n\n\t\tvar store = this._settings.store;\n\t\tif (store && store._scheme_serialize)\n\t\t\tobj = store._scheme_serialize(obj);\n\n\t\tvar update = { id: id, data:this._copy_data(obj), operation:operation };\n\t\t//save parent id\n\t\tif (!webix.isUndefined(obj.$parent)) update.data.parent = obj.$parent;\n\n\t\tif (update.operation != \"delete\"){\n\t\t\t//prevent saving of not-validated records\n\t\t\tvar master = this._settings.master;\n\t\t\tif (master && master.data && master.data.getMark && master.data.getMark(id, \"webix_invalid\"))\n\t\t\t\tupdate._invalid = true;\n\n\t\t\tif (!this.validate(null, update.data))\n\t\t\t\tupdate._invalid = true;\n\t\t}\n\n\t\tif (this._check_unique(update))\n\t\t\tthis._updates.push(update);\n\n\t\tif (this._settings.autoupdate)\n\t\t\tthis.send();\n\t\t\t\n\t\treturn true;\n\t},\n\t_onDataMove:function(sid, tindex, parent, targetid){\n\t\tif (this._settings.trackMove){\n\t\t\tvar obj = webix.copy(this._settings.store.getItem(sid));\n\t\t\tvar order = this._settings.store.order;\n\n\t\t\tobj.webix_move_index = tindex;\n\t\t\tobj.webix_move_id = targetid;\n\t\t\tobj.webix_move_parent = parent;\n\t\t\tthis._save_inner(sid, obj, \"order\");\n\t\t}\n\t},\n\t_onStoreUpdated: function(id, obj, operation){\n\t\tswitch (operation) {\n\t\t\tcase 'save':\n\t\t\t\toperation = \"update\";\n\t\t\t\tbreak;\n\t\t\tcase 'update':\n\t\t\t\toperation = \"update\";\n\t\t\t\tbreak;\n\t\t\tcase 'add':\n\t\t\t\toperation = \"insert\";\n\t\t\t\tbreak;\n\t\t\tcase 'delete':\n\t\t\t\toperation = \"delete\";\t\t\t\t\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn true;\n\t\t}\n\t\treturn this._save_inner(id, obj, operation);\n\t},\n\t_check_unique:function(check){\n\t\tfor (var i = 0; i < this._updates.length; i++){\n\t\t\tvar one = this._updates[i];\n\t\t\tif (one.id == check.id){\n\t\t\t\tif (check.operation == \"delete\"){\n\t\t\t\t\tif (one.operation == \"insert\")\n\t\t\t\t\t\tthis._updates.splice(i,1);\n\t\t\t\t\telse \n\t\t\t\t\t\tone.operation = \"delete\";\n\t\t\t\t}\n\t\t\t\tone.data = check.data;\n\t\t\t\tone._invalid = check._invalid;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t},\n\tsend:function(){\n\t\tthis._sendData();\n\t},\n\t_sendData: function(){\n\t\tif (!this._settings.url)\n\t\t\treturn;\n\n\t\tvar marked = this._updates;\n\t\tvar to_send = [];\n\t\tvar url = this._settings.url;\n\n\t\tfor (var i = 0; i < marked.length; i++) {\n\t\t\tvar tosave = marked[i];\n\n\t\t\tif (tosave._in_progress) continue;\n\t\t\tif (tosave._invalid) continue;\n\n\t\t\tvar id = tosave.id;\n\t\t\tvar operation = tosave.operation;\n\t\t\tvar precise_url = (typeof url == \"object\" && !url.$proxy) ? url[operation] : url;\n\t\t\tvar proxy = precise_url && (precise_url.$proxy || typeof precise_url === \"function\");\n\n\t\t\tif (!precise_url) continue;\n\n\t\t\tif (this._settings.store._scheme_save)\n\t\t\t\tthis._settings.store._scheme_save(tosave.data);\n\n\t\t\tif (!this.callEvent(\"onBefore\"+operation, [id, tosave]))\n\t\t\t\tcontinue;\n\t\t\ttosave._in_progress = true;\n\n\t\t\tif (!this.callEvent(\"onBeforeDataSend\", [tosave])) return;\n\n\t\t\ttosave.data = this._updatesData(tosave.data);\n\n\t\t\tvar callback = this._send_callback({ id:tosave.id, status:tosave.operation });\n\t\t\tif (precise_url.$proxy){\n\t\t\t\tif (precise_url.save)\n\t\t\t\t\tprecise_url.save(this.config.master, tosave, this, callback);\n\t\t\t\telse\n\t\t\t\t\tto_send.push(tosave);\n\t\t\t} else {\n\t\t\t\tif (operation == \"insert\") delete tosave.data.id;\n\n\t\t\t\t\n\t\t\t\tif (proxy){\n\t\t\t\t\t//promise\n\t\t\t\t\tprecise_url(tosave.id, tosave.operation, tosave.data).then(\n\t\t\t\t\t\tfunction(data){\n\t\t\t\t\t\t\tif (data && typeof data.json == \"function\")\n\t\t\t\t\t\t\t\tdata = data.json();\n\t\t\t\t\t\t\tcallback.success(\"\", data, -1);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfunction(error){\n\t\t\t\t\t\t\tcallback.error(\"\", null, error);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\t//normal url\n\t\t\t\t\ttosave.data[this._settings.operationName] = operation;\n\n\t\t\t\t\tthis._send(precise_url, tosave.data, this._settings.mode, operation, callback);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.callEvent(\"onAfterDataSend\", [tosave]);\n\t\t}\n\n\t\tif (url.$proxy && url.saveAll && to_send.length)\n\t\t\turl.saveAll(this.config.master, to_send, this, this._send_callback({}));\n\t},\n\n\n\t/*! process updates list to POST and GET params according dataprocessor protocol\n\t *\t@param updates\n\t *\t\tlist of objects { id: \"item id\", data: \"data hash\", operation: \"type of operation\"}\n\t *\t@return\n\t *\t\tobject { post: { hash of post params as name: value }, get: { hash of get params as name: value } }\n\t **/\n\n\n\n\t_updatesData:function(source){\n\t\tvar target = {};\n\t\tfor (var j in source){\n\t\t\tif (j.indexOf(\"$\")!==0)\n\t\t\t\ttarget[j] = source[j];\n\t\t}\n\t\treturn target;\n\t},\n\n\n\n\t/*! send dataprocessor query to server\n\t *\tand attach event to process result\n\t *\t@param url\n\t *\t\tserver url\n\t *\t@param get\n\t *\t\thash of get params\n\t *\t@param post\n\t *\t\thash of post params\n\t *\t@mode\n\t *\t\t'post' or 'get'\n\t **/\n\t_send: function(url, post, mode, operation, callback) {\n\t\twebix.assert(url, \"url was not set for DataProcessor\");\n\n\t\tif (typeof url == \"function\")\n\t\t\treturn url(post, operation, callback);\n\n\t\twebix.ajax()[mode](url, post, callback);\n\t},\n\t_send_callback:function(id){\n\t\tvar self = this;\n\t\treturn {\n\t\t\tsuccess:function(t,d,l){ return self._processResult(id, t,d,l); },\n\t\t\terror  :function(t,d,l){ return self._processError(id, t,d,l); }\n\t\t};\n\t},\n\tattachProgress:function(start, end, error){\n\t\tthis.attachEvent(\"onBeforeDataSend\", start);\n\t\tthis.attachEvent(\"onAfterSync\", end);\n\t\tthis.attachEvent(\"onAfterSaveError\", error);\n\t\tthis.attachEvent(\"onLoadError\", error);\n\t},\n\t_processError:function(id, text, data, loader){\n\t\tif (id)\n\t\t\tthis._innerProcessResult(true, id.id, false, id.status, false, {text:text, data:data, loader:loader});\n\t\telse {\n\t\t\tthis.callEvent(\"onLoadError\", arguments);\n\t\t\twebix.callEvent(\"onLoadError\", [text, data, loader, this]);\n\t\t}\n\t},\n\t_innerProcessResult:function(error, id, newid, status, obj, details){\n\t\tvar master = this._settings.master;\n\t\tvar update = this.getItemState(id);\n\t\tupdate._in_progress = false;\n\n\t\tif (error){\n\t\t\tif (this.callEvent(\"onBeforeSaveError\", [id, status, obj, details])){\n\t\t\t\tupdate._invalid = true;\n\t\t\t\tif(this._settings.undoOnError && master._settings.undo)\n\t\t\t\t\tmaster.undo(id);\n\t\t\t\tthis.callEvent(\"onAfterSaveError\", [id, status, obj, details]);\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else\n\t\t\tthis.setItemState(id, false);\n\n\t\t//update from response\n\t\tif (newid && id != newid)\n\t\t\tthis._settings.store.changeId(id, newid);\n\n \t\tif (obj && status != \"delete\" && this._settings.updateFromResponse)\n \t\t\tthis.ignore(function(){\t\t\t\t\n\t\t\t\tthis._settings.store.updateItem(newid || id, obj);\n \t\t\t});\n\t\t\t\n\n\t\t//clean undo history, for the saved record\n\t\tif(this._settings.undoOnError && master._settings.undo)\n\t\t\tmaster.removeUndo(newid||id);\n\n\t\tthis.callEvent(\"onAfterSave\",[obj, id, details]);\n\t\tthis.callEvent(\"onAfter\"+status, [obj, id, details]);\n\t},\n\tprocessResult: function(state, hash, details){\n\t\t//compatibility with custom json response\n\t\tvar error = (hash && (hash.status == \"error\" || hash.status == \"invalid\"));\n\t\tvar newid = (hash ? ( hash.newid || hash.id ) : false);\n\n\t\tthis._innerProcessResult(error, state.id, newid, state.status, hash, details);\n\t},\n\t// process saving from result\n\t_processResult: function(state, text, data, loader){\n\t\tthis.callEvent(\"onBeforeSync\", [state, text, data, loader]);\n\n\t\tif (loader === -1){\n\t\t\t//callback from promise\n\t\t\tthis.processResult(state, data, {});\n\t\t} else {\n\t\t\tvar proxy = this._settings.url;\n\t\t\tif (proxy.$proxy && proxy.result)\n\t\t\t\tproxy.result(state, this._settings.master, this, text,  data, loader);\n\t\t\telse {\n\t\t\t\tvar hash;\n\t\t\t\tif (text){\n\t\t\t\t\thash = data.json();\n\t\t\t\t\t//invalid response\n\t\t\t\t\tif (text && typeof hash == \"undefined\")\n\t\t\t\t\t\thash = { status:\"error\" };\n\t\t\t\t}\n\t\t\t\tthis.processResult(state, hash,  {text:text, data:data, loader:loader});\n\t\t\t}\n\t\t}\n\n\t\tthis.callEvent(\"onAfterSync\", [state, text, data, loader]);\n\t},\n\n\n\t/*! if it's defined escape function - call it\n\t *\t@param value\n\t *\t\tvalue to escape\n\t *\t@return\n\t *\t\tescaped value\n\t **/\n\tescape: function(value) {\n\t\tif (this._settings.escape)\n\t\t\treturn this._settings.escape(value);\n\t\telse\n\t\t\treturn encodeURIComponent(value);\n\t},\n\tgetState:function(){\n\t\tif (!this._updates.length) return false;\n\t\tfor (var i = this._updates.length - 1; i >= 0; i--)\n\t\t\tif (this._updates[i]._in_progress)\n\t\t\t\treturn \"saving\";\n\n\t\treturn true;\n\t},\n\tgetItemState:function(id){\n\t\tvar index = this._get_stack_index(id);\n\t\treturn this._updates[index] || null;\n\t},\n\tsetItemState:function(id, state){\n\t\tif (state)\n\t\t\tthis.save(id, state);\n\t\telse{\n\t\t\tvar index = this._get_stack_index(id);\n\t\t\tif (index > -1)\n\t\t\t\tthis._updates.splice(index, 1);\n\t\t}\n\t},\n\t_get_stack_index: function(id) {\n\t\tvar index = -1;\n\t\tvar update = null;\n\t\tfor (var i=0; i < this._updates.length; i++)\n\t\t\tif (this._updates[i].id == id) {\n\t\t\t\tindex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\treturn index;\n\t}\n\n}, webix.Settings, webix.EventSystem, webix.ValidateData);\n\n\n(function(){\n\nvar timers = {};\nwebix.jsonp = function(url, params, callback, master){\n\tvar defer = webix.promise.defer();\n\n\tvar id = \"webix_jsonp_\"+webix.uid();\n\tvar script = document.createElement('script');\n\tscript.id = id;\n\tscript.type = 'text/javascript';\n\n\tvar head = document.getElementsByTagName(\"head\")[0];\n\n\tif (typeof params == \"function\"){\n\t\tmaster = callback;\n\t\tcallback = params;\n\t\tparams = {};\n\t}\n\n\tif (!params)\n\t\tparams = {};\n\n\tparams.jsonp = \"webix.jsonp.\"+id;\n\twebix.jsonp[id]=function(){\n\t\tif (callback)\n\t\t\tcallback.apply(master||window, arguments);\n\t\tdefer.resolve(arguments[0]);\n\n\t\twindow.clearTimeout(timers[id]);\n\t\tdelete timers[id];\n\n\t\tscript.parentNode.removeChild(script);\n\t\tcallback = head = master = script = null;\n\t\tdelete webix.jsonp[id];\n\t};\n\n\t//timeout timer\n\ttimers[id] = window.setTimeout(function(){\n\t\tdefer.reject();\n\t\tdelete webix.jsonp[id];\n\t}, webix.jsonp.timer);\n\t\n\tvar vals = [];\n\tfor (var key in params) vals.push(key+\"=\"+encodeURIComponent(params[key]));\n\t\n\turl += (url.indexOf(\"?\") == -1 ? \"?\" : \"&\")+vals.join(\"&\");\n\n    script.src = url;\n    head.appendChild(script);\n\n    return defer;\n};\n\nwebix.jsonp.timer = 3000;\n\n})();\n\nwebix.markup = {\n\tnamespace:\"x\",\n\tattribute:\"data-\",\n\tdataTag:\"li\",\n\t_dash:/-([a-z])/g,\n\t_after_dash:function (match) { return match[1].toUpperCase(); },\n\t_parse_int:{\n\t\twidth:true,\n\t\theight:true,\n\t\tgravity:true,\n\t\tmargin:true,\n\t\tpadding:true,\n\t\tpaddingX:true,\n\t\tpaddingY:true,\n\t\tminWidth:true,\n\t\tmaxWidth:true,\n\t\tminHeight:true,\n\t\tmaxHeight:true,\n        headerRowHeight:true\n\t},\n\t_parse_bool:{\n\t\tdisabled:true,\n\t\thidden:true\n\t},\n\t_view_has_method:function(view, name){\n\t\treturn webix.ui.hasMethod(view, name);\n\t},\n\n\tinit: function(node, target, scope){\n\t\tnode = node || document.body;\n\n\t\tvar els = [];\n\t\tvar temp = this._get_core_els(node);\n\t\tvar html = temp.html;\n\t\tvar ui = null;\n\n\t\t//make copy to prevent node removing effects\n\t\tfor (var i = temp.length - 1; i >= 0; i--) els[i] = temp[i];\n\t\t\n\t\tfor (var i = 0; i < els.length; i++) {\n\t\t\tvar config, temp_config;\n\t\t\t//collect configuration\n\t\t\tconfig = this._sub_markup(els[i], html);\n\t\t\tconfig.$scope = scope;\n\t\t\tui = this._initComponent(config, els[i], html, target);\n\t\t}\n\t\treturn ui;\n\t},\n\n\tparse:function(source, mode){\n\t\t//convert from string to object\n\t\tif (typeof source == \"string\")\n\t\t\tsource = webix.DataDriver[mode || \"xml\"].toObject(source, source);\n\n\t\tvar els = this._get_core_els(source, mode);\n\t\treturn this._sub_markup(els[0], els.html);\n\t},\n\n\t_initComponent:function(config, node, html, target){\n\t\tif (!target){\n\t\t\tconfig.container = node.parentNode;\n\t\t\twebix.html.remove(node);\n\t\t} else \n\t\t\tconfig.container = target;\n\n\t\tif (this._view_has_method(config.view, \"setPosition\"))\n\t\t\tdelete config.container;\n\n\t\t//init ui\n\t\treturn webix.ui(config);\n\t},\n\n\t_get_core_els:function(node){\n\t\tthis._full_prefix = this.namespace?(this.namespace+\":\"):\"\";\n\t\tthis._full_prefix_top = this._full_prefix+\"ui\";\n\n\t\t//xhtml mode\n\t\tvar els = node.getElementsByTagName(this._full_prefix_top);\n\t\tif (!els.length && node.documentElement && node.documentElement.tagName == this._full_prefix_top)\n\t\t\tels = [ node.documentElement ];\n\n\t\t//loading from xml file with valid namespace\n\t\tif (!els.length && this.namespace){\n\t\t\tels = node.getElementsByTagName(\"ui\");\n\t\t\tif (!els.length && node.documentElement && node.documentElement.tagName == \"ui\")\n\t\t\t\tels = [ node.documentElement ];\n\t\t}\n\n\t\tif (!els.length){\n\t\t\t//html mode\n\t\t\tels = this._get_html_tops(node);\n\t\t\tels.html = true;\n\t\t}\n\t\treturn els;\n\t},\n\n\t//html conversion\n\t_get_html_tops: function(node){\n\t\tif (node.getAttribute && node.getAttribute(this.attribute+\"view\"))\n\t\t\treturn [node];\n\n\t\tvar els = node.querySelectorAll(\"[\"+this.attribute+\"view]\");\n\n\t\tvar tags = []; var marks = [];\n\t\tfor (var i = 0; i < els.length; i++)\n\t\t\tif (!els[i].parentNode.getAttribute(this.attribute+\"view\"))\n\t\t\t\ttags.push(els[i]);\n\n\t\treturn tags;\n\t},\n\n\n\n\t_sub_markup: function(el, html, json){\n\t\tvar htmltable = false;\n\t\t//ignore top x:ui for xhtml and xml \n\t\tif (!json){\n\t\t\tvar name = this._get_name(el, html);\n\t\t\tif (name == \"ui\"){\n\t\t\t\tvar childs = el.childNodes;\n\t\t\t\tfor (var i = 0; i < childs.length; i++)\n\t\t\t\t\tif (childs[i].nodeType == 1){\n\t\t\t\t\t\treturn this._sub_markup(childs[i], html);\n\t\t\t\t\t}\n\t\t\t}\n\t\t\tjson = { view: name };\n\t\t\tif (html && el.tagName.toLowerCase() == \"table\"){\n\t\t\t\tjson.data = el;\n\t\t\t\tjson.datatype = \"htmltable\";\n\t\t\t\thtmltable = true;\n\t\t\t}\n\t\t}\n\n\t\tvar is_layout = json.view == \"cols\" || json.view == \"rows\" || this._view_has_method(json.view, \"addView\");\n\n\t\tvar subs = [];\n\t\tvar has_tags = 0; \n\t\tvar allow_sub_tags = !(html || el.style); //only for xml documents\n\t\tvar first = el.firstChild;\n\t\twhile (first){\n\t\t\t//tag node\n\t\t\tif (first.nodeType == 1){\n\t\t\t\tvar name = this._get_name(first, html);\n\t\t\t\tif (name == \"data\"){\n\t\t\t\t\thas_tags = 1;\n\t\t\t\t\tvar data = first; first = first.nextSibling;\n\t\t\t\t\tjson.data = this._handle_data(data, html);\n\t\t\t\t\tcontinue;\n\t\t\t\t} else if (name == \"config\"){\n\t\t\t\t\tthis._get_config_html(first, json, html);\n\t\t\t\t\tvar confignode = first;\n\t\t\t\t\tfirst = first.nextSibling;\n\n\t\t\t\t\twebix.html.remove(confignode);\n\t\t\t\t\tcontinue;\n\t\t\t\t} else if (name == \"column\"){\n\t\t\t\t\thas_tags = 1;\n\n\t\t\t\t\tvar column = this._tag_to_json(first, html);\n\t\t\t\t\tcolumn.header = column.header || column.value;\n\t\t\t\t\tcolumn.width = column.width * 1 || \"\";\n\n\t\t\t\t\tjson.columns = json.columns || [];\n\t\t\t\t\tjson.columns.push(column);\n\t\t\t\t} else if (name || (is_layout && html)){\n\t\t\t\t\tvar obj = this._sub_markup(first , html , { view:name });\n\t\t\t\t\tif (obj.view == \"head\")\n\t\t\t\t\t\tjson.head = obj.rows ? obj.rows[0] : obj.template;\n\t\t\t\t\telse if (obj.view == \"body\"){\n\t\t\t\t\t\tif (this._view_has_method(json.view, \"addView\")){\n\t\t\t\t\t\t\t//multiview, accordion\n\n\t\t\t\t\t\t\t//subtag or plain value\n\t\t\t\t\t\t\t//in case of multiple sub tags, only first will be used\n\t\t\t\t\t\t\t// #dirty\n\t\t\t\t\t\t\tsubs.push({\n\t\t\t\t\t\t\t\tbody: (obj.rows ? obj.rows[0] : obj.value),\n\t\t\t\t\t\t\t\theader:obj.header || \"\"\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t//window, fieldset\n\n\t\t\t\t\t\t\t//one sub tag - use it\n\t\t\t\t\t\t\t//multiple sub tags - create sub layout\n\t\t\t\t\t\t\t//or use plain text value\n\t\t\t\t\t\t\tjson.body = obj.rows ? ( obj.rows.length == 1 ? obj.rows[0] : { rows:obj.rows } ) : obj.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else\n\t\t\t\t\t\tsubs.push(obj);\n\t\t\t\t} else if (allow_sub_tags) {\n\t\t\t\t\thas_tags = 1;\n\t\t\t\t\tvar tagName = first.tagName;\n\t\t\t\t\tif (html) tagName = tagName.toLowerCase().replace(this._dash, this._after_dash);\n\t\t\t\t\tjson[tagName] = webix.DataDriver.xml.tagToObject(first);\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfirst = first.nextSibling;\n\t\t}\n\n\t\tthis._attrs_to_json(el, json, html);\n\n\t\tif (subs.length){\n\t\t\tif (json.stack)\n\t\t\t\tjson[json.stack] = subs;\n\t\t\telse if (this._view_has_method(json.view, \"setValues\"))\n\t\t\t\tjson[\"elements\"] = subs;\n\t\t\telse if (json.view == \"rows\"){\n\t\t\t\tjson.view = \"layout\";\n\t\t\t\tjson.rows = subs;\n\t\t\t} else if (json.view == \"cols\"){\n\t\t\t\tjson.view = \"layout\";\n\t\t\t\tjson.cols = subs;\n\t\t\t} else if (this._view_has_method(json.view, \"setValue\")){\n\t\t\t\tjson[\"cells\"] = subs;\n\t\t\t} else if (this._view_has_method(json.view, \"getBody\")){\n\t\t\t\tjson.body = subs.length == 1 ? subs[0] : { rows:subs };\n\t\t\t} else\n\t\t\t\tjson[\"rows\"] = subs;\n\t\t} else if (!htmltable && !has_tags){\n\t\t\tif (html && !json.template && (!json.view || json.view == \"template\")){\n\t\t\t\tjson.view = \"template\";\n\t\t\t\tjson.content = el;\n\t\t\t} else {\n\t\t\t\tvar content = this._content(el, html);\n\t\t\t\tif (content){\n\t\t\t\t\tvar target = \"template\";\n\t\t\t\t\tif (this._view_has_method(json.view, \"setValue\"))\n\t\t\t\t\t\ttarget = \"value\";\n\t\t\t\t\tjson[target] = json[target] || content;\t\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn json;\n\t},\n\n\t_empty: function(str) {\n\t\tvar clean = str.replace(/\\s+/gm, '');\n\t\treturn (clean.length > 0) ? false : true;\t \n\t},\n\n\t_markup_names:{\n\t\tbody:1,\n\t\thead:1,\n\t\tdata:1,\n\t\trows:1,\n\t\tcols:1,\n\t\tcells:1,\n\t\telements:1,\n\t\tui:1,\n\t\tcolumn:1,\n\t\tconfig:1\n\t},\n\n\t_get_config_html:function(tag, json, html){\n\t\tvar master = this._attrs_to_json(tag, { });\n\t\tif (master.name){\n\t\t\tjson[master.name] = master;\n\t\t\tdelete master.name;\n\t\t} else \n\t\t\tif (master.stack) json[master.stack] = [];\n\t\telse\n\t\t\tjson = master;\n\n\t\tvar childs = tag.childNodes;\n\t\tfor (var i = 0; i < childs.length; i++) {\n            var sub = null;\n\t\t\tif (childs[i].nodeType == 1 && childs[i].tagName.toLowerCase() == \"config\" && childs[i].attributes.length)\n\t\t\t\tsub = this._get_config_html(childs[i], master, html);\n            else\n                sub = childs[i].innerHTML;\n            if (master.stack && sub)\n                json[master.stack].push(sub);\n\n\t\t}\n\t\treturn json;\n\t},\n\n\t_get_name:function(tag, html){\n\t\t//value of view attribute or config tag\n\t\tif (html)\n\t\t\treturn tag.getAttribute(this.attribute+\"view\") || ( tag.tagName.toLowerCase() == \"config\" ? \"config\" : null);\n\t\tvar name = tag.tagName.toLowerCase();\n\t\tif (this.namespace){\n\t\t\tif (name.indexOf(this._full_prefix) === 0 || tag.scopeName == this.namespace)\n\t\t\t\treturn name.replace(this._full_prefix,\"\");\n\t\t} else {\n\t\t\tif (webix.ui[name] || this._markup_names[name])\n\t\t\t\treturn name;\n\t\t}\n\t\treturn 0;\n\t},\n\n\t_handle_data:function(el, html){\n\t\tvar data = [];\n\n\t\tvar records = el.getElementsByTagName(webix.markup.dataTag);\n\t\tfor (var i=0; i<records.length; i++){\n\t\t\tvar rec = records[i];\n\t\t\tif (rec.parentNode.parentNode.tagName != webix.markup.dataTag){\n\t\t\t\tvar json = this._tag_to_json(rec, html);\n\t\t\t\t//reuse css class \n\t\t\t\tif (rec.className) json.$css = rec.className;\n\t\t\t\tdata.push(json);\n\t\t\t}\n\t\t}\n\n\t\twebix.html.remove(el);\n\n\t\treturn data;\n\t},\n\t_content:function(el, html){\n\t\tif (el.style) return el.innerHTML;\n\t\tif (el.firstChild)\n\t\t\treturn el.firstChild.wholeText||el.firstChild.data||\"\";\n\t\treturn \"\";\n\t},\n\n\n\t_tag_to_json:function(el, html){\n\t\tif (!html)\n\t\t\treturn webix.DataDriver.xml.tagToObject(el);\n\n\t\tvar json = this._attrs_to_json(el, {}, html);\n\t\tif (!json.value && el.childNodes.length)\n\t\t\tjson.value = this._content(el, html);\n\n\t\treturn json;\n\t},\n\t_attrs_to_json:function(el, json, html){\n\t\tvar attrs = el.attributes;\n        for (var i=0; i<attrs.length; i++){\n            var name = attrs[i].name;\n            if (html){\n                if (name.indexOf(this.attribute) !== 0)\n                    continue;\n                name = name.replace(this.attribute,\"\").replace(this._dash, this._after_dash);\n            }\n\n            var value = attrs[i].value;\n            if (value.indexOf(\"json://\") != -1)\n                value = JSON.parse(value.replace(\"json://\",\"\"));\n\n            if (this._parse_int[name])\n                value = parseInt(value,10);\n            else if (this._parse_bool[name])\n            \tvalue = (value && value !== \"false\" && value != \"0\");\n\n            json[name] = value;\n        }\n        return json;\n\t}\n};\n(function(){\n\tvar _webix_msg_cfg = null;\n\tfunction callback(config, result){\n\t\t\tvar usercall = config.callback;\n\t\t\tmodality(false);\n\t\t\tconfig.box.parentNode.removeChild(config.box);\n\t\t\t_webix_msg_cfg = config.box = null;\n\t\t\tif (usercall)\n\t\t\t\tusercall(result,config.details);\n\t}\n\tfunction modal_key(e){\n\t\tif (_webix_msg_cfg){\n\t\t\te = e||event;\n\t\t\tvar code = e.which||event.keyCode;\n\t\t\tif (webix.message.keyboard){\n\t\t\t\tif (code == 13 || code == 32)\n\t\t\t\t\tcallback(_webix_msg_cfg, true);\n\t\t\t\tif (code == 27)\n\t\t\t\t\tcallback(_webix_msg_cfg, false);\n\t\t\t\n\t\t\t\tif (e.preventDefault)\n\t\t\t\t\te.preventDefault();\n\t\t\t\treturn !(e.cancelBubble = true);\n\t\t\t}\n\t\t}\n\t}\n\n\twebix.event(document, \"keydown\", modal_key, { capture: true });\n\t\t\n\tfunction modality(mode){\n\t\tif(!modality.cover || !modality.cover.parentNode){\n\t\t\tmodality.cover = document.createElement(\"DIV\");\n\t\t\t//necessary for IE only\n\t\t\tmodality.cover.onkeydown = modal_key;\n\t\t\tmodality.cover.className = \"webix_modal_cover\";\n\t\t\tdocument.body.appendChild(modality.cover);\n\t\t}\n\t\tmodality.cover.style.display = mode?\"inline-block\":\"none\";\n\t}\n\n\tfunction button(text, result, className){\n\t\treturn \"<div role='button' tabindex='0' aria-label='\"+text+\"' class='webix_popup_button\"+(className?(\" \"+className):\"\")+\"' result='\"+result+\"' ><div>\"+text+\"</div></div>\";\n\t}\n\n\tfunction info(text){\n\t\tif (!t.area){\n\t\t\tt.area = document.createElement(\"DIV\");\n\t\t\tt.area.className = \"webix_message_area\";\n\t\t\tt.area.style[t.position]=\"5px\";\n\t\t\t\n\t\t\tdocument.body.appendChild(t.area);\n\t\t}\n\t\tt.area.setAttribute(\"role\", \"alert\");\n\t\tt.area.setAttribute(\"aria-atomic\", true);\n\t\tt.hide(text.id);\n\t\tvar message = document.createElement(\"DIV\");\n\t\tmessage.innerHTML = \"<div>\"+text.text+\"</div>\";\n\t\tmessage.className = \"webix_info webix_\" + text.type;\n\t\tmessage.onclick = function(){\n\t\t\tt.hide(text.id);\n\t\t\ttext = null;\n\t\t};\n\n\t\tif (webix.$testmode)\n\t\t\tmessage.className += \" webix_no_transition\";\n\n\t\tif (t.position == \"bottom\" && t.area.firstChild)\n\t\t\tt.area.insertBefore(message,t.area.firstChild);\n\t\telse\n\t\t\tt.area.appendChild(message);\n\t\t\n\t\tif (text.expire > 0)\n\t\t\tt.timers[text.id]=window.setTimeout(function(){\n\t\t\t\tt.hide(text.id);\n\t\t\t}, text.expire);\n\n\t\t//styling for animation\n\t\tmessage.style.height = message.offsetHeight-2+\"px\";\n\n\t\tt.pull[text.id] = message;\n\t\tmessage = null;\n\n\t\treturn text.id;\n\t}\n\tfunction _boxStructure(config, ok, cancel){\n\t\tvar box = document.createElement(\"DIV\");\n\t\tbox.className = \" webix_modal_box webix_\"+config.type;\n\t\tbox.setAttribute(\"webixbox\", 1);\n\t\tbox.setAttribute(\"role\", \"alertdialog\");\n\t\tbox.setAttribute(\"aria-label\", config.title || \"\");\n\t\tbox.setAttribute(\"tabindex\", \"0\");\n\t\t\t\n\t\tvar inner = '';\n\t\tif (config.width)\n\t\t\tbox.style.width = config.width+(webix.rules.isNumber(config.width)?\"px\":\"\");\n\t\tif (config.height)\n\t\t\tbox.style.height = config.height+(webix.rules.isNumber(config.height)?\"px\":\"\");\n\t\tif (config.title)\n\t\t\tinner+='<div class=\"webix_popup_title\">'+config.title+'</div>';\n\t\tinner+='<div class=\"webix_popup_text\"><span>'+(config.content?'':config.text)+'</span></div><div  class=\"webix_popup_controls\">';\n\t\tif (ok || config.ok)\n\t\t\tinner += button(config.ok || \"OK\", true,\"confirm\");\n\t\tif (cancel || config.cancel)\n\t\t\tinner += button(config.cancel || \"Cancel\", false);\n\t\tif (config.buttons){\n\t\t\tfor (var i=0; i<config.buttons.length; i++)\n\t\t\t\tinner += button(config.buttons[i],i);\n\t\t}\n\t\tinner += '</div>';\n\t\tbox.innerHTML = inner;\n\n\t\tif (config.content){\n\t\t\tvar node = config.content;\n\t\t\tif (typeof node == \"string\") \n\t\t\t\tnode = document.getElementById(node);\n\t\t\tif (node.style.display == 'none')\n\t\t\t\tnode.style.display = \"\";\n\t\t\tbox.childNodes[config.title?1:0].appendChild(node);\n\t\t}\n\n\t\tbox.onclick = function(e){\n\t\t\te = e ||event;\n\t\t\tvar source = e.target || e.srcElement;\n\t\t\tif (!source.className) source = source.parentNode;\n\t\t\tif (source.className.indexOf(\"webix_popup_button\")!=-1){\n\t\t\t\tvar result = source.getAttribute(\"result\");\n\t\t\t\tresult = (result == \"true\")||(result == \"false\"?false:result);\n\t\t\t\tcallback(config, result);\n\t\t\t}\n\t\t\te.cancelBubble = true;\n\t\t};\n\t\tconfig.box = box;\n\t\tif (ok||cancel||config.buttons)\n\t\t\t_webix_msg_cfg = config;\n\n\t\treturn box;\n\t}\n\tfunction _createBox(config, ok, cancel){\n\t\tvar box = config.tagName ? config : _boxStructure(config, ok, cancel);\n\t\t\n\t\tif (!config.hidden)\n\t\t\tmodality(true);\n\t\tdocument.body.appendChild(box);\n\t\tvar x = config.left||Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth) - box.offsetWidth)/2));\n\t\tvar y = config.top||Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight) - box.offsetHeight)/2));\n\t\tif (config.position == \"top\")\n\t\t\tbox.style.top = \"-3px\";\n\t\telse\n\t\t\tbox.style.top = y+'px';\n\t\tbox.style.left = x+'px';\n\t\t//necessary for IE only\n\t\tbox.onkeydown = modal_key;\n\n\t\tbox.focus();\n\t\tif (config.hidden)\n\t\t\twebix.modalbox.hide(box);\n\n\t\treturn box;\n\t}\n\n\tfunction alertPopup(config){\n\t\treturn _createBox(config, true, false);\n\t}\n\tfunction confirmPopup(config){\n\t\treturn _createBox(config, true, true);\n\t}\n\tfunction boxPopup(config){\n\t\treturn _createBox(config);\n\t}\n\tfunction box_params(text, type, callback){\n\t\tif (typeof text != \"object\"){\n\t\t\tif (typeof type == \"function\"){\n\t\t\t\tcallback = type;\n\t\t\t\ttype = \"\";\n\t\t\t}\n\t\t\ttext = {text:text, type:type, callback:callback };\n\t\t}\n\t\treturn text;\n\t}\n\tfunction params(text, type, expire, id){\n\t\tif (typeof text != \"object\")\n\t\t\ttext = {text:text, type:type, expire:expire, id:id};\n\t\ttext.id = text.id||t.uid();\n\t\ttext.expire = text.expire||t.expire;\n\t\treturn text;\n\t}\n\twebix.alert = function(){\n\t\tvar text = box_params.apply(this, arguments);\n\t\ttext.type = text.type || \"confirm\";\n\t\treturn alertPopup(text);\n\t};\n\twebix.confirm = function(){\n\t\tvar text = box_params.apply(this, arguments);\n\t\ttext.type = text.type || \"alert\";\n\t\treturn confirmPopup(text);\n\t};\n\twebix.modalbox = function(){\n\t\tvar text = box_params.apply(this, arguments);\n\t\ttext.type = text.type || \"alert\";\n\t\treturn boxPopup(text);\n\t};\n\twebix.modalbox.hide = function(node){\n\t\tif(node){\n\t\t\twhile (node && node.getAttribute && !node.getAttribute(\"webixbox\"))\n\t\t\t\tnode = node.parentNode;\n\t\t\tif (node){\n\t\t\t\tnode.parentNode.removeChild(node);\n\t\t\t}\n\t\t}\n\n\t\tmodality(false);\n\t\t_webix_msg_cfg = null;\n\t};\n\tvar t = webix.message = function(text, type, expire, id){\n\t\ttext = params.apply(this, arguments);\n\t\ttext.type = text.type||\"info\";\n\n\t\tvar subtype = text.type.split(\"-\")[0];\n\t\tswitch (subtype){\n\t\t\tcase \"alert\":\n\t\t\t\treturn alertPopup(text);\n\t\t\tcase \"confirm\":\n\t\t\t\treturn confirmPopup(text);\n\t\t\tcase \"modalbox\":\n\t\t\t\treturn boxPopup(text);\n\t\t\tdefault:\n\t\t\t\treturn info(text);\n\t\t}\n\t};\n\n\tt.seed = (new Date()).valueOf();\n\tt.uid = function(){return t.seed++;};\n\tt.expire = 4000;\n\tt.keyboard = true;\n\tt.position = \"top\";\n\tt.pull = {};\n\tt.timers = {};\n\n\tt.hideAll = function(){\n\t\tfor (var key in t.pull)\n\t\t\tt.hide(key);\n\t};\n\tt.hide = function(id){\n\t\tvar obj = t.pull[id];\n\t\tif (obj && obj.parentNode){\n\t\t\twindow.setTimeout(function(){\n\t\t\t\tobj.parentNode.removeChild(obj);\n\t\t\t\tobj = null;\n\t\t\t},2000);\n\t\t\t//styling for animation\n\t\t\tobj.style.height = 0;\n\t\t\tobj.className+=\" hidden\";\n\t\t\tt.area.removeAttribute(\"role\");\n\t\t\t\n\t\t\tif(t.timers[id])\n\t\t\t\twindow.clearTimeout(t.timers[id]);\n\t\t\tdelete t.pull[id];\n\t\t}\n\t};\n})();\nwebix.debug_ready(function(){\n\n\tvar ignore = {\n\t\t\"_inner\":true, \n\t\t\"awidth\":true,\n\t\t\"cheight\":true,\n\t\t\"bheight\":true,\n\t\t\"aheight\":true\n\t};\n\n\tfunction get_inspector_config(view){\n\t\tvar values={};\n\t\tvar options=[];\n\t\tview = webix.$$(view);\n\n\t\tfor (var key in view.config){\n\t\t\tif (ignore[key]) continue;\n\t\t\t\n\t\t\tif (typeof view.config[key] == \"object\") continue;\n\t\t\tif (typeof view.config[key] == \"undefined\") continue;\n\t\t\tif (typeof view.config[key] == \"function\") continue;\n\n\t\t\tif (key == \"view\" || key == \"id\")\n\t\t\t\toptions.push({ label:key, id:key});\n\t\t\telse \n\t\t\t\toptions.push({ label:key, type:\"text\", id:key});\n\n\t\t\tif (view.defaults[key] == view.config[key]) \n\t\t\t\toptions[options.length - 1].css = { \"color\" : \"#888\" };\n\n\t\t\tvalues[key] = view.config[key];\n\t\t}\n\t\toptions.sort(function(a,b){\n\t\t\tif (!a.css && b.css) return -1;\n\t\t\tif (a.css && !b.css) return 1;\n\t\t\treturn (a.id > b.id) ? 1 : ((a.id == b.id) ? 0 : -1);\n\t\t});\n\n\t\treturn { elements:options, data:values, head:\" [\"+view.name+\"] <strong>\"+view._settings.id+\"</strong>\" };\n\t}\n\n\tfunction create_inspector(){\n\t\tif (!webix.$$(\"webix_debug_inspector_win\"))\n\t\t\twebix.ui({\n\t\t\t\tid:\"webix_debug_inspector_win\",\n\t\t\t\tview:\"window\", \n\t\t\t\ttop:2, left: 0, width:350, height:350,\n\t\t\t\thead:false, autofit:false,\n\t\t\t\tbody:{cols:[\n\t\t\t\t\t{ width:10},\n\t\t\t\t\t{type:\"clean\", rows:[\n\t\t\t\t\t\t{ view:\"toolbar\", elements:[\n\t\t\t\t\t\t\t{ view:\"label\", value:\"\", id:\"webix_debug_inspector_head\" },\n\t\t\t\t\t\t\t{ view:\"button\", width:100, value:\"Hide\", type:\"custom\", click:function(){\n\t\t\t\t\t\t\t\twebix.debug_inspect();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid:\"webix_debug_inspector\", nameWidth:150,\n\t\t\t\t\t\t\tview:\"property\", scroll:\"y\",\n\t\t\t\t\t\t\telements:[],\n\t\t\t\t\t\t\ton:{\n\t\t\t\t\t\t\t\tonaftereditstop:function(state, editor){\n\t\t\t\t\t\t\t\t\tif (state.old == state.value) return;\n\n\t\t\t\t\t\t\t\t\tvar value = state.value;\n\t\t\t\t\t\t\t\t\tif (value === \"true\" || value === \"false\"){\n\t\t\t\t\t\t\t\t\t\tvalue = (value === \"true\");\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tvar intvalue = parseInt(value,10);\n\t\t\t\t\t\t\t\t\t\tif (intvalue == value)\n\t\t\t\t\t\t\t\t\t\t\tvalue = intvalue;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tvar view = webix.$$(this.config.view);\n\t\t\t\t\t\t\t\t\tview.define(editor.id, value);\n\t\t\t\t\t\t\t\t\tif (view.refreshColumns)\n\t\t\t\t\t\t\t\t\t\tview.refreshColumns();\n\t\t\t\t\t\t\t\t\telse if (view.refresh)\n\t\t\t\t\t\t\t\t\t\tview.refresh();\n\n\t\t\t\t\t\t\t\t\tview.resize();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}]\n\t\t\t\t}\n\t\t\t});\n\t}\n\tfunction show_inspector(view, ev){\n\t\tcreate_inspector();\n\t\tvar win = webix.$$(\"webix_debug_inspector_win\");\n\n\t\tif (view){\n\t\t\tvar config = get_inspector_config(view);\n\t\t\tvar winx = document.body.offsetWidth;\n\t\t\tvar winy = document.body.offsetHeight;\n\t\t\tvar pos = ev?webix.html.pos(ev):{x:0,y:0};\n\n\t\t\twin.define(\"height\", Math.max(350, winy-4));\n\t\t\twin.resize();\n\n\t\t\tvar props = webix.$$(\"webix_debug_inspector\");\n\t\t\tprops.define(\"elements\", config.elements);\n\t\t\tprops.define(\"view\", view);\n\n\t\t\twin.show({ x:(pos.x > winx/2 )?0:(winx-370), y:0 });\n\t\t\twebix.$$(\"webix_debug_inspector\").setValues(config.data);\n\t\t\twebix.$$(\"webix_debug_inspector_head\").setValue(config.head);\n\t\t} else \n\t\t\twin.hide();\n\t}\n\twebix.debug_inspect = show_inspector;\n\n\tfunction infi(value){\n\t\tif (value >= 100000)\n\t\t\treturn \"Any\";\n\t\treturn value;\n\t}\n\tfunction log_level(data, prefix, now){\n\t\twindow.console.log((data == now?\">>\":\"  \")+prefix + data.name+\" / \" +data.config.id);\n\t\tprefix+=\"  \";\n\t\tif (data._cells)\n\t\t\tfor (var i=0; i<data._cells.length; i++){\n\t\t\t\tlog_level(data._cells[i], prefix, now);\n\t\t\t}\n\t\tif (data._head_cell)\n\t\t\tlog_level(data._head_cell, prefix, now);\n\n\t\tif (data._body_cell)\n\t\t\tlog_level(data._body_cell, prefix, now);\n\t}\n\n\twebix.ui({\n\t\tview:\"contextmenu\",\n\t\tid:\"webix:debugmenu\",\n\t\ton:{\n\t\t\tonBeforeShow:function(e){\n\t\t\t\tif (!e.ctrlKey) return false;\n\n\t\t\t\tvar view = webix.html.locate(e, \"view_id\");\n\t\t\t\tif (!view) return false;\n\t\t\t\tthis.config.lastTarget = view;\n\n\t\t\t\twebix.blockEvent();\n\t\t\t\twebix.delay(function(){ webix.unblockEvent(); });\n\t\t\t},\n\t\t\tonShow:function(){\n\t\t\t\tvar view = webix.$$(this.config.lastTarget);\n\t\t\t\tvar info = \"<span style='color:#888'>\"+view._settings.id + \"<sup style='float:right'>[\"+view.name+\"]</sup></span>\";\n\t\t\t\tdocument.getElementById(\"webix_debug_cmx\").innerHTML = info;\n\t\t\t}\n\t\t},\n\t\tdata:[\n\t\t\t\"<div id='webix_debug_cmx'></div>\",\n\t\t\t{ id:\"inspect\", value:\"Inspect\"},\n\t\t\t{ id:\"docs\", value:\"Documentation\"},\n\t\t\t{\n\t\t\t\tvalue:\"Log to Console\", submenu:[\n\t\t\t\t\t{ id:\"size\", value:\"Sizes\" },\n\t\t\t\t\t{ id:\"tree\", value:\"Tree\" },\n\t\t\t\t\t{ id:\"dump\", value:\"Dump\"}\n\t\t\t\t]\n\t\t\t}\t\t\n\t\t],\n\t\tclick:function(id, ev){\n\t\t\t//mixing two object result in confusion\n\t\t\tvar obj = webix.$$(this.config.lastTarget);\n\n\t\t\tif  (id == \"dump\"){\n\t\t\t\twindow.console.info(\"\\n\"+obj.name+\" / \"+obj.config.id);\n\t\t\t\twindow.console.log(\"\\nView: \",obj,\", Config: \", obj.config, \", Data: \", obj.data);\n\t\t\t\twindow.console.log(obj.$view);\n\t\t\t}\n\n\t\t\tif (id == \"tree\"){\n\t\t\t\t\n\t\t\t\tvar now = obj;\n\t\t\t\twhile (obj.getParentView())\n\t\t\t\t\tobj = obj.getParentView();\n\n\t\t\t\twindow.console.log(\"\");\n\t\t\t\tlog_level(obj, \"\", now);\n\t\t\t}\n\n\t\t\tif (id == \"size\"){\n\t\t\t\twindow.console.info(\"\");\n\t\t\t\twindow.console.info(\"\\n\"+obj.name+\" / \"+obj.config.id);\n\t\t\t\twindow.console.info(\"\\n[min]   \", obj.config.width, \" x \", obj.config.height);\n\t\t\t\tvar sizes = obj.$getSize(0,0);\n\t\t\t\twindow.console.info(\"[max]    \", infi(sizes[1]), \" x \", infi(sizes[3])+(obj.config.autoheight?\", auto height\":\"\"));\n\t\t\t\twindow.console.info(\"[gravity]   \", obj.config.gravity);\n\n\t\t\t\twindow.console.info(\"\\n[content]    \", obj._content_width, \" x \", obj._content_height);\n\t\t\t\twindow.console.info(\"[last set]   \", obj._last_size[0], \" x \", obj._last_size[1]);\n\t\t\t\tif (obj._settings._inner)\n\t\t\t\t\twindow.console.info(\"\\n[borders]   \", \"left:\", !obj._settings._inner.left,\"\\ttop:\", !obj._settings._inner.top,  \"\\tright:\", !obj._settings._inner.right,  \"\\tbottom:\", !obj._settings._inner.bottom);\n\t\t\t\telse\n\t\t\t\t\twindow.console.info(\"\\n[borders]   none\");\n\t\t\t}\n\n\t\t\tif (id == \"docs\")\n\t\t\t\twindow.open(\"http://docs.webix.com/api__refs__ui.\"+obj.name+\".html\",\"__blank\");\n\n\t\t\tif (id == \"inspect\"){\n\t\t\t\tshow_inspector(this.config.lastTarget, ev);\n\t\t\t}\n\t\t},\n\t\tmaster:document.body\n\t});\n});\n\n\n\n\nwebix.protoUI({\n\tname:\"carousel\",\n\tdefaults:{\n\t\tscrollSpeed:\"300ms\",\n\t\ttype: \"clean\",\n\t\tnavigation: {},\n\t\tanimate:true\n\t},\n\t$init:function(config){\n\t\tthis._viewobj.className += \" webix_carousel\";\n\t\tthis._layout = null;\n\t\tthis._dataobj = null;\n\t\tthis._active_cell = 0;\n\t\tthis.$ready.unshift(this._initLayout);\n\t\tthis.$ready.push(this._after_init_call);\n\t},\n\taddView: function(view, index){\n\t\tvar t = this._layout.addView(view, index);\n\t\tthis._fix_after_view_add();\n\t\treturn t;\n\t},\n\tremoveView: function(id){\n\t\tthis._layout.removeView(id);\n\t\tthis._fix_after_view_add();\n\t},\n\t_replace: function(new_view,target_id){\n\t\tthis._layout._replace(new_view, target_id);\n\t\tthis._fix_after_view_add();\n\t},\n\t_fix_after_view_add: function(){\n \t\tthis._cells = this._layout._cells;\n \t\tthis._renderPanel();\n \t\tthis.setActiveIndex(Math.min(this._active_cell, this._cells.length-1));\n\t},\n\t_initLayout: function(){\n\t\tif(this._layout && this._layout.destructor)\n\t\t\tthis._layout.destructor();\n\n\t\tvar layout = \"\";\n\n\t\tif(this.config.cols){\n\t\t\tlayout = \"cols\";\n\t\t\tthis._vertical_orientation = 0;\n\t\t}\n\t\telse{\n\t\t\tlayout = \"rows\";\n\t\t\tthis._vertical_orientation = 1;\n\t\t}\n\n\t\tvar config = {borderless: true, type: \"clean\"};\n\t\tconfig[layout] = webix.copy(this._settings[layout]);\n\t\tvar layoutProp = [\"type\", \"margin\", \"marginX\", \"marginY\", \"padding\", \"paddingX\", \"paddingY\"];\n\t\tvar layoutConfig = {};\n\t\tfor(var i=0; i< layoutProp.length; i++){\n\t\t\tif(this._settings[layoutProp[i]]){\n\t\t\t\tlayoutConfig[layoutProp[i]] = this._settings[layoutProp[i]];\n\t\t\t}\n\t\t}\n\t\twebix.extend(config,layoutConfig,true);\n\n\t\tthis._layout = webix.ui._view(config);\n\t\tthis._layout._parent_cell = this;\n\n\t\tthis._viewobj.appendChild(this._layout._viewobj);\n\t\tthis._cells = this._layout._cells;\n\n\t\tthis._layout._show = webix.bind(webix.ui.carousel.prototype._show,this);\n\t\tthis._layout.adjustScroll = webix.bind(webix.ui.carousel.prototype.adjustScroll,this);\n\n\t\twebix.attachEvent(\"onReconstruct\", webix.bind(function(view){\n\t\t\tif(view == this._layout)\n\t\t\t\tthis._setScroll();\n\t\t},this));\n\n\t\tthis._contentobj = this._viewobj.firstChild;\n\t},\n\t_onKeyPress:function(code, e){\n\t\tif(this._settings.navigation.items && e.target.getAttribute(\"role\") === \"tab\")\n\t\t\tthis._moveActive(code, e);\n\n\t\twebix.ui.baseview.prototype._onKeyPress.call(this, code, e);\n\t},\n\tgetChildViews:function(){\n\t\treturn [this._layout];\n\t},\n\tgetLayout:function(){\n\t\treturn this._layout;\n\t},\n\t_after_init_call:function(){\n\t\tthis._contentobj.setAttribute(\"touch_scroll\", (this._vertical_orientation?\"y\":\"x\"));\n\n\t\tthis._layout.attachEvent(\"onAfterScroll\",webix.bind(function(view){\n\t\t\tthis.callEvent(\"onShow\",[this.getActiveId()]);\n\t\t},this));\n\n\t\twebix.ui.each(this._layout, function(view){\n\t\t\tview._viewobj.setAttribute(\"role\", \"tabpanel\");\n\t\t});\n\t},\n\tadjustScroll:function(matrix){\n\t\tvar size =  (this._vertical_orientation?this._content_height:this._content_width);\n\n\t\tvar correction;\n\t\tif (this._vertical_orientation) {\n\t\t\tcorrection = Math.round(matrix.f/size);\n\t\t\tmatrix.f = correction*size;\n\t\t} else {\n\t\t\tcorrection = Math.round(matrix.e/size);\n\t\t\tmatrix.e = correction*size;\n\t\t}\n\t\t\n\t\tthis._active_cell = - correction;\n\n\t\tif(this._settings.navigation)\n\t\t\tthis._renderNavItems();\n\n\t\treturn true;\n\t},\n\t_show:function(obj){\n\t\tvar i, layout, _nextCell, _size, x, y;\n\t\t_nextCell = -1;\n\t\tlayout = this._layout;\n\t\tfor (i=0; i < layout._cells.length; i++){\n\t\t\tif (layout._cells[i]==obj){\n\t\t\t\t_nextCell = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (_nextCell < 0 || _nextCell == this._active_cell)\n\t\t\treturn;\n\n\t\tthis._active_cell = _nextCell;\n\t\t_size =  (layout._vertical_orientation?this._content_height:this._content_width);\n\n\t\tx = -(layout._vertical_orientation?0:_nextCell*_size);\n\t\ty = -(layout._vertical_orientation?_nextCell*_size:0);\n\n\t\tthis.scrollTo(x,y);\n\t\tthis.callEvent(\"onShow\",[layout._cells[this._active_cell]._settings.id]);\n\t\tif(this._settings.navigation)\n\t\t\tthis._renderPanel();\n\t},\n\tscrollTo:function(x,y){\n\t\tif (webix.Touch && webix.animate.isSupported() && this._settings.animate)\n\t\t\twebix.Touch._set_matrix(this._contentobj, x,y, this._settings.scrollSpeed||\"100ms\");\n\t\telse{\n\t\t\tthis._contentobj.style.marginLeft = x+\"px\";\n\t\t\tthis._contentobj.style.marginTop =  y+\"px\";\n\t\t}\n\t},\n\tnavigation_setter:function(config){\n\t\tthis._mergeSettings(config,{\n\t\t\ttype: \"corner\",\n\t\t\tbuttons: true,\n\t\t\titems: true\n\t\t});\n\t\treturn config;\n\t},\n\tshowNext:function(){\n\t\tif (this._active_cell < this._layout._cells.length - 1)\n\t\t\tthis.setActiveIndex(this._active_cell+1);\n\t},\n\tshowPrev:function(){\n\t\tif (this._active_cell > 0)\n\t\t\tthis.setActiveIndex(this._active_cell-1);\n\t},\n\tsetActiveIndex:function(value){\n\t\twebix.assert(value < this._layout._cells.length, \"Not existing index in collection\");\n\n\t\tvar id = this._layout._cells[value]._settings.id;\n\t\twebix.$$(id).show();\n\t},\n\tgetActiveIndex:function(){\n\t\treturn this._active_cell;\n\t},\n\t$getSize:function(dx, dy){\n\t\tvar layoutSizes = this._layout.$getSize(0, 0);\n\t\tvar selfSizes   = webix.ui.view.prototype.$getSize.call(this, dx, dy);\n\t\tif(this._layout._vertical_orientation){\n\t\t\tselfSizes[0] = Math.max(selfSizes[0], layoutSizes[0]);\n\t\t\tselfSizes[1] = Math.min(selfSizes[1], layoutSizes[1]);\n\n\t\t} else{\n\t\t\tselfSizes[2] = Math.max(selfSizes[2], layoutSizes[2]);\n\t\t\tselfSizes[3] = Math.min(selfSizes[3], layoutSizes[3]);\n\t\t}\n\t\treturn selfSizes;\n\t},\n\t$setSize:function(x,y){\n\t\tvar layout = this._layout;\n\t\tvar c = layout._cells.length;\n\n\t\tvar changed = webix.ui.view.prototype.$setSize.call(this,x,y);\n\t\tvar yc = this._content_height*(layout._vertical_orientation?c:1);\n\t\tvar xc = this._content_width*(layout._vertical_orientation?1:c);\n\n\t\tif (changed){\n\t\t\tthis._contentobj.style.height = yc+\"px\";\n\t\t\tthis._contentobj.style.width = xc+\"px\";\n\t\t\tlayout.$setSize(xc,yc);\n\t\t\tthis._setScroll();\n\t\t} else\n\t\t\tlayout.$setSize(xc,yc);\n\t},\n\t_setScroll: function(){\n\t\tvar layout = this._layout;\n\t\tvar activeCell = this._active_cell||0;\n\t\tvar size =  (layout._vertical_orientation?this._content_height:this._content_width);\n\n\t\tvar x = -(layout._vertical_orientation?0:activeCell*size);\n\t\tvar y = -(layout._vertical_orientation?activeCell*size:0);\n\n\n\t\tthis.scrollTo(x,y);\n\n\t\tif(this._settings.navigation)\n\t\t\tthis._renderPanel();\n\t},\n\tgetActiveId:function(){\n\t\tvar cell = this._layout._cells[this._active_cell];\n\t\treturn cell?cell._settings.id:null;\n\t},\n\tsetActive:function(value){\n\t\twebix.$$(value).show();\n\t}\n}, webix.EventSystem,webix.NavigationButtons, webix.ui.view);\n\n/*\n\tUI:Uploader\n*/\n\n\n\n\n\nwebix.type(webix.ui.list, {\n\tname:\"uploader\",\n\ttemplate:\"#name#  {common.removeIcon()}{common.percent()}<div style='float:right'>#sizetext#</div>\",\n\tpercent:function(obj){\n\t\tif (obj.status == 'transfer')\n\t\t\treturn \"<div style='width:60px; text-align:center; float:right'>\"+obj.percent+\"%</div>\";\n\t\treturn \"<div class='webix_upload_\"+obj.status+\"'><span class='\"+(obj.status ==\"error\"?\"error_icon\":\"fa-check webix_icon\")+\"'></span></div>\";\n\t},\n\tremoveIcon:function(obj){\n\t\treturn \"<div class='webix_remove_upload'><span class='cancel_icon'></span></div>\";\n\t},\n\ton_click:{\n\t\t\"webix_remove_upload\":function(ev, id){\n\t\t\twebix.$$(this.config.uploader).files.remove(id);\n\t\t}\n\t}\n});\n\nwebix.UploadDriver = {\n\tflash: {\n\t\t$render: function(render_config) {\n\n\t\t\tif (!window.swfobject)\n\t\t\t\twebix.require(\"legacy/swfobject.js\", true); // sync loading\n\n\t\t\tvar config = this._settings;\n\t\t\tconfig.swfId = (config.swfId||\"webix_swf_\"+webix.uid());\n\n\t\t\tthis._getBox().innerHTML += \"<div class='webix_upload_flash'><div id='\"+config.swfId+\"'></div></div>\";\n\t\t\tthis._upload_area = this._getBox().lastChild;\n\n\t\t\t// add swf object\n\t\t\tswfobject.embedSWF(webix.codebase+\"/legacy/uploader.swf\", config.swfId, \"100%\", \"100%\", \"9\", null, {\n\t\t\t\t\tuploaderId: config.id,\n\t\t\t\t\tID: config.swfId,\n\t\t\t\t\tenableLogs:(config.enableLogs?\"1\":\"\"),\n\t\t\t\t\tparamName:(config.inputName),\n\t\t\t\t\tmultiple:(config.multiple?\"Y\":\"\")\n\t\t\t}, {wmode:\"transparent\"});\n\n\t\t\tvar v = swfobject.getFlashPlayerVersion();\n\n\t\t\twebix._event(this._viewobj, \"click\", webix.bind(function() {\n\t\t\t\tvar now_date = new Date();\n\t\t\t\tif (now_date - (this._upload_timer_click||0)  > 250){\n\t\t\t\t\tthis.fileDialog();\n\t\t\t\t}\n\t\t\t}, this));\n\n\t\t\tthis.files.attachEvent(\"onBeforeDelete\", webix.bind(this._stop_file,this));\n\t\t},\n\t\t$applyFlash: function(name,params){\n\t\t\treturn this[name].apply(this,params);\n\t\t},\n\t\tgetSwfObject: function(){\n\t\t\treturn swfobject.getObjectById(this._settings.swfId);\n\t\t},\n\t\tfileDialog:function(){\n\t\t\tif(this.getSwfObject())\n\t\t\t\tthis.getSwfObject().showDialog();\n\t\t},\n\t\tsend: function(id){\n\t\t\tif (typeof id == \"function\"){\n\t\t\t\tthis._last_assigned_upload_callback = id;\n\t\t\t\tid = 0;\n\t\t\t}\n\n\t\t\tif (!id){\n\t\t\t\tvar order = this.files.data.order;\n\t\t\t\tvar complete = true;\n\t\t\t\tif (order.length)\n\t\t\t\t\tfor (var i=0; i<order.length; i++){\n\t\t\t\t\t\tcomplete = this.send(order[i])&&complete;\n\t\t\t\t\t}\n\n\t\t\t\tif (complete)\n\t\t\t\t\tthis._upload_complete();\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar item = this.files.getItem(id);\n\t\t\tif (item.status !== 'client')\n\t\t\t\treturn false;\n\t\t\titem.status = 'transfer';\n\n\t\t\tif(this.getSwfObject()){\n\t\t\t\tvar url = this._get_active_url(item);\n\t\t\t\tvar details = webix.extend(item.formData||{},this._settings.formData||{});\n\t\t\t\tthis.getSwfObject().upload(id, url, details);\n\t\t\t}\n\t\t\treturn true;\n\n\t\t},\n\t\t$beforeAddFileToQueue: function( id, name, size ){\n\n\t\t\tvar type = name.split(\".\").pop();\n\t\t\tvar format = this._format_size(size);\n\t\t\treturn this.callEvent(\"onBeforeFileAdd\", [{\n\t\t\t\tid: id,\n\t\t\t\tname:name,\n\t\t\t\tsize:size,\n\t\t\t\tsizetext:format,\n\t\t\t\ttype:type\n\t\t\t}]);\n\t\t},\n\t\t$addFileToQueue: function(id, name, size){\n\t\t\tif(this.files.exists(id))\n\t\t\t\treturn false;\n\t\t\tif (!this._settings.multiple)\n\t\t\t\tthis.files.clearAll();\n\t\t\tvar type = name.split(\".\").pop();\n\t\t\tvar format = this._format_size(size);\n\t\t\tvar file_struct = {\n\t\t\t\tname:name,\n\t\t\t\tid: id,\n\t\t\t\tsize:size,\n\t\t\t\tsizetext:format,\n\t\t\t\ttype:type,\n\t\t\t\tstatus:\"client\"\n\t\t\t};\n\t\t\tthis.files.add(file_struct);\n\t\t\tthis.callEvent(\"onAfterFileAdd\", [file_struct]);\n\n\t\t\tif (id && this._settings.autosend)\n\t\t\t\tthis.send(id);\n\t\t},\n\t\tstopUpload: function(id){\n\t\t\tthis._stop_file(id);\n\t\t},\n\t\t_stop_file: function(id) {\n\t\t\tvar item = this.files.getItem(id);\n\t\t\tif(item.status == \"transfer\"){\n\t\t\t\tthis.getSwfObject().uploadStop(id);\n\t\t\t\titem.status = \"client\";\n\t\t\t}\n\t\t},\n\t\t$onUploadComplete: function(){\n\t\t\tif(this._settings.autosend){\n\t\t\t\tthis._upload_complete();\n\t\t\t}\n\t\t},\n\t\t$onUploadSuccess: function(id,name,response){\n\t\t\tvar item = this.files.getItem(id);\n\t\t\tif(item){\n\t\t\t\titem.status = \"server\";\n\t\t\t\titem.progress = 100;\n\t\t\t\tif(response.text && (typeof response.text == \"string\")){\n\n\n\t\t\t\t\twebix.DataDriver.json.toObject(response.text);\n\n\t\t\t\t\twebix.extend(item,response,true);\n\t\t\t\t}\n\t\t\t\tthis.callEvent(\"onFileUpload\", [item,response]);\n\t\t\t\tthis.callEvent(\"onChange\", []);\n\t\t\t\tthis.files.updateItem(id);\n\t\t\t}\n\t\t},\n\t\t$onUploadFail: function(id){\n\t\t\tvar item = this.files.getItem(id);\n\t\t\titem.status = \"error\";\n\t\t\tdelete item.percent;\n\t\t\tthis.files.updateItem(id);\n\t\t\tthis.callEvent(\"onFileUploadError\", [item, \"\"]);\n\t\t}\n\t},\n\thtml5: {\n\t\t$render: function(config) {\n\t\t\tif (this._upload_area){\n\t\t\t\t//firstChild is webix_el_box container, which have relative position\n\t\t\t\t//as result, file control is placed under the button and not in the top corner\n\t\t\t\tthis._contentobj.firstChild.appendChild(this._upload_area);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.files.attachEvent(\"onBeforeDelete\", this._stop_file);\n\n\t\t\tvar input_config =  {\n\t\t\t\t\"type\": \"file\",\n\t\t\t\t\"class\": \"webix_hidden_upload\",\n\t\t\t\ttabindex:-1\n\t\t\t};\n\n\t\t\tif (this._settings.accept)\n\t\t\t\tinput_config.accept = this._settings.accept;\n\n\t\t\tif (this._settings.multiple)\n\t\t\t\tinput_config.multiple = \"true\";\n\n\t\t\tif (this._settings.directory) {\n\t\t\t\tinput_config.webkitdirectory = \"true\";\n\t\t\t\tinput_config.mozdirectory = \"true\";\n\t\t\t\tinput_config.directory = \"true\";\n\t\t\t}\n\n\t\t\tvar f = webix.html.create(\"input\", input_config);\n\t\t\tthis._upload_area = this._contentobj.firstChild.appendChild(f);\n\n\t\t\twebix._event(this._viewobj, 'drop', webix.bind(function(e) {\n\t\t\t\tthis._drop(e);\n\t\t\t\twebix.html.preventEvent(e);\n\t\t\t}, this));\n\t\t\twebix._event(f, 'change', webix.bind(function() {\n\t\t\t\tthis._add_files(f.files);\n\n\t\t\t\tif (webix.env.isIE) {\n\t\t\t\t\tvar t = document.createElement(\"form\");\n\t\t\t\t\tt.appendChild(this._upload_area);\n\t\t\t\t\tt.reset();\n\t\t\t\t\tthis._contentobj.firstChild.appendChild(f);\n\t\t\t\t} else\n\t\t\t\t\tf.value = \"\";\n\t\t\t}, this));\n\t\t\twebix._event(this._viewobj, \"click\", webix.bind(function() {\n\t\t\t\tvar now_date = new Date();\n\t\t\t\tif (now_date - (this._upload_timer_click || 0) > 250) {\n\t\t\t\t\tthis.fileDialog();\n\t\t\t\t}\n\t\t\t}, this));\n\n\t\t\twebix._event(this._viewobj, 'dragenter', webix.html.preventEvent);\n\t\t\twebix._event(this._viewobj, 'dragexit', webix.html.preventEvent);\n\t\t\twebix._event(this._viewobj, 'dragover', webix.html.preventEvent);\n\t\t},\n\t\t_directoryEntry: function(value) {\n\t\t\treturn value.isDirectory;\n\t\t},\n\t\t_directoryDrop: function(item, state, path) {\n\t\t\tif (item.isFile){\n\t\t\t\titem.file(function(file){\n\t\t\t\t\tstate.addFile(file, null, null, { name : path+\"/\"+file.name });\n\t\t\t\t});\n\t\t\t} else if (item.isDirectory) {\n\t\t\t\t// Get folder contents\n\t\t\t\tvar dirReader = item.createReader();\n\t\t\t\tdirReader.readEntries(function(entries){\n\t\t\t\t\tfor (var i = 0; i < entries.length; i++){\n\t\t\t\t\t\tstate._directoryDrop(entries[i], state, (path ? (path + \"/\") : \"\") + item.name);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t// adding files by drag-n-drop\n\t\t_drop: function(e) {\n\t\t\tvar files = e.dataTransfer.files;\n\t\t\tvar items = e.dataTransfer.items;\n\n\t\t\tif (this.callEvent('onBeforeFileDrop', [files, e])) {\n\t\t\t\tfor (var i = 0; i < items.length; i++) {\n\t\t\t\t\t//https://developer.mozilla.org/en-US/docs/Web/API/DataTransferItem/webkitGetAsEntry\n\t\t\t\t\tvar item = items[i];\n\t\t\t\t\tif (this._settings.directory && item.webkitGetAsEntry){\n\t\t\t\t\t\titem = item.webkitGetAsEntry();\n\t\t\t\t\t\tif (item.isDirectory){\n\t\t\t\t\t\t\tthis._directoryDrop(item, this, \"\");\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.addFile(files[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.callEvent(\"onAfterFileDrop\", [files, e]);\n\t\t},\n\t\tfileDialog:function(context){\n\t\t\tthis._upload_timer_click = new Date();\n\t\t\tthis._last_file_context = context;\n\t\t\tvar inputs = this._viewobj.getElementsByTagName(\"INPUT\");\n\t\t\tinputs[inputs.length-1].click();\n\t\t},\n\t\tsend: function(id){\n\t\t\t//alternative syntx send(callback)\n\t\t\tif (typeof id == \"function\"){\n\t\t\t\tthis._last_assigned_upload_callback = id;\n\t\t\t\tid = 0;\n\t\t\t}\n\n\t\t\tif (!id){\n\t\t\t\tvar order = this.files.data.order;\n\t\t\t\tvar complete = true;\n\n\t\t\t\tif (order.length)\n\t\t\t\t\tfor (var i=0; i<order.length; i++)\n\t\t\t\t\t\tcomplete = (!this.send(order[i])) && complete;\n\n\t\t\t\tif (complete)\n\t\t\t\t\tthis._upload_complete();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar item = this.files.getItem(id);\n\t\t\tif (item.status !== 'client') return false;\n\n\t\t\twebix.assert(this._settings.upload, \"You need to define upload url for uploader component\");\n\t\t\titem.status = 'transfer';\n\n\t\t\tvar formData = new FormData();\n\n\t\t\tif (item.folder) {\n\t\t\t\tfor (var i = 0; i < item.folder.length; i++){\n\t\t\t\t\tformData.append(this.config.inputName + i, item.folder[i], item.folder[i].webkitRelativePath);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tformData.append(this.config.inputName, item.file, item.name);\n\t\t\t\tif (this._settings.directory)\n\t\t\t\t\tformData.append(this.config.inputName+\"_fullpath\", item.name);\n\t\t\t}\n\n\t\t\tvar headers = {};\n\t\t\tvar details = webix.extend(item.formData||{},this._settings.formData||{});\n\n\t\t\tvar xhr = new XMLHttpRequest();\n\t\t\tvar url = this._get_active_url(item);\n\t\t\tif(webix.callEvent(\"onBeforeAjax\",[\"POST\", url, details, xhr, headers, formData])){\n\t\t\t\tfor (var key in details)\n\t\t\t\t\tformData.append(key, details[key]);\n\n\t\t\t\titem.xhr = xhr;\n\n\t\t\t\txhr.upload.addEventListener('progress', webix.bind(function(e){ this.$updateProgress(id, e.loaded/e.total*100); }, this), false);\n\t\t\t\txhr.onload = webix.bind(function(e){ if (!xhr.aborted) this._file_complete(id); }, this);\n\t\t\t\txhr.open('POST', url, true);\n\n\t\t\t\tfor (var key in headers)\n\t\t\t\t\txhr.setRequestHeader(key, headers[key]);\n\n\t\t\t\txhr.send(formData);\n\t\t\t}\n\n\t\t\tthis.$updateProgress(id, 0);\n\t\t\treturn true;\n\t\t},\n\n\t\t\n\t\t_file_complete: function(id) {\n\t\t\tvar item = this.files.getItem(id);\n\t\t\tif (item){\n\t\t\t\tvar response = null;\n\t\t\t\tif(item.xhr.status < 400){\n\t\t\t\t\tresponse = webix.DataDriver[this._settings.datatype||\"json\"].toObject(item.xhr.responseText);\n\t\t\t\t}\n\t\t\t\tif (!response || response.status == \"error\"){\n\t\t\t\t\titem.status = \"error\";\n\t\t\t\t\tdelete item.percent;\n\t\t\t\t\tthis.files.updateItem(id);\n\t\t\t\t\tthis.callEvent(\"onFileUploadError\", [item, response]);\n\t\t\t\t} else {\n\t\t\t\t\tthis._complete(id, response);\n\t\t\t\t}\n\t\t\t\tdelete item.xhr;\n\t\t\t}\n\t\t},\n\t\tstopUpload: function(id){\n\t\t\twebix.bind(this._stop_file,this.files)(id);\n\t\t},\n\t\t_stop_file: function(id) {\n\t\t\tvar item = this.getItem(id);\n\t\t\tif (typeof(item.xhr) !== 'undefined'){\n\t\t\t\titem.xhr.aborted = true;\n\t\t\t\titem.xhr.abort();\n\t\t\t\tdelete item.xhr;\n\t\t\t\titem.status = \"client\";\n\t\t\t}\n\t\t}\n\t}\n};\n\n\nwebix.protoUI({\n\tname:\"uploader\",\n\tdefaults:{\n\t\tautosend:true,\n\t\tmultiple:true,\n\t\tinputName:\"upload\"\n\t},\n\t$cssName:\"button\",\n\t_allowsClear:true,\n\ton_click:{\n\t\t//don't fire extra onItemClick events, visible button will do it\n\t\t\"webix_hidden_upload\":function(){ return false; }\n\t},\n\t//will be redefined by upload driver\n\tsend:function(){},\n\tfileDialog:function(){},\n\tstopUpload:function(){},\n\n\t$init:function(config){\n\t\tvar driver = webix.UploadDriver.html5;\n\t\tthis.files = new webix.DataCollection();\n\n\t\t// browser doesn't support XMLHttpRequest2\n\t\tif (webix.isUndefined(XMLHttpRequest) || webix.isUndefined((new XMLHttpRequest()).upload))\n\t\t\tdriver = webix.UploadDriver.flash;\n\n\t\twebix.assert(driver,\"incorrect driver\");\n\t\twebix.extend(this, driver, true);\n\t},\n\t$setSize:function(x,y){\n\t\tif (webix.ui.view.prototype.$setSize.call(this,x,y)){\n\t\t\tthis.render();\n\t\t}\n\t},\n\tapiOnly_setter:function(value){\n\t\twebix.delay(this.render, this);\n\t\treturn (this.$apiOnly=value);\n\t},\n\t_add_files: function(files){\n\t\tfor (var i = 0; i < files.length; i++)\n\t\t\tthis.addFile(files[i]);\n\n\t},\n\tlink_setter:function(value){\n\t\tif (value)\n\t\t\twebix.delay(function(){\n\t\t\t\tvar view = webix.$$(this._settings.link);\n\t\t\t\tif (!view){\n\t\t\t\t\tvar top = this.getTopParentView();\n\t\t\t\t\tif (top.$$)\n\t\t\t\t\t\tview = top.$$(this._settings.link);\n\t\t\t\t}\n\n\t\t\t\tif (view.sync && view.filter)\n\t\t\t\t\tview.sync(this.files);\n\t\t\t\telse if (view.setValues)\n\t\t\t\t\tthis.files.data.attachEvent(\"onStoreUpdated\", function(){\n\t\t\t\t\t\tview.setValues(this);\n\t\t\t\t\t});\n\t\t\t\tview._settings.uploader = this._settings.id;\n\t\t\t}, this);\n\t\treturn value;\n\t},\n\taddFile:function(name, size, type, extra){\n\t\tvar file = null;\n\t\tif (typeof name == \"object\"){\n\t\t\tfile = name;\n\t\t\tname = file.name;\n\t\t\tsize = file.size;\n\t\t}\n\n\t\tvar format = this._format_size(size);\n\t\ttype = type || name.split(\".\").pop();\n\n\t\tvar file_struct = {\n\t\t\tfile: file,\n\t\t\tname: name,\n\t\t\tid: webix.uid(),\n\t\t\tsize: size,\n\t\t\tsizetext: format,\n\t\t\ttype: type,\n\t\t\tcontext: this._last_file_context,\n\t\t\tstatus: \"client\"\n\t\t};\n\n\t\tif (this._settings.directory && file.webkitRelativePath)\n\t\t\tfile_struct.name = file.webkitRelativePath;\n\n\t\tif (extra)\n\t\t\twebix.extend(file_struct, extra, true);\n\n\t\tif (this.callEvent(\"onBeforeFileAdd\", [file_struct])){\n\t\t\tif (!this._settings.multiple)\n\t\t\t\tthis.files.clearAll();\n\n\t\t\tvar id = this.files.add(file_struct);\n\t\t\tthis.callEvent(\"onAfterFileAdd\", [file_struct]);\n\t\t\tif (id && this._settings.autosend)\n\t\t\t\tthis.send(id);\n\t\t}\n\t\t\n\t\treturn file_struct;\n\t},\n\t\n\t_get_active_url:function(item){\n\t\tvar url = this._settings.upload;\n\t\tvar urldata = webix.extend(item.urlData||{},this._settings.urlData||{});\n\t\tif (url && urldata){\n\t\t\tvar subline = [];\n\t\t\tfor (var key in urldata)\n\t\t\t\tsubline.push(encodeURIComponent(key)+\"=\"+encodeURIComponent(urldata[key]));\n\n\t\t\tif (subline.length)\n\t\t\t\turl += ((url.indexOf(\"?\") ==-1) ? \"?\" : \"&\") + subline.join(\"&\");\n\t\t}\n\t\treturn url;\n\t},\n\n\taddDropZone:function(id, hover_text){\n\t\tvar node = webix.toNode(id);\n\t\tvar extra_css = \"\";\n\t\tif (hover_text)\n\t\t\textra_css = \" \"+webix.html.createCss({ content:'\"'+hover_text+'\"' }, \":before\");\n\n\t\tvar fullcss = \"webix_drop_file\"+extra_css;\n\t\tvar timer = null;\n\n\t\t//web\n\t\twebix._event(node,\"dragover\", webix.html.preventEvent);\n\t\twebix._event(node,\"dragover\", function(e){\n\t\t\twebix.html.addCss(node, fullcss, true);\n\t\t\tif (timer){\n\t\t\t\tclearTimeout(timer);\n\t\t\t\ttimer = null;\n\t\t\t}\n\t\t});\n\t\twebix._event(node,\"dragleave\", function(e){\n\t\t\t//when moving over html child elements\n\t\t\t//browser will issue dragleave and dragover events\n\t\t\t//ignore first one\n\t\t\ttimer = setTimeout(function(){\n\t\t\t\twebix.html.removeCss(node, fullcss);\n\t\t\t}, 150);\n\t\t});\n\n\t\twebix._event(node,\"drop\", webix.bind(function(e){\n\t\t\twebix.html.removeCss(node, fullcss);\n\t\t\tthis._drop(e);\n\t\t\treturn webix.html.preventEvent(e);\n\t\t}, this));\n\t},\n\t\n\t_format_size: function(size) {\n\t\tvar index = 0;\n\t\twhile (size > 1024){\n\t\t\tindex++;\n\t\t\tsize = size/1024;\n\t\t}\n\t\treturn Math.round(size*100)/100+\" \"+webix.i18n.fileSize[index];\n\t},\n\n\t_complete: function(id, response) {\n\t\tif (response.status != 'error') {\n\t\t\tvar item = this.files.getItem(id);\n\n\t\t\titem.status = \"server\";\n\t\t\titem.progress = 100;\n\t\t\twebix.extend(item, response, true);\n\n\t\t\tthis.callEvent(\"onFileUpload\", [item, response]);\n\t\t\tthis.callEvent(\"onChange\", []);\n\t\t\tthis.files.updateItem(id);\n\t\t}\n\t\t\n\t\tif (this.isUploaded())\n\t\t\tthis._upload_complete(response);\n\t},\n\t_upload_complete:function(response){\n\t\tthis.callEvent(\"onUploadComplete\", [response]);\n\t\tif (this._last_assigned_upload_callback){\n\t\t\tthis._last_assigned_upload_callback.call(this, response);\n\t\t\tthis._last_assigned_upload_callback = 0;\n\t\t}\n\t},\n\tisUploaded:function(){\n\t\tvar order = this.files.data.order;\n\t\tfor (var i=0; i<order.length; i++)\n\t\t\tif (this.files.getItem(order[i]).status != \"server\")\n\t\t\t\treturn false;\n\n\t\treturn true;\n\t},\n\t$onUploadComplete: function(){\n\n\t},\n\t$updateProgress: function(id, percent) {\n\t\tvar item = this.files.getItem(id);\n\t\titem.percent = Math.round(percent);\n\t\tthis.files.updateItem(id);\n\t},\n\tsetValue:function(value){\n\t\tif (typeof value == \"string\" && value)\n\t\t\tvalue = { value:value, status:\"server\" };\n\n\t\tthis.files.clearAll();\n\t\tif (value)\n\t\t\tthis.files.parse(value);\n\n\t\tthis.callEvent(\"onChange\", []);\n\t},\n\tgetValue:function(){\n\t\tvar data = [];\n\t\tthis.files.data.each(function(obj){\n\t\t\tif (obj.status == \"server\")\n\t\t\t\tdata.push(obj.value||obj.name);\n\t\t});\n\n\t\treturn data.join(\",\");\n\t}\n\n}, webix.ui.button);\n\nwebix.html.addMeta = function(name, value){\n\tdocument.getElementsByTagName('head').item(0).appendChild(webix.html.create(\"meta\",{\n\t\tname:name,\n\t\tcontent:value\n\t}));\t\n\t\n};\n\n(function(){\n\t\nvar orientation = function(){\n\tvar new_orientation = !!(window.orientation%180);\n\tif (webix.ui.orientation === new_orientation) return;\n\twebix.ui.orientation = new_orientation;\t\n\twebix.callEvent(\"onRotate\", [new_orientation]);\n};\nif(webix.env.touch){\n\twebix.ui.orientation = !!((webix.isUndefined(window.orientation)?90:window.orientation)%180);\n\twebix.event(window, (\"onorientationchange\" in window ?\"orientationchange\":\"resize\"), orientation);\n}\n\n\nif(webix.env.isFF && window.matchMedia){\n\twindow.matchMedia(\"(orientation: portrait)\").addListener(function() {webix.ui.orientation = false; });\n\twindow.matchMedia(\"(orientation: landscape)\").addListener(function() { webix.ui.orientation = true; });\n}\nwebix.ui.fullScreen = function(){\n\tif (!webix.env.touch) return;\n\n\twebix.html.addMeta(\"apple-mobile-web-app-capable\",\"yes\");\n\twebix.html.addMeta(\"viewport\",\"initial-scale=1, maximum-scale=1, user-scalable=no\");\n\n\t//in ios5 we can have empty offsetHeight just after page loading\n\tvar size = document.body.offsetHeight||document.body.scrollHeight;\n\n\tvar iphone = navigator.userAgent.indexOf(\"iPhone\")!=-1;\n\tvar ipad = navigator.userAgent.indexOf(\"iPad\")!=-1;\n\n\tvar version = navigator.userAgent.match(/iPhone OS (\\d+)/);\n\tvar iOS7 = version&&(version[1]>=7);\n\n\n    var iphone_safari = iphone && (size == 356 || size == 208 || size == 306 || size == 158 || size == 444);\n    var iphone5 = (window.screen.height==568);\n\n\tvar fix = function(){\n\t\tvar x = 0; var y=0;\n\t\tif (iphone && !iOS7){\n\t\t\tif (!webix.ui.orientation){\n\t\t\t\tx = 320;\n                y = iphone5?(iphone_safari?504:548):(iphone_safari?416:460);\n\t\t\t} else {\n                x = iphone5?568:480;\n\t\t\t\ty = iphone_safari?268:300;\n\t\t\t}\n\t\t} else if (webix.env.isAndroid){\n\n\t\t\tif(!webix.env.isFF){\n\t\t\t\t//ipad doesn't change orientation and zoom level, so just ignore those lines\n\t\t\t\tdocument.body.style.width = document.body.style.height = \"1px\";\n\t\t\t\tdocument.body.style.overflow=\"hidden\";\n\n\t\t\t\tvar dmod = window.outerWidth/window.innerWidth; //<1\n\t\t\t\tx = window.outerWidth/dmod;\n\t\t\t\ty = window.outerHeight/dmod;\n\t\t\t}\n\t\t} else if(!webix.env.isIEMobile){\n\t\t\tx = window.innerWidth;\n\t\t\ty = window.innerHeight;\n\t\t}\n\n\t\tif (y){\n\t\t\tdocument.body.style.height = y+\"px\";\n\t\t\tdocument.body.style.width = x+\"px\";\n\t\t}\n\n\t\twebix.ui.$freeze = false;\n\t\twebix.ui.resize();\n\t};\n\n\tvar onrotate = function(){ \n\t\twebix.ui.$freeze = true;\n\t\tif(webix.env.isSafari) \n\t\t\tfix();\n\t\telse\n\t\t\twebix.delay(fix,null, [], 500);\n\t};\n\n\n\twebix.attachEvent(\"onRotate\", onrotate);\n\torientation();\n\twebix.delay(onrotate);\n\n};\n\n\n})();\n\n/*\n\tBehavior:History - change multiview state on 'back' button\n\n */\n\nwebix.history = {\n\ttrack:function(id, url){\n\t\tthis._init_state(id, url);\n\t\t\n\t\tif (this._aHandler)\n\t\t\twebix.$$(this._aViewId).detachEvent(this._aHandler);\n\n\t\tif (id){\n\t\t\tthis._aViewId = id;\n\t\t\tvar view = webix.$$(id);\n\t\t\t\n\t\t\tvar handler = function(){\n\t\t\t\tif (webix.history._ignored) return;\n\n\t\t\t\tif (view.getValue)\n\t\t\t\t\twebix.history.push(id, view.getValue());\n\t\t\t};\n\n\t\t\tif (view.getActiveId)\n\t\t\t\tthis._aHandler = view.attachEvent(\"onViewChange\", handler);\n\t\t\telse\n\t\t\t\tthis._aHandler = view.attachEvent(\"onChange\", handler);\n\t\t}\n\t},\n\t_set_state:function(view, state){\n\t\twebix.history._ignored = 1;\n\n\t\tview = webix.$$(view);\n\t\tif (view.callEvent(\"onBeforeHistoryNav\", [state]))\n\t\t\tif (view.setValue)\n\t\t\t\tview.setValue(state);\n\n\t\twebix.history._ignored = 0;\n\t},\n\tpush:function(view, url, value){\n\t\tview = webix.$$(view);\n\t\tvar new_url = \"\";\n\t\tif (url)\n\t\t\tnew_url = \"#!/\"+url;\n\t\tif (webix.isUndefined(value)){\n\t\t\tif (view.getValue)\n\t\t\t\tvalue = view.getValue();\n\t\t\telse\n\t\t\t\tvalue = url;\n\t\t}\n\n\t\twindow.history.pushState({ webix:true, id:view._settings.id, value:value }, \"\", new_url);\n\t},\n\t_init_state:function(view, url){\n\t\twebix.event(window, \"popstate\", function(ev){\n\t\t\tif (ev.state && ev.state.webix){\n\t\t\t\twebix.history._set_state(ev.state.id, ev.state.value);\n\t\t\t}\n\t\t});\n\n\t\tvar state = window.location.hash;\n\t\twebix.noanimate = true;\n\t\tif (state && state.indexOf(\"#!/\") === 0)\n\t\t\twebix.history._set_state(view, state.replace(\"#!/\",\"\"));\n\t\telse if (url){\n\t\t\twebix.history.push(view, url);\n\t\t\twebix.history._set_state(view, url);\n\t\t}\n\t\twebix.noanimate = false;\n\t\t\n\t\tthis._init_state = function(){};\n\t}\n};\n\n\n\nwebix.protoUI({\n\tname:\"slider\",\n    $touchCapture:true,\n    defaults:{\n        min:0,\n        max:100,\n        value:50,\n        step:1,\n        title:false,\n\t\ttemplate:function(obj, common){\n            var id = common._handle_id = \"x\" +webix.uid();\n            var html = \"<div class='webix_slider_title'></div><div class='webix_slider_box'><div class='webix_slider_left'>&nbsp;</div><div class='webix_slider_right'></div><div class='webix_slider_handle' role='slider' aria-label='\"+obj.label+(obj.title?(\" \"+obj.title(obj)):\"\")+\"' aria-valuemax='\"+obj.max+\"' aria-valuemin='\"+obj.min+\"' aria-valuenow='\"+obj.value+\"' tabindex='0' id='\"+id+\"'>&nbsp;</div></div>\";\n            return common.$renderInput(obj, html, id);\n\t\t}\n\t},\n\ttype_setter:function(type){\n\t\tthis._viewobj.className += \" webix_slider_\"+type;\n\t},\n    title_setter:function(value){\n        if (typeof value == 'string')\n            return webix.template(value);\n        return value;\n    },\n    _get_slider_handle:function(){\n\t\treturn this.$view.querySelector(\".webix_slider_handle\");\n    },\n    _set_inner_size:function(){\n        var handle = this._get_slider_handle();\n        var config = this._settings;\n\n        //10 - padding of webix_slider_box ( 20 = 10*2 )\n        //8 - width of handle / 2\n\n\t    if(handle){    //view is rendered for sure\n            var width = this._get_input_width(config);\n\n\t        var value = config.value%config.step?(Math.round(config.value/config.step)*config.step):config.value;\n\t        value =  Math.max(Math.min(value,config.max),config.min);\n            var max = config.max - config.min;\n            var left = Math.ceil((width - 2 * this._sliderPadding) * (value-config.min) / max);\n            var right = width - 2 * this._sliderPadding - left;\n\n            handle.style.left = this._sliderPadding + left - this._sliderHandleWidth / 2 + \"px\";\n            handle.parentNode.style.width = width+\"px\";\n\t        //1px border\n\t        right = Math.min(Math.max(right, 2 * this._sliderBorder),width - this._sliderPadding * 2 - 2 * this._sliderBorder);\n\t        left = Math.min(Math.max(left, 2 * this._sliderBorder),width - this._sliderPadding * 2 - 2 * this._sliderBorder);\n\t        //width for left and right bars\n            var part = handle.previousSibling;\n            part.style.width = right + \"px\";\n            var last = part.previousSibling;\n            last.style.width = left + \"px\";\n\n            if (this._settings.title){\n                handle.parentNode.previousSibling.innerHTML = this._settings.title(this._settings, this);\n            }\n        }\n    },\n    _set_value_now:function(){\n        this._get_slider_handle().setAttribute(\"aria-valuenow\", this._settings.value);\n    },\n    refresh:function(){\n\t\tvar handle =  this._get_slider_handle();\n\t\tif(handle){\n\t\t\tthis._set_value_now();\n\t\t\tif(this._settings.title)\n\t\t\t\thandle.setAttribute(\"aria-label\", this._settings.label+\" \"+this._settings.title(this._settings, this));\n\n\t\t\tthis._set_inner_size();\n\t\t}\n    },\n    $setValue:function(){\n        this.refresh();\n    },\n    $getValue:function(){\n        return this._settings.value;\n    },\n    $init:function(){\n        if(webix.env.touch)\n            this.attachEvent(\"onTouchStart\" , webix.bind(this._on_mouse_down_start, this));\n        else\n            webix._event(this._viewobj, \"mousedown\", webix.bind(this._on_mouse_down_start, this));\n\n        webix._event( this.$view, \"keydown\", webix.bind(this._handle_move_keyboard, this));\n    },\n    $skin: function(){\n\t\tthis._sliderHandleWidth = webix.skin.$active.sliderHandleWidth; //8 - width of handle / 2\n\t\tthis._sliderPadding = webix.skin.$active.sliderPadding;//10 - padding of webix_slider_box ( 20 = 10*2 )\n\t\tthis._sliderBorder = webix.skin.$active.sliderBorder;//1px border\n    },\n    _handle_move_keyboard:function(e){\n        var code = e.keyCode, c = this._settings, value = c.value;\n\n        if(code>32 && code <41){\n\n            webix.html.preventEvent(e);\n           \n            var trg = e.target || e.srcElement;\n            var match =  /webix_slider_handle_(\\d)/.exec(trg.className);\n            this._activeIndex = match?parseInt(match[1],10):-1;\n            if(match)\n                value = c.value[this._activeIndex];\n            value = value<c.min ? c.min:(value>c.max ? c.max : value);\n            \n            if(code === 35) value = c.min;\n            else if(code === 36) value = c.max;\n            else{\n                var inc = (code === 37 || code ===40 || code === 34)?-1:1;\n                if(code === 33 || code === 34 || c.step>1)\n                    inc = inc*c.step;\n                value = value*1+inc;\n            }\n\n\n            if(value>=c.min && value <=c.max){\n                if(match){\n                    var temp =[];\n                    for(var i=0; i<c.value.length; i++)\n                        temp[i] = i === this._activeIndex ? value : c.value[i];\n                    value = temp;\n                }\n                this.setValue(value);\n                this._activeIndex = -1;\n            }\n        }\n    },\n    _on_mouse_down_start:function(e){\n        var trg = e.target || e.srcElement;\n\t    if(this._mouse_down_process){\n\t\t    this._mouse_down_process(e);\n\t    }\n\n\t    var value = this._settings.value;\n\t    if(webix.isArray(value))\n\t\t    value = webix.copy(value);\n\n        if (trg.className.indexOf(\"webix_slider_handle\")!=-1){\n            this._start_value = value;\n            return this._start_handle_dnd.apply(this,arguments);\n        } else if (trg.className.indexOf(\"webix_slider\") != -1){\n            this._start_value = value;\n\n            this._settings.value = this._get_value_from_event.apply(this,arguments);\n\n            this._start_handle_dnd(e);\n        }\n    },\n    _start_handle_dnd:function(e){\n\t    if(webix.env.touch){\n\t\t    this._handle_drag_events = [\n\t\t\t    this.attachEvent(\"onTouchMove\" , webix.bind(this._handle_move_process, this)),\n\t\t        this.attachEvent(\"onTouchEnd\"  , webix.bind(this._handle_move_stop, this))\n\t\t    ];\n\t    }\n\t\telse\n\t        this._handle_drag_events = [\n\t            webix.event(document.body, \"mousemove\", webix.bind(this._handle_move_process, this)),\n\t            webix.event(window, \"mouseup\", webix.bind(this._handle_move_stop, this))\n\t        ];\n        webix.html.addCss(document.body,\"webix_noselect\");\n    },\n    _handle_move_stop:function(e){\n        //detach event handlers\n\t    if(this._handle_drag_events){\n\t\t    if(webix.env.touch){\n\t\t\t    webix.detachEvent(this._handle_drag_events[0]);\n\t\t\t    webix.detachEvent(this._handle_drag_events[1]);\n\t\t    }\n\t\t    else{\n\t\t\t    webix.eventRemove(this._handle_drag_events[0]);\n\t\t\t    webix.eventRemove(this._handle_drag_events[1]);\n\t\t    }\n\t\t    this._handle_drag_events = [];\n\t    }\n\n        webix.html.removeCss(document.body,\"webix_noselect\");\n\n        var value = this._settings.value;\n\n\t    if(webix.isArray(value))\n\t\t    value = webix.copy(value);\n\n\t    this._settings.value = this._start_value;\n        this.setValue(value);\n\n        this._get_slider_handle(this._activeIndex).focus();\n        this._activeIndex = -1;\n    },\n    _handle_move_process:function(e){\n        this._settings.value = this._get_value_from_event.apply(this,arguments);\n        this.refresh();\n        this.callEvent(\"onSliderDrag\", []);\n    },\n\t_get_value_from_event:function(event,touchContext){\n\t\t// this method takes 2 arguments in case of touch env\n\t\tvar pos = 0;\n\t\tif(webix.env.touch){\n\t\t\tpos = touchContext?touchContext.x: event.x;\n\t\t}\n\t\telse\n\t\t\tpos = webix.html.pos(event).x;\n\t\treturn this._get_value_from_pos(pos);\n\t},\n    _get_value_from_pos:function(pos){\n        var config = this._settings;\n        //10 - padding of slider box\n        var max = config.max - config.min;\n        var left = webix.html.offset(this._get_slider_handle().parentNode).x + this._sliderPadding;\n\t    var width = this._get_input_width(config) - 2 * this._sliderPadding;\n\t    var newvalue = (width?(pos-left) * max / width:0);\n        newvalue = Math.round((newvalue+config.min)/config.step) * config.step;\n        return Math.max(Math.min(newvalue, config.max), config.min);\n    },\n    _init_onchange:function(){} //need not ui.text logic\n}, webix.ui.text);\n\n\n\n\n/*\n\tview.load(\"offline->some.php\")\n\n\tor\n\n\tview.load( webix.proxy(\"offline\", \"some.php\") );\n\n\tor\n\n\tview.load( webix.proxy(\"offline\", \"post->url.php\") );\n*/\n\nwebix.proxy.offline = {\n\t$proxy:true,\n\n\tstorage: webix.storage.local,\n\tcache:false,\n\tdata:\"\",\n\n\t_is_offline : function(){\n\t\tif (!this.cache && !webix.env.offline){\n\t\t\twebix.callEvent(\"onOfflineMode\",[]);\n\t\t\twebix.env.offline = true;\n\t\t}\n\t},\n\t_is_online : function(){\n\t\tif (!this.cache && webix.env.offline){\n\t\t\twebix.env.offline = false;\n\t\t\twebix.callEvent(\"onOnlineMode\", []);\n\t\t}\n\t},\n\n\tload:function(view, callback){\n\t\tvar mycallback = {\n\t\t\terror:function(){\n\t\t\t\t//assuming offline mode\n\t\t\t\tvar text = this.getCache() || this.data;\n\n\t\t\t\tvar loader = { responseText: text };\n\t\t\t\tvar data = webix.ajax.prototype._data(loader);\n\n\t\t\t\tthis._is_offline();\n\t\t\t\twebix.ajax.$callback(view, callback, text, data, loader);\n\t\t\t},\n\t\t\tsuccess:function(text, data, loader){\n\t\t\t\tthis._is_online();\n\t\t\t\twebix.ajax.$callback(view, callback, text, data, loader);\n\n\t\t\t\tthis.setCache(text);\n\t\t\t}\n\t\t};\n\n\t\t//in cache mode - always load data from cache\n\t\tif (this.cache && this.getCache())\n\t\t\tmycallback.error.call(this);\n\t\telse {\n\t\t\t//else try to load actual data first\n\t\t\tif (this.source.$proxy)\n\t\t\t\tthis.source.load(this, mycallback);\n\t\t\telse\n\t\t\t\twebix.ajax(this.source, mycallback, this);\n\t\t}\n\t},\n\tgetCache:function(){\n\t\treturn this.storage.get(this._data_name());\n\t},\n\tclearCache:function(){\n\t\tthis.storage.remove(this._data_name());\n\t},\n\tsetCache:function(text){\n\t\tthis.storage.put(this._data_name(), text);\n\t},\n\t_data_name:function(){\n\t\tif (this.source.$proxy)\n\t\t\treturn this.source.source + \"_$proxy$_data\";\n\t\telse \n\t\t\treturn this.source + \"_$proxy$_data\";\n\t},\n\tsaveAll:function(view, update, dp, callback){\n\t\tthis.setCache(view.serialize());\n\t\twebix.ajax.$callback(view, callback, \"\", update);\n\t},\n\tresult:function(id, master, dp, text, data){\n\t\tfor (var i = 0; i < data.length; i++)\n\t\t\tdp.processResult({ id: data[i].id, status: data[i].operation }, {}, {});\n\t}\n};\n\nwebix.proxy.cache = {\n\tinit:function(){\n\t\twebix.extend(this, webix.proxy.offline);\n\t},\n\tcache:true\n};\n\nwebix.proxy.local = {\n\tinit:function(){\n\t\twebix.extend(this, webix.proxy.offline);\n\t},\n\tcache:true,\n\tdata:[]\n};\n\n\n\n\nwebix.ActiveContent = {\n\t$init:function(config){  \n\t\tif (config.activeContent){\n\t\t\tthis.$ready.push(this._init_active_content_list);\n\t\t\t\n\t\t\tthis._active_holders = {};\n\t\t\tthis._active_holders_item = {};\n\t\t\tthis._active_holders_values = {};\n\t\t\tthis._active_references = {};\n\t\t\t\n\t\t\tfor (var key in config.activeContent){\n\t\t\t\tthis[key] = this._bind_active_content(key);\n\t\t\t\tif (config.activeContent[key].earlyInit){\n\t\t\t\t\tvar temp = webix._parent_cell; webix._parent_cell = null;\n\t\t\t\t\tthis[key].call(this,{},this, config.activeContent);\n\t\t\t\t\twebix._parent_cell=temp;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t_destructActiveContent: function(){\n\t\tfor(var key in this._active_references){\n\t\t\tvar elem = this._active_references[key];\n\t\t\tif(elem.destructor)\n\t\t\t\telem.destructor();\n\t\t}\n\t},\n\t_init_active_content_list:function(){\n\t\tthis.attachEvent(\"onDestruct\",webix.bind(this._destructActiveContent,this));\n\n\t\twebix._event(this.$view, \"blur\", function(ev){\n\t\t\tvar target = ev.target || ev.srcElement;\n\n\t\t\t// for inputs only\n\t\t\tif(target.tagName != \"BUTTON\"){\n\t\t\t\tvar el = webix.$$(ev);\n\t\t\t\tif (el && el !== this && el.getValue  && el.setValue){\n\t\t\t\t\tel.getNode(ev);\n\n\t\t\t\t\tvar newvalue = el.getValue();\n\t\t\t\t\tif (newvalue != el._settings.value)\n\t\t\t\t\t\tel.setValue(newvalue);\n\t\t\t\t}\n\t\t\t}\n\t\t}, {bind:this, capture: true});\n\n\t\tif (this.filter){\n\t\t\tfor (var key in this._settings.activeContent){\n\t\t\t\tthis.type[key] = this[key];\n\t\t\t\tthis[key] = this._locate_active_content_by_id(key);\n\t\t\t}\n\t\t\t//really bad!\n\t\t\tthis.attachEvent(\"onBeforeRender\", function(){\n\t\t\t\tthis.type.masterUI = this;\n\t\t\t});\n\t\t\tthis.type.masterUI = this;\n\t\t}\n\t},\n\t_locate_active_content_by_id:function(key){\n\t\treturn function(id){\n\t\t\tvar button = this._active_references[key];\n\t\t\tvar button_id = button._settings.id;\n\t\t\tvar html = this.getItemNode(id).getElementsByTagName(\"DIV\");\n\t\t\tfor (var i=0; i < html.length; i++) {\n\t\t\t\tif (html[i].getAttribute(\"view_id\") == button_id){\n\t\t\t\t\tbutton._viewobj = button._dataobj = html[i];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn button;\n\t\t};\n\t},\n\t_get_active_node:function(el, key, master){\n\t\treturn function(e){\n\t\t\tif (e){\n\t\t\t\tvar trg=e.target||e.srcElement;\n\t\t\t\twhile (trg){\n\t\t\t\t\tif (trg.getAttribute && trg.getAttribute(\"view_id\")){\n\t\t\t\t\t\tmaster._setActiveContentView(el,trg);\n\t\t\t\t\t\tif (master.locate){\n\t\t\t\t\t\t\tvar id = master.locate(trg.parentNode);\n\t\t\t\t\t\t\tvar value = master._active_holders_values[key][id];\n\t\t\t\t\t\t\tel._settings.value = value;\n\t\t\t\t\t\t\tel._settings.$masterId = id;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn trg;\n\t\t\t\t\t}\n\t\t\t\t\ttrg = trg.parentNode;\n\t\t\t\t}\t\t\t\t\n\t\t\t}\n\t\t\treturn el._viewobj;\n\t\t};\n\t},\n\t_set_new_active_value:function(key, master){\n\t\treturn function(value){\n\t\t\tvar data = master.data;\n\t\t\tif (master.filter){\n\t\t\t\tvar id = master.locate(this._viewobj.parentNode);\n\t\t\t\tdata = master.getItem(id);\n\t\t\t\t//XMLSerializer - FF \"feature\"\n\t\t\t\tthis.refresh();\n\t\t\t\tmaster._active_holders_item[key][id]=this._viewobj.outerHTML||(new XMLSerializer().serializeToString(this._viewobj));\n\t\t\t\tmaster._active_holders_values[key][id] = value;\n\t\t\t}\n\t\t\tif(data)\n\t\t\t\tdata[key] = value;\n\t\t};\n\t},\n\t_bind_active_content:function(key){ \n\t\treturn function(obj, common, active){\n\t\t\tvar object = common._active_holders?common:common.masterUI;\n\n\t\t\tif (!object._active_holders[key]){\n\t\t\t\tvar d = document.createElement(\"DIV\");\n\t\t\t\t\n\t\t\t\tactive = active || object._settings.activeContent;\n\t\t\t\tvar el = webix.ui(active[key], d);\n\n\t\t\t\td.firstChild.setAttribute(\"onclick\", \"event.processed = true; if (webix.env.isIE8) event.srcElement.w_view = '\"+el._settings.id+\"';\");\n\n\t\t\t\tel.getNode = object._get_active_node(el, key, object);\n\n\t\t\t\tel.attachEvent(\"onChange\", object._set_new_active_value(key, object));\n\t\t\t\t\n\t\t\t\tobject._active_references[key] = el;\n\t\t\t\tobject._active_holders[key] = d.innerHTML;\n\t\t\t\tobject._active_holders_item[key] = {};\n\t\t\t\tobject._active_holders_values[key] = {};\n\t\t\t\tel.$activeEl = el.$view;\n\t\t\t}\n\t\t\tif (object.filter && obj[key] != object._active_holders_values[key] && !webix.isUndefined(obj[key])){\n\t\t\t\tvar el = object._active_references[key];\n\t\t\t\tel.blockEvent();\n\t\t\t\tobject._setActiveContentView(el,el.$activeEl);\n\t\t\t\t//in IE we can lost content of active element during parent repainting\n\t\t\t\tif (!el.$view.firstChild) el.refresh();\n\t\t\t\tel.setValue(obj[key]);\n\t\t\t\tel.refresh();\n\t\t\t\tel.unblockEvent();\n\t\t\t\t\n\t\t\t\tobject._active_holders_values[key][obj.id] = obj[key];\n\t\t\t\tobject._active_holders_item[key][obj.id] = el._viewobj.outerHTML||(new XMLSerializer().serializeToString(el._viewobj));\n\t\t\t}\n\t\t\t\n\t\t\treturn object._active_holders_item[key][obj.id]||object._active_holders[key];\n\t\t};\n\t},\n\t_setActiveContentView: function(el,view){\n\t\tel._dataobj = el._viewobj = el.$view = view;\n\t}\n};\nwebix.ProgressBar = {\n\t$init:function(){\n\t\tif (webix.isUndefined(this._progress) && this.attachEvent){\n\t\t\tthis.attachEvent(\"onBeforeLoad\", this.showProgress);\n\t\t\tthis.attachEvent(\"onAfterLoad\", this.hideProgress);\n\t\t\tthis._progress = null;\n\t\t}\n\t},\n\tshowProgress:function(config){\n\t\t// { position: 0 - 1, delay: 2000ms by default, css : name of css class to use }\n\t\tif (!this._progress){\n\n\t\t\tconfig = webix.extend({\n\t\t\t\tposition:0,\n\t\t\t\tdelay: 2000,\n\t\t\t\ttype:\"icon\",\n\t\t\t\ticon:\"refresh\",\n\t\t\t\thide:false\n\t\t\t}, (config||{}), true);\n\n\t\t\tvar incss = (config.type == \"icon\") ? (\"fa-\"+config.icon+\" fa-spin\") : \"\";\n\n\n\n\t\t\tthis._progress = webix.html.create(\n\t\t\t\t\"DIV\",\n\t\t\t\t{\n\t\t\t\t\t\"class\":\"webix_progress_\"+config.type,\n\t\t\t\t\t\"role\":\"progressbar\",\n\t\t\t\t\t\"aria-valuemin\":\"0\",\n\t\t\t\t\t\"aria-valuemax\":\"100\",\n\t\t\t\t\t\"tabindex\":\"0\"\n\t\t\t\t},\n\t\t\t\t\"<div class='webix_progress_state \"+incss+\"'></div>\"\n\t\t\t);\n\n\t\t\tif(!this.setPosition)\n\t\t\t\tthis._viewobj.style.position = \"relative\";\n\n\t\t\twebix.html.insertBefore(this._progress, this._viewobj.firstChild, this._viewobj);\n\t\t\tthis._viewobj.setAttribute(\"aria-busy\", \"true\");\n\n\t\t\tif(!webix.Touch.$active){\n\t\t\t\tif(this.getScrollState){\n\t\t\t\t\tvar scroll = this.getScrollState();\n\t\t\t\t\tif(this._viewobj.scrollWidth != this.$width){\n\t\t\t\t\t\tthis._progress.style.left = scroll.x +\"px\";\n\t\t\t\t\t}\n\t\t\t\t\tif(this._viewobj.scrollHeight != this.$height){\n\t\t\t\t\t\tif(config.type != \"bottom\"){\n\t\t\t\t\t\t\tthis._progress.style.top = scroll.y +\"px\";\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis._progress.style.top =  scroll.y + this.$height - this._progress.offsetHeight +\"px\";\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\tthis._progress_delay = 1;\n\t\t}\n\n\t\tif (config && config.type != \"icon\")\n\t\t\twebix.delay(function(){\n\t\t\t\tif (this._progress){\n\t\t\t\t\tvar position = config.position || 1;\n\t\t\t\t\t//check for css-transition support\n\t\t\t\t\tif(this._progress.style[webix.env.transitionDuration] !== webix.undefined || !config.delay){\n\t\t\t\t\t\tthis._progress.firstChild.style.width = position*100+\"%\";\n\t\t\t\t\t\tif (config.delay)\n\t\t\t\t\t\t\tthis._progress.firstChild.style[webix.env.transitionDuration] = config.delay+\"ms\";\n\t\t\t\t\t} else{\n\t\t\t\t\t//if animation is not supported fallback to timeouts [IE9]\n\t\t\t\t\t\tvar count = 0,\n\t\t\t\t\t\t\tstart = 0,\n\t\t\t\t\t\t\tstep = position/config.delay*30,\n\t\t\t\t\t\t\tview = this;\n\n\t\t\t\t\t\tif(this._progressTimer){\n\t\t\t\t\t\t\t//reset the existing progress\n\t\t\t\t\t\t\twindow.clearInterval(this._progressTimer);\n\t\t\t\t\t\t\tstart = this._progress.firstChild.offsetWidth/this._progress.offsetWidth*100;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._progressTimer = window.setInterval(function(){\n\t\t\t\t\t\t\tif(count*30 == config.delay){\n\t\t\t\t\t\t\t\twindow.clearInterval(view._progressTimer);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tif(view._progress && view._progress.firstChild)\n\t\t\t\t\t\t\t\t\tview._progress.firstChild.style.width = start+count*step*position*100+\"%\";\n\t\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},30);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (config.hide)\n\t\t\t\t\t\twebix.delay(this.hideProgress, this, [1], config.delay);\n\n\t\t\t\t}\n\t\t\t\tthis._progress_delay = 0;\n\t\t\t}, this);\n\t\telse if(config && config.type == \"icon\" && config.hide)\n\t\t\twebix.delay(this.hideProgress, this, [1], config.delay);\n\t},\n\thideProgress:function(now){\n\t\tif (this._progress_delay)\n\t\t\tnow = true;\n\n\t\tif (this._progress){\n\t\t\tif (now){\n\t\t\t\tif(this._progressTimer)\n\t\t\t\t\twindow.clearInterval(this._progressTimer);\n\t\t\t\twebix.html.remove(this._progress);\n\t\t\t\tthis._progress = null;\n\t\t\t\tthis._viewobj.removeAttribute(\"aria-busy\");\n\t\t\t} else {\n\t\t\t\tthis.showProgress({ position:1.1, delay:300 , hide:true });\n\t\t\t}\n\t\t}\n\t}\n};\n\n/*\n\tUI:Video\n*/\n\nwebix.protoUI({\n\tname:\"video\",\n\t$init:function(config){\n\t\tif (!config.id) config.id = webix.uid();\n\t\tthis.$ready.push(this._init_video);\n\t},\n\t_init_video:function(){\n\t\tvar c = this._settings;\n\t\tthis._contentobj  = webix.html.create(\"video\",{\n\t\t\t\"class\":\"webix_view_video\",\n\t\t\t\"style\":\"width:100%;height:100%;\",\n\t\t\t\"autobuffer\":\"autobuffer\"\n\t\t},\"\");\n\t\tif(c.poster)\n\t\t\tthis._contentobj.poster=c.poster;\n\n\t\tif(c.src){\n\t\t\tif(typeof c.src!= \"object\")\n\t\t\t\tc.src = [c.src];\n\t\t\tfor(var i = 0; i < c.src.length;i++)\n\t\t\t\tthis._contentobj.innerHTML += ' <source src=\"'+ c.src[i]+'\">';\n\t\t}\n\t\n\t\tif(c.controls)\n\t\t\tthis._contentobj.controls=true;\n\t\tif(c.autoplay)\n\t\t\tthis._contentobj.autoplay=true;\n\t\tthis._viewobj.appendChild(this._contentobj);\n\t},\n\tgetVideo:function(){\n\t\treturn this._contentobj;\n\t},\n\tdefaults:{\n\t\tsrc:\"\",\n\t\tcontrols: true\n\t}\n}, webix.ui.view);\n\nwebix.protoUI({\n\tname:\"NonGPL\",\n\t$init:function(){\n\t\twebix.message(\"GPL version does not support '\"+this.name+\"'\",\"error\",-1);\n\t}\n},webix.ui.view);\n\nwebix.protoUI({\tname:\"organogram\" },webix.ui.NonGPL);\nwebix.protoUI({\tname:\"barcode\" },webix.ui.NonGPL);\nwebix.protoUI({ name:\"portlet\" },webix.ui.NonGPL);\nwebix.protoUI({ name:\"pdfviewer\" },webix.ui.NonGPL);\nwebix.protoUI({ name:\"pdfbar\" },webix.ui.NonGPL);\nwebix.protoUI({ name:\"excelviewer\" },webix.ui.NonGPL);\nwebix.protoUI({ name:\"excelbar\" },webix.ui.NonGPL);\nwebix.protoUI({ name:\"datasuggest\" },webix.ui.NonGPL);\nwebix.protoUI({ name:\"gridsuggest\" },webix.ui.NonGPL);\nwebix.protoUI({ name:\"multitext\" },webix.ui.NonGPL);\nwebix.protoUI({ name:\"multiselect\" },webix.ui.NonGPL);\nwebix.protoUI({ name:\"multicombo\" },webix.ui.NonGPL);\nwebix.protoUI({ name:\"multisuggest\" },webix.ui.NonGPL);\nwebix.protoUI({ name:\"checksuggest\" },webix.ui.NonGPL);\nwebix.protoUI({ name:\"treemap\" },webix.ui.NonGPL);\nwebix.protoUI({ name:\"rangeslider\" },webix.ui.NonGPL);\nwebix.protoUI({ name:\"rangechart\" },webix.ui.NonGPL);\nwebix.protoUI({ name:\"datalayout\" },webix.ui.NonGPL);\nwebix.protoUI({ name:\"abslayout\" },webix.ui.NonGPL);\n\n\nwebix.protoUI({\n\tname:\"sidemenu\",\n\tdefaults: {\n\t\tanimate: true,\n\t\tposition: \"left\",\n\t\twidth: 200,\n\t\tborderless: true\n\t},\n\t$init:function(){\n\t\tthis.$view.className += \" webix_sidemenu\";\n\t},\n\t$skin:function(){\n\t\tthis.defaults.padding = 0;\n\t},\n\tposition_setter: function(value){\n\t\tvar prevPosition = this._settings.position;\n\t\tif(prevPosition)\n\t\t\twebix.html.removeCss(this.$view,\" webix_sidemenu_\"+prevPosition);\n\t\twebix.html.addCss(this.$view,\" webix_sidemenu_\"+value);\n\t\treturn value;\n\t},\n\t$getSize: function(){\n\t\tvar sizes = webix.ui.window.prototype.$getSize.apply(this,arguments);\n\t\tthis._desired_sizes = sizes;\n\t\treturn sizes;\n\t},\n\t$setSize:function(x,y){\n\t\twebix.ui.view.prototype.$setSize.call(this,x,y);\n\t\tx = this._content_width-this._settings.padding*2;\n\t\ty = this._content_height-this._settings.padding*2;\n\t\tthis._contentobj.style.padding = this._settings.padding+\"px\";\n\t\tthis._headobj.style.display=\"none\";\n\t\tthis._bodyobj.style.height = y+\"px\";\n\t\tthis._body_cell.$setSize(x,y);\n\t},\n\tshow: function(){\n\t\tif(!this.callEvent(\"onBeforeShow\",arguments))\n\t\t\treturn false;\n\n\t\tthis._settings.hidden = false;\n\t\tthis._viewobj.style.zIndex = (this._settings.zIndex||webix.ui.zIndex());\n\t\tif (this._settings.modal || this._modal){\n\t\t\tthis._modal_set(true);\n\t\t\tthis._modal = null; // hidden_setter handling\n\t\t}\n\t\tthis._viewobj.style.display = \"block\";\n\t\tthis._render_hidden_views();\n\t\tif (this._settings.position)\n\t\t\tthis._setPosition();\n\n\t\tthis._hide_timer = 1;\n\t\twebix.delay(function(){ this._hide_timer = 0; }, this, [], (webix.env.touch ? 400 : 100 ));\n\n\t\tif (this.config.autofocus){\n\t\t\tthis._prev_focus = webix.UIManager.getFocus();\n\t\t\twebix.UIManager.setFocus(this);\n\t\t}\n\n\t\tif (-1 == webix.ui._popups.find(this))\n\t\t\twebix.ui._popups.push(this);\n\n\t\tthis.callEvent(\"onShow\",[]);\n\t},\n\t_setPosition: function(x){\n\t\tvar width, height, maxWidth, maxHeight,\n\t\t\tposition,\n\t\t\tleft = 0, top = 0,\n\t\t\tstate = { };\n\n\n\t\tthis.$view.style.position = \"fixed\";\n\n\t\tmaxWidth = (window.innerWidth||document.documentElement.offsetWidth);\n\t\tmaxHeight = (window.innerHeight||document.documentElement.offsetHeight);\n\n\t\twidth = this._desired_sizes[0] || maxWidth;\n\t\theight = this._desired_sizes[2] ||maxHeight;\n\n\t\twebix.assert(width &&height, \"Attempt to show not rendered window\");\n\n\t\tposition = this._settings.position;\n\n\t\tif(position == \"top\"){\n\t\t\twidth = maxWidth;\n\t\t} else if(position == \"right\"){\n\t\t\theight = maxHeight;\n\t\t\tleft = maxWidth - width;\n\t\t} else if(position == \"bottom\"){\n\t\t\twidth = maxWidth;\n\t\t\ttop = maxHeight - height;\n\t\t} else {\n\t\t\theight = maxHeight;\n\t\t}\n\n\t\tstate = { left: left, top: top,\n\t\t\twidth: width, height: height,\n\t\t\tmaxWidth: maxWidth, maxHeight: maxHeight\n\t\t};\n\n\t\tif (typeof this._settings.state == \"function\")\n\t\t\tthis._settings.state.call(this, state);\n\n\t\tthis._state = state;\n\n\t\tthis.$setSize(state.width, state.height);\n\n\t\tif (typeof x == \"undefined\" && this._isAnimationSupported()){\n\t\t\twebix.html.removeCss(this.$view,\"webix_animate\",true);\n\t\t\t// set initial state\n\t\t\tthis._animate[this._settings.position].beforeShow.call(this, state);\n\t\t\t// set apply animation css\n\t\t\twebix.delay(function(){\n\t\t\t\twebix.html.addCss(this.$view,\"webix_animate\",true);\n\t\t\t},this, null,1);\n\t\t\t// animate popup\n\t\t\twebix.delay(function(){\n\t\t\t\tthis._animate[this._settings.position].show.call(this, state);\n\t\t\t},this, null,10);\n\n\t\t}\n\t\telse{\n\n\t\t\tthis.setPosition(state.left, state.top);\n\t\t}\n\t},\n\t_isAnimationSupported: function(){\n\t\treturn webix.animate.isSupported() && this._settings.animate && !(webix.env.isIE && navigator.appVersion.indexOf(\"MSIE 9\")!=-1);\n\t},\n\thidden_setter:function(value){\n\t\tif(value)\n\t\t\tthis.hide(true);\n\t\telse\n\t\t\tthis.show();\n\t\treturn !!value;\n\t},\n\t_animate:{\n\t\tleft: {\n\t\t\tbeforeShow: function(state){\n\t\t\t\tthis.$view.style.left = -state.width+\"px\";\n\t\t\t\tthis.$view.style.top = state.top+\"px\";\n\t\t\t},\n\t\t\tshow: function(){\n\t\t\t\tthis.$view.style.left = \"0px\";\n\t\t\t},\n\t\t\thide: function(state){\n\t\t\t\tthis.$view.style.left = -state.width+\"px\";\n\t\t\t}\n\t\t},\n\t\tright: {\n\t\t\tbeforeShow: function(state){\n\t\t\t\tthis.$view.style.left = \"auto\";\n\t\t\t\tthis.$view.style.right = -state.width+\"px\";\n\t\t\t\tthis.$view.style.top = state.top+\"px\";\n\t\t\t},\n\t\t\tshow: function(){\n\t\t\t\tthis.$view.style.right = 0 +\"px\";\n\t\t\t},\n\t\t\thide: function(state){\n\t\t\t\tthis.$view.style.right = -state.width+\"px\";\n\t\t\t}\n\t\t},\n\t\ttop: {\n\t\t\tbeforeShow: function(state){\n\t\t\t\tthis.setPosition(state.left,state.top);\n\t\t\t\tthis.$view.style.height =\"0px\";\n\t\t\t\tthis._bodyobj.style.height =\"0px\";\n\t\t\t},\n\t\t\tshow: function(state){\n\t\t\t\tthis.$view.style.height = state.height +\"px\";\n\t\t\t\tthis._bodyobj.style.height =state.height+\"px\";\n\t\t\t},\n\t\t\thide: function(){\n\t\t\t\tthis.$view.style.height = \"0px\";\n\t\t\t\tthis._bodyobj.style.height = \"0px\";\n\t\t\t}\n\t\t},\n\t\tbottom: {\n\t\t\tbeforeShow: function(state){\n\t\t\t\tthis.$view.style.left = state.left + \"px\";\n\t\t\t\tthis.$view.style.top = \"auto\";\n\t\t\t\tvar bottom = (state.bottom != webix.undefined?state.bottom:(state.maxHeight-state.top  -state.height));\n\t\t\t\tthis.$view.style.bottom = bottom +\"px\";\n\t\t\t\tthis.$view.style.height =\"0px\";\n\t\t\t},\n\t\t\tshow: function(state){\n\t\t\t\tthis.$view.style.height = state.height +\"px\";\n\t\t\t},\n\t\t\thide: function(){\n\t\t\t\tthis.$view.style.height = \"0px\";\n\t\t\t}\n\t\t}\n\t},\n\thide:function(force){\n\n\t\tif (this.$destructed) return;\n\n\t\tif (this._settings.modal)\n\t\t\tthis._modal_set(false);\n\n\t\tvar maxWidth = (window.innerWidth||document.documentElement.offsetWidth);\n\t\tvar maxHeight = (window.innerHeight||document.documentElement.offsetHeight);\n\n\t\tif (!force && this._isAnimationSupported() && maxWidth == this._state.maxWidth && maxHeight == this._state.maxHeight){\n\t\t\t// call 'hide' animation handler\n\t\t\tthis._animate[this._settings.position].hide.call(this, this._state);\n\t\t\t// hide popup\n\t\t\tvar tid = webix.event(this.$view, webix.env.transitionEnd, webix.bind(function(ev){\n\t\t\t\tthis._hide_callback();\n\t\t\t\twebix.eventRemove(tid);\n\t\t\t},this));\n\t\t}\n\t\telse{\n\t\t\tthis._hide_callback();\n\t\t}\n\n\t\tif (this._settings.autofocus){\n\t\t\tvar el = document.activeElement;\n\t\t\tif (el && this._viewobj && this._viewobj.contains(el)){\n\t\t\t\twebix.UIManager.setFocus(this._prev_focus);\n\t\t\t\tthis._prev_focus = null;\n\t\t\t}\n\t\t}\n\n\t\tthis._hide_sub_popups();\n\n\t}\n\n}, webix.ui.popup);\n\n\n\n(function(){\n\nwebix.toPNG = function(id, name){\n    var defer = webix.promise.defer();\n    webix.require(webix.cdn + \"/extras/html2canvas.min.js\", function(){\n        var view = webix.$$(id);\n        if (view && view.$exportView)\n            view = view.$exportView({});\n        var node = view ? view.$view : webix.toNode(id);\n        var filename = (name||\"data\")+\".png\";\n        \n        window.html2canvas(node).then(function(canvas) {\n            var data = canvas.msToBlob?canvas.msToBlob():canvas.toDataURL(\"image/png\");\n            webix.html.download(data, filename);\n            canvas.remove();\n            defer.resolve();\n        });\n    });\n    return defer;\n};\n\n\nwebix.toExcel = function(id, options){\n    var defer = webix.promise.defer();\n    var view = webix.$$(id);\n    options = options || {};\n\n    if (view.$exportView)\n        view = view.$exportView(options);\n\n    webix.require(webix.cdn + \"/extras/xlsx.core.min.js\", function(){\n        options._export_mode = \"excel\";\n        \n        var scheme = getExportScheme(view, options);\n        var result = getExportData(view, options, scheme);\n\n        var spans  = options.spans ? getSpans(view, options) : [];\n        var data   = getExcelData(result, scheme, spans);\n\n        var wb = { SheetNames:[], Sheets:[]};\n        var name = options.name || \"Data\";\n        name = name.replace(/[\\*\\?\\:\\[\\]\\\\\\/]/g,\"\").substring(0, 31);\n        wb.SheetNames.push(name);\n        wb.Sheets[name] = data;\n        \n        var xls = XLSX.write(wb, {bookType:'xlsx', bookSST:false, type: 'binary'});\n        var filename =  (options.filename || name)+\".xlsx\";\n\n        var blob = new Blob([str2array(xls)], { type: \"application/xlsx\" });\n        webix.html.download(blob, filename);\n        defer.resolve();\n    });\n    return defer;\n};\n\nwebix.toCSV = function(id, options){\n    var view = webix.$$(id);\n    options = options || {};\n\n    if (view.$exportView)\n        view = view.$exportView(options);\n\n    options._export_mode = \"csv\";\n    \n    var scheme = getExportScheme(view, options);\n    var result = getExportData(view, options, scheme);\n\n\n    var data = getCsvData(result, scheme);\n    var filename =  (options.filename || \"Data\")+\".csv\";\n\n    var blob = new Blob([\"\\uFEFF\" + data], { type: \"text/csv\" });\n    webix.html.download(blob, filename);\n};\n\nfunction getCsvData(data, scheme) {\n    return webix.csv.stringify(data);\n}\n\nvar font;\nwebix.toPDF = function(id, options){\n    var defer = webix.promise.defer();\n    webix.require(webix.cdn + \"/extras/pdfjs.js\", function(){\n        var view = webix.$$(id);\n        options = options || {};\n\n        if (view.$exportView)\n            view = view.$exportView(options);\n\n        options._export_mode = \"pdf\";\n        options._export_font = font;\n        options.fontName = options.fontName ||\"pt-sans.regular\";\n\n        var scheme = getExportScheme(view, options);\n        var data = getExportData(view, options, scheme);\n\n        var callback = function(pdf, options){\n            var filename = (options.filename || \"data\")+\".pdf\";\n            var blob = new Blob([pdf.toString()], { type: \"application/pdf\" });\n            webix.html.download(blob, filename);\n            defer.resolve();\n        };\n\n        if(options._export_font)\n            getPdfData(scheme, data, options, callback);\n        else\n            pdfjs.load(webix.cdn + \"/extras/\"+options.fontName+\".ttf\", function(err, buf){\n                if(err) throw err;\n                font = options._export_font = new pdfjs.TTFFont(buf);\n                getPdfData(scheme, data, options, callback);\n            });\n    });\n    return defer;\n};\n\nfunction getExportScheme(view, options){\n    var scheme = [];\n    var h_count = 0, f_count = 0;\n    var isTable = view.getColumnConfig;\n    var columns = options.columns;\n    var raw = !!options.rawValues;\n\n    if (!columns){\n        if (isTable){\n            columns = view._columns;\n        }\n        else {\n            columns = [];\n\t       \tvar obj = view.data.pull[view.data.order[0]];\n\t\t\tfor (var key in obj)\n\t\t\t\tif(key !== \"id\")\n\t\t\t\t\tcolumns.push({id:key});\n        }\n    }\n    else if(!columns.length){\n\t\t//export options are set as - columns:{ rank:true, title:{ header:\"custom\"}}\n\t\tvar arr = [];\n\t\tfor(var key in columns)\n\t\t\tarr.push(webix.extend({ id:key}, webix.extend({}, columns[key])));\n\t\tcolumns = arr;\n\t}\n\n\n    if (options.id)\n        scheme.push({ id:\"id\", width:50, header:\" \", template:function(obj){ return obj.id; }});\n\n    if (options.flatTree){\n        var flatKey = options.flatTree.id;\n        var copy = [].concat(options.flatTree.columns);\n        var fill = [];\n        var fillMode = !!options.flatTree.fill;\n        for (var i = 1; i <= copy.length; i++)\n            copy[i-1].template = (function(i, c){ \n                return function(obj){ \n                    return obj.$level == i ? (fill[i]=obj[flatKey]) : ((fillMode && i<obj.$level)?fill[i]:\"\"); \n                };\n            })(i);\n\n        var index = 0;\n        for (var i = columns.length-1; i >= 0; i--)\n            if (columns[i].id === flatKey)\n                index = i;\n\n        columns = [].concat(columns.slice(0,index)).concat(copy).concat(columns.slice(index+1));\n    }\n\n        \n    for (var j = 0; j < columns.length; j++) {\n        var column = columns[j];\n        var key = column.id;\n\n        if (column.noExport) continue;\n       \n\t\tif (isTable && view._columns_pull[key])\n\t\t\tcolumn = webix.extend(webix.extend({}, column), view._columns_pull[key]);\n\n\t\tvar record = {\n\t\t\tid:         column.id,\n\t\t\ttemplate:   ( (raw ? null : column.template) || function(key, column){return function(obj){ return column.format ? column.format(obj[key]) : obj[key]; };}(key, column)),\n\t\t\twidth:      ((column.width   || 200) * (options._export_mode===\"excel\"?8.43/70:1 )),\n\t\t\theader:     (column.header!==false?(column.header||key)  : \"\")\n\t\t};\n\n\t\tif(typeof record.header === \"string\") record.header = [{text:record.header}];\n\t\telse record.header = webix.copy(record.header);\n\n\t\tfor(var i = 0; i<record.header.length; i++){\n\t\t\trecord.header[i] = record.header[i]?(record.header[i].contentId?\"\":record.header[i].text):\"\";\n\t\t}\n\t\th_count = Math.max(h_count, record.header.length);\n\n\t\tif(view._settings.footer){\n\t\t\tvar footer = column.footer || \"\";\n\t\t\tif(typeof footer == \"string\") footer = [{text:footer}];\n\t\t\telse footer = webix.copy(footer);\n\n\t\t\tfor(var i = 0; i<footer.length; i++){\n\t\t\t\tif(footer[i]) footer[i] = footer[i].contentId?view.getHeaderContent(footer[i].contentId).getValue():footer[i].text;\n\t\t\t\telse footer[i] = \"\";\n\t\t\t}\n\t\t\trecord.footer = footer;\n\t\t\tf_count = Math.max(f_count, record.footer.length);\n\t\t}\n\t\tscheme.push(record);\n\t}\n\n    for(var i =0; i<scheme.length; i++){\n\n        var diff = h_count-scheme[i].header.length;\n        for(var d=0; d<diff; d++)\n            scheme[i].header.push(\"\");\n\n        if(view._settings.footer){\n            diff = f_count-scheme[i].footer.length;\n            for(var d=0; d<diff; d++)\n                scheme[i].footer.push(\"\");\n        }\n    }\n\n    return scheme;\n}\n\n\nfunction getExportData(view, options, scheme){\n    var filterHTML = !!options.filterHTML;\n    var htmlFilter = /<[^>]*>/gi;\n    var data = [];\n    var header, headers;\n\n    if( options.header !== false && scheme.length){\n        for(var h=0; h < scheme[0].header.length; h++){\n            headers = [];\n            for (var i = 0; i < scheme.length; i++){\n                header = \"\";\n                if(scheme[i].header[h]){\n                    header = scheme[i].header[h];\n                    if (filterHTML)\n                        header = scheme[i].header[h] = header.replace(htmlFilter, \"\");\n                }\n                    \n                headers.push(header);\n            }\n            if (options._export_mode === \"excel\") data.push(headers);\n            if (options._export_mode === \"csv\") {\n            \theaders.map(function(item) {\n            \t\titem.replace(/<[^>]*>/gi,\"\");\n            \t});\n            \tdata.push(headers);\n            }\n        }\n    }\n\n    var isTree = (view.data.name == \"TreeStore\");\n    var treeline = (options.flatTree || options.plainOutput) ? \"\" : \" - \";\n\n    view.data.each(function(item){\n        if(item){ //dyn loading\n            var line = [];\n            for (var i = 0; i < scheme.length; i++){\n                var column = scheme[i];\n                var cell = column.template(item, view.type, item[column.id], column, i);\n                if (!cell && cell !== 0) cell = \"\";\n                if (filterHTML && typeof cell === \"string\"){\n                    if(isTree)\n                        cell = cell.replace(/<div class=.webix_tree_none.><\\/div>/, treeline);\n                    cell = cell.replace(htmlFilter, \"\");\n                }\n                //remove end/start spaces(ex.hierarchy data)\n                if (typeof cell === \"string\" && options._export_mode === \"csv\")\n                    cell = cell.trim();\n                //for multiline data\n                if (typeof cell === \"string\" && (options._export_mode === \"excel\" || options._export_mode === \"csv\")){\n                \tcell = cell.replace(/<br\\s*\\/?>/mg,\"\\n\");\n                }\n                line.push(cell);\n            }\n            data.push(line);\n        }\n    }, view);\n\n\n    if( options.footer !==false ){\n        var f_count = scheme[0].footer?scheme[0].footer.length:0;\n        for (var f = 0; f < f_count; f++){\n            var footers  = [];\n            for(var i = 0; i<scheme.length; i++){\n                var footer = scheme[i].footer[f];\n                if (filterHTML) footer = scheme[i].footer[f] = footer.toString().replace(htmlFilter, \"\");\n                footers.push(footer);\n            }\n            if(options._export_mode === \"excel\") data.push(footers);\n        }\n    }\n\n    return data;\n}\n\nfunction getColumnsWidths(scheme){\n    var wscols = [];\n    for (var i = 0; i < scheme.length; i++)\n        wscols.push({ wch: scheme[i].width });\n        \n    return wscols;\n}\n\nfunction excelDate(date) {\n    return Math.round(25569 + date / (24 * 60 * 60 * 1000));\n}\n\nfunction getSpans(view, options){\n    var pull = view._spans_pull;\n    var spans = [];\n\n    if(pull){\n        //correction for spreadsheet\n        var xc = options.xCorrection || 0;\n        var yc = options.yCorrection || 0;\n        for(var row in pull){\n            //{ s:{c:1, r:0}, e:{c:3, r:0} }\n            var cols = pull[row];\n            for(var col in cols){\n                var sc = view.getColumnIndex(col) - xc;\n                var sr = view.getIndexById(row) - yc;\n                var ec = sc+cols[col][0]-1;\n                var er = sr+(cols[col][1]-1);\n\n                //+1 to exclude excel header\n                spans.push({ s:{c:sc, r:sr+1}, e:{c:ec, r:er+1} });\n            }\n        }\n    }\n    return spans;\n}\n\nvar table = \"_table\";\nfunction getExcelData(data, scheme, spans) {\n    var ws = {};\n    var range = {s: {c:10000000, r:10000000}, e: {c:0, r:0 }};\n    for(var R = 0; R != data.length; ++R) {\n        for(var C = 0; C != data[R].length; ++C) {\n            if(range.s.r > R) range.s.r = R;\n            if(range.s.c > C) range.s.c = C;\n            if(range.e.r < R) range.e.r = R;\n            if(range.e.c < C) range.e.c = C;\n\n            var cell = {v: data[R][C] };\n            if(cell.v === null) continue;\n            var cell_ref = XLSX.utils.encode_cell({c:C,r:R});\n\n            if(typeof cell.v === 'number') cell.t = 'n';\n            else if(typeof cell.v === 'boolean') cell.t = 'b';\n            else if(cell.v instanceof Date) {\n                cell.t = 'n'; cell.z = XLSX.SSF[table][14];\n                cell.v = excelDate(cell.v);\n            }\n            else cell.t = 's';\n\n            ws[cell_ref] = cell;\n        }\n    }\n    if(range.s.c < 10000000) ws['!ref'] = XLSX.utils.encode_range(range);\n\n    ws['!cols'] = getColumnsWidths(scheme);\n    if(spans.length)\n        ws[\"!merges\"] = spans;\n    return ws;\n}\n\nfunction str2array(s) {\n    var buf = new ArrayBuffer(s.length);\n    var view = new Uint8Array(buf);\n    for (var i=0; i!=s.length; ++i) view[i] = s.charCodeAt(i) & 0xFF;\n    return buf;\n}\n\nfunction getPdfData(scheme, data, options, callback){\n\n\n    options.header = (webix.isUndefined(options.header) || options.header === true) ? {} : options.header;\n    options.footer = (webix.isUndefined(options.footer) || options.footer === true) ? {} : options.footer;\n    options.table = options.table || {};\n\n    var width = options.width||595.296, height = options.height || 841.896;// default A4 size\n\n    if(options.orientation && options.orientation ===\"landscape\")\n        height = [width, width = height][0];\n\n    if(options.autowidth){\n        width = 80; //paddings\n        for(var i = 0; i<scheme.length; i++)\n            width += scheme[i].width;\n    }\n        \n    var doc = new pdfjs.Document({\n        padding: 40,\n        font: options._export_font,\n        threshold:256,\n        width:width,\n        height:height\n    });\n\n\n    //render table\n    var h_count = options.header === false ? 0: scheme[0].header.length;\n    var f_count = (options.footer === false || !scheme[0].footer) ? 0: scheme[0].footer.length;\n    \n    var colWidths = [];\n    for(var i = 0; i<scheme.length; i++)\n        colWidths[i] = scheme[i].width;\n\n    var tableOps = webix.extend(options.table, {\n        borderWidth: 1,height:20, lineHeight:1.1,\n        borderColor: 0xEEEEEE, backgroundColor: 0xFFFFFF, color:0x666666,\n        textAlign:\"left\", paddingRight:10, paddingLeft:10,\n        headerRows:h_count, widths: colWidths.length?colWidths:[\"100%\"]\n    });\n\n    var table = doc.table(tableOps);\n\n    //render table header\n    if(h_count){\n        var headerOps = webix.extend(options.header, {\n            borderRightColor:0xB0CEE3, borderBottomColor:0xB0CEE3,\n            color:0x4A4A4A, backgroundColor:0xD2E3EF,\n            height:27, lineHeight:1.2\n        });\n\n        for(var i = 0; i<h_count; i++){\n            var header = table.tr(headerOps);\n            for(var s=0; s<scheme.length; s++)\n                header.td(scheme[s].header[i].toString());\n        }\n    }\n    \n    //render table data\n    for(var r=0; r<data.length;r++){\n        var row = table.tr({});\n        for(var c=0; c< data[r].length; c++)\n            row.td(data[r][c]);\n    }\n\n    //render table footer\n    if(f_count){\n        var footerOps = webix.extend(options.footer, {\n            borderRightColor:0xEEEEEE, borderBottomColor:0xEEEEEE,\n            backgroundColor: 0xFAFAFA, color:0x666666,\n            height:27, lineHeight:1.2\n        });\n\n        for(var i = 0; i<f_count; i++){\n            var footer = table.tr(footerOps);\n            for(var s=0; s<scheme.length; s++)\n                footer.td(scheme[s].footer[i].toString());\n        }\n    }\n\n    //doc footer\n    if(options.docFooter !== false){\n        var ft = doc.footer();\n        ft.text({\n            color: 0x666666, textAlign:\"center\"\n        }).append((webix.i18n.dataExport.page||\"Page\")).pageNumber().append(\"  \"+(webix.i18n.dataExport.of || \"of\")+\"  \").pageCount();\n    }\n    \n\n    //doc header, configurable\n    if(options.docHeader){\n        if(typeof options.docHeader == \"string\") options.docHeader = {text:options.docHeader};\n        var docHeaderOps = webix.extend(options.docHeader, {\n            color: 0x666666, textAlign:\"right\"\n        });\n\n        var hd = doc.header({paddingBottom:10});\n        hd.text(docHeaderOps.text, docHeaderOps);\n    }\n\n    if (options.docHeaderImage){\n        if(typeof options.docHeaderImage == \"string\") options.docHeaderImage = {url:options.docHeaderImage};\n        var hd = doc.header({paddingBottom:10});\n        var docImageOps = webix.extend(options.docHeaderImage, {\n            align:\"right\"\n        });\n\n        pdfjs.load(options.docHeaderImage.url, function(err, buffer){\n            if (!err){\n                var img = new pdfjs.Image(buffer);\n                var image = hd.image(img, docImageOps);\n            }\n            //render pdf and show in browser\n            var pdf = doc.render();\n            callback(pdf, options);\n        });\n    }\n    else{\n        //render pdf and show in browser\n        var pdf = doc.render();\n        callback(pdf, options);\n    }\n}\n\n})();\n\n\nwebix.protoUI({\n\tname: \"richtext\",\n\tdefaults:{\n\t\tlabel:\"\",\n\t\tlabelWidth:80,\n\t\tlabelPosition:\"left\"\n\t},\n\t$init: function(config) {\n\t\tthis.$ready.unshift(this._setLayout);\n\t},\n\tgetInputNode:function(){\n\t\treturn this.$view.querySelector(\".webix_richtext_editor\"); \n\t},\n\t_button:function(name){\n\t\treturn {\n\t\t\tview: \"toggle\",\n\t\t\ttype: \"iconButton\",\n\t\t\ticon: name, name: name, id:name,\n\t\t\tlabel: webix.i18n.richtext[name],\n\t\t\tautowidth: true, \n\t\t\taction:name,\n\t\t\tclick: this._add_data\n\t\t};\n\t},\n\t_setLayout: function() {\n\t\tvar top = this;\n\n\t\tvar editField = {\n\t\t\tview: \"template\",\n            css: \"webix_richtext_container\",\n            borderless: true,\n\t\t\ttemplate: \"<div class='webix_richtext_editor' contenteditable='true'>\"+this.getValue()+\"</div>\",\n\t\t\ton: {\n\t\t\t\tonAfterRender: function() {\n\t\t\t\t\twebix._event(\n\t\t\t\t\t\ttop.getInputNode(),\n\t\t\t\t\t\t\"input\",\n\t\t\t\t\t\tfunction(){\n\t\t\t\t\t\t\tthis.config.value = this.getInputNode().innerHTML;\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ bind: top }\n\t\t\t\t\t);\n\t\t\t\t\twebix._event( \n\t\t\t\t\t\ttop.getInputNode(),\n\t\t\t\t\t\t\"keyup\",\n\t\t\t\t\t\tfunction(){\n\t\t\t\t\t\t  top._getselection();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tonClick: {\n\t\t\t\twebix_richtext_editor: function() {\n\t\t\t\t\ttop._getselection();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tvar editorToolbar = {\n\t\t\tview: \"toolbar\",\n\t\t\tid:\"toolbar\",\n\t\t\telements: [\n\t\t\t\tthis._button(\"underline\"),\n\t\t\t\tthis._button(\"bold\"),\n\t\t\t\tthis._button(\"italic\"),\n\t\t\t\t{}\n\t\t\t]\n\t\t};\n\n\t\tvar rows = [\n\t\t\teditorToolbar,\n\t\t\teditField\n\t\t];\n\n\t\tif (this.config.labelPosition === \"top\" || !this.config.labelWidth){\n\t\t\teditorToolbar.elements.push({\n\t\t\t\tview:\"label\", label: this.config.label, align:\"right\"\n\t\t\t});\n\t\t\tthis.rows_setter(rows);\n\t\t} else {\n\t\t\tthis.config.borderless = true;\n\t\t\tthis.cols_setter([{ \n\t\t\t\ttemplate: (this.config.label || \" \"),\n\t\t\t\twidth: this.config.labelWidth\n\t\t\t}, {\n\t\t\t\trows:rows\n\t\t\t}]);\n\t\t}\n\t},\n\t_getselection: function() {\n\t\tvar top = this.getTopParentView();\n\t\tvar bar = top.$$(\"toolbar\");\n\t\tvar sel;\n\n\t\tbar.setValues({\n\t\t\titalic:false, underline:false, bold:false\n\t\t});\n\n\t\tif(window.getSelection) {\n\t\t\tsel = window.getSelection();\n\t\t} else {\n\t\t\tsel = document.selection.createRange();\n\t\t}\n\n\t\tfor (var i = 0; i < sel.rangeCount; ++i) {\n\t\t\tvar range = sel.getRangeAt(i);\n\t\t\tif (this.$view.contains(this.getInputNode())){\n\t\t\t\tif (document.queryCommandState(\"bold\")) {\n\t\t\t\t\ttop.$$(\"bold\").setValue(true);\n\t\t\t\t} \n\t\t\t\tif (document.queryCommandState(\"underline\")) {\n\t\t\t\t\ttop.$$(\"underline\").setValue(true);\n\t\t\t\t}\n\t\t\t\tif (document.queryCommandState(\"italic\")) {\n\t\t\t\t\ttop.$$(\"italic\").setValue(true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\trefresh: function() {\n\t\tthis.getInputNode().innerHTML = this.config.value;\n\t},\n\t_execCommandOnElement:function(el, commandName) {\n\t\tvar sel, selText;\n\n\t\tif(window.getSelection()) {\n\t\t\tsel = window.getSelection();\n\t\t\tselText = sel.toString().length;\n\t\t} else {\n\t\t\tsel = document.selection.createRange();\n\t\t\tselText = sel.text.length;\n\t\t}\n\n\t\tif(selText > 0) {\n\t\t\tfor (var i = 0; i < sel.rangeCount; ++i) {\n\t\t\t\tvar range = sel.getRangeAt(i);\n\t\t\t\tif (!sel.isCollapsed) {\n\t\t\t\t\tdocument.execCommand(commandName, false, '');\n\t\t\t\t} else {\n\t\t\t\t\tvar textValue = sel.focusNode.textContent;\n\t\t\t\t\tvar focusEl = sel.focusNode;\n\t\t\t\t\tvar focustext = sel.anchorOffset;\n\t\t\t\t\tvar wordBegining = textValue.substring(0, focustext).match(/[A-Za-z]*$/)[0];\n\t\t\t\t\tvar wordEnd = textValue.substring(focustext).match(/^[A-Za-z]*/)[0];\n\n\t\t\t\t\tvar startWord = focustext - wordBegining.length;\n\t\t\t\t\tvar endWord = focustext + wordEnd.length;\n\n\t\t\t\t\trange.setStart(focusEl, startWord);\n\t\t\t\t\trange.setEnd(focusEl, endWord);\n\t\t\t\t\tsel.removeAllRanges();\n\n\t\t\t\t\twindow.getSelection().addRange(range);\n\t\t\t\t\tdocument.execCommand(commandName, false, '');\n\t\t\t\t}   \n\t\t\t}\n\t\t}\n\t},\n\t_add_data:function() {\n\t\tvar style = this.config.action;\n\t\tvar top = this.getTopParentView();\n\t\tvar editableElement = top.getInputNode();\n\n\t\tif(this.$view.contains(this.getInputNode())){\n\t\t\ttop._execCommandOnElement(editableElement, this.config.action);\n\t\t}\n\t},\n\tfocus: function() {\n\t\tvar editableElement = this.$view.querySelector(\".webix_richtext_editor\");\n\t\teditableElement.focus();\n\t},\n\tsetValue: function(value) {\n\t\tvar old = this.config.value;\n\t\tthis.config.value = value || \"\";\n\n\t\tif (old !== value)\n\t\t\tthis.callEvent(\"onChange\", [value, old]);\n\n\t\tthis.refresh();\n\t},\n\tgetValue: function() {\n\t\tvar value = this.config.value;\n\t\treturn value || (value ===0?\"0\":\"\");\n\t}\n}, webix.IdSpace, webix.ui.layout);\n\n\nglobal.webix = webix;\n\nexport default webix;\n","'use strict';\n\n\nimport webix from \"./webix_clean.js\";\n\nglobal.webix = webix;\n\nexport { webix };\n\nexport default webix;\n"],"names":["global","self","window","webix","assert","test","message","assert_error","assert_config","obj","coll","cells","rows","elements","cols","i","length","log","type","text","expire","debug","assert_core_ready","webix_on_core_ready","assert_level","assert_level_in","assert_level_out","version","codebase","name","cdn","clone","source","f","_function","prototype","extend","base","force","$protoWait","PowerArray","insertAt","call","method","defaults","$init","copy","target","arguments","isArray","from","RegExp","isDate","Date","single","instance","config","_reinit","apply","protoUI","debug_proto","selfname","t","data","ui","origins","params","proto","_webix_type_wait","this","Array","slice","compilation","has_constructor","construct","push","def","isUndefined","key","$skin","result","$ready","_parseSettings","bind","functor","object","require","module","callback","master","promise","defer","then","disabled","resolve","_modules","fullpath","toString","match","substr","link","html","create","rel","href","document","getElementsByTagName","appendChild","exec","ajax","sync","get","responseText","calls","count","callback2","file","code","execScript","eval","wrap","a","delay","setTimeout","$destructed","ret","once","flag","uid","_seed","valueOf","toNode","node","getElementById","toArray","array","toFunctor","str","scope","replace","Object","stringify","origin","toJSON","i18n","parseFormatStr","JSON","_events","_event","b","c","d","inner","event","handler","context","id","info","capture","addEventListener","attachEvent","eventRemove","ev","removeEventListener","detachEvent","details","console","toLowerCase","log_full_time","_start_time_log","time","log_time","fname","debug_code","EventSystem","_evs_events","_evs_handlers","_evs_map","blockEvent","_block","unblockEvent","mapEvent","map","on_setter","$scope","sub","indexOf","callEvent","event_stack","return_value","debug_blacklist","_settings","$eventSource","unshift","remove","hasEvent","stack","parent","removeAt","pos","len","splice","value","find","each","filter","env","strict","webix_strict","https","location","protocol","agent","navigator","userAgent","mobile","touch","isOpera","isIE","all","parseFloat","appVersion","split","isIE8","isEdge","isFF","isWebKit","isSafari","maxHTMLElementSize","isAndroid","isIEMobile","transform","transition","found_index","js_list","css_list","createElement","j","style","cssPrefix","jp","jsPrefix","transitionDuration","translate","transitionEnd","pointerevents","svg","implementation","hasFeature","svganimation","_native_on_selectstart","_style_element","denySelect","onselectstart","stopEvent","allowSelect","index","k","previousSibling","_style_cache","createCss","rule","sufix","addStyle","group","setAttribute","styleSheet","cssText","createTextNode","removeStyle","box","innerHTML","attrs","attr_name","className","getValue","parentNode","removeChild","insertBefore","before","rescue","locate","e","trg","tagName","srcElement","getAttribute","offset","elem","getBoundingClientRect","body","docElem","documentElement","scrollTop","pageYOffset","scrollLeft","pageXOffset","clientTop","clientLeft","top","left","y","Math","round","x","width","offsetWidth","height","offsetHeight","parseInt","offsetTop","offsetLeft","offsetParent","posRelative","offsetX","layerX","layerY","offsetY","touches","pageX","pageY","compatMode","clientX","clientY","preventEvent","preventDefault","returnValue","stopPropagation","cancelBubble","triggerEvent","createEventObject","fireEvent","createEvent","initEvent","dispatchEvent","addCss","check","removeCss","getTextSize","css","class","max","download","filename","objUrl","msSaveBlob","URL","createObjectURL","click","revokeObjectURL","_getClassName","baseVal","setSelectionRange","start","end","focus","textRange","createTextRange","collapse","moveEnd","moveStart","select","getSelectionRange","selectionStart","selectionEnd","bookmark","selection","createRange","getBookmark","moveToBookmark","ready","_ready","_ready_code","debug_ready","temp","join","doit","webix_ready","concat","readyState","locale","editStop","onmousemoving","fn","er","state","val","next","now","setImmediate","cb","v","fire","reject","p","fail","finish","thennable","ref","ec","cn","cnt","undefined","TypeError","done","nodeify","spread","list","l","promiz","fcall","args","shift","nfcall","err","RemoteContext","url","_proxy","_queue","_url","_key","_process","parse","getApi","_getProxy","$key","$vars","_parse","api","prefix","_proxy_call","_call","_deffer","_start_queue","_timer","_run_queue","defs","$sync","$name","$args","pack","_pack","post","res","results","json","error","_sync","$context","xhr","pr","payload","remote","scripts","src","skin","air","topLayout","barHeight","tabbarHeight","rowHeight","toolbarHeight","listItemHeight","inputHeight","inputPadding","menuHeight","menuMargin","labelTopHeight","inputSpacing","borderWidth","sliderHandleWidth","sliderPadding","sliderBorder","layoutMargin","space","wide","clean","head","line","toolbar","form","layoutPadding","tabMargin","popupPadding","calendarHeight","padding","optionHeight","web","accordion","tabTopOffset","clouds","tabOffset","tabBottomOffset","terrace","metro","buttonHeight","light","glamour","unitHeaderHeight","calendar","headerHeight","timepickerHeight","customCheckbox","customRadio","flat","propertyItemHeight","accordionType","compact","material","contrast","set","$active","view","webix_skin","Destruction","_destructor_handler","destructors","destructor","_last_editor","editCancel","getChildViews","_destroy_with_me","views","$id","getTopParentView","_destroy_child","_htmlmap","_htmlrows","_html","_contentobj","_viewobj","unbind","$view","_dataobj","UIManager","_view","$proxy","release","_final_destruction","_popups","_cache","_csp_cache","newlines","quotes","slashes","escape","&","<",">","\"","'","`","badChars","escapeChar","chr","template","teststr","temp_res","search","s1","s2","s3","common","s","charAt","CodeParser","collapseNames","sort","lastPos","addStr","n0","n1","Function","empty","types","default","baseType","Settings","define","property","_parseSeetingColl","_define","setter","initial","settings","_mergeSettings","proxy","extra","init","$parse","parts","load","connector","connectorName","saveAll","updates","dp","ids","action","operation","webix_security","securityKey","loader","xml","_processError","actions","hash","status","sid","newid","tid","processResult","save","u","rest","update","_save_logic","query","mark","mode","put","del","headers","Content-Type","faye","clientId","selfid","client","subscribe","ignore","add","item","getItem","refresh","publish","indexdb","db","_get_db","store","createObjectStore","keyPath","autoIncrement","upgrade","_index","indexedDB","webkitIndexedDB","mozIndexedDB","open","onupgradeneeded","onerror","onblocked","onsuccess","transaction","objectStore","openCursor","$callback","req","binary","ext","pop","response","options","dataurl","getXHR","XMLHttpRequest","_send","success","_header","json_mode","found","FormData","encodeURIComponent","_response","responseType","setRequestHeader","onreadystatechange","debug_time","aborted","_xhr_aborted","owner","is_error","_data","_timeout","timeout","send","_ajax_queue","DataDriver","tagToObject","toObject","rawxml","XPathResult","responseXML","fromString","patch","num","header","values","field","display","submit","AtomDataLoader","waitData","datatype","_load_when_ready","_ready_for_data","url_setter","data_setter","driver","_onLoad","_onLoadError","_syncData","_call_onready","parsed","record","getRecords","getDetails","setValues","_onLoadContinue","$onLoad","xhttp","_check_data_feed","dataFeed","_ignore_feed","parseDates","isodate","getOptions","collections","getInfo","size","total_count","child","firstChild","tag","jsarray","idColumn","csv","row","stringToArray","cell","_isValidXML","xpath","records","assignTypes","path","nodeName","ownerDocument","col","evaluate","ANY_TYPE","iterateNext","selectNodes","z","hasSubTags","nodeType","childNodes","attributes","nodeValue","wholeText","xmlString","DOMParser","parseFromString","ActiveXObject","loadXML","debug_load_event","error_text","logger","alert","BaseBind","format","$$","_initBindSource","getBindData","BindSource","_bind_ready","addBind","_bind_source","debug_bind","target_id","_bind_refresh_handler","touchable","isVisible","removeBind","_on_sync","_bind_updated","old_render","render","_in_bind_processing","getValues","setBindData","validate","setDirty","_bind_hash","_ignore_binds","_bind_specific_rules","saveBatch","_do_not_update_binds","_update_binds","setValue","getCursor","updateItem","_bind_update","CollectionBind","ValueBind","RecordBind","_bind_update_common","silent","clear","DataValue","DataRecord","pod","_cursor","sel","getSelectedId","setCursor","oldid","refreshCursor","getBranch","importData","defaultData","AtomRender","_toHTML","$empty","cfg","debug_render","content","_backbone_sync","pull","template_setter","SingleRender","templateStart","templateEnd","customize","_hotkeys","_focus_time","_controls","enter","tab","esc","up","down","right","pgdown","pagedown","pgup","pageup","home","insert","delete","backspace","meta","win","mac","multiply","subtract","decimal","divide","scrollock","pausebreak","numlock","5numlocked","capslock","_inputs","input","button","textarea","_enable","_focus_click","_keypress","_focus_tab","getFocus","_focus_action","_focus_was_there","setFocus","only_api","blur","applyChanges","element","_applyChanges","hasFocus","_focus","dont_clear","canFocus","getNode","isEnabled","_moveChildFocus","check_view","_is_child_of","_focus_logic","_translation_table","getParentView","_keypress_timed","_isNumPad","which","keyCode","ctrl","ctrlKey","shiftKey","alt","altKey","metaKey","codeid","_keycode","clearTimeout","_key_press_timeout","keyPressTimeout","String","fromCharCode","is_any","_check_keycode","dir","marker","$fmarker","_tab_logic","_tab_time","_custom_tab_handler","_in_edit_mode","editNext","activeElement","getTop","getNext","_inner_call","p_cells","getPrev","addHotKey","keys","_parse_keys","letter","removeHotKey","func","_process_calls","temp_result","controls","toUpperCase","getFormView","_skipSubmit","setPosition","_hide","IdSpace","_elements","_translate_ids","_get_self","_run_inner_init_logic","_run_after_inner_init_logic","innerId","_prev_global_col","_global_collection","onitemclick","resize","_ui_creation","multiset","container","_correctId","top_node","body_child","$topView","_inner","$apiOnly","_fixHeight","_hidden","_container","_appendDom","_replace","_remove","fullscreen","position","skipResize","adjust","_body_cell","_deleteIds","animate","pobj","aniset","direction","cloneNode","formLine","breakLine","animateView","stateHandler","getHTML","el","currentStyle","getComputedStyle","currentState","newState","tempParent","_detectScrollSize","div","clientWidth","110","120","130","140","150","160","170","180","190","200","210","220","230","floor","skinobj","$customScroll","scrollSize","_uid","_namecount","Touch","limit","$freeze","logic","include","children","edit_open_time","wactiv","getInputNode","scrollIntoView","_delays","hasMethod","zIndex","zIndexBase","align","headerlayout","layout","multiview","spacer","UIExtension","webix_view","_parent_cell","gravity","base_id","prev_id","hidden","_hidden_render","_hidden_hash","_disable_cover","disable","_disabled_view_pos","getPropertyValue","enable","removeAttribute","disabled_setter","container_setter","css_setter","id_setter","oldvalue","$setSize","last","_last_size","debug_size_box","$width","_content_width","_scroll_y","$height","_content_height","_scroll_x","flex","$getSize","dx","dy","minWidth","maxWidth","minHeight","maxHeight","isNaN","show","animate_settings","_show","_render_hidden_views","ui_to_render","_onKeyPress","role","hidden_setter","hide","clientHeight","sizes","_responsive_exception","_child_sizing_active","_responsive_tinkery","resizeChildren","_set_inner","border_not_set","borderless","bottom","_borders","baseview","debug_size_indent","debug_size_step","debug_size_box_start","comp","debug_size","debug_size_box_end","_parse_cells","_layout_sizes","_responsive","isolate","rows_setter","_vertical_orientation","_collection","cols_setter","whiteSpace","_cells","new_view","prev_node","_fix_vertical_layout","_recollect_elements","verticalAlign","addView","removeView","_beforeRemoveView","getCleanValues","reconstruct","_hiddencells","_signal_hidden_cells","nx","ny","_set_child_size","showBatch","preserve","visibleBatch","batch","collection","$nospace","_parse_cells_ext_end","_bubble_size","prop","vertical","fixed","fixed_count","_sizes","_master_size","_desired_size","self_size","responsive","_set_child_size_a","min","ps","_set_size_delta","_set_size_gravity","_responsive_hide","_responsive_width","_responsive_height","_responsive_marker","autoheight","_responsive_show","responsiveCell","_responsive_cells","_paddingX","_margin","auto","_next","_first","_parse_cells_ext","_parse_once","margin","_paddingY","paddingX","paddingY","_padding","_hasBorders","_render_borders","_beforeResetBorders","baselayout","_afterResetBorders","correction","scroll","structure_changed","n","borderTopWidth","borderBottomWidth","borderLeftWidth","borderRightWidth","_cleanlayout","maxlength","_fix_container_borders","s_inner","s_next","contrstyle","contrpadding","type_setter","_margin_set","_padding_set","FlexLayout","w","h","g","st","paddingTop","paddingBottom","paddingLeft","paddingRight","flexBasis","flexGrow","whs","scrollHeight","body_setter","align_setter","_x_align","_y_align","_p_align","getBody","marginLeft","ceil","marginTop","html_element","animation","subtype","animation_copy","_has_animation","_wait_animate","isSupported","$testmode","noanimate","current","defAniPos","keepViews","nextSibling","duration","timing","skew_options","scale_type","css_general","css_transition","css_transform","transitionEnded","MouseEvents","_clickstamp","_dbl_sensetive","_item_clicked","_mouse_action_extend","onClick","onContext","onDblClick","onMouseMove","on_click","_onClick","on_dblclick","_onDblClick","on_context","_onContext","on_mouse_move","_enable_mouse_move","_mouse_move_enabled","_onMouse","_mouse_move_timer","step","stamp","_mouseEvent","movementY","movementX","_onMouseMove","_onMouseOut","mouseEventDelay","pair","processed","vid","wid","w_view","_id","_headobj","_headlabel","_headbutton","_bodyobj","_head_cell","border","header_setter","headerAlt_setter","fixedHeight","collapsed","_getHeaderSize","webix_accordionitem_header","_toggle","webix_accordionitem_header_v","collapsed_setter","_canCollapse","_collapse","sibl","expand","_expand","_afterOpen","$noresize","headerAlt","headerAltHeight","_last_set_header_size","headerSize","_last_size_y","borderlessAccordion","panelClass","multi","panel","_skin_render_collapse","_accLastChild","DragControl","_drag_masters","addDrop","master_mode","webix_drop","_getCtrl","webix_master","_createTouchDrag","dragCtrl","_getActiveDragMaster","_getDragItemPos","createDrag","ctx","_drag_context","x_offset","y_offset","addDrag","webix_drag","mouse","_preStart","_active","_saved_event","_preStartFalse","destroyDrag","evobj","_start_pos","_webix_drag_mm","move","_startDrag","_webix_drag_mu","_clean_dom_after_drag","_long_touched","abs","sendSignal","_moveDrag","_stopDrag","_last","$drop","$dragOut","still_drag","customPos","$dragPos","_skip","elementFromPoint","touch_event","_checkLand","_landing","$dragIn","signal","active","getMaster","getContext","dragCtl","drag_container","$dragCreate","_setDragOffset","$drag","_skipDropH","_skip_mark","$dragDestroy","m","itemPos","DataMove","tindex","tobj","new_id","newId","_externalData","_next_move_index","nid","new_index","getIndexById","$blockRender","order","moveUp","moveDown","moveTop","moveBottom","newdata","$template","externalData","Movable","move_setter","_move_admin","drag","Modality","_modal_set","_modal_cover","_previous_modality","_modality","overflow","_ignore_clicks","topmost","toFront","modal","_modal","popups","click_view","zIndex_setter","point","relative","innerWidth","innerHeight","fin_x","fin_y","point_y","point_x","fit","autofit","nochange","delta_y","delta_point","deltax","deltay","_set_point","_hide_point","_setPosition","_hide_timer","autofocus","_prev_focus","showpopup","_hide_callback","contains","_hide_sub_popups","close","_inner_body_set","head_setter","getHead","_topPositionCallback","headMinWidth","head_size","headHeight","_point_element","resize_setter","_resizeHandlers","_renderResizeHandler","_rwHandle","_wrDown","_showResizeFrame","_resizeFrame","_wsReady","_resizeHandlersMove","_wrMove","_resizeHandlersUp","_wrUp","progress","_wsProgress","yCount","navigation","filter_setter","etemp","_get_extendable_cell","_set_on_popup_click","_getInputDiv","_show_selection","_old_text","_preselectMasterOption","$setValueHere","options_setter","getItemText","_get_visible_text","_last_input_target","setMasterValue","setValueHere","getMasterValue","getItemId","getList","textValue","getSuggestion","_suggest_after_filter","fitMaster","date","input_setter","linkInput","webix_master_id","readonly","_suggestions","_non_ui_mode","_key_timer","_tab_key","_escape_key","$enterKey","_navigate","_last_delay","_resolve_popup","_dont_unfilter","$customWidth","_zoom_level","popup","showItem","exists","unselect","getFirstId","$prepareValue","getSelectedDate","moveSelection","getSelectedItem","getVisibleDate","HTMLOptions","addOption","_moveSelection","_getInputNode","_blur","inp","_labelTopHeight","_borderWidth","$renderInput","badge","awidth","aheight","label","$cssName","_calc_size","hotkey_setter","control","_addElementHotKey","tooltip_setter","_getBox","title","_types","_set_inner_size","_set_inner_size_next","htmlbutton","prev","imageButton","imageButtonTop","image","imageTop","icon","iconButton","iconTop","iconButtonTop","_findAllInputs","tagNames","inputs","_disabledTabIndex","labelPosition","$compareValue","_rendered_input","$setValue","_pattern","$getValue","_sqrt_2","sqrt","arrow","arrowEdge","autowidth","_calck_input_size","_input_width","inputWidth","_input_height","_inputHeight","bheight","cheight","dheight","handle","cssFloat","textAlign","$render","tooltip","_init_once","_handle_tab_click","webix_all_segments","webix_all_tabs","webix_inp_counter_next","webix_inp_counter_prev","webix_inp_combo","webix_inp_checkbox_border","toggle","webix_inp_checkbox_label","webix_inp_radio_border","webix_inp_radio_label","webix_tab_more_icon","getPopup","webix_tab_close","removeOption","_check_options","opts","_get_div_placeholder","placeholder","setHTML","_allowsClear","_init_onchange","suggest","newvalue","_inputSpacing","_onBlur","$renderIcon","aria","addSection","relatedView_setter","relatedAction","viewid","relatedView","validateEvent_setter","required","rules","isNotEmpty","_validate","bottomLabel_setter","bottomPadding","_getInvalidText","invalidMessage","setBottomText","bottomLabel","invalid","_restorePadding","heightInc","labelWidth","_get_input_width","iconWidth","_render_div_block","inputAlign","_baseInputHTML","$renderLabel","labelAlign","labelTop","labelHeight","div_start","editable","suggest_setter","_show_view","_filterOptions","optionWidth","optionIndex","pages","_setNextVisible","_setOptionVisibility","option","hideOption","showOption","webix_input_icon","isPressed","onLabel","offLabel","lastChild","onIcon","offIcon","optview","DataCollection","decreaseValue","increaseValue","Infinity","_keyshift","new_value","checkValue","uncheckValue","rightlabel","labelRight","checked","ch","customCheckbox_setter","isChecked","eachid","newline","optlabel","rd","customRadio_setter","popupWidth","getText","_revertValue","_suggest_config","_reset_value","richselect","_init_popup","timeIcon","stringResult","timepicker","icons","timeMode","_formatDate","parseTimeFormatDate","parseFormatDate","setHours","setMinutes","getTime","_formatStr","timeFormatStr","fullDateFormatStr","dateFormatStr","_set_visible_text","equal","format_setter","dateToStr","strToDate","timeFormatDate","fullDateFormatDate","dateFormatDate","formatStr","parseTimeFormatStr","_getColorNode","backgroundColor","datepicker","RenderStack","_render_change_id","_call_onclick","item_setter","_marks","_toHTMLObject","old","getItemNode","search_id","scrollTo","txmin","txmax","tymin","tymax","getScrollState","_setItemActive","cont","getNextId","_renderobj","getRange","ValidateData","clearValidation","_clear_invalid","failed","_validate_details","isHidden","validateHidden","validateDisabled","$obj","$all","complexData","subresult","subview","validator","_mark_invalid","ValidateCollection","_validate_init_once","rules_setter","clearMark","removeMark","addMark","isEmail","isNumber","MapCollection","_create_scheme_init","_scheme_init_order","columns","_build_data_map","_process_field_map","_scheme_init","_process_single_map","_map_options","options_view","_bind_collection","loadNext","ij","_collection_accesser","optionslist","_bind_accesser","refreshFilter","separator","Undo","_undoHistory","_undoCursor","undo_setter","_init_undo","to","_draggedItem","branch","$index","getBranchIndex","_addToHistory","_deletedItem","$branch","serialize","oldId","_skipHistory","undo","_skipCursorInc","ignoreUndo","removeUndo","_undoAction","parentId","$parent","DataLoader","_feed_last","DataStore","_call_onclearall","_call_on_config","feed","_feed","_load_count","_feed_common","final_callback","_feed_callback","getState","filterValue","datathrottle","_throttle_request","datafetch","_maybe_loading_already","removeMissed_setter","_removeMissed","_init_dataprocessor","save_setter","scheme_setter","scheme","dataFeed_setter","filtervalue","clearAll","filterobj","urldata","_ready_was_used","soft","abort","DataMarks","addRowCss","hasCss","getMark","clearCss","setDriver","_filter_order","recs","_inner_parse","_scheme_group","_group_processing","_not_grouped_order","_scheme_sort","subload","marks","_scheme_update","delid","changeId","changeTrack","_skip_refresh","$min","startOffset","$max","endOffset","getIndexRange","sindex","getIdByIndex","_move_inner","_scheme","_scheme_save","$save","$change","$update","_scheme_serialize","$serialize","$group","$sort","_make_full_copy","_filter_branch","_extraParser","0","_datadriver_child","_set_child_scheme","unsync","debug_sync_master","debug_bind_master","_sync_source","sync_logic","_skip_next_sync","_sync_events","_back_sync_handler","data_size","original_index","getLastId","getPrevId","by","as","parameters","_sort_core","sorter","sorting","pre","neworder","_filter_reset","_filter_core","freeze","first","_filterMode","_obj_array","_methodPush","provideApi","eventable","onbeforesort","onaftersort","onbeforeadd","onafteradd","onbeforedelete","onafterdelete","ondataupdate","old_css","$css","current_css","_dir","_by","server","int","string_strict","string","raw","Scrollable","_one_time_scroll","scroll_setter","_refresh_scroll","_touch_scroll","CustomScroll","overflowX","overflowY","_onoff_scroll","_get_matrix","_set_matrix","scrollSpeed","scrollWidth","_clear_artefacts","_scroll_end","page","webix_pager_item","_remove_master","$master","_animate","selected","pager","_clone","_refresh_clone","newPage","setPage","old_page","old_limit","old_count","apiOnly_setter","_pgInAnimation","_pgAnimateTimeout","flip","snode","_body","onode","PagingAbility","pager_setter","check_pager_sizes","repeat","autosize","getVisibleCount","_count_pager_index","$pagesize","ui_pager","_count_pager_total","level","_pager","$level","getPage","getPager","aria-atomic","_hideHandler","_visible","_disabled","positionX","positionY","AutoTooltip","col_mode","showEvent","_mouseEventX","_mouseEventY","getColumnConfig","column","srcElements","area","hideEvent","expandNames","lastIndex","Values","_inner_setValues","_is_form_dirty","_values","isDirty","getDirtyValues","_inner_getValues","defaultValue","markInvalid","_form_classname","_form_vertical","onbeforetabclick","onaftertabclick","onchange","elementsConfig","_rec_apply_settings","nextsettings","_template_types","_correct_width_scroll","section","onClick_setter","_render_me","_not_render_me","_probably_render_me","src_setter","content_setter","setContent","_template_resize_timer","_get_auto_height","getIframe","getWindow","contentWindow","OverlayBox","showOverlay","_overlay","hideOverlay","_resizeChildren","_native_scroll","cx","cy","desired_size","self_sizes","scroll_size","custom","showView","topPos","TreeRenderStack","_toHTMLItem","_toHTMLItemObject","_toHTMLLevel","leaves","_tree_branch_render_state","_obj","leafs","getNextSiblingId","_branch_render_supported","SelectionModel","_selected","_data_updated","_data_loaded","_data_filtered","_select_check","_id_changed","_set_noselect","multiselect","_noselect_element","loadBranch","$selected","_select_mark","need_unselect","_silent_selection","unselectAll","_refresh_selection","selectAll","isSelected","as_array","_is_mass_selection","TreeDataMove","_check_branch_child","target_parent","$child","copy_data","tbranch","sbranch","$count","_set_level_rec","_drag_pause","$dropAllow","new_data","TreeDataLoader","_sync_hierarchy","_feed_commonA","_sync_to_order","TreeStore","showSubItems","filterMode_setter","filterMode","_filter_branch_rec","allow","child_run","openParents","getParentId","newsub","eachOpen","getPrevSiblingId","getFirstChildId","isBranch","parse_name","pItem","pBranch","webix_kids","parent_branch","itemid","_sync_each_child","getTopRange","eachChild","eachSubItem","eachLeaf","bset","pid","refresh_parent","_rec_remove","_filter_removed","out","items","TreeType","checkbox","nocheckbox","folder","TreeAPI","openAll","closeAll","_tree_check_uncheck","threeState","_tree_check_uncheck_3","isBranchOpen","getOpenItems","_repeat_set_state","tree","setState","TreeClick","webix_tree_open","webix_tree_close","webix_tree_checkbox","TreeCollection","AutoScroll","_auto_scroll","yscroll","xscroll","dragscroll","reset","sense","topSplit","topSplitPos","_cellPosition","columnId","_auto_scrollTo","_auto_scroll_delay","DragOrder","_do_not_drag_selection","DragItem","_drag_order_stored_left","_drag_order_complex","fragile","xdrag","_last_sort_dnd_node","start_id","_auto_scroll_force","_header_height","_initHandlers","$dragMark","drag_setter","_inner_drag_only","_target_to_id","_context_to_move","hash_id","_start_context","$dragHTML","_marked","Group","GroupStore","_not_grouped_pull","_group_level_count","ungroup","skipRender","GroupMethods","sum","summ","some","any","_reset_groups","_ungroup_tree","_group_prop_accessor","acc","stats","_group_tree","_any","groups","labels","$row","topbranch","current_id","ancestor","newitem","_formath","footer","$footer","_fix_group_levels","toporder","clipbuffer","_area","_blur_id","_ctrl","_paste","_isSelectRange","getSelection","last_active","getEditor","CopyPaste","clipboard_setter","templateCopy","clipboard","modify","templateCopy_setter","KeysNavigation","_set_focusable_item","querySelector","_navigation_helper","x_layout","xCount","_parent_menu","_hide_sub_menu","_skip_item","getSubMenu","_mouse_move_activation","navigation_setter","_global_nav_grid_hotkeys","$fixEditor","editor","webix_tree_item","activeTitle","templateCommon","classname","webix_selected","TreeStateCheckbox","_init_render_tree_state","updated","_setThirdState","threeState_setter","parents","checkedParents","_getAllLeaves","_setParentThirdState","_setCheckboxIndeterminate","chElem","indeterminate","itemId","checkedCount","unsureCount","needrender","getChecked","_correctThreeState","checkItem","uncheckItem","_checkUncheckAll","checkAll","uncheckAll","_icon_src","lines","lines_level","branch_id","parent_id","pbranch","NavigationButtons","_moveActive","_showNavItem","_navPanel","_renderPanel","_renderNavItems","_renderNavButtons","_setLinkEventHandler","bindId","_linkAttr","_showPanelBind","_prevNavButton","_nextNavButton","inc","_active_cell","setActiveIndex","linkAttr","_clearPanel","tabindex","buttons","aria-label","prevTab","nextTab","_checkOptions","paper","papers","modes","fits","_beforePrint","docHeader","_getHeaderFooter","docFooter","cssString","_afterPrint","_print","doc","print","printPPI","printMargin","a4","a3","portrait","landscape","A3","A4","$printView","$customPrint","CustomPrint","htmlOnly","_prePrint","tableData","_getTableArray","table","_getTableHTML","prerender","nobreaks","_getPageWidth","newTableStart","rownum","colnum","_getVisibleRange","_dx","tableArray","colrow","cellValue","_itemClassName","txt","forEach","tableHTML","tr","td","span","colspan","colSpan","rowspan","rowSpan","br","_listClassName","_auto_resize","webix_list_item","_no_animation","_one_height","_auto_height_calc","_auto_width_calc","widthSize","heightSize","_onClear","_nested_cursor","_nested_chain","_in_animation","_is_level_down","getOpenState","after","lastChain","_prev_nested_chain_length","_back_scroll_states","next_div","animArr","templateBack_setter","templateBack","templateItem_setter","templateItem","templateGroup_setter","templateGroup","grouplist","uniteBy_setter","uniteBy","$unitValue","units","_setUnits","_getUnitRange","getUnits","getUnitList","$unit","templateStartHeader","templateHeader","unit","EditAbility","editaction","_editors","_edit_open_time","_refocus_inline_editor","_init_edit_events_once","_refocus_try","newnode","range","$inline","_locateInput","editable_setter","popupType","_changeEditorId","edit","_reset_active_editor","_component_specific_edit_init","_handle_live_edits","liveEdit","_set_new_value","_show_editor_form","realform","_get_editor_type","editors","_init_editor","_live_edits_handler","_on_editor_change","getEditorValue","_get_edit_config","editValue","_addEditor","_sizeToCell","afterRender","_locate_cell","_removeEditor","destroy","focusEditor","ed","_edit_stop","cancel","_editStop","_for_each_editor","inline","validateEditor","getEditState","editor_next","_find_cell_next","_after_edit_next","init_suggest","create_suggest","boxobj","getLabel","inline-checkbox","inline-text","rec","isplain","createPopup","$popup","popupInit","color","_is_string","combo","_create_suggest","_shared_suggest","_suggest","showPopup","_initial_value","sobj","_initial_text","password","VirtualRenderStack","_render_visible_rows","_unrendered_area","ind","_y","_render_delayed","_wait_for_render","_create_placeholder","viewport","_max","_from","_height","_filled","holder","holder_row","nextpoint","loading","delta","delta2","new_space","loadahead","_top","sizeToContent","_after_init_call","webix_dataview_item","templateLoading","_calck_autoheight","autoheight_setter","_autowidth","_recalk_counts","htmltable","_webix_skip","getConfig","_de_json","_get_attrs","attr","scrollStep","scrollPos","scrollVisible","zoom","_onscroll","_last_set_size","_last_scroll_pos","_check_quantum","_zoom_limit","scrollWidth_setter","scrollHeight_setter","sizeTo","pointerEvents","getScroll","getSize","svalue","_onscroll_inner","activeArea","x_mode","_x_scroll_mode","_on_wheel","_add_touch_events","pointerEnabled","pointerType","_get_context_m","_start_scroll_pos","_current_context","deltaMode","detail","wheelDelta","deltaX","deltaY","_scroll_trg","Number","sign","toFixed","decimalSize","int_value","groupSize","groupDelimiter","decimalDelimiter","numToStr","startOnMonday","weekStart","getDay","datePart","monthStart","setDate","yearStart","setMonth","dayStart","utc","getDate","getMonth","getFullYear","dayShort","dayFull","monthShort","monthFull","getHours","getMinutes","pm","am","getSeconds","getMilliseconds","getISOWeek","mask","splt","monthShort_hash","monthFull_hash","UTC","ndate","nday","first_thursday","year_number","ordinal_date","getUTCISOWeek","_correctDate","d0","checkFunc","incorrect","getYear","setYear","setSeconds","setMilliseconds","timePart","getTimezoneOffset","isHoliday","day","_dateMethods","parseFormat","parseTimeFormat","numberFormat","priceFormat","_price_format","_price_settings","setLocale","locales","helpers","price","priceSettings","intFormat","dateFormat","timeFormat","longDateFormat","fullDateFormat","fileSize","hours","minutes","today","dataExport","of","PDFviewer","automaticZoom","actualSize","pageFit","pageWidth","pageHeight","navMonth","navYear","navDecade","monthFormat","yearFormat","hourFormat","minuteFormat","removeItem","headermenu","openGroup","closeGroup","closeTab","showTabs","resetTreeMap","navTreeMap","multitextSection","multitextextraSection","showChart","hideChart","resizeChart","richtext","underline","bold","italic","leftSplit","rightSplit","columnWidth","minColumnWidth","minColumnHeight","fixedRowHeight","scrollAlignY","scrollX","scrollY","headerRowHeight","webix_richfilter","webix_table_checkbox","checkboxRefresh","webix_table_radio","eachRow","rowid","_top_id","_footer","_call_onparse","_first_render","_columns","_headers","_footers","_rows_cache","_active_headers","_filter_elements","_footer_height","_config_table_from_file","_config_options_from_file","_restore_scroll_state","_refresh_any_header_content","_clean_config_struct","_adjust_rows","_render_initial","_scrollSizeX","_scrollSizeY","rowLineHeight","_refresh_tracking_header_content","autoConfig","_dtable_fully_ready","_autoDetectConfig","_define_structure","_render_timer","_apply_headers","experimental","_repaint_single_row","_check_rendered_cols","_dtable_height","_get_total_height","_set_split_sizes_y","_hidden_column_order","_render_timer_id","_columns_pull","_hidden_column_hash","colls","refreshColumns","cssFormat","_normalize_headers","_define_structure_and_render","attached","_rightSplit","_dtable_width","nr","nl","last_index","_create_scrolls","_set_columns_positions","_set_split_sizes_x","_render_header_and_footer","_header_fix_width","_refreshHeaderContent","_summ","_render_header_section","refreshHeaderContent","_size_header_footer_fix","_last_sorted","markSorting","_last_order","_getHeaderHeight","rotate","heights","_find_header_content","sec","alltd","getHeaderContent","datafilter","getHelper","_summ_next","_render_subheader","contentId","_has_active_headers","hcss","cell_height","sheight","header_css","showItemByIndex","row_ind","column_ind","_get_y_range","_getHeightByIndexSumm","_top_split_height","_getHeightByIndex","_dtable_offset_height","_y_scroll","_get_x_range","_center_width","_x_scroll","showCell","getColumnIndex","_scrollTo_touch","_getScrollState_touch","diff","_render_scroll_shift","_render_scroll_diff","_scrollLeft","_scrollTop","_left_width","onscroll","_scroll_with_header","_right_width","trackedOnly","cellTrackOnly","getOnly","byId","trackCells","headerContent","_set_size_scroll_area","hdx","_header_scroll","_footer_scroll","_update_scroll","hasX","hasY","scrx","scry","vscroll","_onscroll_x","vscroll_view","_onscroll_y","_getNodeBox","rid","cid","xs","xe","ye","ys","zone","_id_to_string","idOnly","cs","_locate","rind","cind","cdiv","_yr0","_correctScrollSize","center","_updateColsSizeSettings","setColumnWidth","skip_update","_setColumnWidth","by_user","_getRowHeight","$subopen","$subHeight","index1","index2","leftcolumn","split_column","_render_scroll_top","setRowHeight","rowId","old_height","scrollChange","conts","_minimize_dom_changes","full","xind","xend","dep","xdef","rowindex","x_range","_getValue","_getCss","x_scroll","_clearColumnCache","xr","yr","_hideColumn","_render_full_rows","_renderColumn","_check_and_render_full_rows","_check_load_next","_delete_full_rows","_rows_cache_start","_rows_cache_end","_rows_body","_render_full_row_some","$sub","paging","fetch","_last_valid_render_pos","_data_request_flag","_check_rows","_run_load_next","conf","_preserveScrollTarget","columnNode","newNode","_scrollWheelTrg","row_id","column_id","getCss","per_css","row_css","$cellCss","mark_marker","css_marker","_select_css","radio","editIcon","trashIcon","_yr2","_yr1","total","_render_single_cell","wanted_height","desired","minwidth","oldw","oldh","_on_header_click","_sort","_sort_sign","_get_header_cell","maybe","col_id","$text","_mouseEventCall","css_call","isBody","_datatable_overlay","mapCells","startrow","startcol","numrows","numcols","col_ind","fillspace","textWaitDelay","summColumn","masterCheckbox","onclick","uncheck","textFilter","component","registerFilter","_comp_id","_on_key_down","_filter_timer","filterByAll","selectFilter","compare","collectValues","_on_change","serverFilter","$server","serverSelectFilter","numberFilter","prepare","equality","intvalue","_greater","_lesser","_equal","dateFilter","reverse","datatable","isColumnVisible","originvalue","inputvalue","_multi_compare","_runServerFilter","itemValue","inputValue","getFilter","checks","_collectValues","hover_setter","_hover_initialized","_last_hover","removeRowCss","hover","_delayed_hover_set","select_setter","_selections","_commonselect","_reinit_selection","webix_cell","_click_before_select","_data_cleared","_data_synced","_selected_rows","_selected_areas","_select_key","_selected_pull","asArray","plain","_select","_unselect","_clear_selection","_finalize_select","_post_select","clearSelection","selectRange","_post_unselect","_add_item_select","_selectRange","_mapSelection","mapSelection","end_row_id","row_start_ind","row_end_ind","end_column_id","col_start_ind","col_end_ind","column_start_ind","column_end_ind","getSelectArea","removeSelectArea","sind","eind","srow","erow","_extendAreaRange","addSelectArea","refreshSelectArea","blockselect_setter","_block_sel_flag","_bs_move","_bs_down","_bs_up","_bs_ready","_bs_progress","_update_block_selection","_childOf","_rs_process","_bs_position","_block_panel","_bs_select","theend","_locate_cell_xy","_bs_do_select","startx","starty","endx","endy","startn","endn","startWidth","endWidth","_getTopSplitOffset","_bs_start","blockselect","inTopSplit","splitPos","startIndex","startPos","_key_property","_dragobj","_originobj","cursor","_moveev","_onmove","_upev","_onup","_last_result","eventPos","resizeRow_setter","resizeColumn_setter","_rs_init_flag","_rs_move","_rs_down","_rs_up","_rs_ready","_rs_start","_rs_progress","resizearea","_rs_end","newsize","oldwidth","oldheight","element_class","in_body","in_header","resizeRow","headerOnly","resizeColumn","_cursor_timer","_mark_resize_ready","_last_cursor_mode","delimiter","sep","_split_clip_data","_substr_count","substring","reg","TablePaste","_sel_to_clip","_clip_to_sel","_get_sel_text","block","leftTop","storage","local","localStorage","setItem","session","sessionStorage","cookie","domain","expires","toUTCString","getRaw","check_name","a_all_cookies","a_temp_cookie","cookie_value","unescape","cookies","DataState","cols_n","any_filter","hihash","hideColumn","hikey","reorder","contentid","touchInit","MSCSSMatrix","radiusX","setMouse","$touch","_get_context","longTouchDelay","scrollDelay","deltaStep","speed","ellastic","_limited","_touchstart","_touchmove","_touchend","_fire_fast_event","_scroll","_prev_context","_scroll_context","_scroll_mode","_scroll_node","_scroll_stat","_delta","_x_moment","_y_moment","_time","_css_button_remove","_long_touch_timer","_was_not_moved","_axis_x","_axis_y","_active_transion","_get_delta","$scroll","cnx","_correct_minmax","px","cny","py","adjustScroll","_scroll_master","_sync_scroll","_set_scroll","_translate_event","click_event","_set_scroll_pos","_axis_check","_x","_get_event_view","scale","_init_scroller","edx","edy","xv","yv","_in_anim_frame","setAnimationFrame","trans","matrix","tmatrix","WebKitCSSMatrix","_tmatrix","tkey","_sync_pos","_init_scroll_node","scroll_enabled","_create_scroll","dim","visibility","_long_move","_stop_old_scroll","_stop_scroll","_is_scroll","$touchCapture","_long_touch","stop_mode","_get_sizes","locate_mode","msPointerEnabled","_touchNative","_touch","scrollMode","elastic","isScrollX","isScrollY","_fix_f","_adjustColumns","_resizeColumns","user","_adjustColumn","fill","colfil","_fillColumnSize","request","_getColumnConfigSize","adjustColumn","adjustRowHeight","heightsArr","math_setter","_math_init","_math_pref","_parse_row_math","_parse_math","_exprs_by_columns","_parse_cell_math","_math_recalc","_calculate","_remove_old_triggers","depends","_set_original_value","math","_parse_relative_expr","expr","$r","$c","_get_calc_value","_in_math_trace","_start_math_trace","_to_math_trace","operations","_get_operations","triggers","_get_refs","_replace_refs","_parse_args","exc","_math_exception","_from_math_trace","_add_trigger","_compute","splitter","tmp","_trim","dell","delr","cell_value","op","_split_by","arg","temp_value","ex","_math_trace","depend","row_editors","col_settings","editFormat","editMath","liveValidation","_bind_live_validation","that","parser","editParse","_last_editor_scroll","_spans_pull","getSpan","_spans_areas","editCell","editRow","eachColumn","editColumn","_checkCellMerge","_correct_after_focus_y","_ignore_after_focus_scroll","_correct_after_focus_x","_update_editor_y_pos","_clear_hidden_state","_hideInitialColumns","_hidden_split","_getInitialSpans","$colspan","moveColumn","start_index","_refresh_columns","_init_horder","horder","hhash","$groupSpan","hindex","_fixColspansHidden","mod","elName","spanSource","spanSize","showColumn","showColumnBatch","_getVisibleSelection","areaselect","_subViewStorage","openSub","closeSub","_checkDragTopSplit","startId","frozen","getHeaderNode","row_index","hind","nodes","minRow","colindex","nodeIndex","dragColumn_setter","_relative_column_drag","_limit_column_drag","_column_dnd_temp_block","end_index","_dragTarget","_drag_column_last","_clear_invalid_css","addCellCss","newmark","removeCellCss","getData","SLines","Sparklines","getTemplate","customConfig","slConstructor","_template","draw","sparklines","joinAttributes","SVG","xmlns","viewBox","styleMap","lineColor","_handlers","M","L","C","cp0","cp1","A","radius","angle0","angle1","cos","sin","PI","definePath","points","_linePoints","setOpacity","opacity","toRgb","_curvePoints","getPath","getSector","getCurve","getLine","p0","p1","getCircle","getRect","_SVG","Area","eventRadius","graph","styles","Line","renderer","getPoints","_getLinePoints","_applyColor","_drawItems","_drawEventItems","Bar","itemCss","negativeColor","_getOrigin","evPoints","_getEventPoints","evItems","webix_area","minValue","maxValue","unitX","barWidth","originY","yNum","unitY","Pie","_defColorsCursor","_defColors","_getColor","colorsCount","sectors","getAngles","r","x0","y0","_context","a1","a0","ratios","_getRatios","_getTotalValue","prevSum","totalValue","Spline","SplineArea","defaultsArea","linePoints","_getControlPoints","p2","linePath","areaPoints","itemPoints","xCorrection","_findIndex","arr","_getTableHeader","spans","headerArray","hcell","rightRestriction","bottomRestriction","rowItem","rowIndex","datarow","colIndex","spanStart","$inspan","skiprows","trim","TreeTableClick","TreeTablePaste","_unwrap_id","treetable","treecheckbox","$exportView","filterHTML","original","Canvas","_canvas_labels","_canvas_series","series","devicePixelRatio","_prepareCanvas","_canvas","canvas_id","G_vmlCanvasManager","init_","initElement","getCanvas","_webixDevicePixelRatio","_resizeCanvas","renderText","aria-hidden","renderTextAt","valign","clearCanvas","skipMap","areas","_getMapAreas","clearRect","toggleCanvas","_toggleCanvas","showCanvas","hideCanvas","_toHex","toHex","number","hexToDec","hex","rgb","rgbArr","lastIndexOf","hsvToRgb","hi","q","rgbToHsv","r0","g0","b0","min0","max0","HtmlMap","_map","_areas","addRect","userdata","_createMapArea","addPoly","shape","coords","extra_data","addSector","alpha0","alpha1","R","ky","querySelectorAll","_series","_legend_labels","preset","_definePreset","_switchSeries","ariaLabel","alpha","cant","borderColor","shadow","gradient","labelOffset","webix_chart_legend_item","legend","showSeries","hideSeries","canvases","yAxis","xAxis","removeAllSeries","_legendObj","bounds","_getChartData","_createCanvas","_drawLegend","_getChartBounds","_applyBounds","axis","axisConfig","newData","valuesHash","series_setter","addSeries","value_setter","xValue_setter","yValue_setter","alpha_setter","label_setter","lineColor_setter","borderColor_setter","pieInnerText_setter","gradient_setter","colormap","RAINBOW","_rainbow","color_setter","fill_setter","preset_setter","presets","legend_setter","_converToTemplate","line_setter","padding_setter","xAxis_setter","templates","_configXAxis","yAxis_setter","bg","_configYAxis","_drawScales","point0","point1","cellWidth","_drawYAxis","_drawXAxis","unitPos","x1","labelY","_drawXAxisLabel","_drawXAxisLine","_drawLine","scaleParam","y1","lineX","_calculateScale","_logScaleCalc","_setYAxisTitle","stepHeight","pow","fixNum","yi","power","_log10","corr","_isIE","_calculateLogScale","nmin","nmax","logMin","logMax","calculStep","stepVal","absNmin","powerStart","nminVal","_getLimits","orientation","maxI","minI","LN10","y2","x2","strokeStyle","lineWidth","beginPath","moveTo","lineTo","stroke","_getRelativeValue","relValue","tip","_active_serie","_getActiveSeries","$hidden","legendContainer","legendHeight","legendItems","legendWidth","itemColor","_drawLegendText","disableColor","_drawLegendMarker","restore","markerType","fillStyle","disableLines","globalAlpha","_strokeChartItem","_path","lineCap","chartX0","chartY0","chartX1","chartY1","_getStackedLimits","$sum","_setBarGradient","hsv","color0","stops","createLinearGradient","_gradient","_getPositionByAngle","addColorStop","_addMapRect","sIndex","chart","$render_pie","_renderPie","coord","_getPieParameters","_getValues","_addShadow","angles","_showRadialGradient","arc","pieInnerText","_drawSectorLabel","_createLowerSector","a2","_drawSectorLine","pieHeight","shadows","_getGrayGradient","createRadialGradient","alpha2","in_width","corr_x","left_end","left_start","$render_pie3D","$render_donut","pieRadius","innerRadius","$render_bar","limits","valueFactor","relativeValues","startValue","xax","yax","totalHeight","seriesNumber","seriesIndex","barOffset","inner_gradient","_drawBar","_drawBarGradient","_drawBarBorder","_correctBarParams","axisStart","_setBarPoints","_setBorderStyles","gradParam","borderOffset","skipBottom","angle_corr","cosA","acos","x3","y3","x5","$render_line","res1","res2","_calculateLineParams","_getPointY","fixOverflow","_calcOverflowX","_mapStart","_drawItem","mapStart","alphas","areaPos","$render_barH","innerGradient","totalWidth","_drawHScales","_drawBarHBorder","_drawBarH","_drawBarHGradient","_setBarHPoints","skipLeft","sinA","asin","y5","_drawHXAxis","_drawHYAxis","yAxisX","yAxisStart","xi","_correctBarHParams","$render_stackedBar","xAxisY","total_height","negValue","$startYN","$startY","firstSector","_setStakedBarPoints","minY","$render_stackedBarH","total_width","$startX","$render_spline","sparam","_getSplineParameters","sY1","_getSplineYPoint","sY2","$render_area","mapRect","$render_stackedArea","yPos","setOffset","solveEquation","$render_radar","_renderRadarChart","ratioUnits","_drawRadarAxises","_drawRadarData","pos0","pos1","posArr","r1","startAlpha","value0","value1","unitArr","_fillRadarChart","_strokeRadarChart","disableItems","_drawRadarItemMarkers","configY","configX","_drawScaleSector","lineShape","_drawRadarScaleLabel","pos2","closePath","corr_y","$render_scatter","xValue","limitsY","limitsX","_getScatterParams","_drawScatterItem","_calcScatterUnit","_calculateScatterItemPosition","simple","plot","diamond","square","stick","$render_splineArea","sParams","_stockRenderHandler","animateDuration","resizeStockCanvases","filterStockData","startAnimation","_stockXAxisHandler","drawXAxis","_stockAnimationOffset","_stockAnimationStart","requestAnimationFrame","_stockAnimateHandler","applyStockOffset","timestamp","setCanvasOffset","canvas","skipRight","setLabelsOffset","isAxisTitle","isScroll","eachStockCanvas","setHtmlMapSizes","dynamic","dynamic_setter","monthSelect","weekHeader","weekNumber","skipEmptyWeeks","calendarHeader","calendarWeekHeader","events","minuteStep","dayTemplate","dayTemplate_setter","calendarHeader_setter","calendarWeekHeader_setter","calendarTime_setter","_calendarTime","date_setter","_string_to_date","maxDate_setter","minDate_setter","minTime_setter","maxTime_setter","_ariaFocus","relatedTarget","_locate_day","_locate_date","_special_dates","_selected_date_part","_selected_date","_zoom_in","_fixed","cellHeight","_getDateBoundaries","_rows","_zoom_logic","_set_date_bounds","month","year","days","_month","_start","_getColumnConfigSizes","_columnsHeight","_columnsWidth","containerWidth","containerHeight","_icons","columnsNumber","rowsNumber","icons_setter","_icons2","webix_cal_icon_today","webix_cal_icon_clear","_zoom_size","_current_time","_week_template","_body_template","_timepicker_template","_icons_template","_changeZoomLevel","calendarTime","tpl","range_date","widths","week_template","day_index","blockDates_setter","_day_css","_checkDate","minDate","maxDate","alabel","_changeDate","notset","_changeStep","_changeDateInternal","_update_zoom_level","showCalendar","-2","_isBlocked","isBlocked","minHour","minTime","maxHour","maxTime","minMinute","maxMinute","blockTime","_setContent","_findActive","newdate","-1","selectDate","1","minYear","maxYear","blocked","_getTitle","_getContent","2","_zoom_start_date","setFullYear","_correctBlockedTime","sections","zlogic","_reserve_box_height","_reserve_box_width","timeColNum","enLocale","_timeHeaderTemplate","_getCalSizesString","_timeButtonsTemplate","w2","oldzoom","_mode_selected","_selectDate","webix_cal_prev_button","webix_cal_next_button","webix_cal_day_disabled","webix_cal_outside","webix_cal_day","webix_cal_time","webix_range_time_start","_time_mode","webix_range_time_end","webix_cal_done","webix_cal_month_name","webix_cal_block","blockedDate","blockDates","outOfRange","nameWidth","on_render","on_edit","webix_property_check","registerType","elements_setter","_idToLine","alter_type","_data_width","_clear","_props_dataset","els","palette","minLightness","maxLightness","pal","_selectBox","_getSelectBox","_initPalette","numToHex","rgbToHex","hue2rgb","colors","colorRows","colorStep","lightStep","colorRange","colCount","gray","renderGrayBar","lt","hslToRgb","renderRow","rowHtml","itemTpl","firstRow","_rsDown","_rsUp","_getResizeDir","_rs_started","_resizer_dir","_resizer_dim","marginRight","marginBottom","_getResizerCells","_rsLimit","_rsStart","posParent","_resizeStick","_rsEnd","_rsResizeHandler","cDiff","limitSizes","totalSize","_rsGetDiffCellSizes","_rsGetLimitCellSizes","_resizerStick","_rsGetCellSizes","cell_size","size1","size2","styleDim","getActiveId","_back_queue","_ask_render","cell_id","view_id","_render_hash","_render_queue","_render_activation","subcell","cells_setter","_getDirection","vx","animation_options","getTabbar","_next_cell","callback_original","fitBiggest","other","back","viewId","_default_height","_autowidth_submenu","_mouse_move_menu","_menu_was_activated","openAction","_child_menu_active","getTopMenu","submenu","_hide_on_item_click","_hidden_items","texts","isSubmenu","webix_disabled","subsign","templateSeparator","templateSpacer","getMenu","subid","_get_submenu","menu","getMenuItem","_create_sub_menu","_open_sub_menu","subMenuPos","disableItem","enableItem","_set_item_hidden","hideItem","_show_on_mouse_out","listConfig","submenuConfig","parentData","_dummy_cell_interface","ContextHelper","attachTo","_show_at_ui","_show_at_node","setContext","_show_at","master_setter","topOffset","bottomOffset","tabMinWidth","tabMoreWidth","_getTabbarSizes","tabs","_tabs","limitWidth","tabbarPopup","popupConfig","popupTemplate","moreTemplate_setter","popupTemplate_setter","moreTemplate","leafWidth","resultHTML","verticalOffset","selectedTab","lastTab","_getTabHTML","_tabTemplate","calcHeight","segmented","getMultiview","_init_tabview_handlers","tabbar","mview","_body_view","_last_body_size","_inputPadding","lw","_invalidMessage","aria-relevant","fieldset","_moved","_inRight","_inLeft","_setLayout","_updateAndResize","_refresh","_getButtons","dbllist","_getButton","deselectAll","deselectOne","selectOne","dbllist_button","_update_list","_getList","on","onBeforeDrop","onItemDblClick","labelLeft","labelBottomLeft","labelBottomRight","_tagname","_attribute","_get_html_value","tagname","_get_value","_set_html_value","_set_value","selectedIndex","firstElementChild","_default_values","_copy_inner_content","_parse_inputs","cant_clear","google","script","_waitMap","getMap","waitMap","_getCallBack","_initMap","maps","libraries","onload","Map","LatLng","mapTypeId","MapTypeId","mapType","center_setter","setCenter","mapType_setter","setMapTypeId","zoom_setter","setZoom","layerType_setter","_layerApi","drawData","layerType","trigger","$marker","_getItemConfig","setMap","lat","lng","Marker","addListener","getDraggable","_onDrag","getPosition","heatmap","heatmapConfig_setter","_heatmap","hdata","_getConfig","heatmapConfig","visualization","HeatmapLayer","getHeatmap","_pull","DataProcessor","masterId","autoupdate","updateFromResponse","operationName","trackMove","_ignore","_updates","_onStoreUpdated","_onDataMove","off","_copy_data","_save_inner","_invalid","_check_unique","targetid","webix_move_index","webix_move_id","webix_move_parent","one","_sendData","marked","to_send","tosave","_in_progress","precise_url","_updatesData","_send_callback","_processResult","attachProgress","_innerProcessResult","getItemState","undoOnError","setItemState","_get_stack_index","timers","jsonp","timer","vals","markup","namespace","attribute","dataTag","_dash","_after_dash","_parse_int","_parse_bool","_view_has_method","_get_core_els","_sub_markup","_initComponent","_full_prefix","_full_prefix_top","_get_html_tops","tags","_get_name","childs","is_layout","subs","has_tags","allow_sub_tags","_handle_data","_get_config_html","confignode","_tag_to_json","_attrs_to_json","_content","_empty","_markup_names","scopeName","usercall","modality","_webix_msg_cfg","modal_key","keyboard","cover","onkeydown","_boxStructure","ok","_createBox","modalbox","alertPopup","confirmPopup","boxPopup","box_params","confirm","seed","hideAll","get_inspector_config","create_inspector","debug_inspect","onaftereditstop","show_inspector","winx","winy","props","infi","log_level","onBeforeShow","lastTarget","onShow","_layout","_initLayout","_fix_after_view_add","layoutProp","layoutConfig","carousel","_setScroll","getLayout","_nextCell","_size","showNext","showPrev","getActiveIndex","layoutSizes","selfSizes","changed","yc","xc","activeCell","setActive","percent","removeIcon","webix_remove_upload","uploader","files","UploadDriver","flash","render_config","swfobject","swfId","_upload_area","embedSWF","uploaderId","ID","enableLogs","paramName","multiple","wmode","getFlashPlayerVersion","_upload_timer_click","fileDialog","_stop_file","$applyFlash","getSwfObject","getObjectById","showDialog","_last_assigned_upload_callback","_get_active_url","formData","upload","complete","_upload_complete","$beforeAddFileToQueue","_format_size","sizetext","$addFileToQueue","file_struct","autosend","stopUpload","uploadStop","$onUploadComplete","$onUploadSuccess","$onUploadFail","html5","input_config","accept","directory","webkitdirectory","mozdirectory","_drop","_add_files","_directoryEntry","isDirectory","_directoryDrop","isFile","addFile","createReader","readEntries","entries","dataTransfer","webkitGetAsEntry","_last_file_context","append","inputName","webkitRelativePath","$updateProgress","loaded","_file_complete","_complete","webix_hidden_upload","link_setter","urlData","subline","addDropZone","hover_text","extra_css","fullcss","isUploaded","addMeta","new_orientation","matchMedia","fullScreen","iphone","iOS7","iphone_safari","iphone5","screen","fix","dmod","outerWidth","outerHeight","onrotate","history","track","_init_state","_aHandler","_aViewId","_ignored","_set_state","new_url","pushState","_handle_id","title_setter","_get_slider_handle","_sliderPadding","_sliderHandleWidth","_sliderBorder","part","_set_value_now","_on_mouse_down_start","_handle_move_keyboard","_activeIndex","_mouse_down_process","_start_value","_start_handle_dnd","_get_value_from_event","_handle_drag_events","_handle_move_process","_handle_move_stop","touchContext","_get_value_from_pos","offline","cache","_is_offline","_is_online","mycallback","getCache","setCache","_data_name","clearCache","ActiveContent","activeContent","_init_active_content_list","_active_holders","_active_holders_item","_active_holders_values","_active_references","_bind_active_content","earlyInit","_destructActiveContent","_locate_active_content_by_id","masterUI","button_id","_get_active_node","_setActiveContentView","$masterId","_set_new_active_value","outerHTML","XMLSerializer","serializeToString","$activeEl","ProgressBar","_progress","showProgress","hideProgress","incss","aria-valuemin","aria-valuemax","_progress_delay","_progressTimer","clearInterval","setInterval","_init_video","autobuffer","poster","autoplay","getVideo","NonGPL","position_setter","prevPosition","_desired_sizes","_state","_isAnimationSupported","beforeShow","getCsvData","getExportScheme","h_count","f_count","isTable","rawValues","flatTree","flatKey","fillMode","noExport","_export_mode","getExportData","htmlFilter","isTree","treeline","plainOutput","footers","getColumnsWidths","wscols","wch","excelDate","getSpans","yCorrection","sc","sr","getExcelData","ws","cell_ref","XLSX","utils","encode_cell","SSF","encode_range","str2array","buf","ArrayBuffer","Uint8Array","charCodeAt","getPdfData","pdfjs","Document","font","_export_font","threshold","colWidths","tableOps","lineHeight","headerRows","headerOps","borderRightColor","borderBottomColor","footerOps","pageNumber","pageCount","docHeaderOps","hd","docHeaderImage","docImageOps","buffer","img","Image","pdf","toPNG","html2canvas","msToBlob","toDataURL","toExcel","wb","SheetNames","Sheets","xls","write","bookType","bookSST","blob","Blob","toCSV","toPDF","fontName","TTFFont","_button","_add_data","editField","onAfterRender","_getselection","webix_richtext_editor","editorToolbar","rangeCount","getRangeAt","queryCommandState","_execCommandOnElement","commandName","isCollapsed","focusNode","textContent","focusEl","focustext","anchorOffset","wordBegining","wordEnd","startWord","endWord","setStart","setEnd","removeAllRanges","addRange","execCommand","editableElement"],"mappings":"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"}